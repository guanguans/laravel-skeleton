var ww=Object.defineProperty;var Dw=(n,e,t)=>e in n?ww(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var R=(n,e,t)=>Dw(n,typeof e!="symbol"?e+"":e,t);import{_ as _r,a as I1,b as Aw,c as Cw,d as _w,A as M1,e as B1,u as Sw,f as Ew,g as Os,h as Wp,i as Gp}from"./useResponsiveResizable-BO8UC-GV.js";import{d as V,u as Ba,t as jo,c as qo,a as zn,b as j,o as S,w as E,r as ie,e as v,P as Tt,f as Vo,g as ce,h as X,i as He,j as mi,k as Ow,l as _,m as Lt,n as Ie,p as $1,q as cd,s as N1,v as L1,x as j1,E as Tw,y as Fw,z as Pw,A as Rw,B as Iw,C as Mw,V as Bw,D as q1,F as fd,G as $w,H as Fe,I as De,J as Ve,K as be,L as $a,M as hd,N as V1,O as Nw,Q as Lw,T as jw,R as dd,S as pd,_ as qw,U as Vw,W as N,X as zw,Y as Z,Z as de,$ as W,a0 as Uw,a1 as Na,a2 as Kp,a3 as Hw,a4 as md,a5 as Ww,a6 as Le,a7 as Br,a8 as Un,a9 as Gw,aa as z1,ab as sn,ac as _c,ad as U1,ae as Kw,af as Jw,ag as H1,ah as gd,ai as W1,aj as uo,ak as Sc,al as Ec,am as Yw,an as Qw,ao as Xw,ap as Zw,aq as eD,ar as fs,as as tD,at as nD,au as rD,av as G1,aw as iD,ax as sD,ay as oD,az as lD,aA as uD,aB as aD,aC as cD}from"./app-D3FAS97P.js";import{i as fD,R as Ge,u as hs,D as hD,_ as zo,a as Uo,b as Ho,c as Wo,d as Sr,e as K1,f as J1,g as Y1,h as Q1,j as X1,k as dD,C as pD,l as mD,m as Go}from"./CopyButton.vue_vue_type_script_setup_true_lang-DV6Po-VK.js";import{_ as Gt}from"./index-DcuoLOFL.js";/* empty css            */const yl={DELETION_CONFIRMATION_TIMEOUT:1200,SYNC_DEBOUNCE_DELAY:300},[Z1,gD]=qo("CollapsibleRoot");var bD=V({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:open"],setup(n,{expose:e,emit:t}){const r=n,s=Ba(r,"open",t,{defaultValue:r.defaultOpen,passive:r.open===void 0}),{disabled:o,unmountOnHide:l}=jo(r);return gD({contentId:"",disabled:o,open:s,unmountOnHide:l,onOpenToggle:()=>{o.value||(s.value=!s.value)}}),e({open:s}),zn(),(u,a)=>(S(),j(v(Tt),{as:u.as,"as-child":r.asChild,"data-state":v(s)?"open":"closed","data-disabled":v(o)?"":void 0},{default:E(()=>[ie(u.$slots,"default",{open:v(s)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),yD=bD,xD=V({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["contentFound"],setup(n,{emit:e}){const t=n,r=e,i=Z1();i.contentId||(i.contentId=Vo(void 0,"reka-collapsible-content"));const s=ce(),{forwardRef:o,currentElement:l}=zn(),u=ce(0),a=ce(0),c=X(()=>i.open.value),f=ce(c.value),h=ce();He(()=>{var p;return[c.value,(p=s.value)==null?void 0:p.present]},async()=>{await cd();const p=l.value;if(!p)return;h.value=h.value||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const m=p.getBoundingClientRect();a.value=m.height,u.value=m.width,f.value||(p.style.transitionDuration=h.value.transitionDuration,p.style.animationName=h.value.animationName)},{immediate:!0});const d=X(()=>f.value&&i.open.value);return mi(()=>{requestAnimationFrame(()=>{f.value=!1})}),Ow(l,"beforematch",p=>{requestAnimationFrame(()=>{i.onOpenToggle(),r("contentFound")})}),(p,m)=>(S(),j(v($1),{ref_key:"presentRef",ref:s,present:p.forceMount||v(i).open.value,"force-mount":!0},{default:E(({present:g})=>{var b;return[_(v(Tt),Lt(p.$attrs,{id:v(i).contentId,ref:v(o),"as-child":t.asChild,as:p.as,hidden:g?void 0:v(i).unmountOnHide.value?"":"until-found","data-state":d.value?void 0:v(i).open.value?"open":"closed","data-disabled":(b=v(i).disabled)!=null&&b.value?"":void 0,style:{"--reka-collapsible-content-height":`${a.value}px`,"--reka-collapsible-content-width":`${u.value}px`}}),{default:E(()=>[!v(i).unmountOnHide.value||g?ie(p.$slots,"default",{key:0}):Ie("v-if",!0)]),_:2},1040,["id","as-child","as","hidden","data-state","data-disabled","style"])]}),_:3},8,["present"]))}}),vD=xD,kD=V({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n;zn();const t=Z1();return(r,i)=>{var s,o;return S(),j(v(Tt),{type:r.as==="button"?"button":void 0,as:r.as,"as-child":e.asChild,"aria-controls":v(t).contentId,"aria-expanded":v(t).open.value,"data-state":v(t).open.value?"open":"closed","data-disabled":(s=v(t).disabled)!=null&&s.value?"":void 0,disabled:(o=v(t).disabled)==null?void 0:o.value,onClick:v(t).onOpenToggle},{default:E(()=>[ie(r.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"])}}}),wD=kD,DD=V({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,t=fD(),{forwardRef:r,currentElement:i}=zn();return t.contentId||(t.contentId=Vo(void 0,"reka-dialog-content")),mi(()=>{t.triggerElement.value=i.value}),(s,o)=>(S(),j(v(Tt),Lt(e,{ref:v(r),type:s.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":v(t).open.value||!1,"aria-controls":v(t).open.value?v(t).contentId:void 0,"data-state":v(t).open.value?"open":"closed",onClick:v(t).onOpenToggle}),{default:E(()=>[ie(s.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),AD=DD;const[CD,_D]=qo("RovingFocusGroup");var SD=V({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(n,{expose:e,emit:t}){const r=n,i=t,{loop:s,orientation:o,dir:l}=jo(r),u=N1(l),a=Ba(r,"currentTabStopId",i,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),c=ce(!1),f=ce(!1),h=ce(0),{getItems:d,CollectionSlot:p}=L1({isProvider:!0});function m(b){const y=!f.value;if(b.currentTarget&&b.target===b.currentTarget&&y&&!c.value){const x=new CustomEvent(Tw,Fw);if(b.currentTarget.dispatchEvent(x),i("entryFocus",x),!x.defaultPrevented){const w=d().map(O=>O.ref).filter(O=>O.dataset.disabled!==""),D=w.find(O=>O.getAttribute("data-active")===""),A=w.find(O=>O.getAttribute("data-highlighted")===""),k=w.find(O=>O.id===a.value),C=[D,A,k,...w].filter(Boolean);j1(C,r.preventScrollOnEntryFocus)}}f.value=!1}function g(){setTimeout(()=>{f.value=!1},1)}return e({getItems:d}),_D({loop:s,dir:u,orientation:o,currentTabStopId:a,onItemFocus:b=>{a.value=b},onItemShiftTab:()=>{c.value=!0},onFocusableItemAdd:()=>{h.value++},onFocusableItemRemove:()=>{h.value--}}),(b,y)=>(S(),j(v(p),null,{default:E(()=>[_(v(Tt),{tabindex:c.value||h.value===0?-1:0,"data-orientation":v(o),as:b.as,"as-child":b.asChild,dir:v(u),style:{outline:"none"},onMousedown:y[0]||(y[0]=x=>f.value=!0),onMouseup:g,onFocus:m,onBlur:y[1]||(y[1]=x=>c.value=!1)},{default:E(()=>[ie(b.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),ED=SD,OD=V({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=n,t=CD(),r=Vo(),i=X(()=>e.tabStopId||r),s=X(()=>t.currentTabStopId.value===i.value),{getItems:o,CollectionItem:l}=L1();mi(()=>{e.focusable&&t.onFocusableItemAdd()}),Pw(()=>{e.focusable&&t.onFocusableItemRemove()});function u(a){if(a.key==="Tab"&&a.shiftKey){t.onItemShiftTab();return}if(a.target!==a.currentTarget)return;const c=Rw(a,t.orientation.value,t.dir.value);if(c!==void 0){if(a.metaKey||a.ctrlKey||a.altKey||!e.allowShiftKey&&a.shiftKey)return;a.preventDefault();let f=[...o().map(h=>h.ref).filter(h=>h.dataset.disabled!=="")];if(c==="last")f.reverse();else if(c==="prev"||c==="next"){c==="prev"&&f.reverse();const h=f.indexOf(a.currentTarget);f=t.loop.value?Iw(f,h+1):f.slice(h+1)}cd(()=>j1(f))}}return(a,c)=>(S(),j(v(l),null,{default:E(()=>[_(v(Tt),{tabindex:s.value?0:-1,"data-orientation":v(t).orientation.value,"data-active":a.active?"":void 0,"data-disabled":a.focusable?void 0:"",as:a.as,"as-child":a.asChild,onMousedown:c[0]||(c[0]=f=>{a.focusable?v(t).onItemFocus(i.value):f.preventDefault()}),onFocus:c[1]||(c[1]=f=>v(t).onItemFocus(i.value)),onKeydown:u},{default:E(()=>[ie(a.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),TD=OD;const[FD,PD]=qo("SelectGroup");var RD=V({__name:"SelectGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,t=Vo(void 0,"reka-select-group");return PD({id:t}),(r,i)=>(S(),j(v(Tt),Lt({role:"group"},e,{"aria-labelledby":v(t)}),{default:E(()=>[ie(r.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),ID=RD,MD=V({__name:"SelectLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const e=n,t=FD({id:""});return(r,i)=>(S(),j(v(Tt),Lt(e,{id:v(t).id}),{default:E(()=>[ie(r.$slots,"default")]),_:3},16,["id"]))}}),BD=MD;const[$D,ND]=qo("SwitchRoot");var LD=V({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,{disabled:i}=jo(t),s=Ba(t,"modelValue",r,{defaultValue:t.defaultValue,passive:t.modelValue===void 0});function o(){i.value||(s.value=!s.value)}const{forwardRef:l,currentElement:u}=zn(),a=Mw(u),c=X(()=>{var f;return t.id&&u.value?(f=document.querySelector(`[for="${t.id}"]`))==null?void 0:f.innerText:void 0});return ND({modelValue:s,toggleCheck:o,disabled:i}),(f,h)=>(S(),j(v(Tt),Lt(f.$attrs,{id:f.id,ref:v(l),role:"switch",type:f.as==="button"?"button":void 0,value:f.value,"aria-label":f.$attrs["aria-label"]||c.value,"aria-checked":v(s),"aria-required":f.required,"data-state":v(s)?"checked":"unchecked","data-disabled":v(i)?"":void 0,"as-child":f.asChild,as:f.as,disabled:v(i),onClick:o,onKeydown:q1(fd(o,["prevent"]),["enter"])}),{default:E(()=>[ie(f.$slots,"default",{modelValue:v(s)}),v(a)&&f.name?(S(),j(v(Bw),{key:0,type:"checkbox",name:f.name,disabled:v(i),required:f.required,value:f.value,checked:!!v(s)},null,8,["name","disabled","required","value","checked"])):Ie("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),jD=LD,qD=V({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=$D();return zn(),(t,r)=>{var i;return S(),j(v(Tt),{"data-state":(i=v(e).modelValue)!=null&&i.value?"checked":"unchecked","data-disabled":v(e).disabled.value?"":void 0,"as-child":t.asChild,as:t.as},{default:E(()=>[ie(t.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),VD=qD;const[bd,zD]=qo("TabsRoot");var UD=V({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,{orientation:i,unmountOnHide:s,dir:o}=jo(t),l=N1(o);zn();const u=Ba(t,"modelValue",r,{defaultValue:t.defaultValue,passive:t.modelValue===void 0}),a=ce();return zD({modelValue:u,changeModelValue:c=>{u.value=c},orientation:i,dir:l,unmountOnHide:s,activationMode:t.activationMode,baseId:Vo(void 0,"reka-tabs"),tabsList:a}),(c,f)=>(S(),j(v(Tt),{dir:v(l),"data-orientation":v(i),"as-child":c.asChild,as:c.as},{default:E(()=>[ie(c.$slots,"default",{modelValue:v(u)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),HD=UD;function eb(n,e){return`${n}-trigger-${e}`}function tb(n,e){return`${n}-content-${e}`}var WD=V({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,{forwardRef:t}=zn(),r=bd(),i=X(()=>eb(r.baseId,e.value)),s=X(()=>tb(r.baseId,e.value)),o=X(()=>e.value===r.modelValue.value),l=ce(o.value);return mi(()=>{requestAnimationFrame(()=>{l.value=!1})}),(u,a)=>(S(),j(v($1),{present:u.forceMount||o.value,"force-mount":""},{default:E(({present:c})=>[_(v(Tt),{id:s.value,ref:v(t),"as-child":u.asChild,as:u.as,role:"tabpanel","data-state":o.value?"active":"inactive","data-orientation":v(r).orientation.value,"aria-labelledby":i.value,hidden:!c,tabindex:"0",style:$w({animationDuration:l.value?"0s":void 0})},{default:E(()=>[!v(r).unmountOnHide.value||c?ie(u.$slots,"default",{key:0}):Ie("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),GD=WD,KD=V({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const e=n,{loop:t}=jo(e),{forwardRef:r,currentElement:i}=zn(),s=bd();return s.tabsList=i,(o,l)=>(S(),j(v(ED),{"as-child":"",orientation:v(s).orientation.value,dir:v(s).dir.value,loop:v(t)},{default:E(()=>[_(v(Tt),{ref:v(r),role:"tablist","as-child":o.asChild,as:o.as,"aria-orientation":v(s).orientation.value},{default:E(()=>[ie(o.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),JD=KD,YD=V({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const e=n,{forwardRef:t}=zn(),r=bd(),i=X(()=>eb(r.baseId,e.value)),s=X(()=>tb(r.baseId,e.value)),o=X(()=>e.value===r.modelValue.value);return(l,u)=>(S(),j(v(TD),{"as-child":"",focusable:!l.disabled,active:o.value},{default:E(()=>[_(v(Tt),{id:i.value,ref:v(t),role:"tab",type:l.as==="button"?"button":void 0,as:l.as,"as-child":l.asChild,"aria-selected":o.value?"true":"false","aria-controls":s.value,"data-state":o.value?"active":"inactive",disabled:l.disabled,"data-disabled":l.disabled?"":void 0,"data-orientation":v(r).orientation.value,onMousedown:u[0]||(u[0]=fd(a=>{!l.disabled&&a.ctrlKey===!1?v(r).changeModelValue(l.value):a.preventDefault()},["left"])),onKeydown:u[1]||(u[1]=q1(a=>v(r).changeModelValue(l.value),["enter","space"])),onFocus:u[2]||(u[2]=()=>{const a=v(r).activationMode!=="manual";!o.value&&!l.disabled&&a&&v(r).changeModelValue(l.value)})},{default:E(()=>[ie(l.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),QD=YD;const XD=V({__name:"AppSidebarGroupLabel",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n;return(t,r)=>(S(),j(v(Tt),{"data-sidebar":"group-label",as:n.as,"as-child":n.asChild,class:Fe(v(De)("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium transition-[margin,opa] duration-200 ease-linear outline-none focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e.class))},{default:E(()=>[ie(t.$slots,"default")]),_:3},8,["as","as-child","class"]))}});/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=Ve("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Ve("ChevronsLeftRightIcon",[["path",{d:"m9 7-5 5 5 5",key:"j5w590"}],["path",{d:"m15 7 5 5-5 5",key:"1bl6da"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=Ve("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=Ve("CircleSlash2Icon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Ve("CodeXmlIcon",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=Ve("CornerDownLeftIcon",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=Ve("EyeClosedIcon",[["path",{d:"m15 18-.722-3.25",key:"1j64jw"}],["path",{d:"M2 8a10.645 10.645 0 0 0 20 0",key:"1e7gxb"}],["path",{d:"m20 15-1.726-2.05",key:"1cnuld"}],["path",{d:"m4 15 1.726-2.05",key:"1dsqqd"}],["path",{d:"m9 18 .722-3.25",key:"ypw2yx"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Ve("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Ve("FolderIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=Ve("LightbulbIcon",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=Ve("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Ve("LockKeyholeOpenIcon",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}],["path",{d:"M7 10V7a5 5 0 0 1 9.33-2.5",key:"car5b7"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=Ve("LockOpenIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=Ve("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=Ve("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=Ve("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=Ve("RefreshCwOffIcon",[["path",{d:"M21 8L18.74 5.74A9.75 9.75 0 0 0 12 3C11 3 10.03 3.16 9.13 3.47",key:"1krf6h"}],["path",{d:"M8 16H3v5",key:"1cv678"}],["path",{d:"M3 12C3 9.51 4 7.26 5.64 5.64",key:"ruvoct"}],["path",{d:"m3 16 2.26 2.26A9.75 9.75 0 0 0 12 21c2.49 0 4.74-1 6.36-2.64",key:"19q130"}],["path",{d:"M21 12c0 1-.16 1.97-.47 2.87",key:"4w8emr"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M22 22 2 2",key:"1r8tn9"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=Ve("SkipForwardIcon",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=Ve("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=Ve("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=Ve("UserRoundIcon",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=Ve("WandSparklesIcon",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var uu=(n=>(n.Uuid="UUID",n.Email="Email",n.String="String",n))(uu||{}),Qe=(n=>(n.INFORMATION="Information",n.SUCCESS="Success",n.SERVER_ERROR="Server Error",n.CLIENT_ERROR="Client Error",n.REDIRECT="Redirect",n.EMPTY="No request yet",n.PENDING="Pending",n.OTHER="Other",n))(Qe||{});function yA(n){return n.key.trim()!==""}function rb(n,e,t){const r=new URL(`${n}/${e}`);return t.forEach(i=>{yA(i)&&r.searchParams.append(i.key,i.value)}),r.toString()}function xA(n,e){const t=vA(n.method),r=kA(n,e),i=wA(n),s=DA(n.authorization),o=AA(n);return{command:["curl"].concat(t?[t]:[]).concat([r]).concat(i).concat(s?[s]:[]).concat(o).join(` \\
  `),hasSpecialAuth:RA(n.authorization)}}function vA(n){const e=n.toUpperCase();return e==="GET"?null:`-X ${e}`}function kA(n,e){return`"${rb(e,n.endpoint,n.queryParameters)}"`}function wA(n){const e=CA(n),t=e.map(r=>`-H "${r.key}: ${r.value}"`);return n.payloadType===Ge.JSON&&(e.some(i=>i.key.toLowerCase()==="content-type")||t.push('-H "Content-Type: application/json"')),t}function DA(n){const e=SA(n);return e?`-H "${e}"`:null}function AA(n){const e=OA(n);return e===null?[]:e}function CA(n){return n.headers.filter(_A)}function _A(n){return n.key.trim()!==""&&n.value!==null&&n.value!==""}function SA(n){if(!n)return null;switch(n.type){case be.Bearer:return`Authorization: Bearer ${n.value}`;case be.Basic:return EA(n.value);case be.None:case be.CurrentUser:case be.Impersonate:return null;default:return null}}function EA(n){return`Authorization: Basic ${btoa(`${n.username}:${n.password}`)}`}function OA(n){const t=n.body[n.method];if(t===void 0)return null;const r=t[n.payloadType];return r===void 0?null:TA(r,n.payloadType)}function TA(n,e){switch(e){case Ge.JSON:return typeof n=="string"?[n]:null;case Ge.FORM_DATA:return FA(n);case Ge.PLAIN_TEXT:return typeof n=="string"?[n]:null;case Ge.EMPTY:return null;default:return null}}function FA(n){return n instanceof FormData?PA(n):null}function PA(n){return Array.from(n.entries()).map(([e,t])=>t instanceof File?`${e}=@${t.name}`:`${e}=${t}`)}function RA(n){return n.type===be.CurrentUser?!0:n.type===be.Impersonate}function Qp(n){return Object.keys(n.schema.shape.properties??{}).length>0?Ge.JSON:Ge.EMPTY}function IA(n,e,t){return{durationInMs:e,isProcessing:!1,request:ib(n),response:t}}function MA(n,e){return{durationInMs:0,isProcessing:!1,request:ib(n),error:e}}const ib=function(n){return{method:n.method,endpoint:n.endpoint,headers:n.headers,body:null,queryParameters:n.queryParameters,payloadType:n.payloadType}};function BA(n){const e=performance.now();let r=window.setInterval(()=>{const i=Math.floor(performance.now()-e);n(i)},86);return{stop:()=>(r&&(clearInterval(r),r=null),Math.floor(performance.now()-e))}}const $A=$a("_requestBuilder",()=>{const n=hd(),e=hs(),t=ce(null),r=X(()=>t.value!==null),i=(g,b)=>{const y=b.supportedRoutes.find(x=>x.method.toUpperCase()===g);if(!y){b.payloadType=Ge.EMPTY,b.schema={shape:{"x-name":"root","x-required":!1},extractionErrors:null};return}b.payloadType=Qp(y),b.schema=y.schema},s=function(){return t.value!==null?t.value.authorization:n.preferences.defaultAuthorizationType===be.CurrentUser?{type:be.CurrentUser}:n.preferences.defaultAuthorizationType===be.Impersonate?{type:be.Impersonate,value:1}:n.preferences.defaultAuthorizationType===be.Bearer?{type:be.Bearer,value:""}:n.preferences.defaultAuthorizationType===be.Basic?{type:be.Basic,value:{username:"",password:""}}:{type:be.None}},o=function(g){return n.preferences.defaultRequestBodyType===-1?Qp(g):n.preferences.defaultRequestBodyType};return{pendingRequestData:t,hasActiveRequest:r,initializeRequest:(g,b)=>{t.value={method:g.method,endpoint:g.endpoint,headers:[],body:{},payloadType:o(g),schema:g.schema,queryParameters:[],authorization:s(),supportedRoutes:b,routeDefinition:g,isProcessing:!1,wasExecuted:!1,durationInMs:0}},updateRequestMethod:g=>{if(!t.value)return;const b=g.toUpperCase();b!==t.value.method&&(t.value.method=b,i(b,t.value))},updateRequestEndpoint:g=>{t.value&&(t.value.endpoint=g)},updateRequestHeaders:g=>{t.value&&(t.value.headers=g)},updateRequestBody:g=>{t.value&&(t.value.body=g)},updateQueryParameters:g=>{t.value&&(t.value.queryParameters=g)},updateAuthorization:g=>{t.value&&(t.value.authorization=g)},resetRequest:()=>{t.value=null},getRequestUrl:g=>rb(e.apiUrl,g.endpoint,g.queryParameters)}}),sb=n=>{const e=new FormData;return Object.entries(n).forEach(([t,r])=>{Nf(e,t,r)}),e},Nf=(n,e,t)=>{if(Array.isArray(t)){t.forEach((r,i)=>{Nf(n,`${e}[${i}]`,r)});return}if(t instanceof Blob){n.append(e,t);return}if(t&&typeof t=="object"){(t instanceof FormData?t.entries():Object.entries(t)).forEach(([i,s])=>{Nf(n,`${e}[${i}]`,s)});return}n.append(e,t===null?"":String(t))},NA=n=>n>=100&&n<200?Qe.INFORMATION:n>=200&&n<300?Qe.SUCCESS:n>=300&&n<400?Qe.REDIRECT:n>=400&&n<500?Qe.CLIENT_ERROR:n>=500&&n<600?Qe.SERVER_ERROR:Qe.OTHER;function LA(){const n=hs(),e=ce(null),t=ce(!1),r=c=>{const f=n.apiUrl,h=c.endpoint.replace(/^\/+/,""),d=new URL(`${f}/${h}`);return c.queryParameters.filter(p=>p.key.trim()).forEach(p=>{d.searchParams.append(p.key,p.value)}),d.toString()},i=c=>({endpoint:r(c),method:c.method,headers:c.headers,authorization:c.authorization,body:s(c)}),s=c=>{const f=c.body[c.method]??null;return f?f[c.payloadType]??null:null},o=c=>{const f=c.headers,h=c.statusCode,d=c.headers.find(p=>p.key.toLowerCase()==="content-length");return{status:NA(h),statusCode:h,statusText:c.statusText,body:c.body,sizeInBytes:d?Number(d.value):c.body.length,headers:f,cookies:c.cookies.map(p=>({key:p.key,value:{raw:p.value.raw,decrypted:p.value.decrypted}})),timestamp:c.timestamp}},l=c=>new Promise((f,h)=>{var g;const d=n.appBasePath+"/api/relay",p=i(c),m=sb(p);Lw.post(d,m,{headers:{"Content-Type":"multipart/form-data"},transformResponse:b=>b,signal:(g=e.value)==null?void 0:g.signal}).then(b=>{const y=JSON.parse(b.data),x=o(y);f({response:x,duration:y.duration})}).catch(b=>{if(b.code==="ERR_CANCELED"){f(null);return}if(b.response){h({message:b.message,status:b.response.status,body:b.response.data});return}h({message:b.message})})});return{executeRequest:async c=>{if(t.value)throw new Error("Request already in progress");t.value=!0,e.value=new AbortController;try{const f=new Promise((h,d)=>setTimeout(()=>d(new Error("Request timeout")),Nw.TIMEOUT));return await Promise.race([l(c),f])}finally{t.value=!1,e.value=null}},cancelCurrentRequest:()=>{e.value&&e.value.abort()},buildRequestUrl:r,isExecuting:V1(t)}}const jA=$a("_requestExecutor",()=>{const n=La(),{executeRequest:e,cancelCurrentRequest:t}=LA(),r=ce(!1),i=ce(0),s=X(()=>l=>l!==null&&!l.isProcessing&&l.endpoint.trim()!=="");return{isProcessing:r,duration:i,canExecute:s,executeRequestWithTiming:async l=>{if(!s.value(l))return;let u=null;const a=()=>{u&&u.stop(),l.isProcessing=!1,l.wasExecuted=!0};try{l.isProcessing=!0,l.durationInMs=0,u=BA(h=>{l.isProcessing&&(l.durationInMs=h)});const c=await e(l);if(c===null){a(),l.durationInMs=0;return}const f=IA(l,c.duration,c.response);n.addLog(f)}catch(c){const f=MA(l,c);n.addLog(f),console.error("Request failed:",c)}finally{a()}},cancelCurrentRequest:t}}),La=$a("requestHistory",()=>{const n=hd(),e=ce([]),t=X(()=>n.preferences.maxHistoryLogs),r=X(()=>e.value),i=X(()=>e.value[e.value.length-1]??null),s=X(()=>e.value.length);return{logs:e,maxLogs:t,allLogs:r,lastLog:i,totalRequests:s,addLog:u=>{e.value.push(u),e.value.length>t.value&&(e.value=e.value.slice(-t.value))},clearLogs:()=>{e.value=[]}}}),ar=$a("request",()=>{const n=$A(),e=jA(),t=X(()=>n.hasActiveRequest),r=X(()=>n.pendingRequestData),i=X(()=>e.canExecute(n.pendingRequestData)),s=(o,l)=>{var u,a;o.endpoint===((u=r.value)==null?void 0:u.endpoint)&&o.method===((a=r.value)==null?void 0:a.method)||(e.cancelCurrentRequest(),n.initializeRequest(o,l))};return{isProcessing:X(()=>e.isProcessing),hasActiveRequest:t,pendingRequestData:r,canExecute:i,updateRequestMethod:n.updateRequestMethod,updateRequestEndpoint:n.updateRequestEndpoint,updateRequestHeaders:n.updateRequestHeaders,updateRequestBody:n.updateRequestBody,updateQueryParameters:n.updateQueryParameters,updateAuthorization:n.updateAuthorization,getRequestUrl:n.getRequestUrl,executeCurrentRequest:()=>{if(n.pendingRequestData)return e.executeRequestWithTiming(n.pendingRequestData)},cancelCurrentRequest:e.cancelCurrentRequest,initializeRequest:s}}),qA=V({__name:"AppSidebarInput",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),j(v(_r),{"data-sidebar":"input",class:Fe(v(De)("focus-visible:ring-sidebar-ring h-8 w-full bg-white shadow-none focus-visible:ring-2 dark:bg-zinc-950",e.class))},{default:E(()=>[ie(t.$slots,"default")]),_:3},8,["class"]))}}),VA=V({__name:"AppTooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(n){const e=n;return(t,r)=>(S(),j(v(jw),dd(pd(e)),{default:E(()=>[ie(t.$slots,"default")]),_:3},16))}}),Lf=V({__name:"AppTooltipWrapper",props:{value:{},delay:{default:300},as:{default:"button"},onClick:{type:Function,default:()=>{}}},setup(n){const e=n;return(t,r)=>(S(),j(v(VA),{"delay-duration":n.delay},{default:E(()=>[_(v(qw),null,{default:E(()=>[_(v(Vw),{as:n.as,onClick:n.onClick},{default:E(()=>[N("span",null,[ie(t.$slots,"default")])]),_:3},8,["as","onClick"]),_(v(zw),null,{default:E(()=>[Z(de(e.value),1)]),_:1})]),_:3})]),_:3},8,["delay-duration"]))}}),zA=V({__name:"AppSidebarMenuSub",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("ul",{"data-sidebar":"menu-badge",class:Fe(v(De)("border-sidebar-border ml-2.5 flex min-w-0 translate-x-px flex-col gap-1 border-l py-0.5 pl-0.5","group-data-[collapsible=icon]:hidden",e.class))},[ie(t.$slots,"default")],2))}}),UA=V({__name:"AppSidebarRail",props:{class:{}},setup(n){const e=n,{toggleSidebar:t}=Uw();return(r,i)=>(S(),W("button",{"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabindex:-1,title:"Toggle Sidebar",class:Fe(v(De)("hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:hover:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e.class)),onClick:i[0]||(i[0]=(...s)=>v(t)&&v(t)(...s))},[ie(r.$slots,"default")],2))}}),HA=V({__name:"AppDialogClose",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(t,r)=>(S(),j(v(hD),Lt({"data-slot":"dialog-close"},e),{default:E(()=>[ie(t.$slots,"default")]),_:3},16))}}),WA=V({__name:"AppDialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(t,r)=>(S(),j(v(AD),Lt({"data-slot":"dialog-trigger"},e),{default:E(()=>[ie(t.$slots,"default")]),_:3},16))}}),GA=n=>JSON.stringify(n,null,3),KA=n=>Object.entries(n).map(([e,t])=>`${e}=${t};`).join(`
`),Xp=(n,e)=>{switch(e){case Ge.JSON:return GA(n);case Ge.PLAIN_TEXT:return KA(n);case Ge.FORM_DATA:return sb(n);default:return null}},$i={EMPTY_FIELD_PROBABILITY:.3,MAX_ARRAY_ITEMS:5,MIN_ARRAY_ITEMS:1,NUMBER_RANGE:{min:1,max:9999},STRING_LENGTH:{minLength:5,maxLength:20}};function JA(n){return ja(n,!1)}function YA(n){return ja(n,!0)}function QA(n,e){if(!n.enum||n.enum.length===0)throw new Error("Enum values are required for enum type");return e?n.enum[0]:Na.helpers.arrayElement(n.enum)}function XA(n,e){switch(n.type){case"string":return r3(n,e);case"number":case"integer":return i3(n,e);case"boolean":return e?!1:Na.datatype.boolean();default:throw new Error(`Unsupported primitive type: ${n.type}`)}}function ZA(n,e){switch(n.type){case"array":return n3(n,e);case"object":return n.properties?ja(n,e):{};default:throw new Error(`Unsupported complex type: ${n.type}`)}}function ob(n,e=!1){return n.enum&&n.enum.length>0?QA(n,e):n.type&&typeof n.type=="string"&&["string","number","integer","boolean"].includes(n.type)?XA(n,e):n.type&&typeof n.type=="string"&&["array","object"].includes(n.type)?ZA(n,e):null}function e3(n,e,t){return Array.from({length:t},()=>ja(n,e))}function t3(n,e,t){return Array.from({length:t},()=>ob(n,e)).filter(i=>i!==null&&i.toString().length)}function n3(n,e){const{items:t}=n;if(t===void 0)return[];const r=e?$i.MIN_ARRAY_ITEMS:$i.MIN_ARRAY_ITEMS+Math.floor(Math.random()*$i.MAX_ARRAY_ITEMS);return t.properties!==void 0?e3(t,e,r):t3(t,e,r)}function ja(n,e=!1){const t={};if(n.properties)for(const r in n.properties){const i=n.properties[r];t[r]=ob(i,e)}return t}function r3(n,e){if(e)return"<placeholder>";if(!n["x-required"]&&Math.random()<$i.EMPTY_FIELD_PROBABILITY)return"";const t={...$i.STRING_LENGTH};n.minLength&&(t.minLength=n.minLength),n.maxLength&&(t.maxLength=n.maxLength);const r=lb(n,t);return r!==null?typeof r!="string"?r.toString():r:Na.string.alpha({length:{min:t.minLength,max:t.maxLength}})}function i3(n,e){if(e)return 0;const t={...$i.NUMBER_RANGE};n.minimum&&(t.min=n.minimum),n.maximum&&(t.max=n.maximum);const r=lb(n,t,!0);return r!==null&&typeof r=="number"?r:Na.number.int(t)}const Zp={uuid:"uuid",email:"email","date-time":"datetime",url:"url",date:"date",time:"time",uri:"url"};function lb(n,e={},t=!1){var r;if(n.format&&Zp[n.format]){const i=Zp[n.format];return((r=Kp.find(s=>s.id===i))==null?void 0:r.generate())??null}for(const i of Hw){if(t&&!i.isInteger||!i.pattern.test(n["x-name"]))continue;const s=Kp.find(o=>o.id===i.generatorId);if(s)return s.generate({...i.generatorConfig,...e})??null}return null}const ub=V({__name:"AppTabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(n,{emit:e}){const i=md(n,e);return(s,o)=>(S(),j(v(HD),Lt(v(i),{"unmount-on-hide":!1}),{default:E(()=>[ie(s.$slots,"default")]),_:3},16))}}),Jr=V({__name:"AppTabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,t=X(()=>{const{class:r,...i}=e;return i});return(r,i)=>(S(),j(v(GD),Lt({class:v(De)("mt-2 ring-offset-white focus-visible:outline-none",e.class)},t.value),{default:E(()=>[ie(r.$slots,"default")]),_:3},16,["class"]))}}),ab=V({__name:"AppTabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,t=X(()=>{const{class:r,...i}=e;return i});return(r,i)=>(S(),j(v(JD),Lt(t.value,{class:v(De)("text-subtle inline-flex items-center justify-center rounded-sm p-1",e.class)}),{default:E(()=>[ie(r.$slots,"default")]),_:3},16,["class"]))}}),s3={class:"truncate"},Yr=V({__name:"AppTabsTrigger",props:{label:{},class:{},value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=n,t=X(()=>{const{class:i,...s}=e;return s}),r=Ww(t);return(i,s)=>(S(),j(v(QD),Lt(v(r),{class:v(De)("inline-flex items-center justify-center rounded-sm px-2.5 py-1 text-sm font-medium whitespace-nowrap ring-offset-white transition-all focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-zinc-950 data-[state=active]:shadow-sm dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 dark:data-[state=active]:bg-zinc-950 dark:data-[state=active]:text-zinc-50",e.class)}),{default:E(()=>[N("span",s3,[n.label?(S(),W(Le,{key:0},[Z(de(n.label),1)],64)):ie(i.$slots,"default",{key:1})])]),_:3},16,["class"]))}}),o3={class:"grid h-8 grid-cols-3 border-b"},l3={class:"grid h-8 grid-cols-3 border-b"},u3=V({__name:"RequestAuthorizationBasicAuth",props:{modelValue:{default:()=>({username:"",password:""})},modelModifiers:{}},emits:Br(["update:modelValue"],["update:modelValue"]),setup(n,{emit:e}){const t=Un(n,"modelValue"),r=e,i=ce(t.value.username),s=ce(t.value.password);return He(i,o=>{t.value.username=o,r("update:modelValue",t.value)}),He(s,o=>{t.value.password=o,r("update:modelValue",t.value)}),(o,l)=>(S(),W(Le,null,[N("div",o3,[l[2]||(l[2]=N("label",{class:"px-panel flex h-8 items-center border-r py-1 text-xs",for:"username"}," Username ",-1)),_(v(_r),{id:"username",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=u=>i.value=u),placeholder:"-",class:"col-span-2 h-full rounded-none border-0 text-xs shadow-none focus:ring-0 focus-visible:ring-0"},null,8,["modelValue"])]),N("div",l3,[l[3]||(l[3]=N("label",{class:"px-panel flex h-8 items-center border-r py-1 text-xs",for:"password"}," Password ",-1)),_(v(_r),{id:"password",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=u=>s.value=u),placeholder:"-",class:"col-span-2 h-full rounded-none border-0 text-xs shadow-none focus:ring-0 focus-visible:ring-0"},null,8,["modelValue"])])],64))}}),a3={class:"grid h-8 grid-cols-3 border-b"},c3=V({__name:"RequestAuthorizationBearer",props:{modelValue:{default:()=>""},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Un(n,"modelValue");return(t,r)=>(S(),W("div",a3,[r[1]||(r[1]=N("label",{class:"px-panel flex h-8 items-center border-r py-1 text-xs",for:"bearer"}," Bearer Token ",-1)),_(v(_r),{id:"bearer",modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value=i),placeholder:"Token",class:"col-span-2 h-full rounded-none border-0 text-xs shadow-none focus:ring-0 focus-visible:ring-0"},null,8,["modelValue"])]))}}),yd=V({__name:"AppCard",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("div",{class:Fe(v(De)("rounded-xl border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",e.class))},[ie(t.$slots,"default")],2))}}),Pu=V({__name:"AppCardDescription",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("p",{class:Fe(v(De)("text-subtle text-sm",e.class))},[ie(t.$slots,"default")],2))}}),xd=V({__name:"AppCardHeader",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("div",{class:Fe(v(De)("flex flex-col gap-y-1.5 p-6",e.class))},[ie(t.$slots,"default")],2))}}),Ru=V({__name:"AppCardTitle",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("h3",{class:Fe(v(De)("leading-none font-semibold tracking-tight",e.class))},[ie(t.$slots,"default")],2))}}),f3={class:"whitespace-nowrap"},h3=V({__name:"RequestAuthorizationCurrentUser",setup(n){const e=hs();return(t,r)=>(S(),j(v(yd),{class:"px-panel bg-background relative flex items-start gap-2 rounded-none border-0 border-b py-2.5 shadow-none"},{default:E(()=>[v(e).isLoggedIn?(S(),j(v(gA),{key:0})):(S(),j(v(tA),{key:1,class:"text-red-500"})),_(v(xd),{class:"p-0"},{default:E(()=>[v(e).isLoggedIn?(S(),j(v(Ru),{key:0},{default:E(()=>[...r[0]||(r[0]=[Z("You're logged in!",-1)])]),_:1})):(S(),j(v(Ru),{key:1},{default:E(()=>[...r[1]||(r[1]=[Z("Please log in first",-1)])]),_:1})),v(e).isLoggedIn?(S(),j(v(Pu),{key:2},{default:E(()=>[r[2]||(r[2]=Z(" You're performing the request acting as the currently logged-in user ",-1)),N("span",f3,"(ID: "+de(v(e).userId)+")",1),r[3]||(r[3]=Z(" . ",-1))]),_:1})):(S(),j(v(Pu),{key:3},{default:E(()=>[...r[4]||(r[4]=[Z(" You need to be logged in to make requests as the currently logged-in user. ",-1)])]),_:1}))]),_:1})]),_:1}))}}),d3={class:"grid h-8 grid-cols-3 border-b"},p3=V({__name:"RequestAuthorizationImpersonateUser",props:{modelValue:{default:()=>0},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=Un(n,"modelValue");return(t,r)=>(S(),W("div",d3,[r[1]||(r[1]=N("label",{class:"px-panel flex h-8 items-center border-r py-1 text-xs",for:"user-id"}," User ID ",-1)),_(v(_r),{id:"user-id",modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value=i),placeholder:"Pick a user ID to impersonate it.",class:"col-span-2 h-full rounded-none border-0 text-xs shadow-none focus:ring-0 focus-visible:ring-0",type:"numeric"},null,8,["modelValue"])]))}}),m3=V({__name:"RequestAuthorizationNone",setup(n){return(e,t)=>(S(),j(v(yd),{class:"px-panel bg-background relative flex items-start gap-2 rounded-none border-0 border-b py-4 shadow-none"},{default:E(()=>[_(v(cA)),_(v(xd),{class:"p-0"},{default:E(()=>[_(v(Ru),null,{default:E(()=>[...t[0]||(t[0]=[Z("No Authorization",-1)])]),_:1}),_(v(Pu),null,{default:E(()=>[...t[1]||(t[1]=[Z(" You're performing the request as a guest. ",-1)])]),_:1})]),_:1})]),_:1}))}}),Iu=V({__name:"AppSelectGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n,t=X(()=>{const{class:r,...i}=e;return i});return(r,i)=>(S(),j(v(ID),Lt({class:v(De)("w-full p-1",e.class)},t.value),{default:E(()=>[ie(r.$slots,"default")]),_:3},16,["class"]))}}),Mu=V({__name:"AppSelectLabel",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const e=n;return(t,r)=>(S(),j(v(BD),{class:Fe(v(De)("px-2 py-1.5 text-sm font-semibold",e.class))},{default:E(()=>[ie(t.$slots,"default")]),_:3},8,["class"]))}}),g3={class:"flex items-center"},b3={class:"flex items-center"},y3=V({__name:"RequestAuthorizationSelector",props:Br({types:{}},{modelValue:{default:()=>be.CurrentUser},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=n,t=Un(n,"modelValue"),r=ar(),i=hd(),s=X(()=>r.pendingRequestData);return Gw(s,o=>{t.value=(o==null?void 0:o.authorization.type)??i.preferences.defaultAuthorizationType},{deep:!0}),(o,l)=>(S(),W("div",g3,[l[3]||(l[3]=N("span",{class:"text-muted-foreground w-[120px] text-xs"},"Authorization Type:",-1)),_(v(zo),{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=u=>t.value=u)},{default:E(()=>[_(v(Uo),{class:"min-w-[120px] rounded-none border-0 text-xs shadow-none focus:ring-0"},{default:E(()=>[_(v(Ho))]),_:1}),_(v(Wo),null,{default:E(()=>[_(v(Iu),null,{default:E(()=>[_(v(Mu),null,{default:E(()=>[N("div",b3,[_(v(z1),{size:14,class:"mr-2"}),l[1]||(l[1]=Z(" Special ",-1))])]),_:1}),(S(!0),W(Le,null,sn(e.types.special,u=>(S(),j(v(Sr),{key:u.id,value:u.id},{default:E(()=>[Z(de(u.label),1)]),_:2},1032,["value"]))),128))]),_:1}),_(v(Iu),null,{default:E(()=>[_(v(Mu),null,{default:E(()=>[...l[2]||(l[2]=[Z("Other",-1)])]),_:1}),(S(!0),W(Le,null,sn(e.types.traditional,u=>(S(),j(v(Sr),{key:u.id,value:u.id},{default:E(()=>[Z(de(u.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),x3={class:"text-muted-foreground text-xs"},ds=V({__name:"PanelSubHeader",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("div",{class:Fe(v(De)("px-panel h-sub-toolbar flex items-center justify-between",e.class))},[N("span",x3,[ie(t.$slots,"default")]),ie(t.$slots,"toolbox")],2))}}),e0={[be.None]:{type:be.None},[be.Bearer]:{type:be.Bearer,value:""},[be.Basic]:{type:be.Basic,value:{username:"",password:""}},[be.CurrentUser]:{type:be.CurrentUser},[be.Impersonate]:{type:be.Impersonate,value:0}};function v3(){var l,u;const n=ar(),e=new Map;Object.entries(e0).forEach(([a,c])=>{e.set(a,c)});const t=ce(((l=n.pendingRequestData)==null?void 0:l.authorization)??{type:be.CurrentUser}),r=ce(((u=t.value)==null?void 0:u.type)??_c.DEFAULT_TYPE),i=a=>{t.value&&e.set(t.value.type,{...t.value});const c=e.get(a),f=c?{...c}:e0[a];t.value=f,r.value=a},s=a=>{t.value.value=a},o=()=>{t.value&&(e.set(t.value.type,{...t.value}),n.pendingRequestData&&n.updateAuthorization(t.value))};return He(r,i),He(t,o,{deep:!0}),{authorization:V1(t),selectedType:r,types:{special:_c.TYPES.SPECIAL,traditional:_c.TYPES.TRADITIONAL},updateAuthorizationType:i,updateCurrentAuthorizationValue:s,saveAuthorizationToStore:o}}const k3={class:"flex h-full flex-col"},w3={class:"relative w-full flex-1 overflow-hidden"},D3=V({__name:"RequestAuthorization",setup(n){const{authorization:e,selectedType:t,types:r,updateCurrentAuthorizationValue:i}=v3();return(s,o)=>(S(),W("div",k3,[_(ds,{class:"border-b"},{default:E(()=>[_(y3,{modelValue:v(t),"onUpdate:modelValue":o[0]||(o[0]=l=>U1(t)?t.value=l:null),types:v(r)},null,8,["modelValue","types"])]),_:1}),N("div",w3,[!v(e)||v(e).type===v(be).None?(S(),j(m3,{key:0})):v(e).type===v(be).CurrentUser?(S(),j(h3,{key:1})):v(e).type===v(be).Impersonate?(S(),j(p3,{key:2,"model-value":v(e).value,"onUpdate:modelValue":o[1]||(o[1]=l=>v(i)(l))},null,8,["model-value"])):v(e).type===v(be).Bearer?(S(),j(c3,{key:3,"model-value":v(e).value,"onUpdate:modelValue":o[2]||(o[2]=l=>v(i)(l))},null,8,["model-value"])):v(e).type===v(be).Basic?(S(),j(u3,{key:4,"model-value":{username:v(e).value.username,password:v(e).value.password},"onUpdate:modelValue":o[3]||(o[3]=l=>v(i)(l))},null,8,["model-value"])):Ie("",!0)])]))}}),xl=[{id:Ge.EMPTY,label:"Empty",autoFillable:!1,mimeType:null},{id:Ge.JSON,label:"JSON",autoFillable:!0,mimeType:"application/json"},{id:Ge.PLAIN_TEXT,label:"Plain Text",autoFillable:!1,mimeType:"text/plain"},{id:Ge.FORM_DATA,label:"Form Data",autoFillable:!0,mimeType:"multipart/form-data"}];function A3(){const n=ar(),e=JA,t=YA,r=ce(Ge.EMPTY),i=ce(null),s=X(()=>n.pendingRequestData),o=X(()=>{var f,h,d;return((f=xl.find(p=>p.id===r.value))==null?void 0:f.autoFillable)===!0&&((d=(h=s.value)==null?void 0:h.schema)==null?void 0:d.shape)!==void 0}),l=()=>{var g,b,y;if(!s.value||r.value===Ge.EMPTY)return null;const f=s.value.method,h=s.value.body,d=((g=h==null?void 0:h[f])==null?void 0:g[r.value])??null;if(d)return d;const p=(y=(b=s.value)==null?void 0:b.schema)==null?void 0:y.shape;if(!p)return null;const m=t(p);return Xp(m,r.value)},u=f=>{var p;if(s.value===null)return;const h=s.value.headers.findIndex(m=>m.key==="content-type"),d=((p=xl.find(m=>m.id===f))==null?void 0:p.mimeType)??null;if(h!==-1){if(d===null){s.value.headers.splice(h,1);return}s.value.headers[h].value=d;return}d!==null&&s.value.headers.push({key:"content-type",value:d})},a=()=>{var d;const f=(d=s.value)==null?void 0:d.headers.find(p=>p.key==="Content-Type");if(!f)return;const h=xl.find(p=>p.mimeType===f.value);h&&(r.value=h.id)},c=()=>{var p;if(!s.value)return;const f=(p=s.value.schema)==null?void 0:p.shape;if(!f)return;const h=e(f),d=Xp(h,r.value);i.value=d};return He(s,f=>{r.value=(f==null?void 0:f.payloadType)??Ge.EMPTY,i.value=l()},{deep:!0}),He(r,f=>{if(s.value===null){i.value=l();return}i.value=l(),s.value.payloadType=f,u(f)}),He(i,()=>{if(!s.value)return;const f=s.value.method;s.value.body||(s.value.body={});const h=s.value.body;h[f]||(h[f]={}),h[f][r.value]=i.value},{deep:!0}),mi(()=>{a(),i.value=l()}),{payloadType:r,payload:i,pendingRequestData:s,supportsAutoFill:o,autofill:c,generateCurrentPayload:l,updateContentTypeHeader:u,initializePayloadTypeFromHeaders:a,types:xl}}const C3=V({__name:"AppSwitch",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{},variant:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,i=X(()=>{const{class:o,...l}=t;return l}),s=md(i,r);return(o,l)=>{var u;return S(),j(v(jD),Lt(v(s),{class:v(De)(((u=t.variant)==null?void 0:u.type)==="default"?"h-5 w-9":"h-4 w-8","peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-zinc-900 data-[state=unchecked]:bg-zinc-200 dark:focus-visible:ring-zinc-300 dark:focus-visible:ring-offset-zinc-950 dark:data-[state=checked]:bg-zinc-50 dark:data-[state=unchecked]:bg-zinc-800",t.class)}),{default:E(()=>{var a;return[_(v(VD),{class:Fe(v(De)(((a=t.variant)==null?void 0:a.type)==="default"?"h-4 w-4":"h-3 w-3","pointer-events-none block rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 dark:bg-zinc-950"))},{default:E(()=>[ie(o.$slots,"thumb")]),_:3},8,["class"])]}),_:3},16,["class"])}}});function _3(n){const{count:e,inc:t}=Kw(),r=ce([]),i=ce(!1),s=q=>({type:"text",id:q,key:"",value:"",enabled:!0}),o=(q,U)=>({type:q.type??"text",id:U,key:q.key,value:String(q.value??""),enabled:!0}),l=q=>({type:q.type,key:q.key,value:q.value}),u=q=>new Map(q.map(U=>[U.key,U])),a=(q,U)=>{const K=u(q);return U.filter(xe=>K.has(xe.key))},c=(q,U)=>{const K=new Set(U.map(xe=>xe.key));return q.filter(xe=>!K.has(xe.key))},f=Jw(new Map),h=ce({deleting:!1}),d=q=>{const U=f.get(q);return U!=null&&U.deleting?(m(q),!0):(g(q),!1)},p=q=>{var U;return((U=f.get(q))==null?void 0:U.deleting)??!1},m=q=>{const U=f.get(q);U!=null&&U.timeoutId&&clearTimeout(U.timeoutId),f.delete(q)},g=q=>{const U=window.setTimeout(()=>{f.delete(q)},yl.DELETION_CONFIRMATION_TIMEOUT);f.set(q,{deleting:!0,timeoutId:U})},b=()=>h.value.deleting?(x(),!0):(w(),!1),y=()=>h.value.deleting,x=()=>{h.value.timeoutId&&clearTimeout(h.value.timeoutId),h.value={deleting:!1}},w=()=>{const q=window.setTimeout(()=>{h.value={deleting:!1}},yl.DELETION_CONFIRMATION_TIMEOUT);h.value={deleting:!0,timeoutId:q}},D=()=>{f.forEach((q,U)=>m(U)),x()},A=X(()=>r.value.every(q=>!q.enabled)),k=X(()=>y());H1(r,()=>{i.value||B()},{deep:!0,debounce:yl.SYNC_DEBOUNCE_DELAY}),gd(()=>{L(),P()});const C=q=>q.map(U=>(t(),o(U,e.value))),O=(q,U)=>{const K=a(U,q),xe=c(U,K);return[...q,...xe]},L=()=>{var U;if(!((U=n.value)!=null&&U.length))return;i.value=!0;const q=C(n.value);r.value=O(q,r.value),window.setTimeout(()=>{i.value=!1},yl.SYNC_DEBOUNCE_DELAY+10)},B=()=>{n.value=r.value.filter(q=>q.key!==""&&q.enabled).map(l)},P=()=>{t();const q=s(e.value);r.value.push(q)};return{parameters:r,deletingAll:k,areAllParametersDisabled:A,addNewEmptyParameter:P,toggleAllParametersEnabledState:()=>{const q=A.value;r.value.forEach(U=>U.enabled=q)},triggerParameterDeletion:(q,U)=>{const K=q[U];!K||!d(K.id)||q.splice(U,1)},deleteAllParameters:()=>{b()&&(r.value=[])},updateParametersFromParentModel:L,isParameterMarkedForDeletion:q=>p(q),clearAllDeletionStates:D}}const S3={class:"flex h-8 items-center overflow-hidden border-b p-0"},E3={class:"flex-1 overflow-y-auto"},O3={class:"flex flex-1"},T3={class:"flex items-center justify-center border-r px-2"},F3={key:1,class:"flex items-center justify-center px-2","data-testid":"delete-button"},vd=V({__name:"KeyValueParameters",props:Br({freeFormTypes:{type:Boolean,default:!1},class:{default:void 0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=n,t=Un(n,"modelValue"),r=X({get:()=>t.value??[],set:D=>t.value=D}),{parameters:i,deletingAll:s,isParameterMarkedForDeletion:o,areAllParametersDisabled:l,addNewEmptyParameter:u,toggleAllParametersEnabledState:a,triggerParameterDeletion:c,deleteAllParameters:f}=_3(r),{openCommand:h,closeCommand:d}=W1(),p=ce(null),m=ce(null),g=(D,A)=>{p.value=D,m.value=A},b=D=>{const A=D.relatedTarget;A!=null&&A.closest("[data-ValueGenerator-focus-hook]")||(p.value=null,m.value=null,setTimeout(d,100))},y=()=>{m.value&&h(m.value)},x=D=>{c(i.value,D)},w=(D,A)=>p.value===D&&A.enabled;return(D,A)=>(S(),W("div",{class:Fe(v(De)("flex h-full flex-col overflow-hidden",e.class)),"data-testid":"kv-container"},[N("div",S3,[_(v(Gt),{variant:"ghost",size:"xs",class:"px-panel h-full -translate-x-0.5 rounded-none text-xs","data-testid":"add-button",onClick:v(u)},{default:E(()=>[_(v(hA)),A[0]||(A[0]=Z(" Add ",-1))]),_:1},8,["onClick"]),_(v(Gt),{variant:"ghost",size:"xs",class:"px-panel h-full -translate-x-0.5 rounded-none text-xs",disabled:v(i).length===0,"data-testid":"enable-all-button",onClick:v(a)},{default:E(()=>[v(l)?(S(),j(v(oA),{key:0})):(S(),j(v(sA),{key:1})),Z(" "+de(v(l)?"Enable All":"Disable All"),1)]),_:1},8,["disabled","onClick"]),_(v(Gt),{variant:"ghost",size:"xs",class:Fe(["px-panel h-full -translate-x-0.5 rounded-none text-xs",{"!text-red-500 hover:text-red-500 dark:!text-rose-700 dark:hover:text-red-700":v(s)}]),disabled:v(i).length===0,"data-testid":"delete-all-button",onClick:v(f)},{default:E(()=>[_(v(Yp)),A[1]||(A[1]=Z(" Delete All ",-1))]),_:1},8,["class","disabled","onClick"])]),N("div",E3,[(S(!0),W(Le,null,sn(v(i),(k,C)=>(S(),W("div",{key:k.id,class:"flex h-8 border-b","data-testid":"parameter-row"},[N("div",O3,[n.freeFormTypes?(S(),j(v(zo),{key:0,modelValue:k.type,"onUpdate:modelValue":O=>k.type=O,"default-value":"text"},{default:E(()=>[_(v(Uo),{class:"pl-panel h-full w-[80px] rounded-none border-0 border-r p-0 text-xs shadow-none focus:ring-0","data-testid":"type-selector"},{default:E(()=>[_(v(Ho),{placeholder:"Select a Type"})]),_:1}),_(v(Wo),null,{default:E(()=>[_(v(Sr),{value:"text"},{default:E(()=>[...A[2]||(A[2]=[Z("Text",-1)])]),_:1}),_(v(Sr),{value:"file",disabled:""},{default:E(()=>[A[4]||(A[4]=Z(" File ",-1)),_(v(uo),{variant:"outline",class:"ml-0.5 px-1 py-0"},{default:E(()=>[...A[3]||(A[3]=[Z(" soon ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])):Ie("",!0),_(v(_r),{modelValue:k.key,"onUpdate:modelValue":O=>k.key=O,placeholder:"Key",class:"selector-key h-full flex-1 rounded-none border-0 border-r shadow-none focus:ring-0 focus-visible:ring-0",disabled:!k.enabled,name:"kv-key","data-testid":"kv-key"},null,8,["modelValue","onUpdate:modelValue","disabled"]),_(v(_r),{modelValue:k.value,"onUpdate:modelValue":O=>k.value=O,placeholder:"Value",class:"pl-panel h-full flex-1 rounded-none border-0 border-r shadow-none focus:ring-0 focus-visible:ring-0",disabled:!k.enabled,name:"kv-value","data-testid":"kv-value",onFocus:O=>g(C,O.target),onBlur:b},null,8,["modelValue","onUpdate:modelValue","disabled","onFocus"])]),N("div",T3,[_(Lf,{value:"Enable/Disable"},{default:E(()=>[_(v(C3),{modelValue:k.enabled,"onUpdate:modelValue":O=>k.enabled=O,class:"h-4 w-8"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),w(C,k)?(S(),W("div",{key:0,class:"flex cursor-pointer items-center justify-center p-2",title:"Generate Value","data-testid":"generator-button",onMousedown:fd(y,["prevent"])},[_(v(z1),{class:"text-subtle size-4 transition-colors hover:text-zinc-800 dark:hover:text-zinc-200"})],32)):(S(),W("div",F3,[_(Lf,{value:"Delete","on-click":()=>x(C)},{default:E(()=>[_(v(Yp),{class:Fe(["size-4",{"text-rose-500 dark:text-rose-700":v(o)(k.id)}])},null,8,["class"])]),_:2},1032,["on-click"])]))]))),128))])],2))}}),P3=V({__name:"RequestBodyFormData",props:{modelValue:{default:()=>null},modelModifiers:{}},emits:Br(["update:modelValue"],["update:modelValue"]),setup(n,{emit:e}){const t=Un(n,"modelValue"),r=e,i=ce(!1),s=ce([]);He(t,u=>{u!==null&&(i.value||(s.value=u instanceof FormData?l(u):[],cd(()=>{i.value=!1})))},{deep:!0}),He(s,()=>{i.value=!0,r("update:modelValue",o(s.value))},{deep:!0});function o(u){const a=new FormData;for(const c of u){if(c.value===null){a.set(c.key,"");continue}if(c.value instanceof Blob){a.set(c.key,c.value);continue}a.set(c.key,String(c.value))}return a}function l(u){const a=[];return u.forEach((c,f)=>{if(c instanceof File){a.push({type:"file",key:f,value:c.name});return}a.push({type:"text",key:f,value:c})}),a}return(u,a)=>(S(),j(vd,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=c=>s.value=c),"free-form-types":!0},null,8,["modelValue"]))}}),R3=V({__name:"RequestBodyFormNone",emits:["update:modelValue"],setup(n,{emit:e}){const t=e;return mi(()=>t("update:modelValue",null)),(r,i)=>(S(),j(v(yd),{class:"px-panel bg-background relative flex items-start gap-2 rounded-none border-0 border-b py-2.5 shadow-none"},{default:E(()=>[_(v(nA)),_(v(xd),{class:"p-0"},{default:E(()=>[_(v(Ru),null,{default:E(()=>[...i[0]||(i[0]=[Z("No Body",-1)])]),_:1}),_(v(Pu),null,{default:E(()=>[...i[1]||(i[1]=[Z(" You're performing the request without a Payload. ",-1)])]),_:1})]),_:1})]),_:1}))}});let jf=[],cb=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?cb:jf).push(t=t+n[e])})();function I3(n){if(n<768)return!1;for(let e=0,t=jf.length;;){let r=e+t>>1;if(n<jf[r])t=r;else if(n>=cb[r])e=r+1;else return!0;if(e==t)return!1}}function t0(n){return n>=127462&&n<=127487}const n0=8205;function M3(n,e,t=!0,r=!0){return(t?fb:B3)(n,e,r)}function fb(n,e,t){if(e==n.length)return e;e&&hb(n.charCodeAt(e))&&db(n.charCodeAt(e-1))&&e--;let r=Oc(n,e);for(e+=r0(r);e<n.length;){let i=Oc(n,e);if(r==n0||i==n0||t&&I3(i))e+=r0(i),r=i;else if(t0(i)){let s=0,o=e-2;for(;o>=0&&t0(Oc(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function B3(n,e,t){for(;e>0;){let r=fb(n,e-2,t);if(r<e)return r;e--}return 0}function Oc(n,e){let t=n.charCodeAt(e);if(!db(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return hb(r)?(t-55296<<10)+(r-56320)+65536:t}function hb(n){return n>=56320&&n<57344}function db(n){return n>=55296&&n<56320}function r0(n){return n<65536?1:2}class ge{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Qi(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),On.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Qi(this,e,t);let r=[];return this.decompose(e,t,r,0),On.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Ys(this),s=new Ys(e);for(let o=t,l=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(l+=i.value.length,i.done||l>=r)return!0}}iter(e=1){return new Ys(this,e)}iterRange(e,t=this.length){return new pb(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new mb(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ge.empty:e.length<=32?new Ue(e):On.from(Ue.split(e,[]))}}class Ue extends ge{constructor(e,t=$3(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],l=i+o.length;if((t?r:l)>=e)return new N3(i,l,r,o);i=l+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Ue(i0(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),l=au(s.text,o.text.slice(),0,s.length);if(l.length<=32)r.push(new Ue(l,o.length+s.length));else{let u=l.length>>1;r.push(new Ue(l.slice(0,u)),new Ue(l.slice(u)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Ue))return super.replace(e,t,r);[e,t]=Qi(this,e,t);let i=au(this.text,au(r.text,i0(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Ue(i,s):On.from(Ue.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=Qi(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],u=s+l.length;s>e&&o&&(i+=r),e<u&&t>s&&(i+=l.slice(Math.max(0,e-s),t-s)),s=u+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new Ue(r,i)),r=[],i=-1);return i>-1&&t.push(new Ue(r,i)),t}}class On extends ge{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],l=i+o.length,u=r+o.lines-1;if((t?u:l)>=e)return o.lineInner(e,t,r,i);i=l+1,r=u+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],u=o+l.length;if(e<=u&&t>=o){let a=i&((o<=e?1:0)|(u>=t?2:0));o>=e&&u<=t&&!a?r.push(l):l.decompose(e-o,t-o,r,a)}o=u+1}}replace(e,t,r){if([e,t]=Qi(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],l=s+o.length;if(e>=s&&t<=l){let u=o.replace(e-s,t-s,r),a=this.lines-o.lines+u.lines;if(u.lines<a>>4&&u.lines>a>>6){let c=this.children.slice();return c[i]=u,new On(c,this.length-(t-e)+r.length)}return super.replace(s,l,u)}s=l+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Qi(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],u=o+l.length;o>e&&s&&(i+=r),e<u&&t>o&&(i+=l.sliceString(e-o,t-o,r)),o=u+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof On))return 0;let r=0,[i,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==l)return r;let u=this.children[i],a=e.children[s];if(u!=a)return r+u.scanIdentical(a,t);r+=u.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let p of e)p.flatten(d);return new Ue(d,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,l=[],u=0,a=-1,c=[];function f(d){let p;if(d.lines>s&&d instanceof On)for(let m of d.children)f(m);else d.lines>o&&(u>o||!u)?(h(),l.push(d)):d instanceof Ue&&u&&(p=c[c.length-1])instanceof Ue&&d.lines+p.lines<=32?(u+=d.lines,a+=d.length+1,c[c.length-1]=new Ue(p.text.concat(d.text),p.length+1+d.length)):(u+d.lines>i&&h(),u+=d.lines,a+=d.length+1,c.push(d))}function h(){u!=0&&(l.push(c.length==1?c[0]:On.from(c,a)),a=-1,u=c.length=0)}for(let d of e)f(d);return h(),l.length==1?l[0]:new On(l,t)}}ge.empty=new Ue([""],0);function $3(n){let e=-1;for(let t of n)e+=t.length+1;return e}function au(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let l=n[s],u=i+l.length;u>=t&&(u>r&&(l=l.slice(0,r-i)),i<t&&(l=l.slice(t-i)),o?(e[e.length-1]+=l,o=!1):e.push(l)),i=u+1}return e}function i0(n,e,t){return au(n,[""],e,t)}class Ys{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ue?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,l=i instanceof Ue?i.text.length:i.children.length;if(o==(t>0?l:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ue){let u=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[o+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof Ue?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class pb{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Ys(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class mb{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ge.prototype[Symbol.iterator]=function(){return this.iter()},Ys.prototype[Symbol.iterator]=pb.prototype[Symbol.iterator]=mb.prototype[Symbol.iterator]=function(){return this});class N3{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function Qi(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function dt(n,e,t=!0,r=!0){return M3(n,e,t,r)}function L3(n){return n>=56320&&n<57344}function j3(n){return n>=55296&&n<56320}function Rt(n,e){let t=n.charCodeAt(e);if(!j3(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return L3(r)?(t-55296<<10)+(r-56320)+65536:t}function kd(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Tn(n){return n<65536?1:2}const qf=/\r\n?|\n/;var ht=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(ht||(ht={}));class Nn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){Vf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new Nn(e)}composeDesc(e){return this.empty?e:e.empty?this:gb(this,e)}mapDesc(e,t=!1){return e.empty?this:zf(this,e,t)}mapPos(e,t=-1,r=ht.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],u=this.sections[o++],a=i+l;if(u<0){if(a>e)return s+(e-i);s+=l}else{if(r!=ht.Simple&&a>=e&&(r==ht.TrackDel&&i<e&&a>e||r==ht.TrackBefore&&i<e||r==ht.TrackAfter&&a>e))return null;if(a>e||a==e&&t<0&&!l)return e==i||t<0?s:s+u;s+=u}i=a}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],l=i+s;if(o>=0&&i<=t&&l>=e)return i<e&&l>t?"cover":!0;i=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Nn(e)}static create(e){return new Nn(e)}}class nt extends Nn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Vf(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return zf(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],l=t[i+1];if(l>=0){t[i]=l,t[i+1]=o;let u=i>>1;for(;r.length<u;)r.push(ge.empty);r.push(o?e.slice(s,s+o):ge.empty)}s+=o}return new nt(t,r)}compose(e){return this.empty?e:e.empty?this:gb(this,e,!0)}map(e,t=!1){return e.empty?this:zf(this,e,t,!0)}iterChanges(e,t=!1){Vf(this,e,t)}get desc(){return Nn.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new ao(this);e:for(let o=0,l=0;;){let u=o==e.length?1e9:e[o++];for(;l<u||l==u&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,u-l);mt(i,c,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;mt(t,c,f),f>0&&br(r,t,s.text),s.forward(c),l+=c}let a=e[o++];for(;l<a;){if(s.done)break e;let c=Math.min(s.len,a-l);mt(t,c,-1),mt(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new nt(t,r),filtered:Nn.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,l=null;function u(c=!1){if(!c&&!i.length)return;o<t&&mt(i,t-o,-1);let f=new nt(i,s);l=l?l.compose(f.map(l)):f,i=[],s=[],o=0}function a(c){if(Array.isArray(c))for(let f of c)a(f);else if(c instanceof nt){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);u(),l=l?l.compose(c.map(l)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>t)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${t})`);let p=d?typeof d=="string"?ge.of(d.split(r||qf)):d:ge.empty,m=p.length;if(f==h&&m==0)return;f<o&&u(),f>o&&mt(i,f-o,-1),mt(i,h-f,m),br(s,i,p),o=h}}return a(e),u(!l),l}static empty(e){return new nt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(ge.empty);r[i]=ge.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new nt(t,r)}static createSet(e,t){return new nt(e,t)}}function mt(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function br(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(ge.empty);n.push(t)}}function Vf(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let l=n.sections[o++],u=n.sections[o++];if(u<0)i+=l,s+=l;else{let a=i,c=s,f=ge.empty;for(;a+=l,c+=u,u&&r&&(f=f.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],u=n.sections[o++];e(i,a,s,c,f),i=a,s=c}}}function zf(n,e,t,r=!1){let i=[],s=r?[]:null,o=new ao(n),l=new ao(e);for(let u=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let a=Math.min(o.len,l.len);mt(i,a,-1),o.forward(a),l.forward(a)}else if(l.ins>=0&&(o.ins<0||u==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let a=l.len;for(mt(i,l.ins,-1);a;){let c=Math.min(o.len,a);o.ins>=0&&u<o.i&&o.len<=c&&(mt(i,0,o.ins),s&&br(s,i,o.text),u=o.i),o.forward(c),a-=c}l.next()}else if(o.ins>=0){let a=0,c=o.len;for(;c;)if(l.ins==-1){let f=Math.min(c,l.len);a+=f,c-=f,l.forward(f)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;mt(i,a,u<o.i?o.ins:0),s&&u<o.i&&br(s,i,o.text),u=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?nt.createSet(i,s):Nn.create(i);throw new Error("Mismatched change set lengths")}}}function gb(n,e,t=!1){let r=[],i=t?[]:null,s=new ao(n),o=new ao(e);for(let l=!1;;){if(s.done&&o.done)return i?nt.createSet(r,i):Nn.create(r);if(s.ins==0)mt(r,s.len,0,l),s.next();else if(o.len==0&&!o.done)mt(r,0,o.ins,l),i&&br(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let u=Math.min(s.len2,o.len),a=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;mt(r,u,c,l),i&&c&&br(i,r,o.text)}else o.ins==-1?(mt(r,s.off?0:s.len,u,l),i&&br(i,r,s.textBit(u))):(mt(r,s.off?0:s.len,o.off?0:o.ins,l),i&&!o.off&&br(i,r,o.text));l=(s.ins>u||o.ins>=0&&o.len>u)&&(l||r.length>a),s.forward2(u),o.forward(u)}}}}class ao{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ge.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?ge.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Qr{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Qr(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return I.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return I.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return I.range(e.anchor,e.head)}static create(e,t,r){return new Qr(e,t,r)}}class I{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:I.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new I([this.main],0)}addRange(e,t=!0){return I.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,I.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new I(e.ranges.map(t=>Qr.fromJSON(t)),e.main)}static single(e,t=e){return new I([I.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return I.normalized(e.slice(),t);r=s.to}return new I(e,t)}static cursor(e,t=0,r,i){return Qr.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?Qr.create(t,e,48|s):Qr.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,u=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?I.range(u,l):I.range(l,u))}}return new I(e,t)}}function bb(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let wd=0;class Q{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=wd++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Q(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:Dd),!!e.static,e.enables)}of(e){return new cu([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new cu(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new cu(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function Dd(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class cu{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=wd++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,u=!1,a=!1,c=[];for(let f of this.dependencies)f=="doc"?u=!0:f=="selection"?a=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[f.id]);return{create(f){return f.values[o]=r(f),1},update(f,h){if(u&&h.docChanged||a&&(h.docChanged||h.selection)||Uf(f,c)){let d=r(f);if(l?!s0(d,f.values[o],i):!i(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[s];if(p!=null){let m=$u(h,p);if(this.dependencies.every(g=>g instanceof Q?h.facet(g)===f.facet(g):g instanceof Ke?h.field(g,!1)==f.field(g,!1):!0)||(l?s0(d=r(f),m,i):i(d=r(f),m)))return f.values[o]=m,0}else d=r(f);return f.values[o]=d,1}}}}function s0(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function Uf(n,e){let t=!1;for(let r of e)Qs(n,r)&1&&(t=!0);return t}function q3(n,e,t){let r=t.map(u=>n[u.id]),i=t.map(u=>u.type),s=r.filter(u=>!(u&1)),o=n[e.id]>>1;function l(u){let a=[];for(let c=0;c<r.length;c++){let f=$u(u,r[c]);if(i[c]==2)for(let h of f)a.push(h);else a.push(f)}return e.combine(a)}return{create(u){for(let a of r)Qs(u,a);return u.values[o]=l(u),1},update(u,a){if(!Uf(u,s))return 0;let c=l(u);return e.compare(c,u.values[o])?0:(u.values[o]=c,1)},reconfigure(u,a){let c=Uf(u,r),f=a.config.facets[e.id],h=a.facet(e);if(f&&!c&&Dd(t,f))return u.values[o]=h,0;let d=l(u);return e.compare(d,h)?(u.values[o]=h,0):(u.values[o]=d,1)}}}const vl=Q.define({static:!0});class Ke{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Ke(wd++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(vl).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>{let s=r.facet(vl),o=i.facet(vl),l;return(l=s.find(u=>u.field==this))&&l!=o.find(u=>u.field==this)?(r.values[t]=l.create(r),1):i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,vl.of({field:this,create:e})]}get extension(){return this}}const Wr={lowest:4,low:3,default:2,high:1,highest:0};function Ts(n){return e=>new yb(e,n)}const $r={highest:Ts(Wr.highest),high:Ts(Wr.high),default:Ts(Wr.default),low:Ts(Wr.low),lowest:Ts(Wr.lowest)};class yb{constructor(e,t){this.inner=e,this.prec=t}}class Ko{of(e){return new Hf(this,e)}reconfigure(e){return Ko.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Hf{constructor(e,t){this.compartment=e,this.inner=t}}class Bu{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let h of V3(e,t,o))h instanceof Ke?i.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let l=Object.create(null),u=[],a=[];for(let h of i)l[h.id]=a.length<<1,a.push(d=>h.slot(d));let c=r==null?void 0:r.config.facets;for(let h in s){let d=s[h],p=d[0].facet,m=c&&c[h]||[];if(d.every(g=>g.type==0))if(l[p.id]=u.length<<1|1,Dd(m,d))u.push(r.facet(p));else{let g=p.combine(d.map(b=>b.value));u.push(r&&p.compare(g,r.facet(p))?r.facet(p):g)}else{for(let g of d)g.type==0?(l[g.id]=u.length<<1|1,u.push(g.value)):(l[g.id]=a.length<<1,a.push(b=>g.dynamicSlot(b)));l[p.id]=a.length<<1,a.push(g=>q3(g,p,d))}}let f=a.map(h=>h(l));return new Bu(e,o,f,l,u,s)}}function V3(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,l){let u=i.get(o);if(u!=null){if(u<=l)return;let a=r[u].indexOf(o);a>-1&&r[u].splice(a,1),o instanceof Hf&&t.delete(o.compartment)}if(i.set(o,l),Array.isArray(o))for(let a of o)s(a,l);else if(o instanceof Hf){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let a=e.get(o.compartment)||o.inner;t.set(o.compartment,a),s(a,l)}else if(o instanceof yb)s(o.inner,o.prec);else if(o instanceof Ke)r[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof cu)r[l].push(o),o.facet.extensions&&s(o.facet.extensions,Wr.default);else{let a=o.extension;if(!a)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(a,l)}}return s(n,Wr.default),r.reduce((o,l)=>o.concat(l))}function Qs(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function $u(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const xb=Q.define(),Wf=Q.define({combine:n=>n.some(e=>e),static:!0}),vb=Q.define({combine:n=>n.length?n[0]:void 0,static:!0}),kb=Q.define(),wb=Q.define(),Db=Q.define(),Ab=Q.define({combine:n=>n.length?n[0]:!1});class cr{constructor(e,t){this.type=e,this.value=t}static define(){return new z3}}class z3{of(e){return new cr(this,e)}}class U3{constructor(e){this.map=e}of(e){return new re(this,e)}}class re{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new re(this.type,t)}is(e){return this.type==e}static define(e={}){return new U3(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}re.reconfigure=re.define();re.appendConfig=re.define();class Xe{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&bb(r,t.newLength),s.some(l=>l.type==Xe.time)||(this.annotations=s.concat(Xe.time.of(Date.now())))}static create(e,t,r,i,s,o){return new Xe(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Xe.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Xe.time=cr.define();Xe.userEvent=cr.define();Xe.addToHistory=cr.define();Xe.remote=cr.define();function H3(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Cb(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=nt.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:re.mapEffects(n.effects,i).concat(re.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Gf(n,e,t){let r=e.selection,i=Ni(e.annotations);return e.userEvent&&(i=i.concat(Xe.userEvent.of(e.userEvent))),{changes:e.changes instanceof nt?e.changes:nt.of(e.changes||[],t,n.facet(vb)),selection:r&&(r instanceof I?r:I.single(r.anchor,r.head)),effects:Ni(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function _b(n,e,t){let r=Gf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=Cb(r,Gf(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=Xe.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return G3(t?W3(i):i)}function W3(n){let e=n.startState,t=!0;for(let i of e.facet(kb)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:H3(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=nt.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Xe.create(e,i,n.selection&&n.selection.map(s),re.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(wb);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof Xe?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Xe?n=s[0]:n=_b(e,Ni(s),!1)}return n}function G3(n){let e=n.startState,t=e.facet(Db),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=Cb(r,Gf(e,s,n.changes.newLength),!0))}return r==n?n:Xe.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const K3=[];function Ni(n){return n==null?K3:Array.isArray(n)?n:[n]}var Me=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Me||(Me={}));const J3=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Kf;try{Kf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Y3(n){if(Kf)return Kf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||J3.test(t)))return!0}return!1}function Q3(n){return e=>{if(!/\S/.test(e))return Me.Space;if(Y3(e))return Me.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Me.Word;return Me.Other}}class he{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Qs(this,l<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Qs(this,r),$u(this,r)}update(...e){return _b(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let l of e.effects)l.is(Ko.reconfigure)?(t&&(i=new Map,t.compartments.forEach((u,a)=>i.set(a,u)),t=null),i.set(l.value.compartment,l.value.extension)):l.is(re.reconfigure)?(t=null,r=l.value):l.is(re.appendConfig)&&(t=null,r=Ni(r).concat(l.value));let s;t?s=e.startState.values.slice():(t=Bu.resolve(r,i,this),s=new he(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(u,a)=>a.reconfigure(u,this),null).values);let o=e.startState.facet(Wf)?e.newSelection:e.newSelection.asSingle();new he(t,e.newDoc,o,s,(l,u)=>u.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:I.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Ni(r.effects);for(let l=1;l<t.ranges.length;l++){let u=e(t.ranges[l]),a=this.changes(u.changes),c=a.map(i);for(let h=0;h<l;h++)s[h]=s[h].map(c);let f=i.mapDesc(a,!0);s.push(u.range.map(f)),i=i.compose(c),o=re.mapEffects(o,c).concat(re.mapEffects(Ni(u.effects),f))}return{changes:i,selection:I.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof nt?e:nt.of(e,this.doc.length,this.facet(he.lineSeparator))}toText(e){return ge.of(e.split(this.facet(he.lineSeparator)||qf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Qs(this,t),$u(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Ke&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],l=e[s];i.push(o.init(u=>o.spec.fromJSON(l,u)))}}return he.create({doc:e.doc,selection:I.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Bu.resolve(e.extensions||[],new Map),r=e.doc instanceof ge?e.doc:ge.of((e.doc||"").split(t.staticFacet(he.lineSeparator)||qf)),i=e.selection?e.selection instanceof I?e.selection:I.single(e.selection.anchor,e.selection.head):I.single(0);return bb(i,r.length),t.staticFacet(Wf)||(i=i.asSingle()),new he(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(he.tabSize)}get lineBreak(){return this.facet(he.lineSeparator)||`
`}get readOnly(){return this.facet(Ab)}phrase(e,...t){for(let r of this.facet(he.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(xb))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return Q3(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,l=e-r;for(;o>0;){let u=dt(t,o,!1);if(s(t.slice(u,o))!=Me.Word)break;o=u}for(;l<i;){let u=dt(t,l);if(s(t.slice(l,u))!=Me.Word)break;l=u}return o==l?null:I.range(o+r,l+r)}}he.allowMultipleSelections=Wf;he.tabSize=Q.define({combine:n=>n.length?n[0]:4});he.lineSeparator=vb;he.readOnly=Ab;he.phrases=Q.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});he.languageData=xb;he.changeFilter=kb;he.transactionFilter=wb;he.transactionExtender=Db;Ko.reconfigure=re.define();function gn(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],l=r[s];if(l===void 0)r[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class ui{eq(e){return this==e}range(e,t=e){return Jf.create(e,t,this)}}ui.prototype.startSide=ui.prototype.endSide=0;ui.prototype.point=!1;ui.prototype.mapMode=ht.TrackDel;let Jf=class Sb{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Sb(e,t,r)}};function Yf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Ad{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,l=s.length;;){if(o==l)return o;let u=o+l>>1,a=s[u]-e||(r?this.value[u].endSide:this.value[u].startSide)-t;if(u==o)return a>=0?o:l;a>=0?l=u:o=u+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,l=-1;for(let u=0;u<this.value.length;u++){let a=this.value[u],c=this.from[u]+e,f=this.to[u]+e,h,d;if(c==f){let p=t.mapPos(c,a.startSide,a.mapMode);if(p==null||(h=d=p,a.startSide!=a.endSide&&(d=t.mapPos(c,a.endSide),d<h)))continue}else if(h=t.mapPos(c,a.startSide),d=t.mapPos(f,a.endSide),h>d||h==d&&a.startSide>0&&a.endSide<=0)continue;(d-h||a.endSide-a.startSide)<0||(o<0&&(o=h),a.point&&(l=Math.max(l,d-h)),r.push(a),i.push(h-o),s.push(d-o))}return{mapped:r.length?new Ad(i,s,r,l):null,pos:o}}}class me{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new me(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(Yf)),this.isEmpty)return t.length?me.of(t):this;let l=new Eb(this,null,-1).goto(0),u=0,a=[],c=new lr;for(;l.value||u<t.length;)if(u<t.length&&(l.from-t[u].from||l.startSide-t[u].value.startSide)>=0){let f=t[u++];c.addInner(f.from,f.to,f.value)||a.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(l.chunkIndex)<t[u].from)&&(!o||i>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||i>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||a.push(Jf.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!a.length?me.empty:this.nextLayer.update({add:a,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],u=this.chunk[o],a=e.touchesRange(l,l+u.length);if(a===!1)i=Math.max(i,u.maxPoint),t.push(u),r.push(e.mapPos(l));else if(a===!0){let{mapped:c,pos:f}=u.map(l,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),r.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new me(r,t,s||me.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return co.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return co.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),u=o0(o,l,r),a=new Fs(o,u,s),c=new Fs(l,u,s);r.iterGaps((f,h,d)=>l0(a,f,c,h,d,i)),r.empty&&r.length==0&&l0(a,0,c,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=o0(s,o),u=new Fs(s,l,0).goto(r),a=new Fs(o,l,0).goto(r);for(;;){if(u.to!=a.to||!Qf(u.active,a.active)||u.point&&(!a.point||!u.point.eq(a.point)))return!1;if(u.to>i)return!0;u.next(),a.next()}}static spans(e,t,r,i,s=-1){let o=new Fs(e,null,s).goto(t),l=t,u=o.openStart;for(;;){let a=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),f=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,u);i.point(l,a,o.point,c,f,o.pointRank),u=Math.min(o.openEnd(a),c.length)}else a>l&&(i.span(l,a,o.active,u),u=o.openEnd(a));if(o.to>r)return u+(o.point&&o.to>r?1:0);l=o.to,o.next()}}static of(e,t=!1){let r=new lr;for(let i of e instanceof Jf?[e]:t?X3(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return me.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=me.empty;i=i.nextLayer)t=new me(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}me.empty=new me([],[],null,-1);function X3(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(Yf(e,r)>0)return n.slice().sort(Yf);e=r}return n}me.empty.nextLayer=me.empty;class lr{finishChunk(e){this.chunks.push(new Ad(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new lr)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(me.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=me.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function o0(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=r.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class Eb{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class co{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new Eb(o,t,r,s));return i.length==1?i[0]:new co(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Tc(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Tc(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Tc(this.heap,0)}}}function Tc(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Fs{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=co.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){kl(this.active,e),kl(this.activeTo,e),kl(this.activeRank,e),this.minActive=u0(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;wl(this.active,t,r),wl(this.activeTo,t,i),wl(this.activeRank,t,s),e&&wl(e,t,this.cursor.from),this.minActive=u0(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&kl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function l0(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,l=r,u=r-e;for(;;){let a=n.to+u-t.to,c=a||n.endSide-t.endSide,f=c<0?n.to+u:t.to,h=Math.min(f,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Qf(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(l,h,n.point,t.point):h>l&&!Qf(n.active,t.active)&&s.compareRange(l,h,n.active,t.active),f>o)break;(a||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(f),l=f,c<=0&&n.next(),c>=0&&t.next()}}function Qf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function kl(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function wl(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function u0(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function ps(n,e,t=n.length){let r=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=dt(n,i));return r}function Xf(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=dt(n,i)}return r===!0?-1:n.length}const Zf="",a0=typeof Symbol>"u"?"__"+Zf:Symbol.for(Zf),eh=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Er{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,u,a){let c=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return u.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(g=>m.replace(/&/,g))).reduce((m,g)=>m.concat(g)),p,u);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),p,c,h)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||h)&&u.push((r&&!f&&!a?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=c0[a0]||1;return c0[a0]=e+1,Zf+e.toString(36)}static mount(e,t,r){let i=e[eh],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Z3(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let f0=new Map;class Z3{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=f0.get(r);if(s)return e[eh]=s;this.sheet=new i.CSSStyleSheet,f0.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[eh]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],u=this.modules.indexOf(l);if(u<s&&u>-1&&(this.modules.splice(u,1),s--,u=-1),u==-1){if(this.modules.splice(s++,0,l),r)for(let a=0;a<l.rules.length;a++)r.insertRule(l.rules[a],i++)}else{for(;s<u;)i+=this.modules[s++].rules.length;i+=l.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let u=0;u<this.modules.length;u++)o+=this.modules[u].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Or={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},fo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},eC=typeof navigator<"u"&&/Mac/.test(navigator.platform),tC=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ft=0;ft<10;ft++)Or[48+ft]=Or[96+ft]=String(ft);for(var ft=1;ft<=24;ft++)Or[ft+111]="F"+ft;for(var ft=65;ft<=90;ft++)Or[ft]=String.fromCharCode(ft+32),fo[ft]=String.fromCharCode(ft);for(var Fc in Or)fo.hasOwnProperty(Fc)||(fo[Fc]=Or[Fc]);function nC(n){var e=eC&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||tC&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?fo:Or)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ke(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)Ob(n,arguments[e]);return n}function Ob(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Ob(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let wt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},th=typeof document<"u"?document:{documentElement:{style:{}}};const nh=/Edge\/(\d+)/.exec(wt.userAgent),Tb=/MSIE \d/.test(wt.userAgent),rh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(wt.userAgent),qa=!!(Tb||rh||nh),h0=!qa&&/gecko\/(\d+)/i.test(wt.userAgent),Pc=!qa&&/Chrome\/(\d+)/.exec(wt.userAgent),rC="webkitFontSmoothing"in th.documentElement.style,ih=!qa&&/Apple Computer/.test(wt.vendor),d0=ih&&(/Mobile\/\w+/.test(wt.userAgent)||wt.maxTouchPoints>2);var J={mac:d0||/Mac/.test(wt.platform),windows:/Win/.test(wt.platform),linux:/Linux|X11/.test(wt.platform),ie:qa,ie_version:Tb?th.documentMode||6:rh?+rh[1]:nh?+nh[1]:0,gecko:h0,gecko_version:h0?+(/Firefox\/(\d+)/.exec(wt.userAgent)||[0,0])[1]:0,chrome:!!Pc,chrome_version:Pc?+Pc[1]:0,ios:d0,android:/Android\b/.test(wt.userAgent),webkit_version:rC?+(/\bAppleWebKit\/(\d+)/.exec(wt.userAgent)||[0,0])[1]:0,safari:ih,safari_version:ih?+(/\bVersion\/(\d+(\.\d+)?)/.exec(wt.userAgent)||[0,0])[1]:0,tabSize:th.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function ho(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function sh(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function fu(n,e){if(!e.anchorNode)return!1;try{return sh(n,e.anchorNode)}catch{return!1}}function Xi(n){return n.nodeType==3?ci(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Xs(n,e,t,r){return t?p0(n,e,t,r,-1)||p0(n,e,t,r,1):!1}function ai(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Nu(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function p0(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:jn(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=ai(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?jn(n):0}else return!1}}function jn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Jo(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function iC(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Fb(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function sC(n,e,t,r,i,s,o,l){let u=n.ownerDocument,a=u.defaultView||window;for(let c=n,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==u.body,p=1,m=1;if(d)h=iC(a);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:m}=Fb(c,y)),h={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*m}}let g=0,b=0;if(i=="nearest")e.top<h.top?(b=e.top-(h.top+o),t>0&&e.bottom>h.bottom+b&&(b=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(b=e.bottom-h.bottom+o,t<0&&e.top-b<h.top&&(b=e.top-(h.top+o)));else{let y=e.bottom-e.top,x=h.bottom-h.top;b=(i=="center"&&y<=x?e.top+y/2-x/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-x+o)-h.top}if(r=="nearest"?e.left<h.left?(g=e.left-(h.left+s),t>0&&e.right>h.right+g&&(g=e.right-h.right+s)):e.right>h.right&&(g=e.right-h.right+s,t<0&&e.left<h.left+g&&(g=e.left-(h.left+s))):g=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==l?e.left-s:e.right-(h.right-h.left)+s)-h.left,g||b)if(d)a.scrollBy(g,b);else{let y=0,x=0;if(b){let w=c.scrollTop;c.scrollTop+=b/m,x=(c.scrollTop-w)*m}if(g){let w=c.scrollLeft;c.scrollLeft+=g/p,y=(c.scrollLeft-w)*p}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-g)<1&&(r="nearest"),x&&Math.abs(x-b)<1&&(i="nearest")}if(d)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function oC(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}class lC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?jn(t):0),r,Math.min(e.focusOffset,r?jn(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let Ur=null;J.safari&&J.safari_version>=26&&(Ur=!1);function Pb(n){if(n.setActive)return n.setActive();if(Ur)return n.focus(Ur);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Ur==null?{get preventScroll(){return Ur={preventScroll:!0},!0}}:void 0),!Ur){Ur=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let m0;function ci(n,e,t=e){let r=m0||(m0=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Li(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function uC(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Rb(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function aC(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,jn(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=jn(t))}else{if(t==n)return!0;r=ai(t),t=t.parentNode}}function Ib(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Mb(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=jn(t)}else if(t.parentNode&&!Nu(t))r=ai(t),t=t.parentNode;else return null}}function Bb(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!Nu(t))r=ai(t)+1,t=t.parentNode;else return null}}class gt{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new gt(e.parentNode,ai(e),t)}static after(e,t){return new gt(e.parentNode,ai(e)+1,t)}}const Cd=[];class ve{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let l=ve.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=g0(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=g0(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=jn(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ve.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,l=-1;for(let u=0,a=r,c=r;u<this.children.length;u++){let f=this.children[u],h=a+f.length;if(a<e&&h>t)return f.domBoundsAround(e,t,a);if(h>=e&&i==-1&&(i=u,s=a),a>t&&f.dom.parentNode==this.dom){o=u,l=c;break}c=h,a=h+f.breakAfter}return{from:s,to:l<0?r+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=Cd){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new $b(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ve.prototype.breakAfter=0;function g0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class $b{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Nb(n,e,t,r,i,s,o,l,u){let{children:a}=n,c=a.length?a[e]:null,f=s.length?s[s.length-1]:null,h=f?f.breakAfter:o;if(!(e==r&&c&&!o&&!h&&s.length<2&&c.merge(t,i,s.length?f:null,t==0,l,u))){if(r<a.length){let d=a[r];d&&(i<d.length||d.breakAfter&&(f!=null&&f.breakAfter))?(e==r&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,u)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,u),s.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,t>0&&(!o&&s.length&&c.merge(t,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<r&&s.length;)if(a[r-1].become(s[s.length-1]))r--,s.pop(),u=s.length?0:l;else if(a[e].become(s[0]))e++,s.shift(),l=s.length?0:u;else break;!s.length&&e&&r<a.length&&!a[e-1].breakAfter&&a[r].merge(0,0,a[e-1],!1,l,u)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function Lb(n,e,t,r,i,s){let o=n.childCursor(),{i:l,off:u}=o.findPos(t,1),{i:a,off:c}=o.findPos(e,-1),f=e-t;for(let h of r)f+=h.length;n.length+=f,Nb(n,a,c,l,u,r,0,i,s)}const cC=256;class pn extends ve{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof pn)||this.length-(t-e)+r.length>cC||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new pn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new gt(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return fC(this.dom,e,t)}}class ur extends ve{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(Rb(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof ur&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(Lb(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let l of this.children){let u=r+l.length;u>e&&t.push(r<e?l.split(e-r):l),i<0&&r>=e&&(i=s),r=u,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new ur(this.mark,t,o)}domAtPos(e){return jb(this,e)}coordsAt(e,t){return Vb(this,e,t)}}function fC(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?J.chrome||J.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let l=ci(n,i,s).getClientRects();if(!l.length)return null;let u=l[(o?o<0:t>=0)?0:l.length-1];return J.safari&&!o&&u.width==0&&(u=Array.prototype.find.call(l,a=>a.width)||u),o?Jo(u,o<0):u||null}class yr extends ve{static create(e,t,r){return new yr(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=yr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof yr)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof yr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ge.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):ge.empty}domAtPos(e){return(this.length?e==0:this.side>0)?gt.before(this.dom):gt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?i.length-1:0;s=i[l],!(e>0?l==0:l==i.length-1||s.top<s.bottom);l+=o?-1:1);return Jo(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zi extends ve{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Zi&&e.side==this.side}split(){return new Zi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?gt.before(this.dom):gt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ge.empty}get isHidden(){return!0}}pn.prototype.children=yr.prototype.children=Zi.prototype.children=Cd;function jb(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new gt(t,0)}function qb(n,e,t){let r,{children:i}=n;t>0&&e instanceof ur&&i.length&&(r=i[i.length-1])instanceof ur&&r.mark.eq(e.mark)?qb(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function Vb(n,e,t){let r=null,i=-1,s=null,o=-1;function l(a,c){for(let f=0,h=0;f<a.children.length&&h<=c;f++){let d=a.children[f],p=h+d.length;p>=c&&(d.children.length?l(d,c-h):(!s||s.isHidden&&(t>0||dC(s,d)))&&(p>c||h==p&&d.getSide()>0)?(s=d,o=c-h):(h<c||h==p&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-h)),h=p}}l(n,e);let u=(t<0?r:s)||r||s;return u?u.coordsAt(Math.max(0,u==r?i:o),t):hC(n)}function hC(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Xi(e);return t[t.length-1]||null}function dC(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function oh(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const b0=Object.create(null);function Lu(n,e,t){if(n==e)return!0;n||(n=b0),e||(e=b0);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function lh(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function pC(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Hn{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Et=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Et||(Et={}));class te extends ui{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Yo(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Tr(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=zb(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Tr(e,r,i,t,e.widget||null,!0)}static line(e){return new Qo(e)}static set(e,t=!1){return me.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}te.none=me.empty;class Yo extends te{constructor(e){let{start:t,end:r}=zb(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof Yo&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Lu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Yo.prototype.point=!1;class Qo extends te{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Qo&&this.spec.class==e.spec.class&&Lu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Qo.prototype.mapMode=ht.TrackBefore;Qo.prototype.point=!0;class Tr extends te{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?ht.TrackBefore:ht.TrackAfter:ht.TrackDel}get type(){return this.startSide!=this.endSide?Et.WidgetRange:this.startSide<=0?Et.WidgetBefore:Et.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Tr&&mC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Tr.prototype.point=!0;function zb(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function mC(n,e){return n==e||!!(n&&e&&n.compare(e))}function hu(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Ye extends ve{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof Ye))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Lb(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new Ye;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Lu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){qb(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=oh(t,this.attrs||{})),r&&(this.attrs=oh({class:r},this.attrs||{}))}domAtPos(e){return jb(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(Rb(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(lh(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&ve.get(i)instanceof ur;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ve.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!J.ios||!this.children.some(s=>s instanceof pn))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof pn)||/[^ -~]/.test(r.text))return null;let i=Xi(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Vb(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ye&&this.children.length==0&&e.children.length==0&&Lu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof Ye)return s;if(o>t)break}i=o+s.breakAfter}return null}}class ir extends ve{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof ir)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?gt.before(this.dom):gt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new ir(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Cd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ge.empty}domBoundsAround(){return null}become(e){return e instanceof ir&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof uh?null:Jo(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class uh extends Hn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Zs{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ir&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ye),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Dl(new Zi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ir)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Dl(new pn(this.text.slice(this.textOff,this.textOff+s)),t),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:t.length}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Tr){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(r instanceof Tr)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ir(r.widget||es.block,l,r));else{let u=yr.create(r.widget||es.inline,l,l?0:r.startSide),a=this.atCursorPos&&!u.isEditable&&s<=i.length&&(e<t||r.startSide>0),c=!u.isEditable&&(e<t||s>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!a&&!u.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),a&&(f.append(Dl(new Zi(1),i),s),s=i.length+Math.max(0,s-i.length)),f.append(Dl(u,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new Zs(e,t,r,s);return o.openEnd=me.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Dl(n,e){for(let t of e)n=new ur(t,[n],n.length);return n}class es extends Hn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}es.inline=new es("span");es.block=new es("div");var Te=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Te||(Te={}));const fi=Te.LTR,_d=Te.RTL;function Ub(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const gC=Ub("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),bC=Ub("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ah=Object.create(null),wn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);ah[e]=t,ah[t]=-e}function Hb(n){return n<=247?gC[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?bC[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const yC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class xr{get dir(){return this.level%2?_d:fi}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==r)return o;(s<0||(i!=0?i<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Wb(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!Wb(r.inner,i.inner))return!1}return!0}const we=[];function xC(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,l=s<r.length?r[s].from:t,u=s?256:i;for(let a=o,c=u,f=u;a<l;a++){let h=Hb(n.charCodeAt(a));h==512?h=c:h==8&&f==4&&(h=16),we[a]=h==4?2:h,h&7&&(f=h),c=h}for(let a=o,c=u,f=u;a<l;a++){let h=we[a];if(h==128)a<l-1&&c==we[a+1]&&c&24?h=we[a]=c:we[a]=256;else if(h==64){let d=a+1;for(;d<l&&we[d]==64;)d++;let p=a&&c==8||d<t&&we[d]==8?f==1?1:8:256;for(let m=a;m<d;m++)we[m]=p;a=d-1}else h==8&&f==1&&(we[a]=1);c=h,h&7&&(f=h)}}}function vC(n,e,t,r,i){let s=i==1?2:1;for(let o=0,l=0,u=0;o<=r.length;o++){let a=o?r[o-1].to:e,c=o<r.length?r[o].from:t;for(let f=a,h,d,p;f<c;f++)if(d=ah[h=n.charCodeAt(f)])if(d<0){for(let m=l-3;m>=0;m-=3)if(wn[m+1]==-d){let g=wn[m+2],b=g&2?i:g&4?g&1?s:i:0;b&&(we[f]=we[wn[m]]=b),l=m;break}}else{if(wn.length==189)break;wn[l++]=f,wn[l++]=h,wn[l++]=u}else if((p=we[f])==2||p==1){let m=p==i;u=m?0:1;for(let g=l-3;g>=0;g-=3){let b=wn[g+2];if(b&2)break;if(m)wn[g+2]|=2;else{if(b&4)break;wn[g+2]|=4}}}}}function kC(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,l=i<t.length?t[i].from:e;for(let u=o;u<l;){let a=we[u];if(a==256){let c=u+1;for(;;)if(c==l){if(i==t.length)break;c=t[i++].to,l=i<t.length?t[i].from:e}else if(we[c]==256)c++;else break;let f=s==1,h=(c<e?we[c]:r)==1,d=f==h?f?1:2:r;for(let p=c,m=i,g=m?t[m-1].to:n;p>u;)p==g&&(p=t[--m].from,g=m?t[m-1].to:n),we[--p]=d;u=c}else s=a,u++}}}function ch(n,e,t,r,i,s,o){let l=r%2?2:1;if(r%2==i%2)for(let u=e,a=0;u<t;){let c=!0,f=!1;if(a==s.length||u<s[a].from){let m=we[u];m!=l&&(c=!1,f=m==16)}let h=!c&&l==1?[]:null,d=c?r:r+1,p=u;e:for(;;)if(a<s.length&&p==s[a].from){if(f)break e;let m=s[a];if(!c)for(let g=m.to,b=a+1;;){if(g==t)break e;if(b<s.length&&s[b].from==g)g=s[b++].to;else{if(we[g]==l)break e;break}}if(a++,h)h.push(m);else{m.from>u&&o.push(new xr(u,m.from,d));let g=m.direction==fi!=!(d%2);fh(n,g?r+1:r,i,m.inner,m.from,m.to,o),u=m.to}p=m.to}else{if(p==t||(c?we[p]!=l:we[p]==l))break;p++}h?ch(n,u,p,r+1,i,h,o):u<p&&o.push(new xr(u,p,d)),u=p}else for(let u=t,a=s.length;u>e;){let c=!0,f=!1;if(!a||u>s[a-1].to){let m=we[u-1];m!=l&&(c=!1,f=m==16)}let h=!c&&l==1?[]:null,d=c?r:r+1,p=u;e:for(;;)if(a&&p==s[a-1].to){if(f)break e;let m=s[--a];if(!c)for(let g=m.from,b=a;;){if(g==e)break e;if(b&&s[b-1].to==g)g=s[--b].from;else{if(we[g-1]==l)break e;break}}if(h)h.push(m);else{m.to<u&&o.push(new xr(m.to,u,d));let g=m.direction==fi!=!(d%2);fh(n,g?r+1:r,i,m.inner,m.from,m.to,o),u=m.from}p=m.from}else{if(p==e||(c?we[p-1]!=l:we[p-1]==l))break;p--}h?ch(n,p,u,r+1,i,h,o):p<u&&o.push(new xr(p,u,d)),u=p}}function fh(n,e,t,r,i,s,o){let l=e%2?2:1;xC(n,i,s,r,l),vC(n,i,s,r,l),kC(i,s,r,l),ch(n,i,s,e,t,r,o)}function wC(n,e,t){if(!n)return[new xr(0,0,e==_d?1:0)];if(e==fi&&!t.length&&!yC.test(n))return Gb(n.length);if(t.length)for(;n.length>we.length;)we[we.length]=256;let r=[],i=e==fi?0:1;return fh(n,i,i,t,0,n.length,r),r}function Gb(n){return[new xr(0,n,0)]}let Kb="";function DC(n,e,t,r,i){var s;let o=r.head-n.from,l=xr.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),u=e[l],a=u.side(i,t);if(o==a){let h=l+=i?1:-1;if(h<0||h>=e.length)return null;u=e[l=h],o=u.side(!i,t),a=u.side(i,t)}let c=dt(n.text,o,u.forward(i,t));(c<u.from||c>u.to)&&(c=a),Kb=n.text.slice(Math.min(o,c),Math.max(o,c));let f=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return f&&c==a&&f.level+(i?0:1)<u.level?I.cursor(f.side(!i,t)+n.from,f.forward(i,t)?1:-1,f.level):I.cursor(c+n.from,u.forward(i,t)?-1:1,u.level)}function AC(n,e,t){for(let r=e;r<t;r++){let i=Hb(n.charCodeAt(r));if(i==1)return fi;if(i==2||i==4)return _d}return fi}const Jb=Q.define(),Yb=Q.define(),Qb=Q.define(),Xb=Q.define(),hh=Q.define(),Zb=Q.define(),ey=Q.define(),Sd=Q.define(),Ed=Q.define(),ty=Q.define({combine:n=>n.some(e=>e)}),ny=Q.define({combine:n=>n.some(e=>e)}),ry=Q.define();class ji{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new ji(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ji(I.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Al=re.define({map:(n,e)=>n.map(e)}),iy=re.define();function St(n,e,t){let r=n.facet(Xb);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Qn=Q.define({combine:n=>n.length?n[0]:!0});let CC=0;const Oi=Q.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class qe{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Oi.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Oi.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new qe(CC++,e,r,i,l=>{let u=[];return o&&u.push(po.of(a=>{let c=a.plugin(l);return c?o(c):te.none})),s&&u.push(s(l)),u})}static fromClass(e,t){return qe.define((r,i)=>new e(r,i),t)}}class Rc{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(St(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){St(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){St(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const sy=Q.define(),Od=Q.define(),po=Q.define(),oy=Q.define(),Xo=Q.define(),ly=Q.define();function y0(n,e){let t=n.state.facet(ly);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return me.spans(r,e.from,e.to,{point(){},span(s,o,l,u){let a=s-e.from,c=o-e.from,f=i;for(let h=l.length-1;h>=0;h--,u--){let d=l[h].spec.bidiIsolate,p;if(d==null&&(d=AC(e.text,a,c)),u>0&&f.length&&(p=f[f.length-1]).to==a&&p.direction==d)p.to=c,f=p.inner;else{let m={from:a,to:c,direction:d,inner:[]};f.push(m),f=m.inner}}}}),i}const uy=Q.define();function Td(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(uy)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const Vs=Q.define();class tn{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new tn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,l=0;;i++){let u=i==e.length?null:e[i],a=o-l,c=u?u.fromB:1e9;for(;s<t.length&&t[s]<c;){let f=t[s],h=t[s+1],d=Math.max(l,f),p=Math.min(c,h);if(d<=p&&new tn(d+a,p+a,d,p).addToSet(r),h>c)break;s+=2}if(!u)return r;new tn(u.fromA,u.toA,u.fromB,u.toB).addToSet(r),o=u.toA,l=u.toB}}}class ju{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=nt.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,l,u)=>i.push(new tn(s,o,l,u))),this.changedRanges=i}static create(e,t,r){return new ju(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class x0 extends ve{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=te.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ye],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new tn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:a,toA:c})=>c<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!PC(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?SC(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:a,to:c}=this.hasComposition;r=new tn(a,c,e.changes.mapPos(a,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(J.ie||J.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),u=TC(o,l,e.changes);return r=tn.extendWithRanges(r,u),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=J.chrome||J.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ir&&o.widget instanceof uh&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let l=o>=0?i[o]:null;if(!l)break;let{fromA:u,toA:a,fromB:c,toB:f}=l,h,d,p,m;if(r&&r.range.fromB<f&&r.range.toB>c){let w=Zs.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),D=Zs.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);d=w.breakAtStart,p=w.openStart,m=D.openEnd;let A=this.compositionView(r);D.breakAtStart?A.breakAfter=1:D.content.length&&A.merge(A.length,A.length,D.content[0],!1,D.openStart,0)&&(A.breakAfter=D.content[0].breakAfter,D.content.shift()),w.content.length&&A.merge(0,0,w.content[w.content.length-1],!0,0,w.openEnd)&&w.content.pop(),h=w.content.concat(A).concat(D.content)}else({content:h,breakAtStart:d,openStart:p,openEnd:m}=Zs.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:g,off:b}=s.findPos(a,1),{i:y,off:x}=s.findPos(u,-1);Nb(this,y,x,g,b,h,d,p,m)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(iy)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new pn(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new ur(i,[t],t.length);let r=new Ye;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(u=>u.flags&7)?1:0),this.markedForComposition.add(o);let l=ve.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(Qn)||this.dom.tabIndex>-1)&&fu(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,u=this.moveToLine(this.domAtPos(l.anchor)),a=l.empty?u:this.moveToLine(this.domAtPos(l.head));if(J.gecko&&l.empty&&!this.hasComposition&&_C(u)){let f=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(f,u.node.childNodes[u.offset]||null)),u=a=new gt(f,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!Xs(u.node,u.offset,c.anchorNode,c.anchorOffset)||!Xs(a.node,a.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{J.android&&J.chrome&&this.dom.contains(c.focusNode)&&FC(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=ho(this.view.root);if(f)if(l.empty){if(J.gecko){let h=EC(u.node,u.offset);if(h&&h!=3){let d=(h==1?Mb:Bb)(u.node,u.offset);d&&(u=new gt(d.node,d.offset))}}f.collapse(u.node,u.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(u.node,u.offset);try{f.extend(a.node,a.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([u,a]=[a,u]),h.setEnd(a.node,a.offset),h.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(u,a)),this.impreciseAnchor=u.precise?null:new gt(c.anchorNode,c.anchorOffset),this.impreciseHead=a.precise?null:new gt(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Xs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=ho(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=Ye.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let u=this.coordsAt(t.head,-1),a=this.coordsAt(t.head,1);if(!u||!a||u.bottom>a.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=ve.get(t.childNodes[i]);s instanceof Ye&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ve.get(t.childNodes[i]);s instanceof Ye&&(r=s.domAtPos(s.length))}return r?new gt(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=ve.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof Ye)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],u=s-l.breakAfter,a=u-l.length;if(u<e)break;if(a<=e&&(a<e||l.covers(-1))&&(u>e||l.covers(1))&&(!r||l instanceof Ye&&!(r instanceof Ye&&t>=0)))r=l,i=a;else if(r&&a==e&&u==e&&l instanceof ir&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(r=null)}s=a}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Ye))return null;for(;i.children.length;){let{i:l,off:u}=i.childPos(r,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}r=u}if(!(i instanceof pn))return null;let s=dt(i.text,r);if(s==r)return null;let o=ci(i.dom,r,s).getClientRects();for(let l=0;l<o.length;l++){let u=o[l];if(l==o.length-1||u.top<u.bottom&&u.left<u.right)return u}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,u=this.view.textDirection==Te.LTR;for(let a=0,c=0;c<this.children.length;c++){let f=this.children[c],h=a+f.length;if(h>i)break;if(a>=r){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let p=f.dom.lastChild,m=p?Xi(p):[];if(m.length){let g=m[m.length-1],b=u?g.right-d.left:d.right-g.left;b>l&&(l=b,this.minWidth=s,this.minWidthFrom=a,this.minWidthTo=h)}}}a=h+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Te.RTL:Te.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ye){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Xi(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new $b(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(te.replace({widget:new uh(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return te.set(e)}updateDeco(){let e=1,t=this.view.state.facet(po).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(oy).map((s,o)=>{let l=typeof s=="function";return l&&(r=!0),l?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(me.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let a=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=a.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let a of this.view.state.facet(ry))try{if(a(this.view,e.range,e))return!0}catch(c){St(this.view.state,c,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Td(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:l,offsetHeight:u}=this.view.scrollDOM;sC(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==Te.LTR)}}function _C(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function ay(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Mb(t.focusNode,t.focusOffset),i=Bb(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let l=ve.get(i.node);if(!l||l instanceof pn&&l.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let u=ve.get(r.node);!u||u instanceof pn&&u.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function SC(n,e,t){let r=ay(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,l=i.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(r.from,r.to)!=l)return null;let u=e.invertedDesc,a=new tn(u.mapPos(s),u.mapPos(o),s,o),c=[];for(let f=i.parentNode;;f=f.parentNode){let h=ve.get(f);if(h instanceof ur)c.push({node:f,deco:h.mark});else{if(h instanceof Ye||f.nodeName=="DIV"&&f.parentNode==n.contentDOM)return{range:a,text:i,marks:c,line:f};if(f!=n.contentDOM)c.push({node:f,deco:new Yo({inclusive:!0,attributes:pC(f),tagName:f.tagName.toLowerCase()})});else return null}}}function EC(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let OC=class{constructor(){this.changes=[]}compareRange(e,t){hu(e,t,this.changes)}comparePoint(e,t){hu(e,t,this.changes)}boundChange(e){hu(e,e,this.changes)}};function TC(n,e,t){let r=new OC;return me.compare(n,e,t,r),r.changes}function FC(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function PC(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function RC(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return I.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,l=s;t<0?o=dt(i.text,s,!1):l=dt(i.text,s);let u=r(i.text.slice(o,l));for(;o>0;){let a=dt(i.text,o,!1);if(r(i.text.slice(a,o))!=u)break;o=a}for(;l<i.length;){let a=dt(i.text,l);if(r(i.text.slice(l,a))!=u)break;l=a}return I.range(o+i.from,l+i.from)}function IC(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function MC(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Ic(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function v0(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function k0(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function dh(n,e,t){let r,i,s,o,l=!1,u,a,c,f;for(let p=n.firstChild;p;p=p.nextSibling){let m=Xi(p);for(let g=0;g<m.length;g++){let b=m[g];i&&Ic(i,b)&&(b=v0(k0(b,i.bottom),i.top));let y=IC(e,b),x=MC(t,b);if(y==0&&x==0)return p.nodeType==3?w0(p,e,t):dh(p,e,t);(!r||o>x||o==x&&s>y)&&(r=p,i=b,s=y,o=x,l=y?e<b.left?g>0:g<m.length-1:!0),y==0?t>b.bottom&&(!c||c.bottom<b.bottom)?(u=p,c=b):t<b.top&&(!f||f.top>b.top)&&(a=p,f=b):c&&Ic(c,b)?c=k0(c,b.bottom):f&&Ic(f,b)&&(f=v0(f,b.top))}}if(c&&c.bottom>=t?(r=u,i=c):f&&f.top<=t&&(r=a,i=f),!r)return{node:n,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return w0(r,h,t);if(l&&r.contentEditable!="false")return dh(r,h,t);let d=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:d}}function w0(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let l=0;l<r;l++){let u=ci(n,l,l+1).getClientRects();for(let a=0;a<u.length;a++){let c=u[a];if(c.top==c.bottom)continue;o||(o=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<s){let h=e>=(c.left+c.right)/2,d=h;if((J.chrome||J.gecko)&&ci(n,l).getBoundingClientRect().left==c.right&&(d=!h),f<=0)return{node:n,offset:l+(d?1:0)};i=l+(d?1:0),s=f}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function cy(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,u,{docHeight:a}=n.viewState,{x:c,y:f}=e,h=f-l;if(h<0)return 0;if(h>a)return n.state.doc.length;for(let w=n.viewState.heightOracle.textHeight/2,D=!1;u=n.elementAtHeight(h),u.type!=Et.Text;)for(;h=r>0?u.bottom+w:u.top-w,!(h>=0&&h<=a);){if(D)return t?null:0;D=!0,r=-r}f=l+h;let d=u.from;if(d<n.viewport.from)return n.viewport.from==0?0:t?null:D0(n,o,u,c,f);if(d>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:D0(n,o,u,c,f);let p=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:p,g=m.elementFromPoint(c,f);g&&!n.contentDOM.contains(g)&&(g=null),g||(c=Math.max(o.left+1,Math.min(o.right-1,c)),g=m.elementFromPoint(c,f),g&&!n.contentDOM.contains(g)&&(g=null));let b,y=-1;if(g&&((i=n.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let w=p.caretPositionFromPoint(c,f);w&&({offsetNode:b,offset:y}=w)}else if(p.caretRangeFromPoint){let w=p.caretRangeFromPoint(c,f);w&&({startContainer:b,startOffset:y}=w)}b&&(!n.contentDOM.contains(b)||J.safari&&BC(b,y,c)||J.chrome&&$C(b,y,c))&&(b=void 0),b&&(y=Math.min(jn(b),y))}if(!b||!n.docView.dom.contains(b)){let w=Ye.find(n.docView,d);if(!w)return h>u.top+u.height/2?u.to:u.from;({node:b,offset:y}=dh(w.dom,c,f))}let x=n.docView.nearest(b);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let w=x.dom.getBoundingClientRect();return e.y<w.top||e.y<=w.bottom&&e.x<=(w.left+w.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(b,y)+x.posAtStart}function D0(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,u=Math.floor((i-t.top-(n.defaultLineHeight-l)*.5)/l);s+=u*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+Xf(o,s,n.state.tabSize)}function fy(n,e,t){let r,i=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return ci(n,r-1,r).getBoundingClientRect().right>t}function BC(n,e,t){return fy(n,e,t)}function $C(n,e,t){if(e!=0)return fy(n,e,t);for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():ci(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function ph(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Et.Text&&(i.type!=s.type||(t<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function NC(n,e,t,r){let i=ph(n,e.head,e.assoc||-1),s=!r||i.type!=Et.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(i.from),u=n.posAtCoords({x:t==(l==Te.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(u!=null)return I.cursor(u,t?-1:1)}return I.cursor(t?i.to:i.from,t?-1:1)}function A0(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let l=e,u=null;;){let a=DC(i,s,o,l,t),c=Kb;if(!a){if(i.number==(t?n.state.doc.lines:1))return l;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),a=n.visualLineSide(i,!t)}if(u){if(!u(c))return l}else{if(!r)return a;u=r(c)}l=a}}function LC(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==Me.Space&&(i=o),i==o}}function jC(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return I.cursor(i,e.assoc);let o=e.goalColumn,l,u=n.contentDOM.getBoundingClientRect(),a=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(a)o==null&&(o=a.left-u.left),l=s<0?a.top:a.bottom;else{let d=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(u.right-u.left,n.defaultCharacterWidth*(i-d.from))),l=(s<0?d.top:d.bottom)+c}let f=u.left+o,h=r??n.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=l+(h+d)*s,m=cy(n,{x:f,y:p},!1,s);if(p<u.top||p>u.bottom||(s<0?m<i:m>i)){let g=n.docView.coordsForChar(m),b=!g||p<g.top?-1:1;return I.cursor(m,b,void 0,o)}}}function eo(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let u=r||t||(e-s<o-e?-1:1);e=u<0?s:o,r=u}});if(!r)return e}}function hy(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=eo(n,i.from,0);o!=i.from&&(s=I.cursor(o,-1))}else{let o=eo(n,i.from,-1),l=eo(n,i.to,1);(o!=i.from||l!=i.to)&&(s=I.range(i.from==i.anchor?o:l,i.from==i.head?o:l))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?I.create(t,e.mainIndex):e}function Mc(n,e,t){let r=eo(n.state.facet(Xo).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:I.cursor(r,r<t.from?1:-1)}const zs="";class qC{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(he.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=zs}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let l=ve.get(i),u=ve.get(o);(l&&u?l.breakAfter:(l?l.breakAfter:Nu(i))||Nu(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&!zC(o,t)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(l=i.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=ve.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(VC(e,r.node,r.offset)?t:0))}}function VC(n,e,t){for(;;){if(!e||t<jn(e))return!1;if(e==n)return!0;t=ai(e)+1,e=e.parentNode}}function zC(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=ve.get(n);if(!(r!=null&&r.isWidget||n.cmIgnore))return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let i=r.overrideDOMText;if(i!=null&&i.length)return!1}return!0}class C0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class UC{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let l=s||o?[]:WC(e),u=new qC(l,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=GC(l,this.bounds.from)}else{let l=e.observer.selectionRange,u=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!sh(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),a=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!sh(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((J.ios||J.chrome)&&e.state.selection.main.empty&&u!=a&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(u,a),h=Math.max(u,a),d=c.from-f,p=c.to-h;(d==0||d==1||f==0)&&(p==0||p==-1||h==e.state.doc.length)&&(u=0,a=e.state.doc.length)}this.newSel=I.single(a,u)}}}function dy(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,u=i.from,a=null;(s===8||J.android&&e.text.length<l-o)&&(u=i.to,a="end");let c=py(n.state.doc.sliceString(o,l,zs),e.text,u-o,a);c&&(J.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==zs+zs&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:ge.of(e.text.slice(c.from,c.toB).split(zs))})}else r&&(!n.hasFocus&&n.state.facet(Qn)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(J.mac||J.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=I.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:ge.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:J.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=I.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:ge.of([" "])}),t)return Fd(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin,l=="select.pointer"&&(r=hy(n.state.facet(Xo).map(u=>u(n)),r))),n.dispatch({selection:r,scrollIntoView:o,userEvent:l}),!0}else return!1}function Fd(n,e,t,r=-1){if(J.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(J.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Li(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Li(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Li(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,l=()=>o||(o=HC(n,e,t));return n.state.facet(Zb).some(u=>u(n,e.from,e.to,s,l))||n.dispatch(l()),!0}function HC(n,e,t){let r,i=n.state,s=i.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let u=e.from<s.from?-1:1,a=u<0?s.from:s.to,c=eo(i.facet(Xo).map(f=>f(n)),a,u);e.from==c&&(o=c)}if(o>-1)r={changes:e,selection:I.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let u=s.from<e.from?i.sliceDoc(s.from,e.from):"",a=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(u+e.insert.sliceString(0,void 0,n.state.lineBreak)+a))}else{let u=i.changes(e),a=t&&t.main.to<=u.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=n.state.sliceDoc(e.from,e.to),f,h=t&&ay(n,t.main.head);if(h){let m=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-m}}else f=n.state.doc.lineAt(s.head);let d=s.to-e.to,p=s.to-s.from;r=i.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:u,range:a||m.map(u)};let g=m.to-d,b=g-c.length;if(m.to-m.from!=p||n.state.sliceDoc(b,g)!=c||m.to>=f.from&&m.from<=f.to)return{range:m};let y=i.changes({from:b,to:g,insert:e.insert}),x=m.to-s.to;return{changes:y,range:a?I.range(Math.max(0,a.anchor+x),Math.max(0,a.head+x)):m.map(y)}})}else r={changes:u,selection:a&&i.selection.replaceRange(a)}}let l="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,l+=".compose",n.inputState.compositionFirstChange&&(l+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:l,scrollIntoView:!0})}function py(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(r=="end"){let u=Math.max(0,s-Math.min(o,l));t-=o+u-s}if(o<s&&n.length<e.length){let u=t<=s&&t>=o?s-t:0;s-=u,l=s+(l-o),o=s}else if(l<s){let u=t<=s&&t>=l?s-t:0;s-=u,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function WC(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new C0(t,r)),(i!=t||s!=r)&&e.push(new C0(i,s))),e}function GC(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?I.single(t+e,r+e):null}class KC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,J.safari&&e.contentDOM.addEventListener("input",()=>null),J.gecko&&c_(e.contentDOM.ownerDocument)}handleEvent(e){!n_(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=JC(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=r[s];l&&o!=!l.handlers.length&&(i.removeEventListener(s,this.handleEvent),l=null),l||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&gy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),J.android&&J.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return J.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=my.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||YC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Li(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:J.safari&&!J.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function _0(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){St(t.state,i)}}}function JC(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let l in s){let u=s[l];u&&t(l).handlers.push(_0(r.value,u))}if(o)for(let l in o){let u=o[l];u&&t(l).observers.push(_0(r.value,u))}}for(let r in mn)t(r).handlers.push(mn[r]);for(let r in on)t(r).observers.push(on[r]);return e}const my=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],YC="dthko",gy=[16,17,18,20,91,92,224,225],Cl=6;function _l(n){return Math.max(0,n)*.7+8}function QC(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class XC{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=oC(e.contentDOM),this.atoms=e.state.facet(Xo).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(he.allowMultipleSelections)&&ZC(e,t),this.dragging=t_(e,t)&&xy(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&QC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let u=Td(this.view);e.clientX-u.left<=i+Cl?t=-_l(i-e.clientX):e.clientX+u.right>=o-Cl&&(t=_l(e.clientX-o)),e.clientY-u.top<=s+Cl?r=-_l(s-e.clientY):e.clientY+u.bottom>=l-Cl&&(r=_l(e.clientY-l)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=hy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ZC(n,e){let t=n.state.facet(Jb);return t.length?t[0](e):J.mac?e.metaKey:e.ctrlKey}function e_(n,e){let t=n.state.facet(Yb);return t.length?t[0](e):J.mac?!e.altKey:!e.ctrlKey}function t_(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=ho(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function n_(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=ve.get(t))&&r.ignoreEvent(e))return!1;return!0}const mn=Object.create(null),on=Object.create(null),by=J.ie&&J.ie_version<15||J.ios&&J.webkit_version<604;function r_(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),yy(n,t.value)},50)}function Va(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function yy(n,e){e=Va(n.state,Sd,e);let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(mh!=null&&t.selection.ranges.every(u=>u.empty)&&mh==s.toString()){let u=-1;r=t.changeByRange(a=>{let c=t.doc.lineAt(a.from);if(c.from==u)return{range:a};u=c.from;let f=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:I.cursor(a.from+f.length)}})}else o?r=t.changeByRange(u=>{let a=s.line(i++);return{changes:{from:u.from,to:u.to,insert:a.text},range:I.cursor(u.from+a.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}on.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};mn.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);on.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};on.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};mn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(Qb))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=o_(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new XC(n,e,t,r)),r&&n.observer.ignore(()=>{Pb(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function S0(n,e,t,r){if(r==1)return I.cursor(e,t);if(r==2)return RC(n.state,e,t);{let i=Ye.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,l=i?i.posAtEnd:s.to;return l<n.state.doc.length&&l==s.to&&l++,I.range(o,l)}}let E0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function i_(n,e,t,r){let i=Ye.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&E0(t,r,o))return-1;let l=i.coordsAt(s,1);return l&&E0(t,r,l)?1:o&&o.bottom>=r?-1:1}function O0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:i_(n,t,e.clientX,e.clientY)}}const s_=J.ie&&J.ie_version<=11;let T0=null,F0=0,P0=0;function xy(n){if(!s_)return n.detail;let e=T0,t=P0;return T0=n,P0=Date.now(),F0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(F0+1)%3:1}function o_(n,e){let t=O0(n,e),r=xy(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,l){let u=O0(n,s),a,c=S0(n,u.pos,u.bias,r);if(t.pos!=u.pos&&!o){let f=S0(n,t.pos,t.bias,r),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?I.range(h,d):I.range(d,h)}return o?i.replaceRange(i.main.extend(c.from,c.to)):l&&r==1&&i.ranges.length>1&&(a=l_(i,u.pos))?a:l?i.addRange(c):I.create([c])}}}function l_(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return I.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}mn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=I.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Va(n.state,Ed,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};mn.dragend=n=>(n.inputState.draggedContent=null,!1);function R0(n,e,t,r){if(t=Va(n.state,Sd,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&e_(n,e)?{from:s.from,to:s.to}:null,l={from:i,insert:t},u=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}mn.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&R0(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return R0(n,e,r,!0),!0}return!1};mn.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=by?null:e.clipboardData;return t?(yy(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(r_(n),!1)};function u_(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function a_(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Va(n,Ed,e.join(n.lineBreak)),ranges:t,linewise:r}}let mh=null;mn.copy=mn.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=a_(n.state);if(!t&&!i)return!1;mh=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=by?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(u_(n,t),!1)};const vy=cr.define();function ky(n,e){let t=[];for(let r of n.facet(ey)){let i=r(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:vy.of(!0)}):null}function wy(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=ky(n.state,e);t?n.dispatch(t):n.update([])}},10)}on.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),wy(n)};on.blur=n=>{n.observer.clearSelectionRange(),wy(n)};on.compositionstart=on.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};on.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,J.chrome&&J.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};on.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};mn.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],u=n.posAtDOM(l.startContainer,l.startOffset),a=n.posAtDOM(l.endContainer,l.endOffset);return Fd(n,{from:u,to:a,insert:n.state.toText(s)},null),!0}}let i;if(J.chrome&&J.android&&(i=my.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return J.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),J.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>on.compositionend(n,e),20),!1};const I0=new Set;function c_(n){I0.has(n)||(I0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const M0=["pre-wrap","normal","pre-line","break-spaces"];let ts=!1;function B0(){ts=!1}class f_{constructor(e){this.lineWrapping=e,this.doc=ge.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return M0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let l=M0.indexOf(e)>-1,u=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,u){this.heightSamples={};for(let a=0;a<o.length;a++){let c=o[a];c<0?a++:this.heightSamples[Math.floor(c*10)]=!0}}return u}}class h_{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Fn{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Et.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Tr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Fn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Oe=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Oe||(Oe={}));const du=.001;class Ot{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>du&&(ts=!0),this.height=e)}replace(e,t,r){return Ot.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let l=i.length-1;l>=0;l--){let{fromA:u,toA:a,fromB:c,toB:f}=i[l],h=s.lineAt(u,Oe.ByPosNoHeight,r.setDoc(t),0,0),d=h.to>=a?h:s.lineAt(a,Oe.ByPosNoHeight,r,0,0);for(f+=d.to-a,a=d.to;l>0&&h.from<=i[l-1].toA;)u=i[l-1].fromA,c=i[l-1].fromB,l--,u<h.from&&(h=s.lineAt(u,Oe.ByPosNoHeight,r,0,0));c+=h.from-u,u=h.from;let p=Pd.build(r.setDoc(o),e,c,f);s=qu(s,s.replace(u,a,p))}return s.updateHeight(r,0)}static empty(){return new Ut(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),r+=1+l.break,i-=l.size}else if(s>i*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,s-=l.size}else break;else if(i<s){let l=e[t++];l&&(i+=l.size)}else{let l=e[--r];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new d_(Ot.of(e.slice(0,t)),o,Ot.of(e.slice(r)))}}function qu(n,e){return n==e?n:(n.constructor!=e.constructor&&(ts=!0),e)}Ot.prototype.size=1;class Dy extends Ot{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new Fn(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ut extends Dy{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new Fn(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Ut||i instanceof ct&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof ct?i=new Ut(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ot.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ct extends Ot{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,l=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*s);o=u/s,this.length>s+1&&(l=(this.height-u)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:l}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:l,perChar:u}=this.heightMetrics(t,i);if(t.lineWrapping){let a=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=t.doc.lineAt(a),f=l+c.length*u,h=Math.max(r,e-f/2);return new Fn(c.from,c.length,h,f,0)}else{let a=Math.max(0,Math.min(o-s,Math.floor((e-r)/l))),{from:c,length:f}=t.doc.line(s+a);return new Fn(c,f,r+l*a,l,0)}}lineAt(e,t,r,i,s){if(t==Oe.ByHeight)return this.blockAt(e,r,i,s);if(t==Oe.ByPosNoHeight){let{from:d,to:p}=r.doc.lineAt(e);return new Fn(d,p-d,0,0,0)}let{firstLine:o,perLine:l,perChar:u}=this.heightMetrics(r,s),a=r.doc.lineAt(e),c=l+a.length*u,f=a.number-o,h=i+l*f+u*(a.from-s-f);return new Fn(a.from,a.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:u,perChar:a}=this.heightMetrics(r,s);for(let c=e,f=i;c<=t;){let h=r.doc.lineAt(c);if(c==e){let p=h.number-l;f+=u*p+a*(e-s-p)}let d=u+a*h.length;o(new Fn(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof ct?r[r.length-1]=new ct(s.length+i):r.push(null,new ct(i-1))}if(e>0){let s=r[0];s instanceof ct?r[0]=new ct(e+s.length):r.unshift(new ct(e-1),null)}return Ot.of(r)}decomposeLeft(e,t){t.push(new ct(e-1),null)}decomposeRight(e,t){t.push(null,new ct(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],l=Math.max(t,i.from),u=-1;for(i.from>t&&o.push(new ct(i.from-t-1).updateHeight(e,t));l<=s&&i.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let f=i.heights[i.index++];u==-1?u=f:Math.abs(f-u)>=du&&(u=-2);let h=new Ut(c,f);h.outdated=!1,o.push(h),l+=c+1}l<=s&&o.push(null,new ct(s-l).updateHeight(e,l));let a=Ot.of(o);return(u<0||Math.abs(a.height-this.height)>=du||Math.abs(u-this.heightMetrics(e,t).perLine)>=du)&&(ts=!0),qu(this,a)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class d_ extends Ot{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,l=s+this.left.length+this.break,u=t==Oe.ByHeight?e<o:e<l,a=u?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,l);if(this.break||(u?a.to<l:a.from>l))return a;let c=t==Oe.ByPosNoHeight?Oe.ByPosNoHeight:Oe.ByPos;return u?a.join(this.right.lineAt(l,c,r,o,l)):this.left.lineAt(l,c,r,i,s).join(a)}forEachLine(e,t,r,i,s,o){let l=i+this.left.height,u=s+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,r,i,s,o),t>=u&&this.right.forEachLine(e,t,r,l,u,o);else{let a=this.lineAt(u,Oe.ByPos,r,i,s);e<a.from&&this.left.forEachLine(e,a.from-1,r,i,s,o),a.to>=e&&a.from<=t&&o(a),t>a.to&&this.right.forEachLine(a.to+1,t,r,l,u,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of r)s.push(l);if(e>0&&$0(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),$0(s,l)}return Ot.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ot.of(this.break?[e,null,t]:[e,t]):(this.left=qu(this.left,e),this.right=qu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,l=t+s.length+this.break,u=null;return i&&i.from<=t+s.length&&i.more?u=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=l+o.length&&i.more?u=o=o.updateHeight(e,l,r,i):o.updateHeight(e,l,r),u?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function $0(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof ct&&(r=n[e+1])instanceof ct&&n.splice(e-1,3,new ct(t.length+1+r.length))}const p_=5;class Pd{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ut?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ut(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new Dy(o,i,r)):(o||s||i>=p_)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ut(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new ct(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ut)return e;let t=new Ut(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ut)&&!this.isCovered?this.nodes.push(new Ut(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Ut&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new Pd(r,e);return me.spans(t,r,i,s,0),s.finish(r)}}function m_(n,e,t){let r=new g_;return me.compare(n,e,t,r,0),r.changes}class g_{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&hu(e,t,this.changes,5)}}function b_(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),l=Math.max(0,t.top),u=Math.min(i.innerHeight,t.bottom);for(let a=n.parentNode;a&&a!=r.body;)if(a.nodeType==1){let c=a,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),u=Math.min(a==n.parentNode?i.innerHeight:u,h.bottom)}a=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(a.nodeType==11)a=a.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,u)-(t.top+e)}}function y_(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function x_(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Bc{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return te.replace({widget:new v_(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class v_ extends Hn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class N0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=L0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Te.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Od).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new f_(t),this.stateDeco=e.facet(po).filter(r=>typeof r!="function"),this.heightMap=Ot.empty().applyChanges(this.stateDeco,ge.empty,this.heightOracle.setDoc(e.doc),[new tn(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=te.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Sl(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?L0:new Rd(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Us(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(po).filter(c=>typeof c!="function");let i=e.changedRanges,s=tn.extendWithRanges(i,m_(r,this.stateDeco,e?e.changes:nt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);B0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||ts)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let u=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let a=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(a||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(ny)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Te.RTL:Te.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),u=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let a=0,c=0;if(l.width&&l.height){let{scaleX:w,scaleY:D}=Fb(t,l);(w>.005&&Math.abs(this.scaleX-w)>.005||D>.005&&Math.abs(this.scaleY-D)>.005)&&(this.scaleX=w,this.scaleY=D,a|=16,o=u=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,h=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,a|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Ib(e.scrollDOM);let p=(this.printing?x_:b_)(t,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(u=!0)),!this.inView&&!this.scrollTarget&&!y_(e.dom))return 0;let y=l.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,a|=16),u){let w=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(w)&&(o=!0),o||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:D,charWidth:A,textHeight:k}=e.docView.measureTextSize();o=D>0&&i.refresh(s,D,A,k,Math.max(5,y/A),w),o&&(e.docView.minWidth=0,a|=16)}m>0&&g>0?c=Math.max(m,g):m<0&&g<0&&(c=Math.min(m,g)),B0();for(let D of this.viewports){let A=D.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(D);this.heightMap=(o?Ot.empty().applyChanges(this.stateDeco,ge.empty,this.heightOracle,[new tn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new h_(D.from,A))}ts&&(a|=2)}let x=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(a&2&&(a|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),a|=this.updateForViewport()),(a&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,u=new Sl(i.lineAt(o-r*1e3,Oe.ByHeight,s,0,0).from,i.lineAt(l+(1-r)*1e3,Oe.ByHeight,s,0,0).to);if(t){let{head:a}=t.range;if(a<u.from||a>u.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(a,Oe.ByPos,s,0,0),h;t.y=="center"?h=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&a<u.from?h=f.top:h=f.bottom-c,u=new Sl(i.lineAt(h-1e3/2,Oe.ByHeight,s,0,0).from,i.lineAt(h+c+1e3/2,Oe.ByHeight,s,0,0).to)}}return u}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Sl(this.heightMap.lineAt(r,Oe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Oe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Oe.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Oe.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new Bc(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Te.LTR&&!r)return[];let l=[],u=(c,f,h,d)=>{if(f-c<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let b of m)if(b>c&&b<f){u(c,b-10,h,d),u(b+10,f,h,d);return}let g=w_(e,b=>b.from>=h.from&&b.to<=h.to&&Math.abs(b.from-c)<s&&Math.abs(b.to-f)<s&&!m.some(y=>b.from<y&&b.to>y));if(!g){if(f<h.to&&t&&r&&t.visibleRanges.some(x=>x.from<=f&&x.to>=f)){let x=t.moveToLineBoundary(I.cursor(f),!1,!0).head;x>c&&(f=x)}let b=this.gapSize(h,c,f,d),y=r||b<2e6?b:2e6;g=new Bc(c,f,b,y)}l.push(g)},a=c=>{if(c.length<o||c.type!=Et.Text)return;let f=k_(c.from,c.to,this.stateDeco);if(f.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(r){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,b;if(h!=null){let y=Ol(f,h),x=((this.visibleBottom-this.visibleTop)/2+m)/c.height;g=y-x,b=y+x}else g=(this.visibleTop-c.top-m)/c.height,b=(this.visibleBottom-c.top+m)/c.height;d=El(f,g),p=El(f,b)}else{let m=f.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,b=0;if(m>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+b<this.pixelViewport.left&&(b=A.size-A.displaySize);let y=this.pixelViewport.left+b,x=this.pixelViewport.right+b,w,D;if(h!=null){let A=Ol(f,h),k=((x-y)/2+g)/m;w=A-k,D=A+k}else w=(y-g)/m,D=(x+g)/m;d=El(f,w),p=El(f,D)}d>c.from&&u(c.from,d,c,f),p<c.to&&u(p,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(a):a(c);return l}gapSize(e,t,r,i){let s=Ol(i,r)-Ol(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Bc.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=te.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];me.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],l=r[s];(o.from!=l.from||o.to!=l.to)&&(i|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Us(this.heightMap.lineAt(e,Oe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Us(this.heightMap.lineAt(this.scaler.fromDOM(e),Oe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Us(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Sl{constructor(e,t){this.from=e,this.to=t}}function k_(n,e,t){let r=[],i=n,s=0;return me.spans(t,n,e,{span(){},point(o,l){o>i&&(r.push({from:i,to:o}),s+=o-i),i=l}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function El({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],l=o-s;if(r<=l)return s+r;r-=l}}function Ol(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function w_(n,e){for(let t of n)if(e(t))return t}const L0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Rd{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:l,to:u})=>{let a=t.lineAt(l,Oe.ByPos,e,0,0).top,c=t.lineAt(u,Oe.ByPos,e,0,0).bottom;return i+=c-a,{from:l,to:u,top:a,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof Rd?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Us(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Fn(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>Us(i,e)):n._content)}const Tl=Q.define({combine:n=>n.join(" ")}),gh=Q.define({combine:n=>n.indexOf(!0)>-1}),bh=Er.newName(),Ay=Er.newName(),Cy=Er.newName(),_y={"&light":"."+Ay,"&dark":"."+Cy};function yh(n,e,t){return new Er(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const D_=yh("."+bh,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},_y),A_={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},$c=J.ie&&J.ie_version<=11;class C_{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new lC,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(J.ie&&J.ie_version<=11||J.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&J.android&&e.constructor.EDIT_CONTEXT!==!1&&!(J.chrome&&J.chrome_version<126)&&(this.editContext=new S_(e),e.state.facet(Qn)&&(e.contentDOM.editContext=this.editContext.editContext)),$c&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Qn)?r.root.activeElement!=this.dom:!fu(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(J.ie&&J.ie_version<=11||J.android&&J.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Xs(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ho(e.root);if(!t)return!1;let r=J.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&__(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=fu(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&aC(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,A_),$c&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),$c&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Li(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&fu(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new UC(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=dy(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=j0(t,e.previousSibling||e.target.previousSibling,-1),i=j0(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Qn)!=e.state.facet(Qn)&&(e.view.contentDOM.editContext=e.state.facet(Qn)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function j0(n,e,t){for(;e;){let r=ve.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function q0(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return Xs(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function __(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return q0(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?q0(n,t):null}class S_{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,l=this.toEditorPos(r.updateRangeStart),u=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:l,drifted:!1});let a=u-l>r.text.length;l==this.from&&s<this.from?l=s:u==this.to&&s>this.to&&(u=s);let c=py(e.state.sliceDoc(l,u),r.text,(a?i.from:i.to)-l,a?"end":null);if(!c){let h=I.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:c.from+l,to:c.toA+l,insert:ge.of(r.text.slice(c.from,c.toB).split(`
`))};if((J.mac||J.android)&&f.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:u,insert:ge.of([r.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);Fd(e,f,I.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),l=this.toEditorPos(r.rangeEnd);o<l;o++){let u=e.coordsForChar(o);s=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let u=this.toEditorPos(s.rangeStart),a=this.toEditorPos(s.rangeEnd);if(u<a){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;i.push(te.mark({attributes:{style:c}}).range(u,a))}}}e.dispatch({effects:iy.of(te.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=ho(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,l,u,a)=>{if(r)return;let c=a.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(a)){i=this.pendingContextChange=null,t+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+a.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),a.toString()),this.to+=c}t+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Y{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||uC(e.parent)||document,this.viewState=new N0(e.state||he.create(e)),e.scrollTo&&e.scrollTo.is(Al)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Oi).map(i=>new Rc(i));for(let i of this.plugins)i.update(this);this.observer=new C_(this),this.inputState=new KC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new x0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Xe?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,u=null;e.some(h=>h.annotation(vy))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,u=ky(s,o),u||(l=1));let a=this.observer.delayedAndroidKey,c=null;if(a?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(he.phrases)!=this.state.facet(he.phrases))return this.setState(s);i=ju.create(this,s,e),i.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new ji(d.empty?d:I.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(Al)&&(f=d.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=Vu.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Vs)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Tl)!=i.state.facet(Tl)&&(this.viewState.mustMeasureContent=!0),(t||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let h of this.state.facet(hh))try{h(i)}catch(d){St(this.state,d,"update listener")}(u||c)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),c&&!dy(this,c)&&a.force&&Li(this.contentDOM,a.key,a.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new N0(e),this.plugins=e.facet(Oi).map(r=>new Rc(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new x0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Oi),r=e.state.facet(Oi);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new Rc(s));else{let l=this.plugins[o];l.mustUpdate=e,i.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){St(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(Ib(r))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];u&4||([this.measureRequests,a]=[a,this.measureRequests]);let c=a.map(d=>{try{return d.read(this)}catch(p){return St(this.state,p),V0}}),f=ju.create(this,this.state,[]),h=!1;f.flags|=u,t?t.flags|=u:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let d=0;d<a.length;d++)if(c[d]!=V0)try{let p=a[d];p.write&&p.write(c[d],this)}catch(p){St(this.state,p)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(hh))l(t)}get themeClasses(){return bh+" "+(this.state.facet(gh)?Cy:Ay)+" "+this.state.facet(Tl)}updateAttrs(){let e=z0(this,sy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Qn)?"true":"false",class:"cm-content",style:`${J.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),z0(this,Od,t);let r=this.observer.ignore(()=>{let i=lh(this.contentDOM,this.contentAttrs,t),s=lh(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(Y.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Vs);let e=this.state.facet(Y.cspNonce);Er.mount(this.root,this.styleModules.concat(D_).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Mc(this,e,A0(this,e,t,r))}moveByGroup(e,t){return Mc(this,e,A0(this,e,t,r=>LC(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return I.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return NC(this,e,t,r)}moveVertically(e,t,r){return Mc(this,e,jC(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),cy(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[xr.find(s,e-i.from,-1,t)];return Jo(r,o.dir==Te.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ty)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>E_)return Gb(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||Wb(s.isolates,r=y0(this,e))))return s.order;r||(r=y0(this,e));let i=wC(e.text,t,r);return this.bidiCache.push(new Vu(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||J.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Pb(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Al.of(new ji(typeof e=="number"?I.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Al.of(new ji(I.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return qe.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return qe.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Er.newName(),i=[Tl.of(r),Vs.of(yh(`.${r}`,e))];return t&&t.dark&&i.push(gh.of(!0)),i}static baseTheme(e){return $r.lowest(Vs.of(yh("."+bh,e,_y)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&ve.get(r)||ve.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}Y.styleModule=Vs;Y.inputHandler=Zb;Y.clipboardInputFilter=Sd;Y.clipboardOutputFilter=Ed;Y.scrollHandler=ry;Y.focusChangeEffect=ey;Y.perLineTextDirection=ty;Y.exceptionSink=Xb;Y.updateListener=hh;Y.editable=Qn;Y.mouseSelectionStyle=Qb;Y.dragMovesSelection=Yb;Y.clickAddsSelectionRange=Jb;Y.decorations=po;Y.outerDecorations=oy;Y.atomicRanges=Xo;Y.bidiIsolatedRanges=ly;Y.scrollMargins=uy;Y.darkTheme=gh;Y.cspNonce=Q.define({combine:n=>n.length?n[0]:""});Y.contentAttributes=Od;Y.editorAttributes=sy;Y.lineWrapping=Y.contentAttributes.of({class:"cm-lineWrapping"});Y.announce=re.define();const E_=4096,V0={};class Vu{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Te.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new Vu(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function z0(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&oh(o,t)}return t}const O_=J.mac?"mac":J.windows?"win":J.linux?"linux":"key";function T_(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,l;for(let u=0;u<t.length-1;++u){const a=t[u];if(/^(cmd|meta|m)$/i.test(a))l=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+a)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),l&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Fl(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const F_=$r.default(Y.domEventHandlers({keydown(n,e){return Ey(Sy(e.state),n,e,"editor")}})),Zo=Q.define({enables:F_}),U0=new WeakMap;function Sy(n){let e=n.facet(Zo),t=U0.get(e);return t||U0.set(e,t=I_(e.reduce((r,i)=>r.concat(i),[]))),t}function P_(n,e,t){return Ey(Sy(n.state),e,n,t)}let mr=null;const R_=4e3;function I_(n,e=O_){let t=Object.create(null),r=Object.create(null),i=(o,l)=>{let u=r[o];if(u==null)r[o]=l;else if(u!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,u,a,c)=>{var f,h;let d=t[o]||(t[o]=Object.create(null)),p=l.split(/ (?!$)/).map(b=>T_(b,e));for(let b=1;b<p.length;b++){let y=p.slice(0,b).join(" ");i(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let w=mr={view:x,prefix:y,scope:o};return setTimeout(()=>{mr==w&&(mr=null)},R_),!0}]})}let m=p.join(" ");i(m,!1);let g=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});u&&g.run.push(u),a&&(g.preventDefault=!0),c&&(g.stopPropagation=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let a of l){let c=t[a]||(t[a]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let h in c)c[h].run.push(d=>f(d,xh))}let u=o[e]||o.key;if(u)for(let a of l)s(a,u,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(a,"Shift-"+u,o.shift,o.preventDefault,o.stopPropagation)}return t}let xh=null;function Ey(n,e,t,r){xh=e;let i=nC(e),s=Rt(i,0),o=Tn(s)==i.length&&i!=" ",l="",u=!1,a=!1,c=!1;mr&&mr.view==t&&mr.scope==r&&(l=mr.prefix+" ",gy.indexOf(e.keyCode)<0&&(a=!0,mr=null));let f=new Set,h=g=>{if(g){for(let b of g.run)if(!f.has(b)&&(f.add(b),b(t)))return g.stopPropagation&&(c=!0),!0;g.preventDefault&&(g.stopPropagation&&(c=!0),a=!0)}return!1},d=n[r],p,m;return d&&(h(d[l+Fl(i,e,!o)])?u=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(J.windows&&e.ctrlKey&&e.altKey)&&!(J.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(p=Or[e.keyCode])&&p!=i?(h(d[l+Fl(p,e,!0)])||e.shiftKey&&(m=fo[e.keyCode])!=i&&m!=p&&h(d[l+Fl(m,e,!1)]))&&(u=!0):o&&e.shiftKey&&h(d[l+Fl(i,e,!0)])&&(u=!0),!u&&h(d._any)&&(u=!0)),a&&(u=!0),u&&c&&e.stopPropagation(),xh=null,u}class el{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=Oy(e);return[new el(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return M_(e,t,r)}}function Oy(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Te.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function H0(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let s=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,l=n.posAtCoords({x:s.left+1,y:o}),u=n.posAtCoords({x:s.right-1,y:o});return l==null||u==null?r:{from:Math.max(r.from,Math.min(l,u)),to:Math.min(r.to,Math.max(l,u))}}function M_(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==Te.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),u=Oy(n),a=o.querySelector(".cm-line"),c=a&&window.getComputedStyle(a),f=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=l.right-(c?parseInt(c.paddingRight):0),d=ph(n,r,1),p=ph(n,i,-1),m=d.type==Et.Text?d:null,g=p.type==Et.Text?p:null;if(m&&(n.lineWrapping||d.widgetLineBreaks)&&(m=H0(n,r,1,m)),g&&(n.lineWrapping||p.widgetLineBreaks)&&(g=H0(n,i,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return y(x(t.from,t.to,m));{let D=m?x(t.from,null,m):w(d,!1),A=g?x(null,t.to,g):w(p,!0),k=[];return(m||d).to<(g||p).from-(m&&g?1:0)||d.widgetLineBreaks>1&&D.bottom+n.defaultLineHeight/2<A.top?k.push(b(f,D.bottom,h,A.top)):D.bottom<A.top&&n.elementAtHeight((D.bottom+A.top)/2).type==Et.Text&&(D.bottom=A.top=(D.bottom+A.top)/2),y(D).concat(k).concat(y(A))}function b(D,A,k,C){return new el(e,D-u.left,A-u.top,k-D,C-A)}function y({top:D,bottom:A,horizontal:k}){let C=[];for(let O=0;O<k.length;O+=2)C.push(b(k[O],D,k[O+1],A));return C}function x(D,A,k){let C=1e9,O=-1e9,L=[];function B(F,M,ee,q,U){let K=n.coordsAtPos(F,F==k.to?-2:2),xe=n.coordsAtPos(ee,ee==k.from?2:-2);!K||!xe||(C=Math.min(K.top,xe.top,C),O=Math.max(K.bottom,xe.bottom,O),U==Te.LTR?L.push(s&&M?f:K.left,s&&q?h:xe.right):L.push(!s&&q?f:xe.left,!s&&M?h:K.right))}let P=D??k.from,T=A??k.to;for(let F of n.visibleRanges)if(F.to>P&&F.from<T)for(let M=Math.max(F.from,P),ee=Math.min(F.to,T);;){let q=n.state.doc.lineAt(M);for(let U of n.bidiSpans(q)){let K=U.from+q.from,xe=U.to+q.from;if(K>=ee)break;xe>M&&B(Math.max(K,M),D==null&&K<=P,Math.min(xe,ee),A==null&&xe>=T,U.dir)}if(M=q.to+1,M>=ee)break}return L.length==0&&B(P,D==null,T,A==null,n.textDirection),{top:C,bottom:O,horizontal:L}}function w(D,A){let k=l.top+(A?D.top:D.bottom);return{top:k,bottom:k,horizontal:[]}}}function B_(n,e){return n.constructor==e.constructor&&n.eq(e)}class $_{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(pu)!=e.state.facet(pu)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(pu);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!B_(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e,J.safari&&J.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const pu=Q.define();function Ty(n){return[qe.define(e=>new $_(e,n)),pu.of(n)]}const mo=Q.define({combine(n){return gn(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function N_(n={}){return[mo.of(n),L_,j_,q_,ny.of(!0)]}function Fy(n){return n.startState.facet(mo)!=n.state.facet(mo)}const L_=Ty({above:!0,markers(n){let{state:e}=n,t=e.facet(mo),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:I.cursor(i.head,i.head>i.anchor?-1:1);for(let u of el.forRange(n,o,l))r.push(u)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Fy(n);return t&&W0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){W0(e.state,n)},class:"cm-cursorLayer"});function W0(n,e){e.style.animationDuration=n.facet(mo).cursorBlinkRate+"ms"}const j_=Ty({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:el.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Fy(n)},class:"cm-selectionLayer"}),q_=$r.highest(Y.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Py=re.define({map(n,e){return n==null?null:e.mapPos(n)}}),Hs=Ke.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(Py)?r.value:t,n)}}),V_=qe.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Hs);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Hs)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Hs),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Hs)!=n&&this.view.dispatch({effects:Py.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function z_(){return[Hs,V_]}function G0(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)i(o+l.index,l)}function U_(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class H_{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(l,u,a,c)=>i(c,a,a+l[0].length,l,u);else if(typeof r=="function")this.addMatch=(l,u,a,c)=>{let f=r(l,u,a);f&&c(a,a+l[0].length,f)};else if(r)this.addMatch=(l,u,a,c)=>c(a,a+l[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new lr,r=t.add.bind(t);for(let{from:i,to:s}of U_(e,this.maxLength))G0(e.state.doc,this.regexp,i,s,(o,l)=>this.addMatch(l,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,u)=>{u>=e.view.viewport.from&&l<=e.view.viewport.to&&(r=Math.min(l,r),i=Math.max(u,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),l=Math.min(s.to,i);if(l>=o){let u=e.state.doc.lineAt(o),a=u.to<l?e.state.doc.lineAt(l):u,c=Math.max(s.from,u.from),f=Math.min(s.to,a.to);if(this.boundary){for(;o>u.from;o--)if(this.boundary.test(u.text[o-1-u.from])){c=o;break}for(;l<a.to;l++)if(this.boundary.test(a.text[l-a.from])){f=l;break}}let h=[],d,p=(m,g,b)=>h.push(b.range(m,g));if(u==a)for(this.regexp.lastIndex=c-u.from;(d=this.regexp.exec(u.text))&&d.index<f-u.from;)this.addMatch(d,e,d.index+u.from,p);else G0(e.state.doc,this.regexp,c,f,(m,g)=>this.addMatch(g,e,m,p));t=t.update({filterFrom:c,filterTo:f,filter:(m,g)=>m<c||g>f,add:h})}}return t}}const vh=/x/.unicode!=null?"gu":"g",W_=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,vh),G_={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Nc=null;function K_(){var n;if(Nc==null&&typeof document<"u"&&document.body){let e=document.body.style;Nc=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Nc||!1}const mu=Q.define({combine(n){let e=gn(n,{render:null,specialChars:W_,addSpecialChars:null});return(e.replaceTabs=!K_())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,vh)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,vh)),e}});function J_(n={}){return[mu.of(n),Y_()]}let K0=null;function Y_(){return K0||(K0=qe.fromClass(class{constructor(n){this.view=n,this.decorations=te.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(mu)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new H_({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=Rt(e[0],0);if(s==9){let o=i.lineAt(r),l=t.state.tabSize,u=ps(o.text,l,r-o.from);return te.replace({widget:new eS((l-u%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=te.replace({widget:new Z_(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(mu);n.startState.facet(mu)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Q_="";function X_(n){return n>=32?Q_:n==10?"":String.fromCharCode(9216+n)}class Z_ extends Hn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=X_(this.code),r=e.state.phrase("Control character")+" "+(G_[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class eS extends Hn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function tS(){return rS}const nS=te.line({class:"cm-activeLine"}),rS=qe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(nS.range(i.from)),e=i.from)}return te.set(t)}},{decorations:n=>n.decorations});class iS extends Hn{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?Xi(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=Jo(t[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function sS(n){let e=qe.fromClass(class{constructor(t){this.view=t,this.placeholder=n?te.set([te.widget({widget:new iS(n),side:1}).range(0)]):te.none}get decorations(){return this.view.state.doc.length?te.none:this.placeholder}},{decorations:t=>t.decorations});return typeof n=="string"?[e,Y.contentAttributes.of({"aria-placeholder":n})]:e}const kh=2e3;function oS(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>kh||t.off>kh||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let u=r;u<=i;u++){let a=n.doc.line(u);a.length<=l&&s.push(I.range(a.from+o,a.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let u=r;u<=i;u++){let a=n.doc.line(u),c=Xf(a.text,o,n.tabSize,!0);if(c<0)s.push(I.cursor(a.to));else{let f=Xf(a.text,l,n.tabSize);s.push(I.range(a.from+c,a.from+f))}}}return s}function lS(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function J0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>kh?-1:i==r.length?lS(n,e.clientX):ps(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function uS(n,e){let t=J0(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let l=J0(n,i);if(!l)return r;let u=oS(n.state,t,l);return u.length?o?I.create(u.concat(r.ranges)):I.create(u):r}}:null}function aS(n){let e=(t=>t.altKey&&t.button==0);return Y.mouseSelectionStyle.of((t,r)=>e(r)?uS(t,r):null)}const cS={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},fS={style:"cursor: crosshair"};function hS(n={}){let[e,t]=cS[n.key||"Alt"],r=qe.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,Y.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?fS:null})]}const Ps="-10000px";class Ry{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(u=>u);if(i===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let o=[],l=t?[]:null;for(let u=0;u<s.length;u++){let a=s[u],c=-1;if(a){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==a.create&&(c=f)}if(c<0)o[u]=this.createTooltipView(a,u?o[u-1]:null),l&&(l[u]=!!a.above);else{let f=o[u]=this.tooltipViews[c];l&&(l[u]=t[c]),f.update&&f.update(e)}}}for(let u of this.tooltipViews)o.indexOf(u)<0&&(this.removeTooltipView(u),(r=u.destroy)===null||r===void 0||r.call(u));return t&&(l.forEach((u,a)=>t[a]=u),t.length=l.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function dS(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Lc=Q.define({combine:n=>{var e,t,r;return{position:J.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||dS}}}),Y0=new WeakMap,Id=qe.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Lc);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Ry(n,za,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(Lc);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Ps,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(J.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Ps&&s.style.left=="0px"){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=Td(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Lc).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:r,scaleX:i,scaleY:s}=n,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let u=this.manager.tooltips[l],a=this.manager.tooltipViews[l],{dom:c}=a,f=n.pos[l],h=n.size[l];if(!f||u.clip!==!1&&(f.bottom<=Math.max(t.top,r.top)||f.top>=Math.min(t.bottom,r.bottom)||f.right<Math.max(t.left,r.left)-.1||f.left>Math.min(t.right,r.right)+.1)){c.style.top=Ps;continue}let d=u.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=h.right-h.left,g=(e=Y0.get(a))!==null&&e!==void 0?e:h.bottom-h.top,b=a.offset||mS,y=this.view.textDirection==Te.LTR,x=h.width>r.right-r.left?y?r.left:r.right-h.width:y?Math.max(r.left,Math.min(f.left-(d?14:0)+b.x,r.right-m)):Math.min(Math.max(r.left,f.left-m+(d?14:0)-b.x),r.right-m),w=this.above[l];!u.strictSide&&(w?f.top-g-p-b.y<r.top:f.bottom+g+p+b.y>r.bottom)&&w==r.bottom-f.bottom>f.top-r.top&&(w=this.above[l]=!w);let D=(w?f.top-r.top:r.bottom-f.bottom)-p;if(D<g&&a.resize!==!1){if(D<this.view.defaultLineHeight){c.style.top=Ps;continue}Y0.set(a,g),c.style.height=(g=D)/s+"px"}else c.style.height&&(c.style.height="");let A=w?f.top-g-p-b.y:f.bottom+p+b.y,k=x+m;if(a.overlap!==!0)for(let C of o)C.left<k&&C.right>x&&C.top<A+g&&C.bottom>A&&(A=w?C.top-g-2-p:C.bottom+p+2);if(this.position=="absolute"?(c.style.top=(A-n.parent.top)/s+"px",Q0(c,(x-n.parent.left)/i)):(c.style.top=A/s+"px",Q0(c,x/i)),d){let C=f.left+(y?b.x:-b.x)-(x+14-7);d.style.left=C/i+"px"}a.overlap!==!0&&o.push({left:x,top:A,right:k,bottom:A+g}),c.classList.toggle("cm-tooltip-above",w),c.classList.toggle("cm-tooltip-below",!w),a.positioned&&a.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Ps}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Q0(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const pS=Y.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),mS={x:0,y:0},za=Q.define({enables:[Id,pS]}),zu=Q.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Ua{static create(e){return new Ua(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ry(e,zu,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const gS=za.compute([zu],n=>{let e=n.facet(zu);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:Ua.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class bS{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof yr)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let l=e.coordsAtPos(i);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let u=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),a=u&&u.dir==Te.RTL?-1:1;s=t.x<l.left?-a:a}let o=this.source(e,i,s);if(o!=null&&o.then){let l=this.pending={pos:i};o.then(u=>{this.pending==l&&(this.pending=null,u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])}))},u=>St(e.state,u,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Id),t=e?e.manager.tooltips.findIndex(r=>r.create==Ua.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!yS(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,l=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!xS(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Pl=4;function yS(n,e){let{left:t,right:r,top:i,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();i=Math.min(l.top,i),s=Math.max(l.bottom,s)}return e.clientX>=t-Pl&&e.clientX<=r+Pl&&e.clientY>=i-Pl&&e.clientY<=s+Pl}function xS(n,e,t,r,i,s){let o=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,l)<i)return!1;let u=n.posAtCoords({x:r,y:i},!1);return u>=e&&u<=t}function Iy(n,e={}){let t=re.define(),r=Ke.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of i){let u=s.changes.mapPos(l.pos,-1,ht.TrackDel);if(u!=null){let a=Object.assign(Object.create(null),l);a.pos=u,a.end!=null&&(a.end=s.changes.mapPos(a.end)),o.push(a)}}i=o}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(vS)&&(i=[]);return i},provide:i=>zu.from(i)});return{active:r,extension:[r,qe.define(i=>new bS(i,n,r,t,e.hoverTime||300)),gS]}}function My(n,e){let t=n.plugin(Id);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const vS=re.define(),X0=Q.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function go(n,e){let t=n.plugin(By),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const By=qe.fromClass(class{constructor(n){this.input=n.state.facet(bo),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(X0);this.top=new Rl(n,!0,e.topContainer),this.bottom=new Rl(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(X0);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Rl(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Rl(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(bo);if(t!=this.input){let r=t.filter(u=>u),i=[],s=[],o=[],l=[];for(let u of r){let a=this.specs.indexOf(u),c;a<0?(c=u(n.view),l.push(c)):(c=this.panels[a],c.update&&c.update(n)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let u of l)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Y.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Rl{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Z0(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Z0(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Z0(n){let e=n.nextSibling;return n.remove(),e}const bo=Q.define({enables:By});class qn extends ui{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}qn.prototype.elementClass="";qn.prototype.toDOM=void 0;qn.prototype.mapMode=ht.TrackBefore;qn.prototype.startSide=qn.prototype.endSide=-1;qn.prototype.point=!0;const gu=Q.define(),kS=Q.define(),wS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>me.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},to=Q.define();function $y(n){return[Ny(),to.of({...wS,...n})]}const em=Q.define({combine:n=>n.some(e=>e)});function Ny(n){return[DS]}const DS=qe.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(to).map(e=>new nm(n,e)),this.fixed=!n.state.facet(em);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(em)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=me.iter(this.view.state.facet(gu),this.view.viewport.from),r=[],i=this.gutters.map(s=>new AS(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==Et.Text&&o){wh(t,r,l.from);for(let u of i)u.line(this.view,l,r);o=!1}else if(l.widget)for(let u of i)u.widget(this.view,l)}else if(s.type==Et.Text){wh(t,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(to),t=n.state.facet(to),r=n.docChanged||n.heightChanged||n.viewportChanged||!me.eq(n.startState.facet(gu),n.state.facet(gu),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new nm(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Y.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,i=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Te.LTR?{left:r,right:i}:{right:r,left:i}})});function tm(n){return Array.isArray(n)?n:[n]}function wh(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class AS{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=me.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let l=new Ly(e,o,s,r);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];wh(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let s of e.state.facet(kS)){let o=s(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class nm{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let u=s.getBoundingClientRect();o=(u.top+u.bottom)/2}else o=i.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,l,i)&&i.preventDefault()});this.markers=tm(t.markers(e)),t.initialSpacer&&(this.spacer=new Ly(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=tm(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!me.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Ly{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),CS(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let l=o,u=s<t.length?t[s++]:null,a=!1;if(u){let c=u.elementClass;c&&(r+=" "+c);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(u)){l=f,a=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!u)break;u.toDOM&&(a?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),a&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function CS(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const _S=Q.define(),SS=Q.define(),Ti=Q.define({combine(n){return gn(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(l,u,a)=>s(l,u,a)||o(l,u,a):o}return r}})}});class jc extends qn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function qc(n,e){return n.state.facet(Ti).formatNumber(e,n.state)}const ES=to.compute([Ti],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(_S)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new jc(qc(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet(SS)){let s=i(e,t,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Ti)!=e.state.facet(Ti),initialSpacer(e){return new jc(qc(e,rm(e.state.doc.lines)))},updateSpacer(e,t){let r=qc(t.view,rm(t.view.state.doc.lines));return r==e.number?e:new jc(r)},domEventHandlers:n.facet(Ti).domEventHandlers,side:"before"}));function OS(n={}){return[Ti.of(n),Ny(),ES]}function rm(n){let e=9;for(;e<n;)e=e*10+9;return e}const TS=new class extends qn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},FS=gu.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(TS.range(i)))}return me.of(e)});function PS(){return FS}class im{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Gr{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=r.facet(Rn).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((c,f)=>c.from-f.from||c.to-f.to),o=new lr,l=[],u=0;for(let c=0;;){let f=c==s.length?null:s[c];if(!f&&!l.length)break;let h,d;for(l.length?(h=u,d=l.reduce((m,g)=>Math.min(m,g.to),f&&f.from>h?f.from:1e8)):(h=f.from,d=f.to,l.push(f),c++);c<s.length;){let m=s[c];if(m.from==h&&(m.to>m.from||m.to==h))l.push(m),c++,d=Math.min(m.to,d);else{d=Math.min(m.from,d);break}}let p=Wy(l);if(l.some(m=>m.from==m.to||m.from==m.to-1&&r.doc.lineAt(m.from).to==m.from))o.add(h,h,te.widget({widget:new qS(p),diagnostics:l.slice()}));else{let m=l.reduce((g,b)=>b.markClass?g+" "+b.markClass:g,"");o.add(h,d,te.mark({class:"cm-lintRange cm-lintRange-"+p+m,diagnostics:l.slice(),inclusiveEnd:l.some(g=>g.to>d)}))}u=d;for(let m=0;m<l.length;m++)l[m].to<=u&&l.splice(m--,1)}let a=o.finish();return new Gr(a,t,ns(a))}}function ns(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new im(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new im(r.from,s,r.diagnostic)}}),r}function jy(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(Rn).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(Ha))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function qy(n,e){return n.field(Wt,!1)?e:e.concat(re.appendConfig.of(Jy))}function RS(n,e){return{effects:qy(n,[Ha.of(e)])}}const Ha=re.define(),Md=re.define(),Vy=re.define(),Wt=Ke.define({create(){return new Gr(te.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=ns(t,n.selected.diagnostic,s)||ns(t,null,s)}!t.size&&i&&e.state.facet(Rn).autoPanel&&(i=null),n=new Gr(t,i,r)}for(let t of e.effects)if(t.is(Ha)){let r=e.state.facet(Rn).autoPanel?t.value.length?yo.open:null:n.panel;n=Gr.init(t.value,r,e.state)}else t.is(Md)?n=new Gr(n.diagnostics,t.value?yo.open:null,n.selected):t.is(Vy)&&(n=new Gr(n.diagnostics,n.panel,t.value));return n},provide:n=>[bo.from(n,e=>e.panel),Y.decorations.from(n,e=>e.diagnostics)]}),IS=te.mark({class:"cm-lintRange cm-lintRange-active"});function MS(n,e,t){let{diagnostics:r}=n.state.field(Wt),i,s=-1,o=-1;r.between(e-(t<0?1:0),e+(t>0?1:0),(u,a,{spec:c})=>{if(e>=u&&e<=a&&(u==a||(e>u||t>0)&&(e<a||t<0)))return i=c.diagnostics,s=u,o=a,!1});let l=n.state.facet(Rn).tooltipFilter;return i&&l&&(i=l(i,n.state)),i?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:zy(n,i)}}}:null}function zy(n,e){return ke("ul",{class:"cm-tooltip-lint"},e.map(t=>Hy(n,t,!1)))}const BS=n=>{let e=n.state.field(Wt,!1);(!e||!e.panel)&&n.dispatch({effects:qy(n.state,[Md.of(!0)])});let t=go(n,yo.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},sm=n=>{let e=n.state.field(Wt,!1);return!e||!e.panel?!1:(n.dispatch({effects:Md.of(!1)}),!0)},$S=n=>{let e=n.state.field(Wt,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},NS=[{key:"Mod-Shift-m",run:BS,preventDefault:!0},{key:"F8",run:$S}],LS=qe.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Rn);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Rn);t.length&&jS(t.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch(RS(this.view.state,r.reduce((i,s)=>i.concat(s))))},r=>{St(this.view.state,r)})}}update(n){let e=n.state.facet(Rn);(n.docChanged||e!=n.startState.facet(Rn)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function jS(n,e,t){let r=[],i=-1;for(let s of n)s.then(o=>{r.push(o),clearTimeout(i),r.length==n.length?e(r):i=setTimeout(()=>e(r),200)},t)}const Rn=Q.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...gn(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:om,tooltipFilter:om,needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t,hideOn:(e,t)=>e?t?(r,i,s)=>e(r,i,s)||t(r,i,s):e:t,autoPanel:(e,t)=>e||t})}}});function om(n,e){return n?e?(t,r)=>e(n(t,r),r):n:e}function Dh(n,e={}){return[Rn.of({source:n,config:e}),LS,Jy]}function Uy(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Hy(n,e,t){var r;let i=t?Uy(e.actions):[];return ke("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ke("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let l=!1,u=d=>{if(d.preventDefault(),l)return;l=!0;let p=ns(n.state.field(Wt).diagnostics,e);p&&s.apply(n,p.from,p.to)},{name:a}=s,c=i[o]?a.indexOf(i[o]):-1,f=c<0?a:[a.slice(0,c),ke("u",a.slice(c,c+1)),a.slice(c+1)],h=s.markClass?" "+s.markClass:"";return ke("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:u,onmousedown:u,"aria-label":` Action: ${a}${c<0?"":` (access key "${i[o]})"`}.`},f)}),e.source&&ke("div",{class:"cm-diagnosticSource"},e.source))}class qS extends Hn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ke("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class lm{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Hy(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class yo{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)sm(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Uy(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==i.keyCode){let u=ns(this.view.state.field(Wt).diagnostics,s);u&&s.actions[l].apply(e,u.from,u.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=ke("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=ke("div",{class:"cm-panel-lint"},this.list,ke("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>sm(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Wt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Wt),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,u,{spec:a})=>{for(let c of a.diagnostics){if(o.has(c))continue;o.add(c);let f=-1,h;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==c){f=d;break}f<0?(h=new lm(this.view,c),this.items.splice(r,0,h),i=!0):(h=this.items[f],f>r&&(this.items.splice(r,f-r),i=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new lm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:u})=>{let a=u.height/this.list.offsetHeight;l.top<u.top?this.list.scrollTop-=(u.top-l.top)/a:l.bottom>u.bottom&&(this.list.scrollTop+=(l.bottom-u.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Wt),r=ns(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Vy.of(r)})}static open(e){return new yo(e)}}function bu(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Il(n){return bu(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const VS=Y.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Il("#d11")},".cm-lintRange-warning":{backgroundImage:Il("orange")},".cm-lintRange-info":{backgroundImage:Il("#999")},".cm-lintRange-hint":{backgroundImage:Il("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function zS(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Wy(n){let e="hint",t=1;for(let r of n){let i=zS(r.severity);i>t&&(t=i,e=r.severity)}return e}class Gy extends qn{constructor(e){super(),this.diagnostics=e,this.severity=Wy(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let r=this.diagnostics,i=e.state.facet(Wa).tooltipFilter;return i&&(r=i(r,e.state)),r.length&&(t.onmouseover=()=>HS(e,t,r)),t}}function US(n,e){let t=r=>{let i=e.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let s=r.target;s;s=s.parentNode)if(s.nodeType==1&&s.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(Ky)&&n.dispatch({effects:Bd.of(null)})}};window.addEventListener("mousemove",t)}function HS(n,e,t){function r(){let o=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(o.from)&&n.dispatch({effects:Bd.of({pos:o.from,above:!1,clip:!1,create(){return{dom:zy(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,US(n,e)}let{hoverTime:i}=n.state.facet(Wa),s=setTimeout(r,i);e.onmouseout=()=>{clearTimeout(s),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(s),s=setTimeout(r,i)}}function WS(n,e){let t=Object.create(null);for(let i of e){let s=n.lineAt(i.from);(t[s.from]||(t[s.from]=[])).push(i)}let r=[];for(let i in t)r.push(new Gy(t[i]).range(+i));return me.of(r,!0)}const GS=$y({class:"cm-gutter-lint",markers:n=>n.state.field(Ah),widgetMarker:(n,e,t)=>{let r=[];return n.state.field(Ah).between(t.from,t.to,(i,s,o)=>{i>t.from&&i<t.to&&r.push(...o.diagnostics)}),r.length?new Gy(r):null}}),Ah=Ke.define({create(){return me.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(Wa).markerFilter;for(let r of e.effects)if(r.is(Ha)){let i=r.value;t&&(i=t(i||[],e.state)),n=WS(e.state.doc,i.slice(0))}return n}}),Bd=re.define(),Ky=Ke.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=jy(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,r)=>r.is(Bd)?r.value:t,n)},provide:n=>za.from(n)}),KS=Y.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:bu('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:bu('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:bu('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Jy=[Wt,Y.decorations.compute([Wt],n=>{let{selected:e,panel:t}=n.field(Wt);return!e||!t||e.from==e.to?te.none:te.set([IS.range(e.from,e.to)])}),Iy(MS,{hideOn:jy}),VS],Wa=Q.define({combine(n){return gn(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function JS(n={}){return[Wa.of(n),Ah,GS,KS,Ky]}function YS(n,e=!1){const t=n.length;let r=0,i="",s=0,o=16,l=0,u=0,a=0,c=0,f=0;function h(x,w){let D=0,A=0;for(;D<x;){let k=n.charCodeAt(r);if(k>=48&&k<=57)A=A*16+k-48;else if(k>=65&&k<=70)A=A*16+k-65+10;else if(k>=97&&k<=102)A=A*16+k-97+10;else break;r++,D++}return D<x&&(A=-1),A}function d(x){r=x,i="",s=0,o=16,f=0}function p(){let x=r;if(n.charCodeAt(r)===48)r++;else for(r++;r<n.length&&vi(n.charCodeAt(r));)r++;if(r<n.length&&n.charCodeAt(r)===46)if(r++,r<n.length&&vi(n.charCodeAt(r)))for(r++;r<n.length&&vi(n.charCodeAt(r));)r++;else return f=3,n.substring(x,r);let w=r;if(r<n.length&&(n.charCodeAt(r)===69||n.charCodeAt(r)===101))if(r++,(r<n.length&&n.charCodeAt(r)===43||n.charCodeAt(r)===45)&&r++,r<n.length&&vi(n.charCodeAt(r))){for(r++;r<n.length&&vi(n.charCodeAt(r));)r++;w=r}else f=3;return n.substring(x,w)}function m(){let x="",w=r;for(;;){if(r>=t){x+=n.substring(w,r),f=2;break}const D=n.charCodeAt(r);if(D===34){x+=n.substring(w,r),r++;break}if(D===92){if(x+=n.substring(w,r),r++,r>=t){f=2;break}switch(n.charCodeAt(r++)){case 34:x+='"';break;case 92:x+="\\";break;case 47:x+="/";break;case 98:x+="\b";break;case 102:x+="\f";break;case 110:x+=`
`;break;case 114:x+="\r";break;case 116:x+="	";break;case 117:const k=h(4);k>=0?x+=String.fromCharCode(k):f=4;break;default:f=5}w=r;continue}if(D>=0&&D<=31)if(Rs(D)){x+=n.substring(w,r),f=2;break}else f=6;r++}return x}function g(){if(i="",f=0,s=r,u=l,c=a,r>=t)return s=t,o=17;let x=n.charCodeAt(r);if(Vc(x)){do r++,i+=String.fromCharCode(x),x=n.charCodeAt(r);while(Vc(x));return o=15}if(Rs(x))return r++,i+=String.fromCharCode(x),x===13&&n.charCodeAt(r)===10&&(r++,i+=`
`),l++,a=r,o=14;switch(x){case 123:return r++,o=1;case 125:return r++,o=2;case 91:return r++,o=3;case 93:return r++,o=4;case 58:return r++,o=6;case 44:return r++,o=5;case 34:return r++,i=m(),o=10;case 47:const w=r-1;if(n.charCodeAt(r+1)===47){for(r+=2;r<t&&!Rs(n.charCodeAt(r));)r++;return i=n.substring(w,r),o=12}if(n.charCodeAt(r+1)===42){r+=2;const D=t-1;let A=!1;for(;r<D;){const k=n.charCodeAt(r);if(k===42&&n.charCodeAt(r+1)===47){r+=2,A=!0;break}r++,Rs(k)&&(k===13&&n.charCodeAt(r)===10&&r++,l++,a=r)}return A||(r++,f=1),i=n.substring(w,r),o=13}return i+=String.fromCharCode(x),r++,o=16;case 45:if(i+=String.fromCharCode(x),r++,r===t||!vi(n.charCodeAt(r)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=p(),o=11;default:for(;r<t&&b(x);)r++,x=n.charCodeAt(r);if(s!==r){switch(i=n.substring(s,r),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(x),r++,o=16}}function b(x){if(Vc(x)||Rs(x))return!1;switch(x){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){let x;do x=g();while(x>=12&&x<=15);return x}return{setPosition:d,getPosition:()=>r,scan:e?y:g,getToken:()=>o,getTokenValue:()=>i,getTokenOffset:()=>s,getTokenLength:()=>r-s,getTokenStartLine:()=>u,getTokenStartCharacter:()=>s-c,getTokenError:()=>f}}function Vc(n){return n===32||n===9}function Rs(n){return n===10||n===13}function vi(n){return n>=48&&n<=57}var um;(function(n){n[n.lineFeed=10]="lineFeed",n[n.carriageReturn=13]="carriageReturn",n[n.space=32]="space",n[n._0=48]="_0",n[n._1=49]="_1",n[n._2=50]="_2",n[n._3=51]="_3",n[n._4=52]="_4",n[n._5=53]="_5",n[n._6=54]="_6",n[n._7=55]="_7",n[n._8=56]="_8",n[n._9=57]="_9",n[n.a=97]="a",n[n.b=98]="b",n[n.c=99]="c",n[n.d=100]="d",n[n.e=101]="e",n[n.f=102]="f",n[n.g=103]="g",n[n.h=104]="h",n[n.i=105]="i",n[n.j=106]="j",n[n.k=107]="k",n[n.l=108]="l",n[n.m=109]="m",n[n.n=110]="n",n[n.o=111]="o",n[n.p=112]="p",n[n.q=113]="q",n[n.r=114]="r",n[n.s=115]="s",n[n.t=116]="t",n[n.u=117]="u",n[n.v=118]="v",n[n.w=119]="w",n[n.x=120]="x",n[n.y=121]="y",n[n.z=122]="z",n[n.A=65]="A",n[n.B=66]="B",n[n.C=67]="C",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.G=71]="G",n[n.H=72]="H",n[n.I=73]="I",n[n.J=74]="J",n[n.K=75]="K",n[n.L=76]="L",n[n.M=77]="M",n[n.N=78]="N",n[n.O=79]="O",n[n.P=80]="P",n[n.Q=81]="Q",n[n.R=82]="R",n[n.S=83]="S",n[n.T=84]="T",n[n.U=85]="U",n[n.V=86]="V",n[n.W=87]="W",n[n.X=88]="X",n[n.Y=89]="Y",n[n.Z=90]="Z",n[n.asterisk=42]="asterisk",n[n.backslash=92]="backslash",n[n.closeBrace=125]="closeBrace",n[n.closeBracket=93]="closeBracket",n[n.colon=58]="colon",n[n.comma=44]="comma",n[n.dot=46]="dot",n[n.doubleQuote=34]="doubleQuote",n[n.minus=45]="minus",n[n.openBrace=123]="openBrace",n[n.openBracket=91]="openBracket",n[n.plus=43]="plus",n[n.slash=47]="slash",n[n.formFeed=12]="formFeed",n[n.tab=9]="tab"})(um||(um={}));new Array(20).fill(0).map((n,e)=>" ".repeat(e));const ki=200;new Array(ki).fill(0).map((n,e)=>`
`+" ".repeat(e)),new Array(ki).fill(0).map((n,e)=>"\r"+" ".repeat(e)),new Array(ki).fill(0).map((n,e)=>`\r
`+" ".repeat(e)),new Array(ki).fill(0).map((n,e)=>`
`+"	".repeat(e)),new Array(ki).fill(0).map((n,e)=>"\r"+"	".repeat(e)),new Array(ki).fill(0).map((n,e)=>`\r
`+"	".repeat(e));var Uu;(function(n){n.DEFAULT={allowTrailingComma:!1}})(Uu||(Uu={}));function QS(n,e=[],t=Uu.DEFAULT){let r=null,i=[];const s=[];function o(u){Array.isArray(i)?i.push(u):r!==null&&(i[r]=u)}return XS(n,{onObjectBegin:()=>{const u={};o(u),s.push(i),i=u,r=null},onObjectProperty:u=>{r=u},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{const u=[];o(u),s.push(i),i=u,r=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(u,a,c)=>{e.push({error:u,offset:a,length:c})}},t),i[0]}function XS(n,e,t=Uu.DEFAULT){const r=YS(n,!1),i=[];let s=0;function o(F){return F?()=>s===0&&F(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function l(F){return F?M=>s===0&&F(M,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function u(F){return F?M=>s===0&&F(M,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(F){return F?()=>{s>0?s++:F(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice())===!1&&(s=1)}:()=>!0}function c(F){return F?()=>{s>0&&s--,s===0&&F(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:()=>!0}const f=a(e.onObjectBegin),h=u(e.onObjectProperty),d=c(e.onObjectEnd),p=a(e.onArrayBegin),m=c(e.onArrayEnd),g=u(e.onLiteralValue),b=l(e.onSeparator),y=o(e.onComment),x=l(e.onError),w=t&&t.disallowComments,D=t&&t.allowTrailingComma;function A(){for(;;){const F=r.scan();switch(r.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:w||k(11);break;case 2:k(12);break;case 6:k(16);break}switch(F){case 12:case 13:w?k(10):y();break;case 16:k(1);break;case 15:case 14:break;default:return F}}}function k(F,M=[],ee=[]){if(x(F),M.length+ee.length>0){let q=r.getToken();for(;q!==17;){if(M.indexOf(q)!==-1){A();break}else if(ee.indexOf(q)!==-1)break;q=A()}}}function C(F){const M=r.getTokenValue();return F?g(M):(h(M),i.push(M)),A(),!0}function O(){switch(r.getToken()){case 11:const F=r.getTokenValue();let M=Number(F);isNaN(M)&&(k(2),M=0),g(M);break;case 7:g(null);break;case 8:g(!0);break;case 9:g(!1);break;default:return!1}return A(),!0}function L(){return r.getToken()!==10?(k(3,[],[2,5]),!1):(C(!1),r.getToken()===6?(b(":"),A(),T()||k(4,[],[2,5])):k(5,[],[2,5]),i.pop(),!0)}function B(){f(),A();let F=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(F||k(4,[],[]),b(","),A(),r.getToken()===2&&D)break}else F&&k(6,[],[]);L()||k(4,[],[2,5]),F=!0}return d(),r.getToken()!==2?k(7,[2],[]):A(),!0}function P(){p(),A();let F=!0,M=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(M||k(4,[],[]),b(","),A(),r.getToken()===4&&D)break}else M&&k(6,[],[]);F?(i.push(0),F=!1):i[i.length-1]++,T()||k(4,[],[4,5]),M=!0}return m(),F||i.pop(),r.getToken()!==4?k(8,[4],[]):A(),!0}function T(){switch(r.getToken()){case 3:return P();case 1:return B();case 10:return C(!0);default:return O()}}return A(),r.getToken()===17?t.allowEmptyContent?!0:(k(4,[],[]),!1):T()?(r.getToken()!==17&&k(9,[],[]),!0):(k(4,[],[]),!1)}var am;(function(n){n[n.None=0]="None",n[n.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=2]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",n[n.InvalidUnicode=4]="InvalidUnicode",n[n.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",n[n.InvalidCharacter=6]="InvalidCharacter"})(am||(am={}));var cm;(function(n){n[n.OpenBraceToken=1]="OpenBraceToken",n[n.CloseBraceToken=2]="CloseBraceToken",n[n.OpenBracketToken=3]="OpenBracketToken",n[n.CloseBracketToken=4]="CloseBracketToken",n[n.CommaToken=5]="CommaToken",n[n.ColonToken=6]="ColonToken",n[n.NullKeyword=7]="NullKeyword",n[n.TrueKeyword=8]="TrueKeyword",n[n.FalseKeyword=9]="FalseKeyword",n[n.StringLiteral=10]="StringLiteral",n[n.NumericLiteral=11]="NumericLiteral",n[n.LineCommentTrivia=12]="LineCommentTrivia",n[n.BlockCommentTrivia=13]="BlockCommentTrivia",n[n.LineBreakTrivia=14]="LineBreakTrivia",n[n.Trivia=15]="Trivia",n[n.Unknown=16]="Unknown",n[n.EOF=17]="EOF"})(cm||(cm={}));const ZS=QS;var fm;(function(n){n[n.InvalidSymbol=1]="InvalidSymbol",n[n.InvalidNumberFormat=2]="InvalidNumberFormat",n[n.PropertyNameExpected=3]="PropertyNameExpected",n[n.ValueExpected=4]="ValueExpected",n[n.ColonExpected=5]="ColonExpected",n[n.CommaExpected=6]="CommaExpected",n[n.CloseBraceExpected=7]="CloseBraceExpected",n[n.CloseBracketExpected=8]="CloseBracketExpected",n[n.EndOfFileExpected=9]="EndOfFileExpected",n[n.InvalidCommentToken=10]="InvalidCommentToken",n[n.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=12]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",n[n.InvalidUnicode=14]="InvalidUnicode",n[n.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",n[n.InvalidCharacter=16]="InvalidCharacter"})(fm||(fm={}));function eE(n){switch(n){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}const tE=Dh(n=>{const e=n.state.doc.toString();if(e.length===0)return[];const t=[];return ZS(e,t),t.map(r=>({from:r.offset,to:r.offset+1,severity:"error",message:eE(r.error)}))}),Yy=1024;let nE=0;class zc{constructor(e,t){this.from=e,this.to=t}}class fe{constructor(e={}){this.id=nE++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=$t.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}fe.closedBy=new fe({deserialize:n=>n.split(" ")});fe.openedBy=new fe({deserialize:n=>n.split(" ")});fe.group=new fe({deserialize:n=>n.split(" ")});fe.isolate=new fe({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});fe.contextHash=new fe({perNode:!0});fe.lookAhead=new fe({perNode:!0});fe.mounted=new fe({perNode:!0});class Hu{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[fe.mounted.id]}}const rE=Object.create(null);class $t{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):rE,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new $t(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(fe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(fe.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}$t.none=new $t("",Object.create(null),0,8);class $d{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new $t(r.name,i,r.id,r.flags):r)}return new $d(t)}}const Ml=new WeakMap,hm=new WeakMap;var lt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(lt||(lt={}));class Ze{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Hu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new _h(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Ml.get(this)||this.topNode,s=new _h(i);return s.moveTo(e,t),Ml.set(this,s._tree),s}get topNode(){return new nn(this,0,0,null)}resolve(e,t=0){let r=xo(Ml.get(this)||this.topNode,e,t,!1);return Ml.set(this,r),r}resolveInner(e,t=0){let r=xo(hm.get(this)||this.topNode,e,t,!0);return hm.set(this,r),r}resolveStack(e,t=0){return oE(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,l=(o&lt.IncludeAnonymous)>0;for(let u=this.cursor(o|lt.IncludeAnonymous);;){let a=!1;if(u.from<=s&&u.to>=i&&(!l&&u.type.isAnonymous||t(u)!==!1)){if(u.firstChild())continue;a=!0}for(;a&&r&&(l||!u.type.isAnonymous)&&r(u),!u.nextSibling();){if(!u.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:jd($t.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new Ze(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new Ze($t.none,t,r,i)))}static build(e){return lE(e)}}Ze.empty=new Ze($t.none,[],[],0);class Nd{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Nd(this.buffer,this.index)}}class Fr{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return $t.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,l=-1;for(let u=e;u!=t&&!(Qy(s,i,o[u+1],o[u+2])&&(l=u,r>0));u=o[u+3]);return l}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,u=0;l<t;){s[u++]=i[l++],s[u++]=i[l++]-r;let a=s[u++]=i[l++]-r;s[u++]=i[l++]-e,o=Math.max(o,a)}return new Fr(s,o,this.set)}}function Qy(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function xo(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof nn&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:lt.IgnoreOverlays;if(r)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof nn&&o.index<0&&((i=l.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class Xy{cursor(e=0){return new _h(this,e)}getChild(e,t=null,r=null){let i=dm(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return dm(this,e,t,r)}resolve(e,t=0){return xo(this,e,t,!1)}resolveInner(e,t=0){return xo(this,e,t,!0)}matchContext(e){return Ch(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class nn extends Xy{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:l,positions:u}=o._tree,a=t>0?l.length:-1;e!=a;e+=t){let c=l[e],f=u[e]+o.from;if(Qy(i,r,f,f+c.length)){if(c instanceof Fr){if(s&lt.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,t,r-f,i);if(h>-1)return new vr(new iE(o,c,e,f),null,h)}else if(s&lt.IncludeAnonymous||!c.type.isAnonymous||Ld(c)){let h;if(!(s&lt.IgnoreMounts)&&(h=Hu.get(c))&&!h.overlay)return new nn(h.tree,f,e,o);let d=new nn(c,f,e,o);return s&lt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(s&lt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&lt.IgnoreOverlays)&&(i=Hu.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:l}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new nn(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function dm(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Ch(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class iE{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class vr extends Xy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new vr(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&lt.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new vr(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new vr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new vr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new Ze(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Zy(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof nn&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new sE(i,t)}class sE{constructor(e,t){this.heads=e,this.node=t}get next(){return Zy(this.heads)}}function oE(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof nn?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=Hu.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new nn(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(xo(l,e,t,!1))}}return i?Zy(i):r}class _h{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof nn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof nn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&lt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&lt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&lt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let l=r._tree.children[s];if(this.mode&lt.IncludeAnonymous||l instanceof Fr||!l.type.isAnonymous||Ld(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new vr(this.buffer,t,this.stack[i]);return this.bufferNode=new vr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ch(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Ch(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Ld(n){return n.children.some(e=>e instanceof Fr||!e.type.isAnonymous||Ld(e))}function lE(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=Yy,reused:s=[],minRepeatType:o=r.types.length}=n,l=Array.isArray(t)?new Nd(t,t.length):t,u=r.types,a=0,c=0;function f(D,A,k,C,O,L){let{id:B,start:P,end:T,size:F}=l,M=c,ee=a;for(;F<0;)if(l.next(),F==-1){let Pe=s[B];k.push(Pe),C.push(P-D);return}else if(F==-3){a=B;return}else if(F==-4){c=B;return}else throw new RangeError(`Unrecognized record size: ${F}`);let q=u[B],U,K,xe=P-D;if(T-P<=i&&(K=g(l.pos-A,O))){let Pe=new Uint16Array(K.size-K.skip),Jt=l.pos-K.size,kn=Pe.length;for(;l.pos>Jt;)kn=b(K.start,Pe,kn);U=new Fr(Pe,T-K.start,r),xe=K.start-D}else{let Pe=l.pos-F;l.next();let Jt=[],kn=[],jr=B>=o?B:-1,xi=0,bl=T;for(;l.pos>Pe;)jr>=0&&l.id==jr&&l.size>=0?(l.end<=bl-i&&(p(Jt,kn,P,xi,l.end,bl,jr,M,ee),xi=Jt.length,bl=l.end),l.next()):L>2500?h(P,Pe,Jt,kn):f(P,Pe,Jt,kn,jr,L+1);if(jr>=0&&xi>0&&xi<Jt.length&&p(Jt,kn,P,xi,P,bl,jr,M,ee),Jt.reverse(),kn.reverse(),jr>-1&&xi>0){let Hp=d(q,ee);U=jd(q,Jt,kn,0,Jt.length,0,T-P,Hp,Hp)}else U=m(q,Jt,kn,T-P,M-T,ee)}k.push(U),C.push(xe)}function h(D,A,k,C){let O=[],L=0,B=-1;for(;l.pos>A;){let{id:P,start:T,end:F,size:M}=l;if(M>4)l.next();else{if(B>-1&&T<B)break;B<0&&(B=F-i),O.push(P,T,F),L++,l.next()}}if(L){let P=new Uint16Array(L*4),T=O[O.length-2];for(let F=O.length-3,M=0;F>=0;F-=3)P[M++]=O[F],P[M++]=O[F+1]-T,P[M++]=O[F+2]-T,P[M++]=M;k.push(new Fr(P,O[2]-T,r)),C.push(T-D)}}function d(D,A){return(k,C,O)=>{let L=0,B=k.length-1,P,T;if(B>=0&&(P=k[B])instanceof Ze){if(!B&&P.type==D&&P.length==O)return P;(T=P.prop(fe.lookAhead))&&(L=C[B]+P.length+T)}return m(D,k,C,O,L,A)}}function p(D,A,k,C,O,L,B,P,T){let F=[],M=[];for(;D.length>C;)F.push(D.pop()),M.push(A.pop()+k-O);D.push(m(r.types[B],F,M,L-O,P-L,T)),A.push(O-k)}function m(D,A,k,C,O,L,B){if(L){let P=[fe.contextHash,L];B=B?[P].concat(B):[P]}if(O>25){let P=[fe.lookAhead,O];B=B?[P].concat(B):[P]}return new Ze(D,A,k,C,B)}function g(D,A){let k=l.fork(),C=0,O=0,L=0,B=k.end-i,P={size:0,start:0,skip:0};e:for(let T=k.pos-D;k.pos>T;){let F=k.size;if(k.id==A&&F>=0){P.size=C,P.start=O,P.skip=L,L+=4,C+=4,k.next();continue}let M=k.pos-F;if(F<0||M<T||k.start<B)break;let ee=k.id>=o?4:0,q=k.start;for(k.next();k.pos>M;){if(k.size<0)if(k.size==-3)ee+=4;else break e;else k.id>=o&&(ee+=4);k.next()}O=q,C+=F,L+=ee}return(A<0||C==D)&&(P.size=C,P.start=O,P.skip=L),P.size>4?P:void 0}function b(D,A,k){let{id:C,start:O,end:L,size:B}=l;if(l.next(),B>=0&&C<o){let P=k;if(B>4){let T=l.pos-(B-4);for(;l.pos>T;)k=b(D,A,k)}A[--k]=P,A[--k]=L-D,A[--k]=O-D,A[--k]=C}else B==-3?a=C:B==-4&&(c=C);return k}let y=[],x=[];for(;l.pos>0;)f(n.start||0,n.bufferStart||0,y,x,-1,0);let w=(e=n.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new Ze(u[n.topID],y.reverse(),x.reverse(),w)}const pm=new WeakMap;function yu(n,e){if(!n.isAnonymous||e instanceof Fr||e.type!=n)return 1;let t=pm.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof Ze)){t=1;break}t+=yu(n,r)}pm.set(e,t)}return t}function jd(n,e,t,r,i,s,o,l,u){let a=0;for(let p=r;p<i;p++)a+=yu(n,e[p]);let c=Math.ceil(a*1.5/8),f=[],h=[];function d(p,m,g,b,y){for(let x=g;x<b;){let w=x,D=m[x],A=yu(n,p[x]);for(x++;x<b;x++){let k=yu(n,p[x]);if(A+k>=c)break;A+=k}if(x==w+1){if(A>c){let k=p[w];d(k.children,k.positions,0,k.children.length,m[w]+y);continue}f.push(p[w])}else{let k=m[x-1]+p[x-1].length-D;f.push(jd(n,p,m,w,x,D,k,null,u))}h.push(D+y-s)}}return d(e,t,r,i,0),(l||u)(f,h,o)}class si{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new si(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let l=0,u=0,a=0;;l++){let c=l<t.length?t[l]:null,f=c?c.fromA:1e9;if(f-u>=r)for(;o&&o.from<f;){let h=o;if(u>=h.from||f<=h.to||a){let d=Math.max(h.from,u)-a,p=Math.min(h.to,f)-a;h=d>=p?null:new si(d,p,h.tree,h.offset+a,l>0,!!c)}if(h&&i.push(h),o.to>f)break;o=s<e.length?e[s++]:null}if(!c)break;u=c.toA,a=c.toA-c.toB}return i}}let e2=class{startParse(e,t,r){return typeof e=="string"&&(e=new uE(e)),r=r?r.length?r.map(i=>new zc(i.from,i.to)):[new zc(0,0)]:[new zc(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}};class uE{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new fe({perNode:!0});var mm={};class Wu{constructor(e,t,r,i,s,o,l,u,a,c=0,f){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=u,this.curContext=a,this.lookAhead=c,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new Wu(e,[],t,r,r,0,[],0,i?new gm(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(i);if(l&&(this.score+=l),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let u=this.stack.length-(r-1)*3-(e&262144?6:0),a=u?this.stack[u-2]:this.p.ranges[0].from,c=this.reducePos-a;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=c));let f=u?this.stack[u-1]:0,h=this.bufferBase+this.buffer.length-f;if(i<s.minRepeatTerm||e&131072){let d=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,a,d,h+4,!0)}if(e&262144)this.state=this.stack[u];else{let d=this.stack[u-3];this.state=s.getGoto(d,i,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(i,a)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==r)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let u=o;u>0&&this.buffer[u-2]>r;u-=4)if(this.buffer[u-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,r,i){e&65536?this.reduce(e):this.shift(e,t,r,i)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Wu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new aE(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let o=t[s+1];i.some((l,u)=>u&1&&l==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=t&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let u=o&65535,a=this.stack.length-l*3;if(a>=0&&e.getGoto(this.stack[a],u,!1)>=0)return l<<19|65536|u}}else{let l=r(o,s+1);if(l!=null)return l}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new gm(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class gm{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class aE{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Gu{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Gu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Gu(this.stack,this.pos,this.index)}}function Bl(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let u=o-32;if(u>=46&&(u-=46,l=!0),s+=u,l)break;s*=46}t?t[i++]=s:t=new e(s)}return t}class xu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const bm=new xu;class cE{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=bm,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=r;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=bm,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class qi{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;fE(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}qi.prototype.contextual=qi.prototype.fallback=qi.prototype.extend=!1;qi.prototype.fallback=qi.prototype.extend=!1;function fE(n,e,t,r,i,s){let o=0,l=1<<r,{dialect:u}=t.p.parser;e:for(;(l&n[o])!=0;){let a=n[o+1];for(let d=o+3;d<a;d+=2)if((n[d+1]&l)>0){let p=n[d];if(u.allows(p)&&(e.token.value==-1||e.token.value==p||hE(p,e.token.value,i,s))){e.acceptToken(p);break}}let c=e.next,f=0,h=n[o+2];if(e.next<0&&h>f&&n[a+h*3-3]==65535){o=n[a+h*3-1];continue e}for(;f<h;){let d=f+h>>1,p=a+d+(d<<1),m=n[p],g=n[p+1]||65536;if(c<m)h=d;else if(c>=g)f=d+1;else{o=n[p+2],e.advance();continue e}}break}}function ym(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function hE(n,e,t,r){let i=ym(t,r,e);return i<0||ym(t,r,n)<i}const qt=typeof process<"u"&&mm&&/\bparse\b/.test(mm.LOG);let Uc=null;function xm(n,e,t){let r=n.cursor(lt.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class dE{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?xm(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?xm(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof Ze){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let u=s.prop(fe.lookAhead);if(!u||l+u<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class pE{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new xu)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,u=0;for(let a=0;a<s.length;a++){if((1<<a&o)==0)continue;let c=s[a],f=this.tokens[a];if(!(r&&!c.fallback)&&((c.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,c,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(u=Math.max(f.lookAhead,u)),f.value!=0)){let h=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!c.extend&&(r=f,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return u&&e.setLookAhead(u),!r&&e.pos==this.stream.end&&(r=new xu,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new xu,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),r);if(l>=0&&r.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let u=0;u<2;u++)for(let a=o.stateSlot(s,u?2:1);;a+=3){if(l[a]==65535)if(l[a+1]==1)a=Yn(l,a+2);else{i==0&&l[a+1]==2&&(i=this.putAction(Yn(l,a+2),t,r,i));break}l[a]==t&&(i=this.putAction(Yn(l,a+1),t,r,i))}return i}}class mE{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new cE(t,i),this.tokens=new pE(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[Wu.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new dE(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)r.push(l);else{if(this.advanceStack(l,r,e))continue;{i||(i=[],s=[]),i.push(l);let u=this.tokens.getMainToken(l);s.push(u.value,u.end)}}break}}if(!r.length){let o=i&&bE(i);if(o)return qt&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw qt&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return qt&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((l,u)=>u.score-l.score);r.length>o;)r.pop();r.some(l=>l.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let l=r[o];for(let u=o+1;u<r.length;u++){let a=r[u];if(l.sameState(a)||l.buffer.length>500&&a.buffer.length>500)if((l.score-a.score||l.buffer.length-a.buffer.length)>0)r.splice(u--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=qt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let a=e.curContext&&e.curContext.tracker.strict,c=a?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!a||(f.prop(fe.contextHash)||0)==c))return e.useNode(f,h),qt&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof Ze)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof Ze&&f.positions[0]==0)f=d;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),qt&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let a=0;a<u.length;){let c=u[a++],f=u[a++],h=u[a++],d=a==u.length||!r,p=d?e:e.split(),m=this.tokens.mainToken;if(p.apply(c,f,m?m.start:p.pos,h),qt&&console.log(o+this.stackID(p)+` (via ${(c&65536)==0?"shift":`reduce of ${s.getName(c&65535)}`} for ${s.getName(f)} @ ${i}${p==e?"":", split"})`),d)return!0;p.pos>i?t.push(p):r.push(p)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return vm(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],u=t[o<<1],a=t[(o<<1)+1],c=qt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),qt&&console.log(c+this.stackID(l)+" (restarted)"),this.advanceFully(l,r))))continue;let f=l.split(),h=c;for(let d=0;f.forceReduce()&&d<10&&(qt&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));d++)qt&&(h=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(u))qt&&console.log(c+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,r);this.stream.end>l.pos?(a==l.pos&&(a++,u=0),l.recoverByDelete(u,a),qt&&console.log(c+this.stackID(l)+` (via recover-delete ${this.parser.getName(u)})`),vm(l,r)):(!i||i.score<l.score)&&(i=l)}return i}stackToTree(e){return e.close(),Ze.build({buffer:Gu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Uc||(Uc=new WeakMap)).get(e);return t||Uc.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function vm(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class gE{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class Ku extends e2{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let r=Object.keys(e.topRules).map(l=>e.topRules[l][1]),i=[];for(let l=0;l<t.length;l++)i.push([]);function s(l,u,a){i[l].push([u,u.deserialize(String(a))])}if(e.nodeProps)for(let l of e.nodeProps){let u=l[0];typeof u=="string"&&(u=fe[u]);for(let a=1;a<l.length;){let c=l[a++];if(c>=0)s(c,u,l[a++]);else{let f=l[a+-c];for(let h=-c;h>0;h--)s(l[a++],u,f);a++}}}this.nodeSet=new $d(t.map((l,u)=>$t.define({name:u>=this.minRepeatTerm?void 0:l,id:u,props:i[u],top:r.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Yy;let o=Bl(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(km),this.states=Bl(e.states,Uint32Array),this.data=Bl(e.stateData),this.goto=Bl(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new qi(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new mE(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],l=o&1,u=i[s++];if(l&&r)return u;for(let a=s+(o>>1);s<a;s++)if(i[s]==e)return u;if(l)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Yn(r,s+2)];else{if(r[s+1]==2)return Yn(r,s+2);break}if(o==t||o==0)return Yn(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Yn(this.data,s+2);else break;i=t(Yn(this.data,s+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Yn(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(Ku.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(l=>l.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=km(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[l]=1;return new gE(e,r,i)}static deserialize(e){return new Ku(e)}}function Yn(n,e){return n[e]|n[e+1]<<16}function bE(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function km(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let yE=0;class Qt{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=yE++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof Qt&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new Qt(r,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new Ju(e);return r=>r.modified.indexOf(t)>-1?r:Ju.get(r.base||r,r.modified.concat(t).sort((i,s)=>i.id-s.id))}}let xE=0;class Ju{constructor(e){this.name=e,this.instances=[],this.id=xE++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(l=>l.base==e&&vE(t,l.modified));if(r)return r;let i=[],s=new Qt(e.name,i,e,t);for(let l of t)l.instances.push(s);let o=kE(t);for(let l of e.set)if(!l.modified.length)for(let u of o)i.push(Ju.get(l,u));return s}}function vE(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function kE(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function t2(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,l=i;for(let f=0;;){if(l=="..."&&f>0&&f+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+i);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);l=i.slice(f)}let u=s.length-1,a=s[u];if(!a)throw new RangeError("Invalid path: "+i);let c=new Yu(r,o,u>0?s.slice(0,u):null);e[a]=c.sort(e[a])}}return n2.add(e)}const n2=new fe;let Yu=class{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Yu.empty=new Yu([],2,null);function r2(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let l of s)for(let u of l.set){let a=t[u.id];if(a){o=o?o+" "+a:a;break}}return o},scope:r}}function wE(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function DE(n,e,t,r=0,i=n.length){let s=new AE(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class AE{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:l,to:u}=e;if(l>=r||u<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let a=i,c=CE(e)||Yu.empty,f=wE(s,c.tags);if(f&&(a&&(a+=" "),a+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(t,l),a),c.opaque)return;let h=e.tree&&e.tree.prop(fe.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),p=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),m=e.firstChild();for(let g=0,b=l;;g++){let y=g<h.overlay.length?h.overlay[g]:null,x=y?y.from+l:u,w=Math.max(t,b),D=Math.min(r,x);if(w<D&&m)for(;e.from<D&&(this.highlightRange(e,w,D,i,s),this.startSpan(Math.min(D,e.to),a),!(e.to>=x||!e.nextSibling())););if(!y||x>r)break;b=y.to+l,b>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+l),Math.min(r,b),"",p),this.startSpan(Math.min(r,b),a))}m&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),a)}while(e.nextSibling());e.parent()}}}function CE(n){let e=n.type.prop(n2);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const G=Qt.define,$l=G(),fr=G(),wm=G(fr),Dm=G(fr),hr=G(),Nl=G(hr),Hc=G(hr),Cn=G(),qr=G(Cn),Dn=G(),An=G(),Sh=G(),Is=G(Sh),Ll=G(),H={comment:$l,lineComment:G($l),blockComment:G($l),docComment:G($l),name:fr,variableName:G(fr),typeName:wm,tagName:G(wm),propertyName:Dm,attributeName:G(Dm),className:G(fr),labelName:G(fr),namespace:G(fr),macroName:G(fr),literal:hr,string:Nl,docString:G(Nl),character:G(Nl),attributeValue:G(Nl),number:Hc,integer:G(Hc),float:G(Hc),bool:G(hr),regexp:G(hr),escape:G(hr),color:G(hr),url:G(hr),keyword:Dn,self:G(Dn),null:G(Dn),atom:G(Dn),unit:G(Dn),modifier:G(Dn),operatorKeyword:G(Dn),controlKeyword:G(Dn),definitionKeyword:G(Dn),moduleKeyword:G(Dn),operator:An,derefOperator:G(An),arithmeticOperator:G(An),logicOperator:G(An),bitwiseOperator:G(An),compareOperator:G(An),updateOperator:G(An),definitionOperator:G(An),typeOperator:G(An),controlOperator:G(An),punctuation:Sh,separator:G(Sh),bracket:Is,angleBracket:G(Is),squareBracket:G(Is),paren:G(Is),brace:G(Is),content:Cn,heading:qr,heading1:G(qr),heading2:G(qr),heading3:G(qr),heading4:G(qr),heading5:G(qr),heading6:G(qr),contentSeparator:G(Cn),list:G(Cn),quote:G(Cn),emphasis:G(Cn),strong:G(Cn),link:G(Cn),monospace:G(Cn),strikethrough:G(Cn),inserted:G(),deleted:G(),changed:G(),invalid:G(),meta:Ll,documentMeta:G(Ll),annotation:G(Ll),processingInstruction:G(Ll),definition:Qt.defineModifier("definition"),constant:Qt.defineModifier("constant"),function:Qt.defineModifier("function"),standard:Qt.defineModifier("standard"),local:Qt.defineModifier("local"),special:Qt.defineModifier("special")};for(let n in H){let e=H[n];e instanceof Qt&&(e.name=n)}r2([{tag:H.link,class:"tok-link"},{tag:H.heading,class:"tok-heading"},{tag:H.emphasis,class:"tok-emphasis"},{tag:H.strong,class:"tok-strong"},{tag:H.keyword,class:"tok-keyword"},{tag:H.atom,class:"tok-atom"},{tag:H.bool,class:"tok-bool"},{tag:H.url,class:"tok-url"},{tag:H.labelName,class:"tok-labelName"},{tag:H.inserted,class:"tok-inserted"},{tag:H.deleted,class:"tok-deleted"},{tag:H.literal,class:"tok-literal"},{tag:H.string,class:"tok-string"},{tag:H.number,class:"tok-number"},{tag:[H.regexp,H.escape,H.special(H.string)],class:"tok-string2"},{tag:H.variableName,class:"tok-variableName"},{tag:H.local(H.variableName),class:"tok-variableName tok-local"},{tag:H.definition(H.variableName),class:"tok-variableName tok-definition"},{tag:H.special(H.variableName),class:"tok-variableName2"},{tag:H.definition(H.propertyName),class:"tok-propertyName tok-definition"},{tag:H.typeName,class:"tok-typeName"},{tag:H.namespace,class:"tok-namespace"},{tag:H.className,class:"tok-className"},{tag:H.macroName,class:"tok-macroName"},{tag:H.propertyName,class:"tok-propertyName"},{tag:H.operator,class:"tok-operator"},{tag:H.comment,class:"tok-comment"},{tag:H.meta,class:"tok-meta"},{tag:H.invalid,class:"tok-invalid"},{tag:H.punctuation,class:"tok-punctuation"}]);const _E=t2({String:H.string,Number:H.number,"True False":H.bool,PropertyName:H.propertyName,Null:H.null,", :":H.separator,"[ ]":H.squareBracket,"{ }":H.brace}),SE=Ku.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[_E],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var Wc;const Fi=new fe;function EE(n){return Q.define({combine:n?e=>e.concat(n):void 0})}const OE=new fe;class hn{constructor(e,t,r=[],i=""){this.data=e,this.name=i,he.prototype.hasOwnProperty("tree")||Object.defineProperty(he.prototype,"tree",{get(){return et(this)}}),this.parser=t,this.extension=[Pr.of(this),he.languageData.of((s,o,l)=>{let u=Am(s,o,l),a=u.type.prop(Fi);if(!a)return[];let c=s.facet(a),f=u.type.prop(OE);if(f){let h=u.resolve(o-u.from,l);for(let d of f)if(d.test(h,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return Am(e,t,r).type.prop(Fi)==this.data}findRegions(e){let t=e.facet(Pr);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Fi)==this.data){r.push({from:o,to:o+s.length});return}let l=s.prop(fe.mounted);if(l){if(l.tree.prop(Fi)==this.data){if(l.overlay)for(let u of l.overlay)r.push({from:u.from+o,to:u.to+o});else r.push({from:o,to:o+s.length});return}else if(l.overlay){let u=r.length;if(i(l.tree,l.overlay[0].from+o),r.length>u)return}}for(let u=0;u<s.children.length;u++){let a=s.children[u];a instanceof Ze&&i(a,s.positions[u]+o)}};return i(et(e),0),r}get allowsNesting(){return!0}}hn.setState=re.define();function Am(n,e,t){let r=n.facet(Pr),i=et(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,lt.ExcludeBuffers))s.type.isTop&&(i=s);return i}class Qu extends hn{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=EE(e.languageData);return new Qu(t,e.parser.configure({props:[Fi.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new Qu(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function et(n){let e=n.field(hn.state,!1);return e?e.tree:Ze.empty}class TE{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Ms=null;class Xu{constructor(e,t,r=[],i,s,o,l,u){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Xu(e,t,[],Ze.empty,0,r,[],null)}startParse(){return this.parser.startParse(new TE(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ze.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(si.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(si.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Ms;Ms=this;try{return e()}finally{Ms=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Cm(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((a,c,f,h)=>u.push({fromA:a,toA:c,fromB:f,toB:h})),r=si.applyChanges(r,u),i=Ze.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let a of this.skipped){let c=e.mapPos(a.from,1),f=e.mapPos(a.to,-1);c<f&&l.push({from:c,to:f})}}}return new Xu(this.parser,t,r,i,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Cm(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends e2{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let u=Ms;if(u){for(let a of i)u.tempSkipped.push(a);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=o,new Ze($t.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Ms}}function Cm(n,e,t){return si.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class rs{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new rs(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Xu.create(e.facet(Pr).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new rs(r)}}hn.state=Ke.define({create:rs.init,update(n,e){for(let t of e.effects)if(t.is(hn.setState))return t.value;return e.startState.facet(Pr)!=e.state.facet(Pr)?rs.init(e.state):n.apply(e)}});let i2=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(i2=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Gc=typeof navigator<"u"&&(!((Wc=navigator.scheduling)===null||Wc===void 0)&&Wc.isInputPending)?()=>navigator.scheduling.isInputPending():null,FE=qe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(hn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(hn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=i2(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(hn.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Gc?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<i&&r.doc.length>i+1e3,u=s.context.work(()=>Gc&&Gc()||Date.now()>o,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:hn.setState.of(new rs(s.context))})),this.chunkBudget>0&&!(u&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>St(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Pr=Q.define({combine(n){return n.length?n[0]:null},enables:n=>[hn.state,FE,Y.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class PE{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const RE=Q.define(),tl=Q.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Zu(n){let e=n.facet(tl);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function vo(n,e){let t="",r=n.tabSize,i=n.facet(tl)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function qd(n,e){n instanceof he&&(n=new Ga(n));for(let r of n.state.facet(RE)){let i=r(n,e);if(i!==void 0)return i}let t=et(n.state);return t.length>=e?IE(n,t,e):null}class Ga{constructor(e,t={}){this.state=e,this.options=t,this.unit=Zu(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return ps(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const s2=new fe;function IE(n,e,t){let r=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return o2(r,n,t)}function o2(n,e,t){for(let r=n;r;r=r.next){let i=BE(r.node);if(i)return i(Vd.create(e,t,r))}return 0}function ME(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function BE(n){let e=n.type.prop(s2);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(fe.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>jE(o,!0,1,void 0,s&&!ME(o)?i.from:void 0)}return n.parent==null?$E:null}function $E(){return 0}class Vd extends Ga{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new Vd(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(NE(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return o2(this.context.next,this.base,this.pos)}}function NE(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function LE(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let l=t.to;;){let u=e.childAfter(l);if(!u||u==r)return null;if(!u.type.isSkipped){if(u.from>=o)return null;let a=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+a}}l=u.to}}function jE(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=r&&s.slice(o,o+r.length)==r||i==n.pos+o,u=LE(n);return u?l?n.column(u.from):n.column(u.to):n.baseIndent+(l?0:n.unit*t)}function _m({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const qE=200;function VE(){return he.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+qE)return n;let s=t.sliceString(i.from,r);if(!e.some(a=>a.test(s)))return n;let{state:o}=n,l=-1,u=[];for(let{head:a}of o.selection.ranges){let c=o.doc.lineAt(a);if(c.from==l)continue;l=c.from;let f=qd(o,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=vo(o,f);h!=d&&u.push({from:c.from,to:c.from+h.length,insert:d})}return u.length?[n,{changes:u,sequential:!0}]:n})}const zE=Q.define(),l2=new fe;function UE(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function HE(n,e,t){let r=et(n);if(r.length<t)return null;let i=r.resolveStack(t,1),s=null;for(let o=i;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(s&&l.from<e)break;let u=l.type.prop(l2);if(u&&(l.to<r.length-50||r.length==n.doc.length||!WE(l))){let a=u(l,n);a&&a.from<=t&&a.from>=e&&a.to>t&&(s=a)}}return s}function WE(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function ea(n,e,t){for(let r of n.facet(zE)){let i=r(n,e,t);if(i)return i}return HE(n,e,t)}function u2(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const Ka=re.define({map:u2}),nl=re.define({map:u2});function a2(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const hi=Ke.define({create(){return te.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,r)=>n=Sm(n,t,r)),n=n.map(e.changes);for(let t of e.effects)if(t.is(Ka)&&!GE(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(h2),i=r?te.replace({widget:new e6(r(e.state,t.value))}):Em;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(nl)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=Sm(n,e.selection.main.head)),n},provide:n=>Y.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Em.range(r,i))}return te.set(e,!0)}});function Sm(n,e,t=e){let r=!1;return n.between(e,t,(i,s)=>{i<t&&s>e&&(r=!0)}),r?n.update({filterFrom:e,filterTo:t,filter:(i,s)=>i>=t||s<=e}):n}function ta(n,e,t){var r;let i=null;return(r=n.field(hi,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function GE(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function c2(n,e){return n.field(hi,!1)?e:e.concat(re.appendConfig.of(d2()))}const KE=n=>{for(let e of a2(n)){let t=ea(n.state,e.from,e.to);if(t)return n.dispatch({effects:c2(n.state,[Ka.of(t),f2(n,t)])}),!0}return!1},JE=n=>{if(!n.state.field(hi,!1))return!1;let e=[];for(let t of a2(n)){let r=ta(n.state,t.from,t.to);r&&e.push(nl.of(r),f2(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function f2(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return Y.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const YE=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=ea(e,i.from,i.to);s&&t.push(Ka.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:c2(n.state,t)}),!!t.length},QE=n=>{let e=n.state.field(hi,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(nl.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},XE=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:KE},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:JE},{key:"Ctrl-Alt-[",run:YE},{key:"Ctrl-Alt-]",run:QE}],ZE={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},h2=Q.define({combine(n){return gn(n,ZE)}});function d2(n){return[hi,r6]}function p2(n,e){let{state:t}=n,r=t.facet(h2),i=o=>{let l=n.lineBlockAt(n.posAtDOM(o.target)),u=ta(n.state,l.from,l.to);u&&n.dispatch({effects:nl.of(u)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Em=te.replace({widget:new class extends Hn{toDOM(n){return p2(n,null)}}});class e6 extends Hn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return p2(e,this.value)}}const t6={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Kc extends qn{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function n6(n={}){let e={...t6,...n},t=new Kc(e,!0),r=new Kc(e,!1),i=qe.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Pr)!=o.state.facet(Pr)||o.startState.field(hi,!1)!=o.state.field(hi,!1)||et(o.startState)!=et(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new lr;for(let u of o.viewportLineBlocks){let a=ta(o.state,u.from,u.to)?r:ea(o.state,u.from,u.to)?t:null;a&&l.add(u.from,u.from,a)}return l.finish()}}),{domEventHandlers:s}=e;return[i,$y({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(i))===null||l===void 0?void 0:l.markers)||me.empty},initialSpacer(){return new Kc(e,!1)},domEventHandlers:{...s,click:(o,l,u)=>{if(s.click&&s.click(o,l,u))return!0;let a=ta(o.state,l.from,l.to);if(a)return o.dispatch({effects:nl.of(a)}),!0;let c=ea(o.state,l.from,l.to);return c?(o.dispatch({effects:Ka.of(c)}),!0):!1}}}),d2()]}const r6=Y.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ja{constructor(e,t){this.specs=e;let r;function i(l){let u=Er.newName();return(r||(r=Object.create(null)))["."+u]=l,u}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof hn?l=>l.prop(Fi)==o.data:o?l=>l==o:void 0,this.style=r2(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=r?new Er(r):null,this.themeType=t.themeType}static define(e,t){return new Ja(e,t||{})}}const Eh=Q.define(),m2=Q.define({combine(n){return n.length?[n[0]]:null}});function Jc(n){let e=n.facet(Eh);return e.length?e:n.facet(m2)}function i6(n,e){let t=[o6],r;return n instanceof Ja&&(n.module&&t.push(Y.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(m2.of(n)):r?t.push(Eh.computeN([Y.darkTheme],i=>i.facet(Y.darkTheme)==(r=="dark")?[n]:[])):t.push(Eh.of(n)),t}class s6{constructor(e){this.markCache=Object.create(null),this.tree=et(e.state),this.decorations=this.buildDeco(e,Jc(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=et(e.state),r=Jc(e.state),i=r!=Jc(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return te.none;let r=new lr;for(let{from:i,to:s}of e.visibleRanges)DE(this.tree,t,(o,l,u)=>{r.add(o,l,this.markCache[u]||(this.markCache[u]=te.mark({class:u})))},i,s);return r.finish()}}const o6=$r.high(qe.fromClass(s6,{decorations:n=>n.decorations})),l6=Ja.define([{tag:H.meta,color:"#404740"},{tag:H.link,textDecoration:"underline"},{tag:H.heading,textDecoration:"underline",fontWeight:"bold"},{tag:H.emphasis,fontStyle:"italic"},{tag:H.strong,fontWeight:"bold"},{tag:H.strikethrough,textDecoration:"line-through"},{tag:H.keyword,color:"#708"},{tag:[H.atom,H.bool,H.url,H.contentSeparator,H.labelName],color:"#219"},{tag:[H.literal,H.inserted],color:"#164"},{tag:[H.string,H.deleted],color:"#a11"},{tag:[H.regexp,H.escape,H.special(H.string)],color:"#e40"},{tag:H.definition(H.variableName),color:"#00f"},{tag:H.local(H.variableName),color:"#30a"},{tag:[H.typeName,H.namespace],color:"#085"},{tag:H.className,color:"#167"},{tag:[H.special(H.variableName),H.macroName],color:"#256"},{tag:H.definition(H.propertyName),color:"#00c"},{tag:H.comment,color:"#940"},{tag:H.invalid,color:"#f00"}]),u6=Y.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),g2=1e4,b2="()[]{}",y2=Q.define({combine(n){return gn(n,{afterCursor:!0,brackets:b2,maxScanDistance:g2,renderMatch:f6})}}),a6=te.mark({class:"cm-matchingBracket"}),c6=te.mark({class:"cm-nonmatchingBracket"});function f6(n){let e=[],t=n.matched?a6:c6;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const h6=Ke.define({create(){return te.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(y2);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=In(e.state,i.head,-1,r)||i.head>0&&In(e.state,i.head-1,1,r)||r.afterCursor&&(In(e.state,i.head,1,r)||i.head<e.state.doc.length&&In(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return te.set(t,!0)},provide:n=>Y.decorations.from(n)}),d6=[h6,u6];function p6(n={}){return[y2.of(n),d6]}const m6=new fe;function Oh(n,e,t){let r=n.prop(e<0?fe.openedBy:fe.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Th(n){let e=n.type.prop(m6);return e?e(n.node):n}function In(n,e,t,r={}){let i=r.maxScanDistance||g2,s=r.brackets||b2,o=et(n),l=o.resolveInner(e,t);for(let u=l;u;u=u.parent){let a=Oh(u.type,t,s);if(a&&u.from<u.to){let c=Th(u);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return g6(n,e,t,u,c,a,s)}}return b6(n,e,t,o,l.type,i,s)}function g6(n,e,t,r,i,s,o){let l=r.parent,u={from:i.from,to:i.to},a=0,c=l==null?void 0:l.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(a==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let f=Th(c);return{start:u,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(Oh(c.type,t,o))a++;else if(Oh(c.type,-t,o)){if(a==0){let f=Th(c);return{start:u,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}a--}}while(t<0?c.prevSibling():c.nextSibling());return{start:u,matched:!1}}function b6(n,e,t,r,i,s,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),u=o.indexOf(l);if(u<0||u%2==0!=t>0)return null;let a={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=s;){let d=c.value;t<0&&(h+=d.length);let p=e+h*t;for(let m=t>0?0:d.length-1,g=t>0?d.length:-1;m!=g;m+=t){let b=o.indexOf(d[m]);if(!(b<0||r.resolveInner(p+m,1).type!=i))if(b%2==0==t>0)f++;else{if(f==1)return{start:a,end:{from:p+m,to:p+m+1},matched:b>>1==u>>1};f--}}t>0&&(h+=d.length)}return c.done?{start:a,matched:!1}:null}const y6=Object.create(null),Om=[$t.none],Tm=[],Fm=Object.create(null),x6=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])x6[n]=v6(y6,e);function Yc(n,e){Tm.indexOf(n)>-1||(Tm.push(n),console.warn(e))}function v6(n,e){let t=[];for(let l of e.split(" ")){let u=[];for(let a of l.split(".")){let c=n[a]||H[a];c?typeof c=="function"?u.length?u=u.map(c):Yc(a,`Modifier ${a} used at start of tag`):u.length?Yc(a,`Tag ${a} used as modifier`):u=Array.isArray(c)?c:[c]:Yc(a,`Unknown highlighting tag ${a}`)}for(let a of u)t.push(a)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(l=>l.id),s=Fm[i];if(s)return s.id;let o=Fm[i]=$t.define({id:Om.length,name:r,props:[t2({[r]:t})]});return Om.push(o),o.id}Te.RTL,Te.LTR;const k6=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=w6(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function w6(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const x2=Qu.define({name:"json",parser:SE.configure({props:[s2.add({Object:_m({except:/^\s*\}/}),Array:_m({except:/^\s*\]/})}),l2.add({"Object Array":UE})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function v2(){return new PE(x2)}class k2{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=et(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(w2(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function Pm(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function D6(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=Pm(e)+Pm(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function A6(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:D6(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}class Rm{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function oi(n){return n.selection.main.from}function w2(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const zd=cr.define();function C6(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return{...n.changeByRange(l=>{if(l!=i&&t!=r&&n.sliceDoc(l.from+s,l.from+o)!=n.sliceDoc(t,r))return{range:l};let u=n.toText(e);return{changes:{from:l.from+s,to:r==i.from?l.to:l.from+o,insert:u},range:I.cursor(l.from+s+u.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Im=new WeakMap;function _6(n){if(!Array.isArray(n))return n;let e=Im.get(n);return e||Im.set(n,e=A6(n)),e}const na=re.define(),ko=re.define();class S6{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=Rt(e,t),i=Tn(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(Rt(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let y=Rt(e,0),x=Tn(y),w=x==e.length?0:-100;if(y!=t[0])if(y==r[0])w+=-200;else return null;return this.ret(w,[0,x])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let u=t.length,a=0;if(l<0){for(let y=0,x=Math.min(e.length,200);y<x&&a<u;){let w=Rt(e,y);(w==t[a]||w==r[a])&&(i[a++]=y),y+=Tn(w)}if(a<u)return null}let c=0,f=0,h=!1,d=0,p=-1,m=-1,g=/[a-z]/.test(e),b=!0;for(let y=0,x=Math.min(e.length,200),w=0;y<x&&f<u;){let D=Rt(e,y);l<0&&(c<u&&D==t[c]&&(s[c++]=y),d<u&&(D==t[d]||D==r[d]?(d==0&&(p=y),m=y+1,d++):d=0));let A,k=D<255?D>=48&&D<=57||D>=97&&D<=122?2:D>=65&&D<=90?1:0:(A=kd(D))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!y||k==1&&g||w==0&&k!=0)&&(t[f]==D||r[f]==D&&(h=!0)?o[f++]=y:o.length&&(b=!1)),w=k,y+=Tn(D)}return f==u&&o[0]==0&&b?this.result(-100+(h?-200:0),o,e):d==u&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==u?this.ret(-900-e.length,[p,m]):f==u?this.result(-100+(h?-200:0)+-700+(b?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let l=o+(this.astral?Tn(Rt(r,o)):1);s&&i[s-1]==o?i[s-1]=l:(i[s++]=o,i[s++]=l)}return this.ret(e-r.length,i)}}class E6{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const ut=Q.define({combine(n){return gn(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:O6,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>Mm(e(r),t(r)),optionClass:(e,t)=>r=>Mm(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Mm(n,e){return n?e?n+" "+e:n:e}function O6(n,e,t,r,i,s){let o=n.textDirection==Te.RTL,l=o,u=!1,a="top",c,f,h=e.left-i.left,d=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(l&&h<Math.min(p,d)?l=!1:!l&&d<Math.min(p,h)&&(l=!0),p<=(l?h:d))c=Math.max(i.top,Math.min(t.top,i.bottom-m))-e.top,f=Math.min(400,l?h:d);else{u=!0,f=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=m||y>e.top?c=t.bottom-e.top:(a="bottom",c=e.bottom-t.top)}let g=(e.bottom-e.top)/s.offsetHeight,b=(e.right-e.left)/s.offsetWidth;return{style:`${a}: ${c/g}px; max-width: ${f/b}px`,class:"cm-completionInfo-"+(u?o?"left-narrow":"right-narrow":l?"left":"right")}}function T6(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,u=0;for(let a=0;a<s.length;){let c=s[a++],f=s[a++];c>u&&o.appendChild(document.createTextNode(l.slice(u,c)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(c,f))),h.className="cm-completionMatchedText",u=f}return u<l.length&&o.appendChild(document.createTextNode(l.slice(u))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function Qc(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class F6{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:u=>this.placeInfo(u),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,l=e.state.facet(ut);this.optionContent=T6(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Qc(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{let{options:a}=e.state.field(t).open;for(let c=u.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<a.length){this.applyCompletion(e,a[+f[1]]),u.preventDefault();return}}),this.dom.addEventListener("focusout",u=>{let a=e.state.field(this.stateField,!1);a&&a.tooltip&&e.state.facet(ut).closeOnBlur&&u.relatedTarget!=e.contentDOM&&e.dispatch({effects:ko.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:l}=r.open;(!i.open||i.open.options!=s)&&(this.range=Qc(s.length,o,e.state.facet(ut).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),l!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Qc(t.options.length,t.selected,this.view.state.facet(ut).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>St(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&R6(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(ut).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:l,match:u}=e[o],{section:a}=l;if(a){let h=typeof a=="string"?a:a.name;if(h!=s&&(o>r.from||r.from==0))if(s=h,typeof a!="string"&&a.header)i.appendChild(a.header(a));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let f=this.optionClass(l);f&&(c.className=f);for(let h of this.optionContent){let d=h(l,this.view.state,this.view,u);d&&c.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function P6(n,e){return t=>new F6(t,n,e)}function R6(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function Bm(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function I6(n,e){let t=[],r=null,i=null,s=c=>{t.push(c);let{section:f}=c.completion;if(f){r||(r=[]);let h=typeof f=="string"?f:f.name;r.some(d=>d.name==h)||r.push(typeof f=="string"?{name:h}:f)}},o=e.facet(ut);for(let c of n)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)s(new Rm(h,c.source,f?f(h):[],1e9-t.length));else{let h=e.sliceDoc(c.from,c.to),d,p=o.filterStrict?new E6(h):new S6(h);for(let m of c.result.options)if(d=p.match(m.label)){let g=m.displayLabel?f?f(m,d.matched):[]:d.matched,b=d.score+(m.boost||0);if(s(new Rm(m,c.source,g,b)),typeof m.section=="object"&&m.section.rank==="dynamic"){let{name:y}=m.section;i||(i=Object.create(null)),i[y]=Math.max(b,i[y]||-1e9)}}}}if(r){let c=Object.create(null),f=0,h=(d,p)=>(d.rank==="dynamic"&&p.rank==="dynamic"?i[p.name]-i[d.name]:0)||(typeof d.rank=="number"?d.rank:1e9)-(typeof p.rank=="number"?p.rank:1e9)||(d.name<p.name?-1:1);for(let d of r.sort(h))f-=1e5,c[d.name]=f;for(let d of t){let{section:p}=d.completion;p&&(d.score+=c[typeof p=="string"?p:p.name])}}let l=[],u=null,a=o.compareCompletions;for(let c of t.sort((f,h)=>h.score-f.score||a(f.completion,h.completion))){let f=c.completion;!u||u.label!=f.label||u.detail!=f.detail||u.type!=null&&f.type!=null&&u.type!=f.type||u.apply!=f.apply||u.boost!=f.boost?l.push(c):Bm(c.completion)>Bm(u)&&(l[l.length-1]=c),u=c.completion}return l}class Pi{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Pi(this.options,$m(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s,o){if(i&&!o&&e.some(a=>a.isPending))return i.setDisabled();let l=I6(e,t);if(!l.length)return i&&e.some(a=>a.isPending)?i.setDisabled():null;let u=t.facet(ut).selectOnOpen?0:-1;if(i&&i.selected!=u&&i.selected!=-1){let a=i.options[i.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==a){u=c;break}}return new Pi(l,$m(r,u),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:j6,above:s.aboveCursor},i?i.timestamp:Date.now(),u,!1)}map(e){return new Pi(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Pi(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ra{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new ra(N6,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(ut),s=(r.override||t.languageDataAt("autocomplete",oi(t)).map(_6)).map(u=>(this.active.find(c=>c.source==u)||new Zt(u,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((u,a)=>u==this.active[a])&&(s=this.active);let o=this.open,l=e.effects.some(u=>u.is(Ud));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!M6(s,this.active)||l?o=Pi.build(s,t,this.id,o,r,l):o&&o.disabled&&!s.some(u=>u.isPending)&&(o=null),!o&&s.every(u=>!u.isPending)&&s.some(u=>u.hasResult())&&(s=s.map(u=>u.hasResult()?new Zt(u.source,0):u));for(let u of e.effects)u.is(A2)&&(o=o&&o.setSelected(u.value,this.id));return s==this.active&&o==this.open?this:new ra(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?B6:$6}}function M6(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;r<e.length&&!e[r].hasResult();)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const B6={"aria-autocomplete":"list"},$6={};function $m(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const N6=[];function D2(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(zd);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class Zt{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let r=D2(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new Zt(i.source,0)),r&4&&i.state==0&&(i=new Zt(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(na))i=new Zt(i.source,1,s.value);else if(s.is(ko))i=new Zt(i.source,0);else if(s.is(Ud))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(oi(e.state))}}class Vi extends Zt{constructor(e,t,r,i,s,o){super(e,3,t),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=oi(e.state);if(l>o||!i||t&2&&(oi(e.startState)==this.from||l<this.limit))return new Zt(this.source,t&4?1:0);let u=e.changes.mapPos(this.limit);return L6(i.validFor,e.state,s,o)?new Vi(this.source,this.explicit,u,i,s,o):i.update&&(i=i.update(i,s,o,new k2(e.state,l,!1)))?new Vi(this.source,this.explicit,u,i,i.from,(r=i.to)!==null&&r!==void 0?r:oi(e.state)):new Zt(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Vi(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Zt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function L6(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):w2(n,!0).test(i)}const Ud=re.define({map(n,e){return n.map(t=>t.map(e))}}),A2=re.define(),It=Ke.define({create(){return ra.start()},update(n,e){return n.update(e)},provide:n=>[za.from(n,e=>e.tooltip),Y.contentAttributes.from(n,e=>e.attrs)]});function Hd(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(It).active.find(i=>i.source==e.source);return r instanceof Vi?(typeof t=="string"?n.dispatch({...C6(n.state,t,r.from,r.to),annotations:zd.of(e.completion)}):t(n,e.completion,r.from,r.to),!0):!1}const j6=P6(It,Hd);function jl(n,e="option"){return t=>{let r=t.state.field(It,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(ut).interactionDelay)return!1;let i=1,s;e=="page"&&(s=My(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:A2.of(l)}),!0}}const q6=n=>{let e=n.state.field(It,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(ut).interactionDelay?!1:Hd(n,e.open.options[e.open.selected])},Xc=n=>n.state.field(It,!1)?(n.dispatch({effects:na.of(!0)}),!0):!1,V6=n=>{let e=n.state.field(It,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:ko.of(null)}),!0)};class z6{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const U6=50,H6=1e3,W6=qe.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(It).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(It),t=n.state.facet(ut);if(!n.selectionSet&&!n.docChanged&&n.startState.field(It)==e)return;let r=n.transactions.some(s=>{let o=D2(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>U6&&Date.now()-o.time>H6){for(let l of o.context.abortListeners)try{l()}catch(u){St(this.view.state,u)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(na)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(It);for(let t of e.active)t.isPending&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ut).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=oi(e),r=new k2(e,t,n.explicit,this.view),i=new z6(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:ko.of(null)}),St(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(ut).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(ut),r=this.view.state.field(It);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let l=oi(s.updates.length?s.updates[0].startState:this.view.state),u=Math.min(l,s.done.from+(s.active.explicit?0:1)),a=new Vi(s.active.source,s.active.explicit,u,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:l);for(let c of s.updates)a=a.update(c,t);if(a.hasResult()){e.push(a);continue}}let o=r.active.find(l=>l.source==s.active.source);if(o&&o.isPending)if(s.done==null){let l=new Zt(s.active.source,0);for(let u of s.updates)l=l.update(u,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:Ud.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(It,!1);if(e&&e.tooltip&&this.view.state.facet(ut).closeOnBlur){let t=e.open&&My(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ko.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:na.of(!1)}),20),this.composing=0}}}),G6=typeof navigator=="object"&&/Win/.test(navigator.platform),K6=$r.highest(Y.domEventHandlers({keydown(n,e){let t=e.state.field(It,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(G6&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&Hd(e,r),!1}})),C2=Y.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class J6{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class Wd{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,ht.TrackDel),r=e.mapPos(this.to,1,ht.TrackDel);return t==null||r==null?null:new Wd(this.field,t,r)}}class Gd{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let u of this.lines){if(r.length){let a=o,c=/^\t*/.exec(u)[0].length;for(let f=0;f<c;f++)a+=e.facet(tl);i.push(t+a.length-c),u=a+u.slice(c)}r.push(u),t+=u.length+1}let l=this.fieldPositions.map(u=>new Wd(u.field,i[u.line]+u.from,i[u.line]+u.to));return{text:r,ranges:l}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let l=s[1]?+s[1]:null,u=s[2]||s[3]||"",a=-1,c=u.replace(/\\[{}]/g,f=>f[1]);for(let f=0;f<t.length;f++)(l!=null?t[f].seq==l:c&&t[f].name==c)&&(a=f);if(a<0){let f=0;for(;f<t.length&&(l==null||t[f].seq!=null&&t[f].seq<l);)f++;t.splice(f,0,{seq:l,name:c}),a=f;for(let h of i)h.field>=a&&h.field++}for(let f of i)if(f.line==r.length&&f.from>s.index){let h=s[2]?3+(s[1]||"").length:2;f.from-=h,f.to-=h}i.push(new J6(a,r.length,s.index,s.index+c.length)),o=o.slice(0,s.index)+u+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(l,u,a)=>{for(let c of i)c.line==r.length&&c.from>a&&(c.from--,c.to--);return u}),r.push(o)}return new Gd(r,i)}}let Y6=te.widget({widget:new class extends Hn{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),Q6=te.mark({class:"cm-snippetField"});class ms{constructor(e,t){this.ranges=e,this.active=t,this.deco=te.set(e.map(r=>(r.from==r.to?Y6:Q6).range(r.from,r.to)),!0)}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new ms(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const rl=re.define({map(n,e){return n&&n.map(e)}}),X6=re.define(),wo=Ke.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(rl))return t.value;if(t.is(X6)&&n)return new ms(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>Y.decorations.from(n,e=>e?e.deco:te.none)});function Kd(n,e){return I.create(n.filter(t=>t.field==e).map(t=>I.range(t.from,t.to)))}function Z6(n){let e=Gd.parse(n);return(t,r,i,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,i),{main:u}=t.state.selection,a={changes:{from:i,to:s==u.from?u.to:s,insert:ge.of(o)},scrollIntoView:!0,annotations:r?[zd.of(r),Xe.userEvent.of("input.complete")]:void 0};if(l.length&&(a.selection=Kd(l,0)),l.some(c=>c.field>0)){let c=new ms(l,0),f=a.effects=[rl.of(c)];t.state.field(wo,!1)===void 0&&f.push(re.appendConfig.of([wo,i8,o8,C2]))}t.dispatch(t.state.update(a))}}function _2(n){return({state:e,dispatch:t})=>{let r=e.field(wo,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:Kd(r.ranges,i),effects:rl.of(s?null:new ms(r.ranges,i)),scrollIntoView:!0})),!0}}const e8=({state:n,dispatch:e})=>n.field(wo,!1)?(e(n.update({effects:rl.of(null)})),!0):!1,t8=_2(1),n8=_2(-1),r8=[{key:"Tab",run:t8,shift:n8},{key:"Escape",run:e8}],Nm=Q.define({combine(n){return n.length?n[0]:r8}}),i8=$r.highest(Zo.compute([Nm],n=>n.facet(Nm)));function s8(n,e){return{...e,apply:Z6(n)}}const o8=Y.domEventHandlers({mousedown(n,e){let t=e.state.field(wo,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:Kd(t.ranges,i.field),effects:rl.of(t.ranges.some(s=>s.field>i.field)?new ms(t.ranges,i.field):null),scrollIntoView:!0}),!0)}}),Do={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Xr=re.define({map(n,e){let t=e.mapPos(n,-1,ht.TrackAfter);return t??void 0}}),Jd=new class extends ui{};Jd.startSide=1;Jd.endSide=-1;const S2=Ke.define({create(){return me.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(Xr)&&(n=n.update({add:[Jd.range(t.value,t.value+1)]}));return n}});function l8(){return[a8,S2]}const Zc="()[]{}<>";function E2(n){for(let e=0;e<Zc.length;e+=2)if(Zc.charCodeAt(e)==n)return Zc.charAt(e+1);return kd(n<128?n:n+1)}function O2(n,e){return n.languageDataAt("closeBrackets",e)[0]||Do}const u8=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),a8=Y.inputHandler.of((n,e,t,r)=>{if((u8?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&Tn(Rt(r,0))==1||e!=i.from||t!=i.to)return!1;let s=h8(n.state,r);return s?(n.dispatch(s),!0):!1}),c8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=O2(n,n.selection.main.head).brackets||Do.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let l=d8(n.doc,o.head);for(let u of r)if(u==l&&Ya(n.doc,o.head)==E2(Rt(u,0)))return{changes:{from:o.head-u.length,to:o.head+u.length},range:I.cursor(o.head-u.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},f8=[{key:"Backspace",run:c8}];function h8(n,e){let t=O2(n,n.selection.main.head),r=t.brackets||Do.brackets;for(let i of r){let s=E2(Rt(i,0));if(e==i)return s==i?g8(n,i,r.indexOf(i+i+i)>-1,t):p8(n,i,s,t.before||Do.before);if(e==s&&T2(n,n.selection.main.from))return m8(n,i,s)}return null}function T2(n,e){let t=!1;return n.field(S2).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Ya(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Tn(Rt(t,0)))}function d8(n,e){let t=n.sliceString(e-2,e);return Tn(Rt(t,0))==t.length?t:t.slice(1)}function p8(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Xr.of(o.to+e.length),range:I.range(o.anchor+e.length,o.head+e.length)};let l=Ya(n.doc,o.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Xr.of(o.head+e.length),range:I.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function m8(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&Ya(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:I.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function g8(n,e,t,r){let i=r.stringPrefixes||Do.stringPrefixes,s=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Xr.of(l.to+e.length),range:I.range(l.anchor+e.length,l.head+e.length)};let u=l.head,a=Ya(n.doc,u),c;if(a==e){if(Lm(n,u))return{changes:{insert:e+e,from:u},effects:Xr.of(u+e.length),range:I.cursor(u+e.length)};if(T2(n,u)){let h=t&&n.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+h.length,insert:h},range:I.cursor(u+h.length)}}}else{if(t&&n.sliceDoc(u-2*e.length,u)==e+e&&(c=jm(n,u-2*e.length,i))>-1&&Lm(n,c))return{changes:{insert:e+e+e+e,from:u},effects:Xr.of(u+e.length),range:I.cursor(u+e.length)};if(n.charCategorizer(u)(a)!=Me.Word&&jm(n,u,i)>-1&&!b8(n,u,e,i))return{changes:{insert:e+e,from:u},effects:Xr.of(u+e.length),range:I.cursor(u+e.length)}}return{range:s=l}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Lm(n,e){let t=et(n).resolveInner(e+1);return t.parent&&t.from==e}function b8(n,e,t,r){let i=et(n).resolveInner(e,-1),s=r.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),u=l.indexOf(t);if(!u||u>-1&&r.indexOf(l.slice(0,u))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+u;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let a=i.to==e&&i.parent;if(!a)break;i=a}return!1}function jm(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=Me.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=Me.Word)return s}return-1}function y8(n={}){return[K6,It,ut.of(n),W6,x8,C2]}const F2=[{key:"Ctrl-Space",run:Xc},{mac:"Alt-`",run:Xc},{mac:"Alt-i",run:Xc},{key:"Escape",run:V6},{key:"ArrowDown",run:jl(!0)},{key:"ArrowUp",run:jl(!1)},{key:"PageDown",run:jl(!0,"page")},{key:"PageUp",run:jl(!1,"page")},{key:"Enter",run:q6}],x8=$r.highest(Zo.computeN([ut],n=>n.facet(ut).defaultKeymap?[F2]:[]));function gs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vu={exports:{}},v8=vu.exports,qm;function k8(){return qm||(qm=1,(function(n){(function(e,t){n.exports?n.exports=t():e.log=t()})(v8,function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function l(m,g){var b=m[g];if(typeof b.bind=="function")return b.bind(m);try{return Function.prototype.bind.call(b,m)}catch{return function(){return Function.prototype.apply.apply(b,[m,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(m){return m==="debug"&&(m="log"),typeof console===t?!1:m==="trace"&&r?u:console[m]!==void 0?l(console,m):console.log!==void 0?l(console,"log"):e}function c(){for(var m=this.getLevel(),g=0;g<i.length;g++){var b=i[g];this[b]=g<m?e:this.methodFactory(b,m,this.name)}if(this.log=this.debug,typeof console===t&&m<this.levels.SILENT)return"No console available for logging"}function f(m){return function(){typeof console!==t&&(c.call(this),this[m].apply(this,arguments))}}function h(m,g,b){return a(m)||f.apply(this,arguments)}function d(m,g){var b=this,y,x,w,D="loglevel";typeof m=="string"?D+=":"+m:typeof m=="symbol"&&(D=void 0);function A(B){var P=(i[B]||"silent").toUpperCase();if(!(typeof window===t||!D)){try{window.localStorage[D]=P;return}catch{}try{window.document.cookie=encodeURIComponent(D)+"="+P+";"}catch{}}}function k(){var B;if(!(typeof window===t||!D)){try{B=window.localStorage[D]}catch{}if(typeof B===t)try{var P=window.document.cookie,T=encodeURIComponent(D),F=P.indexOf(T+"=");F!==-1&&(B=/^([^;]+)/.exec(P.slice(F+T.length+1))[1])}catch{}return b.levels[B]===void 0&&(B=void 0),B}}function C(){if(!(typeof window===t||!D)){try{window.localStorage.removeItem(D)}catch{}try{window.document.cookie=encodeURIComponent(D)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function O(B){var P=B;if(typeof P=="string"&&b.levels[P.toUpperCase()]!==void 0&&(P=b.levels[P.toUpperCase()]),typeof P=="number"&&P>=0&&P<=b.levels.SILENT)return P;throw new TypeError("log.setLevel() called with invalid level: "+B)}b.name=m,b.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},b.methodFactory=g||h,b.getLevel=function(){return w??x??y},b.setLevel=function(B,P){return w=O(B),P!==!1&&A(w),c.call(b)},b.setDefaultLevel=function(B){x=O(B),k()||b.setLevel(B,!1)},b.resetLevel=function(){w=null,C(),c.call(b)},b.enableAll=function(B){b.setLevel(b.levels.TRACE,B)},b.disableAll=function(B){b.setLevel(b.levels.SILENT,B)},b.rebuild=function(){if(o!==b&&(y=O(o.getLevel())),c.call(b),o===b)for(var B in s)s[B].rebuild()},y=O(o?o.getLevel():"WARN");var L=k();L!=null&&(w=O(L)),c.call(b)}o=new d,o.getLogger=function(g){if(typeof g!="symbol"&&typeof g!="string"||g==="")throw new TypeError("You must supply a name when creating a logger.");var b=s[g];return b||(b=s[g]=new d(g,o.methodFactory)),b};var p=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return s},o.default=o,o})})(vu)),vu.exports}var w8=k8();const P2=gs(w8);P2.setLevel("silent");const $e=P2,le={STRING:"String",NUMBER:"Number",TRUE:"True",FALSE:"False",NULL:"Null",OBJECT:"Object",ARRAY:"Array",PROPERTY:"Property",PROPERTY_NAME:"PropertyName",PROPERTY_COLON:"PropertyColon",ITEM:"Item",JSON_TEXT:"JsonText",INVALID:""},D8={Pair:le.PROPERTY,Key:le.PROPERTY_NAME,BlockSequence:le.ARRAY,BlockMapping:le.OBJECT,FlowSequence:le.ARRAY,FlowMapping:le.OBJECT,QuotedLiteral:le.STRING,Literal:le.STRING,Stream:le.JSON_TEXT,Document:le.OBJECT},A8={File:le.JSON_TEXT},Yd=[le.STRING,le.NUMBER,le.TRUE,le.FALSE,le.NULL],R2=[le.OBJECT,le.ARRAY,le.ITEM],Re={JSON5:"json5",JSON:"json4",YAML:"yaml"},We=(n,e)=>{var t,r;switch(e){case Re.YAML:return(t=D8[n])!==null&&t!==void 0?t:n;case Re.JSON5:return(r=A8[n])!==null&&r!==void 0?r:n;default:return n}};function I2(n,e,t){const r=[];for(let i=e;i!=null&&i.parent;i=i.parent)switch(We(i.parent.name,t)){case le.PROPERTY:{const s=Fh(i.parent,le.PROPERTY_NAME,t);if(s){let o=Ci(n,s).replace(/[/~]/g,l=>l==="~"?"~0":"~1");r.unshift(o)}break}case le.ARRAY:{if(_8(i,t)){const s=$2(i.parent,i,t);r.unshift(`${s}`)}break}}return r.length===0?"":"/"+r.join("/")}const M2=(n,e,t=-1,r)=>I2(n.doc,et(n).resolve(e,t),r),Qd=(n,e)=>{const t=et(n),r=new Map;return t.iterate({enter:i=>{var s,o,l,u,a,c,f,h;if([le.PROPERTY_NAME,le.OBJECT].includes(We(i.name,e))){const d=I2(n.doc,i.node,e),{from:p,to:m}=i.node;if(!(!((o=(s=i.node)===null||s===void 0?void 0:s.nextSibling)===null||o===void 0)&&o.node))return r.set(d,{keyFrom:p,keyTo:m}),!0;const g=e===Re.JSON?(u=(l=i.node)===null||l===void 0?void 0:l.nextSibling)===null||u===void 0?void 0:u.node:(h=(f=(c=(a=i.node)===null||a===void 0?void 0:a.nextSibling)===null||c===void 0?void 0:c.node)===null||f===void 0?void 0:f.nextSibling)===null||h===void 0?void 0:h.node;if(!g)return r.set(d,{keyFrom:p,keyTo:m}),!0;const{from:b,to:y}=g;return r.set(d,{keyFrom:p,keyTo:m,valueFrom:b,valueTo:y}),!0}}}),r},ef=(n,e,t=-1)=>et(n).resolveInner(e,t),ku=n=>n.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),C8=n=>n.replace(/^"(.*)"$/,"'$1'"),Ci=(n,e,t=!0,r=!0)=>{const i=e?n.sliceString(e.from,e.to):"";return t?r?ku(i):i.replace(/(^["'])|(["']$)/g,""):i},B2=(n,e)=>{var t,r,i,s;return We(n.name,e)===le.INVALID&&(We((r=(t=n.prevSibling)===null||t===void 0?void 0:t.name)!==null&&r!==void 0?r:"",e)===le.PROPERTY_NAME||We((s=(i=n.prevSibling)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",e)===le.PROPERTY_COLON)},wu=(n,e)=>Yd.includes(We(n.name,e))||B2(n,e),_8=(n,e)=>[...Yd,...R2].includes(We(n.name,e))||B2(n,e),ql=(n,e)=>{var t,r,i,s,o,l;return We(n.name,e)===le.PROPERTY_NAME||We(n.name,e)===le.INVALID&&(We((r=(t=n.prevSibling)===null||t===void 0?void 0:t.name)!==null&&r!==void 0?r:"",e)===le.PROPERTY||We((s=(i=n.prevSibling)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",e)==="{")||e===Re.YAML&&We((l=(o=n.parent)===null||o===void 0?void 0:o.name)!==null&&l!==void 0?l:"",e)===le.OBJECT},il=n=>{const e=[];let t=n.firstChild;for(;t;)t&&e.push(t),t=t==null?void 0:t.nextSibling;return e},S8=(n,e,t)=>il(n).filter(r=>We(r.name,t)===e),Fh=(n,e,t)=>{var r;return(r=il(n).find(i=>We(i.name,t)===e))!==null&&r!==void 0?r:null},Vm=(n,e)=>il(n).find(t=>wu(t,e)),E8=(n,e)=>il(n).filter(t=>Yd.includes(We(t.name,e))||R2.includes(We(t.name,e))),$2=(n,e,t)=>E8(n,t).findIndex(r=>r.from===e.from&&r.to===e.to),zm=(n,e,t,r=1/0)=>{let i=n;for(;i&&r>0;){if(We(i.name,t)===e)return i;i=i.parent,r--}return null},O8=re.define(),ia=Ke.define({create(){},update(n,e){for(const t of e.effects)if(t.is(O8))return t.value;return n}}),Xd=n=>n.field(ia),T8=n=>[ia.init(()=>n)],F8={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},P8=Object.prototype.toString;function ye(n){const e=P8.call(n).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const R8="object",I8="array";function M8(n,e={}){return n.replace(/\{\{\w+\}\}/g,t=>{const r=t.replace(/[{}]/g,""),i=e[r],s=ye(i);return s===R8||s===I8?JSON.stringify(i):i})}function B8(n,e,t=n){var r;const i=(r=F8[n])!==null&&r!==void 0?r:t;return M8(i,e)}function $8(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function N8(n,e){return{type:"error",name:n,code:$8(n),message:B8(n,e),data:e}}function ne(n){return N8.bind(null,n)}function Ao(n,e=[]){for(let t=0;t<n.length;t+=1){const r=n[t];Array.isArray(r)?Ao(r,e):e.push(r)}return e}const bs={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function no(n,e,t){const r={...e};return Object.defineProperty(r,"getOneOfOrigin",{enumerable:!1,value:()=>({index:t,schema:n})}),r}function yt(n){return(n==null?void 0:n.type)==="error"}function L8(n){return n instanceof Promise}function sa(n){return yt(n)||L8(n)}const{DECLARATOR_ONEOF:zi}=bs;function N2(n,e,t=n.rootSchema,r="#"){if(e!=null&&t[zi]){const o=[],l=t[zi],u=e[t[zi]];if(u===void 0)return n.errors.missingOneOfPropertyError({property:l,pointer:r,schema:t,value:e});for(let a=0;a<t.oneOf.length;a+=1){const c=n.resolveRef(t.oneOf[a]),f=n.step(l,c,e,r);if(yt(f))return f;let h=Ao(n.validate(u,f,r));if(h=h.filter(sa),h.length>0)o.push(...h);else return no(t,c,a)}return n.errors.oneOfPropertyError({property:l,value:u,pointer:r,schema:t,errors:o})}const i=[],s=[];for(let o=0;o<t.oneOf.length;o+=1){const l=n.resolveRef(t.oneOf[o]);let u=Ao(n.validate(e,l,r));u=u.filter(sa),u.length>0?s.push(...u):i.push({index:o,schema:l})}return i.length===1?no(t,i[0].schema,i[0].index):i.length>1?n.errors.multipleOneOfError({value:e,pointer:r,schema:t,matches:i}):n.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:t,oneOf:t.oneOf,errors:s})}function j8(n,e,t,r){if(t==null||e.properties==null)return-1;let i=0;const s=Object.keys(e.properties);for(let o=0;o<s.length;o+=1){const l=s[o];t[l]!=null&&n.isValid(t[l],e.properties[l],r)&&(i+=1)}return i}function Zd(n,e,t=n.rootSchema,r="#"){if(e!=null&&t[zi]){const s=[],o=t[zi],l=e[t[zi]];if(l===void 0)return n.errors.missingOneOfPropertyError({property:o,pointer:r,schema:t,value:e});for(let u=0;u<t.oneOf.length;u+=1){const a=n.resolveRef(t.oneOf[u]),c=n.step(o,a,e,r);if(yt(c))return c;let f=Ao(n.validate(l,c,r));if(f=f.filter(sa),f.length>0)s.push(...f);else return no(t,a,u)}return n.errors.oneOfPropertyError({property:o,value:l,pointer:r,schema:t,errors:s})}const i=[];for(let s=0;s<t.oneOf.length;s+=1){const o=n.resolveRef(t.oneOf[s]);n.isValid(e,o,r)&&i.push({schema:o,index:s})}if(i.length===1)return no(t,i[0].schema,i[0].index);if(ye(e)==="object"){let s,o=-1,l=0;for(let u=0;u<t.oneOf.length;u+=1){const a=n.resolveRef(t.oneOf[u]),c=j8(n,a,e);l<c&&(l=c,s=t.oneOf[u],o=u)}return s===void 0?n.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:t,oneOf:t.oneOf}):no(t,s,o)}return i.length>1?n.errors.multipleOneOfError({matches:i,pointer:r,schema:t,value:e}):n.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:t,oneOf:t.oneOf})}const q8=(n,e,t,r)=>{if(Array.isArray(e.oneOf)){const i=n.resolveOneOf(t,e,r);if(yt(i))return i}};var tf,Um;function V8(){if(Um)return tf;Um=1;var n=function(y){return e(y)&&!t(y)};function e(b){return!!b&&typeof b=="object"}function t(b){var y=Object.prototype.toString.call(b);return y==="[object RegExp]"||y==="[object Date]"||s(b)}var r=typeof Symbol=="function"&&Symbol.for,i=r?Symbol.for("react.element"):60103;function s(b){return b.$$typeof===i}function o(b){return Array.isArray(b)?[]:{}}function l(b,y){return y.clone!==!1&&y.isMergeableObject(b)?m(o(b),b,y):b}function u(b,y,x){return b.concat(y).map(function(w){return l(w,x)})}function a(b,y){if(!y.customMerge)return m;var x=y.customMerge(b);return typeof x=="function"?x:m}function c(b){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(b).filter(function(y){return Object.propertyIsEnumerable.call(b,y)}):[]}function f(b){return Object.keys(b).concat(c(b))}function h(b,y){try{return y in b}catch{return!1}}function d(b,y){return h(b,y)&&!(Object.hasOwnProperty.call(b,y)&&Object.propertyIsEnumerable.call(b,y))}function p(b,y,x){var w={};return x.isMergeableObject(b)&&f(b).forEach(function(D){w[D]=l(b[D],x)}),f(y).forEach(function(D){d(b,D)||(h(b,D)&&x.isMergeableObject(y[D])?w[D]=a(D,x)(b[D],y[D],x):w[D]=l(y[D],x))}),w}function m(b,y,x){x=x||{},x.arrayMerge=x.arrayMerge||u,x.isMergeableObject=x.isMergeableObject||n,x.cloneUnlessOtherwiseSpecified=l;var w=Array.isArray(y),D=Array.isArray(b),A=w===D;return A?w?x.arrayMerge(b,y,x):p(b,y,x):l(y,x)}m.all=function(y,x){if(!Array.isArray(y))throw new Error("first argument should be an array");return y.reduce(function(w,D){return m(w,D,x)},{})};var g=m;return tf=g,tf}var z8=V8();const L2=gs(z8),U8=(n,e)=>e,ep=(n,e)=>L2(n,e,{arrayMerge:U8}),H8=(n,e)=>{const t=n.concat(e);return t.filter((r,i)=>t.indexOf(r)===i)},W8=(n,e)=>L2(n,e,{arrayMerge:H8});function Dt(n,e){const t=ye(n),r=ye(e);if(t!==r)return n;const i=W8(n,e);return n.getOneOfOrigin?Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:n.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),i}function Co(n,...e){const t={};return Object.keys(n).forEach(r=>{e.includes(r)||(t[r]=n[r])}),n.getOneOfOrigin&&Object.defineProperty(t,"getOneOfOrigin",{enumerable:!1,value:n.getOneOfOrigin}),t}var G8=Function.prototype.toString,nf=Object.create,K8=Object.prototype.toString,J8=(function(){function n(){this._keys=[],this._values=[]}return n.prototype.has=function(e){return!!~this._keys.indexOf(e)},n.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},n.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},n})();function Y8(){return new J8}function Q8(){return new WeakMap}var X8=typeof WeakMap<"u"?Q8:Y8;function tp(n){if(!n)return nf(null);var e=n.constructor;if(e===Object)return n===Object.prototype?{}:nf(n);if(e&&~G8.call(e).indexOf("[native code]"))try{return new e}catch{}return nf(n)}function Z8(n){var e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}function e4(n){return n.flags}var t4=/test/g.flags==="g"?e4:Z8;function j2(n){var e=K8.call(n);return e.substring(8,e.length-1)}function n4(n){return n[Symbol.toStringTag]||j2(n)}var r4=typeof Symbol<"u"?n4:j2,i4=Object.defineProperty,s4=Object.getOwnPropertyDescriptor,q2=Object.getOwnPropertyNames,np=Object.getOwnPropertySymbols,V2=Object.prototype,z2=V2.hasOwnProperty,o4=V2.propertyIsEnumerable,U2=typeof np=="function";function l4(n){return q2(n).concat(np(n))}var u4=U2?l4:q2;function Qa(n,e,t){for(var r=u4(n),i=0,s=r.length,o=void 0,l=void 0;i<s;++i)if(o=r[i],!(o==="callee"||o==="caller")){if(l=s4(n,o),!l){e[o]=t.copier(n[o],t);continue}!l.get&&!l.set&&(l.value=t.copier(l.value,t));try{i4(e,o,l)}catch{e[o]=l.value}}return e}function a4(n,e){var t=new e.Constructor;e.cache.set(n,t);for(var r=0,i=n.length;r<i;++r)t[r]=e.copier(n[r],e);return t}function c4(n,e){var t=new e.Constructor;return e.cache.set(n,t),Qa(n,t,e)}function H2(n,e){return n.slice(0)}function f4(n,e){return n.slice(0,n.size,n.type)}function h4(n,e){return new e.Constructor(H2(n.buffer))}function d4(n,e){return new e.Constructor(n.getTime())}function W2(n,e){var t=new e.Constructor;return e.cache.set(n,t),n.forEach(function(r,i){t.set(i,e.copier(r,e))}),t}function p4(n,e){return Qa(n,W2(n,e),e)}function m4(n,e){var t=tp(e.prototype);e.cache.set(n,t);for(var r in n)z2.call(n,r)&&(t[r]=e.copier(n[r],e));return t}function g4(n,e){var t=tp(e.prototype);e.cache.set(n,t);for(var r in n)z2.call(n,r)&&(t[r]=e.copier(n[r],e));for(var i=np(n),s=0,o=i.length,l=void 0;s<o;++s)l=i[s],o4.call(n,l)&&(t[l]=e.copier(n[l],e));return t}var b4=U2?g4:m4;function y4(n,e){var t=tp(e.prototype);return e.cache.set(n,t),Qa(n,t,e)}function rf(n,e){return new e.Constructor(n.valueOf())}function x4(n,e){var t=new e.Constructor(n.source,t4(n));return t.lastIndex=n.lastIndex,t}function Du(n,e){return n}function G2(n,e){var t=new e.Constructor;return e.cache.set(n,t),n.forEach(function(r){t.add(e.copier(r,e))}),t}function v4(n,e){return Qa(n,G2(n,e),e)}var k4=Array.isArray,rp=Object.assign,w4=Object.getPrototypeOf||(function(n){return n.__proto__}),K2={array:a4,arrayBuffer:H2,blob:f4,dataView:h4,date:d4,error:Du,map:W2,object:b4,regExp:x4,set:G2},D4=rp({},K2,{array:c4,map:p4,object:y4,set:v4});function A4(n){return{Arguments:n.object,Array:n.array,ArrayBuffer:n.arrayBuffer,Blob:n.blob,Boolean:rf,DataView:n.dataView,Date:n.date,Error:n.error,Float32Array:n.arrayBuffer,Float64Array:n.arrayBuffer,Int8Array:n.arrayBuffer,Int16Array:n.arrayBuffer,Int32Array:n.arrayBuffer,Map:n.map,Number:rf,Object:n.object,Promise:Du,RegExp:n.regExp,Set:n.set,String:rf,WeakMap:Du,WeakSet:Du,Uint8Array:n.arrayBuffer,Uint8ClampedArray:n.arrayBuffer,Uint16Array:n.arrayBuffer,Uint32Array:n.arrayBuffer,Uint64Array:n.arrayBuffer}}function J2(n){var e=rp({},K2,n),t=A4(e),r=t.Array,i=t.Object;function s(o,l){if(l.prototype=l.Constructor=void 0,!o||typeof o!="object")return o;if(l.cache.has(o))return l.cache.get(o);if(l.prototype=w4(o),l.Constructor=l.prototype&&l.prototype.constructor,!l.Constructor||l.Constructor===Object)return i(o,l);if(k4(o))return r(o,l);var u=t[r4(o)];return u?u(o,l):typeof o.then=="function"?o:i(o,l)}return function(l){return s(l,{Constructor:void 0,cache:X8(),copier:s,prototype:void 0})}}function C4(n){return J2(rp({},D4,n))}C4({});var oa=J2({});function Xa(n,e,t){if(e.if!=null){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const r=n.validate(t,n.resolveRef(e.if));if(r.length===0&&e.then)return n.resolveRef(e.then);if(r.length!==0&&e.else)return n.resolveRef(e.else)}}}const _4=(n,e,t,r)=>{const i=Xa(n,e,t);if(i)return n.validate(t,i,r)};function Y2(n,e,t){var r;const i={...(r=n.resolveRef(e))!==null&&r!==void 0?r:{}},s=Xa(n,i,t);return s||Co(i,"if","then","else")}function Q2(n,e,t=n.rootSchema){let r=oa(t);for(let i=0;i<t.allOf.length;i+=1){const s=Y2(n,t.allOf[i],e);r=Dt(r,s)}return delete r.allOf,r}function X2(n,e){const{allOf:t}=e;if(!Array.isArray(t)||t.length===0)return;let r={};return t.forEach(i=>{r=Dt(r,n.resolveRef(i))}),r}const S4=(n,e,t,r)=>{const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;const s=[];return e.allOf.forEach(o=>{s.push(...n.validate(t,o,r))}),s};function Z2(n,e){return n==null||n.$ref==null?n:n.getRoot?n.getRoot().getRef(n):e.getRef(n)}function E4(n){return n.filter((e,t)=>n.indexOf(e)===t)}function wr(n){return ye(n)==="object"}function ex(n,e,t){const{dependencies:r}=e;if(!wr(r)||!wr(t))return;let i=!1,s={required:[]};if(Object.keys(r).forEach(o=>{var l,u;if(t[o]==null&&!(!((l=e.required)===null||l===void 0)&&l.includes(o)||!((u=s.required)===null||u===void 0)&&u.includes(o)))return;const a=r[o];if(Array.isArray(a)){i=!0,s.required.push(...a);return}if(wr(a)){i=!0,s=Dt(s,n.resolveRef(a));return}}),i)return s.required=E4(s.required),s}const O4=(n,e,t,r)=>{if(ye(e.dependencies)!=="object")return;const i=[];return Object.keys(t).forEach(s=>{if(e.dependencies[s]===void 0||e.dependencies[s]===!0)return;if(e.dependencies[s]===!1){i.push(n.errors.missingDependencyError({pointer:r,schema:e,value:t}));return}let o;const l=ye(e.dependencies[s]);if(l==="array")o=e.dependencies[s].filter(u=>t[u]===void 0).map(u=>n.errors.missingDependencyError({missingProperty:u,pointer:r,schema:e,value:t}));else if(l==="object")o=n.validate(t,e.dependencies[s],r);else throw new Error(`Invalid dependency definition for ${r}/${s}. Must be string[] or schema`);i.push(...o)}),i.length>0?i:void 0};function tx(n,e,t){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let r;return e.anyOf.forEach(i=>{i=n.resolveRef(i),n.isValid(t,i)&&(r=r?Dt(r,i):i)}),r}function nx(n,e,t=n.rootSchema,r="#"){const{anyOf:i}=t;if(!Array.isArray(i)||i.length===0)return t;const s=tx(n,t,e);if(s==null)return n.errors.anyOfError({pointer:r,schema:t,value:e,anyOf:JSON.stringify(i)});const o=Dt(t,s);return Co(o,"anyOf")}const T4=(n,e,t,r)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let i=0;i<e.anyOf.length;i+=1)if(n.isValid(t,e.anyOf[i]))return;return n.errors.anyOfError({pointer:r,schema:e,value:t,anyOf:e.anyOf})}},Hm=["allOf","anyOf","oneOf","dependencies","if","then","else"],F4=["allOf","anyOf","oneOf","dependencies","if"];function P4(n){const e=Object.keys(n);return F4.findIndex(t=>e.includes(t))!==-1}function Ph(n,e,t,r){let i,s;if(e=n.resolveRef(e),e.oneOf){const c=Zd(n,t,e,r);yt(c)?s=c:c&&(i=Dt(i??{},c))}if(Array.isArray(e.allOf)){const c=e.allOf.map(f=>{if(P4(f)){let h=Ph(n,f,t,r);return h?(h=Dt(f,h),Co(h,...Hm)):void 0}return f});if(c.length>0){const f=X2(n,{allOf:c});i=Dt(i??{},f)}}const o=tx(n,e,t);o&&(i=Dt(i??{},o));const l=ex(n,e,t);l&&(i=Dt(i??{},l));const u=Xa(n,e,t);if(u&&(i=Dt(i??{},u)),i==null)return s;const a=Ph(n,i,t,r);return a&&(i=Dt(i,a)),Co(i,...Hm)}const R4=["allOf","anyOf","oneOf","dependencies","if","then","else"];function Wm(n,e,t,r){let i=Ph(n,e,t,r);return i?(i=Dt(e,i),Co(i,...R4)):e}class rx{constructor(e,t){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=oa(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(t)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,t){this.config.addRemoteSchema(this,e,t)}compileSchema(e){var t;return this.config.compileSchema(this,e,(t=this.rootSchema)!==null&&t!==void 0?t:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,t,r,i){return this.config.each(this,e,t,r,i)}eachSchema(e,t=this.rootSchema){return this.config.eachSchema(t,e)}getChildSchemaSelection(e,t){return this.config.getChildSchemaSelection(this,e,t)}getSchema(e){return this.config.getSchema(this,e)}getTemplate(e,t,r=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,t,r)}isValid(e,t,r){return this.config.isValid(this,e,t,r)}resolveAnyOf(e,t,r){return this.config.resolveAnyOf(this,e,t,r)}resolveAllOf(e,t){return this.config.resolveAllOf(this,e,t)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,t,r){return this.config.resolveOneOf(this,e,t,r)}setSchema(e){this.rootSchema=e}step(e,t,r,i){return this.config.step(this,e,t,r,i)}validate(e,t,r){return this.config.validate(this,e,t,r)}}function ix(n,e,t){t.id=t.id||e,n.remotes[e]=n.compileSchema(t)}var Au={exports:{}},I4=Au.exports,Gm;function M4(){return Gm||(Gm=1,(function(n,e){(function(t,r){n.exports=r()})(typeof self<"u"?self:I4,(()=>(()=>{var t={d:(T,F)=>{for(var M in F)t.o(F,M)&&!t.o(T,M)&&Object.defineProperty(T,M,{enumerable:!0,get:F[M]})},o:(T,F)=>Object.prototype.hasOwnProperty.call(T,F),r:T=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})}},r={};function i(T){return T==="#"||T===""||Array.isArray(T)&&T.length===0||!1}t.r(r),t.d(r,{default:()=>P,get:()=>h,isRoot:()=>i,join:()=>L,remove:()=>D,removeUndefinedItems:()=>w,set:()=>b,split:()=>f,splitLast:()=>B});const s=/~1/g,o=/~0/g,l=/\/+/g,u=/(^[#/]*|\/+$)/g;function a(T){return T.replace(s,"/").replace(o,"~")}function c(T){return a(decodeURIComponent(T))}function f(T){if(T==null||typeof T!="string"||i(T))return Array.isArray(T)?T:[];const F=T.indexOf("#")>=0?c:a,M=(T=(T=T.replace(l,"/")).replace(u,"")).split("/");for(let ee=0,q=M.length;ee<q;ee+=1)M[ee]=F(M[ee]);return M}function h(T,F,M=void 0){if(F==null||T==null)return M;if(i(F))return T;const ee=d(T,f(F));return ee===void 0?M:ee}function d(T,F){const M=F.shift();if(T!==void 0)return M!==void 0?d(T[M],F):T}const p=/^\[.*\]$/,m=/^\[(.+)\]$/;function g(T,F){return T==="__proto__"||T=="constructor"&&F.length>0&&F[0]=="prototype"}function b(T,F,M){if(F==null)return T;const ee=f(F);if(ee.length===0)return T;T==null&&(T=p.test(ee[0])?[]:{});let q,U,K=T;for(;ee.length>1;)q=ee.shift(),U=p.test(ee[0]),g(q,ee)||(K=x(K,q,U));return q=ee.pop(),y(K,q,M),T}function y(T,F,M){let ee;const q=F.match(m);F==="[]"&&Array.isArray(T)?T.push(M):q?(ee=q.pop(),T[ee]=M):T[F]=M}function x(T,F,M){if(T[F]!=null)return T[F];const ee=M?[]:{};return y(T,F,ee),ee}function w(T){let F=0,M=0;for(;F+M<T.length;)T[F+M]===void 0&&(M+=1),T[F]=T[F+M],F+=1;return T.length=T.length-M,T}function D(T,F,M){const ee=f(F),q=ee.pop(),U=h(T,ee);return U&&delete U[q],Array.isArray(U)&&M!==!0&&w(U),T}const A=/\/+/g,k=/~/g,C=/\//g;function O(T,F){if(T.length===0)return F?"#":"";for(let M=0,ee=T.length;M<ee;M+=1)T[M]=T[M].replace(k,"~0").replace(C,"~1"),F&&(T[M]=encodeURIComponent(T[M]));return((F?"#/":"/")+T.join("/")).replace(A,"/")}function L(T,...F){const M=[];if(Array.isArray(T))return O(T,arguments[1]===!0);const ee=arguments[arguments.length-1],q=typeof ee=="boolean"?ee:T&&T[0]==="#";for(let K=0,xe=arguments.length;K<xe;K+=1)M.push.apply(M,f(arguments[K]));const U=[];for(let K=0,xe=M.length;K<xe;K+=1)if(M[K]===".."){if(U.length===0)return q?"#":"";U.pop()}else U.push(M[K]);return O(U,q)}function B(T){const F=f(T);if(F.length===0)return typeof T=="string"&&T[0]==="#"?["#",F[0]]:["",void 0];if(F.length===1)return T[0]==="#"?["#",F[0]]:["",F[0]];const M=F.pop();return[L(F,T[0]==="#"),M]}const P={get:h,set:b,remove:D,join:L,split:f,splitLast:B,isRoot:i,removeUndefinedItems:w};return r})()))})(Au)),Au.exports}var Zr=M4();const _o=gs(Zr);var Vl={},Ft={},Bs={},Km;function B4(){if(Km)return Bs;Km=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.TokenError=void 0;let n=class extends Error{constructor(t,r){if(super(t),this.message=t,this.token=r,r&&r.errors)r.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}};return Bs.TokenError=n,Bs}var Jm;function $4(){if(Jm)return Ft;Jm=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.Parser=Ft.findRuleByName=Ft.parseRuleName=Ft.escapeRegExp=Ft.readToken=void 0;const n=/^[A-Z0-9_]+$/,e=/(\?|\+|\*)$/,t=/^(@|&|!)/,r="WS",i=B4();function s(m,g){let b=g.exec(m);return b&&b.index==0?b[0].length==0&&g.source.length>0?null:{type:null,text:b[0],rest:m.substr(b[0].length),start:0,end:b[0].length-1,fullText:b[0],errors:[],children:[],parent:null}:null}Ft.readToken=s;function o(m){return m.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Ft.escapeRegExp=o;function l(m){m.rest="",m.children&&m.children.forEach(g=>l(g))}function u(m,g){m.start+=g,m.end+=g,m.children&&m.children.forEach(b=>u(b,m.start))}function a(m,g){g.errors&&g.errors.length&&g.errors.forEach(b=>m.push(b)),g.children&&g.children.forEach(b=>a(m,b))}function c(m){let g=e.exec(m),b=t.exec(m),y=g&&g[0]||"",x=b&&b[0]||"",w={raw:m,name:m.replace(e,"").replace(t,""),isOptional:y=="?"||y=="*",allowRepetition:y=="+"||y=="*",atLeastOne:y=="+",lookupPositive:x=="&",lookupNegative:x=="!",pinned:x=="@",lookup:!1,isLiteral:!1};return w.isLiteral=w.name[0]=="'"||w.name[0]=='"',w.lookup=w.lookupNegative||w.lookupPositive,w}Ft.parseRuleName=c;function f(m,g){let b=c(m);return g.cachedRules[b.name]||null}Ft.findRuleByName=f;function h(m,g){if(m.children){let b=m.children.filter(y=>y.type&&g.test(y.type));for(let y=0;y<b.length;y++){let x=m.children.indexOf(b[y]);x!=-1&&m.children.splice(x,1)}m.children.forEach(y=>h(y,g))}}const d=["EOF"];class p{constructor(g,b){this.grammarRules=g,this.options=b,this.cachedRules={},this.debug=b?b.debug===!0:!1;let y=[],x=[];if(g.forEach(w=>{let D=c(w.name);if(D.name in this.cachedRules){y.push("Duplicated rule "+D.name);return}else this.cachedRules[D.name]=w;if(!w.bnf||!w.bnf.length){let A="Missing rule content, rule: "+w.name;y.indexOf(A)==-1&&y.push(A)}else w.bnf.forEach(A=>{if(typeof A[0]=="string"&&c(A[0]).name==w.name){let C="Left recursion is not allowed, rule: "+w.name;y.indexOf(C)==-1&&y.push(C)}A.forEach(k=>{if(typeof k=="string"){let C=c(k);!C.isLiteral&&x.indexOf(C.name)==-1&&d.indexOf(C.name)==-1&&x.push(C.name)}})});r==w.name&&(w.implicitWs=!1),w.implicitWs&&x.indexOf(r)==-1&&x.push(r),w.recover&&x.indexOf(w.recover)==-1&&x.push(w.recover)}),x.forEach(w=>{w in this.cachedRules||y.push("Missing rule "+w)}),y.length)throw new Error(y.join(`
`))}getAST(g,b){b||(b=this.grammarRules.filter(x=>!x.fragment&&x.name.indexOf("%")!=0)[0].name);let y=this.parse(g,b);if(y){a(y.errors,y),u(y,0),h(y,/^%/),(!this.options||!this.options.keepUpperRules)&&h(y,n);let x=y.rest;x&&new i.TokenError(`Unexpected end of input: 
`+x,y),l(y),y.rest=x}return y}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(g,b,y=0){let x=null,w=c(b),D,A=this.debug&&!n.test(w.name);A&&console.log(new Array(y).join("  ")+"Trying to get "+b+" from "+JSON.stringify(g.split(`
`)[0]));let k=w.name,C=f(w.name,this);if(w.name=="EOF"){if(g.length)return null;if(g.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!C&&w.isLiteral){let O=w.name.trim();if(O.startsWith('"')?O=JSON.parse(O):O.startsWith("'")&&(O=O.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),O==="")return{type:"%%EMPTY%%",text:"",rest:g,start:0,end:0,fullText:"",errors:[],children:[],parent:null};D=new RegExp(o(O)),k=null}}catch(O){return O instanceof ReferenceError&&console.error(O),null}if(D){let O=s(g,D);if(O)return O.type=k,O}else{let O=C.bnf;O instanceof Array&&O.forEach(L=>{if(x)return;let B=null,P={type:w.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:g};C.fragment&&(P.fragment=!0);let T=g,F=0,M=L.length>0,ee=!1;for(let q=0;q<L.length;q++)if(typeof L[q]=="string"){let U=c(L[q]);M=M&&U.isOptional;let K,xe=!1;do{if(K=null,C.implicitWs&&(K=this.parse(T,U.name,y+1),!K)){let Pe;do if(Pe=this.parse(T,r,y+1),Pe)P.text=P.text+Pe.text,P.end=P.text.length,Pe.parent=P,P.children.push(Pe),T=T.substr(Pe.text.length),F+=Pe.text.length;else break;while(Pe&&Pe.text.length)}if(K=K||this.parse(T,U.name,y+1),U.lookupNegative){if(K)return;break}if(U.lookupPositive&&!K)return;if(!K&&(U.isOptional||U.atLeastOne&&xe))break;if(K&&C.pinned==q+1&&(B=K,A&&console.log(new Array(y+1).join("  ")+" "+K.type+" PINNED")),K||(K=this.parseRecovery(C,T,y+1)),!K)if(B)x=P,K={type:"SyntaxError",text:T,children:[],end:T.length,errors:[],fullText:"",parent:null,start:0,rest:""},T.length?new i.TokenError(`Unexpected end of input. Expecting ${U.name} Got: ${T}`,K):new i.TokenError(`Unexpected end of input. Missing ${U.name}`,K),A&&console.log(new Array(y+1).join("  ")+" "+K.type+" "+JSON.stringify(K.text));else return;if(xe=!0,ee=!0,K.type=="%%EMPTY%%")break;K.start+=F,K.end+=F,!U.lookupPositive&&K.type&&(K.fragment?K.children&&K.children.forEach(Pe=>{Pe.start+=F,Pe.end+=F,Pe.parent=P,P.children.push(Pe)}):(K.parent=P,P.children.push(K))),U.lookup&&(K.lookup=!0),A&&console.log(new Array(y+1).join("  ")+" "+K.type+" "+JSON.stringify(K.text)),!U.lookup&&!K.lookup&&(P.text=P.text+K.text,P.end=P.text.length,T=T.substr(K.text.length),F+=K.text.length),P.rest=T}while(K&&U.allowRepetition&&T.length&&!K.lookup)}else{let U=s(T,L[q]);if(!U)return;A&&console.log(new Array(y+1).join("  ")+"> "+JSON.stringify(U.text)+L[q].source),ee=!0,U.start+=F,U.end+=F,P.text=P.text+U.text,P.end=P.text.length,T=T.substr(U.text.length),F+=U.text.length,P.rest=T}ee&&(x=P,A&&console.log(new Array(y).join("  ")+"<< PUSHING "+x.type+" "+JSON.stringify(x.text)))}),x&&C.simplifyWhenOneChildren&&x.children.length==1&&(x=x.children[0])}return x||A&&console.log(b+" NOT RESOLVED FROM "+g),x}parseRecovery(g,b,y){if(g.recover&&b.length){let x=this.debug;x&&console.log(new Array(y+1).join("  ")+"Trying to recover until token "+g.recover+" from "+JSON.stringify(b.split(`
`)[0]+b.split(`
`)[1]));let w={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},D;do if(D=this.parse(b,g.recover,y+1),D){new i.TokenError('Unexpected input: "'+w.text+`" Expecting: ${g.name}`,w);break}else w.text=w.text+b[0],w.end=w.text.length,b=b.substr(1);while(!D&&b.length>0);if(w.text.length>0&&D)return x&&console.log(new Array(y+1).join("  ")+"Recovered text: "+JSON.stringify(w.text)),w}return null}}return Ft.Parser=p,Ft.default=p,Ft}var Ym;function N4(){if(Ym)return Vl;Ym=1,Object.defineProperty(Vl,"__esModule",{value:!0});const n=$4();var e;return(function(t){t.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],t.defaultParser=new n.Parser(t.RULES,{debug:!1});const r=/^(!|&)/,i=/(\?|\+|\*)$/,s=/^%/;function o(x,w){if(typeof x=="string"){if(r.test(x))return"";if(s.test(x)){let A=i.exec(x),k=A?A[0]+" ":"";return l(x,w)?a(x,w)+k:"("+a(x,w)+")"+k}return x}else return x.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function l(x,w){let D=n.findRuleByName(x,w);return D&&D.bnf.length==1&&D.bnf[0].length==1&&(D.bnf[0][0]instanceof RegExp||D.bnf[0][0][0]=='"'||D.bnf[0][0][0]=="'")}function u(x,w){return x.map(D=>o(D,w)).join(" ")}function a(x,w){let D=n.findRuleByName(x,w);return D?D.bnf.map(A=>u(A,w)).join(" | "):"RULE_NOT_FOUND {"+x+"}"}function c(x){let w=[];return x.grammarRules.forEach(D=>{if(!/^%/.test(D.name)){let A=D.recover?" /* { recoverUntil="+D.recover+" } */":"";w.push(D.name+" ::= "+a(D.name,x)+A)}}),w.join(`
`)}t.emit=c;let f=0;function h(x,w){throw console.log("reberia restar "+w+" a "+x),new Error("Difference not supported yet")}function d(x){return new RegExp(x.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function p(x,w,D){let A=null,k=[];return w.children.forEach((C,O)=>{C.type=="Minus"&&h(A,C);let L=w.children[O+1];L=L&&L.type=="PrimaryDecoration"&&L.text||"";let B="";switch(C.type){case"SubItem":let P="%"+(D+f++);m(x,C,P),k.push(B+P+L);break;case"NCName":case"StringLiteral":k.push(B+C.text+L);break;case"CharCode":case"CharClass":if(L||B){let T={name:"%"+(D+f++),bnf:[[d(C.text)]]};x.push(T),k.push(B+T.name+L)}else k.push(d(C.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+C.type+" -> "+JSON.stringify(C.text))}A=C}),k}function m(x,w,D){let A=w.children.filter(O=>O.type=="SequenceOrDifference").map(O=>p(x,O,D)),k={name:D,bnf:A},C=null;A.forEach(O=>{C=C||O.recover,delete O.recover}),D.indexOf("%")==0&&(k.fragment=!0),C&&(k.recover=C),x.push(k)}function g(x,w=t.defaultParser){let D=w.getAST(x);if(!D)throw new Error("Could not parse "+x);if(D.errors&&D.errors.length)throw D.errors[0];let A=[];return D.children.filter(k=>k.type=="Production").map(k=>{let C=k.children.filter(O=>O.type=="NCName")[0].text;m(A,k,C)}),A}t.getRules=g;function b(x,w=t.defaultParser){return g(x.join(""),w)}t.Transform=b;class y extends n.Parser{constructor(w,D){const A=D&&D.debugRulesParser===!0?new n.Parser(t.RULES,{debug:!0}):t.defaultParser;super(g(w,A),D)}emitSource(){return c(this)}}t.Parser=y})(e||(e={})),Vl.default=e,Vl}var L4=N4();const j4=gs(L4),q4="[^?/{}*,()#]+",V4=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${q4}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,z4=new j4.Parser(V4),U4=n=>z4.getAST(n),Pt=0,is=3,la=(n,e)=>`${n}/${e}`,sx=Object.prototype.toString,H4=/Object|Array/,Rh=n=>H4.test(sx.call(n)),W4=n=>sx.call(n).match(/\s([^\]]+)\]/).pop().toLowerCase();function ox(n){return new RegExp(n.text.replace(/(^{|}$)/g,""))}function G4(n,e){Array.isArray(n)?n.forEach(e):Object.prototype.toString.call(n)==="[object Object]"&&Object.keys(n).forEach(function(t){e(n[t],t,n)})}function Qm(n){return Array.isArray(n)?n.map(function(e,t){return`${t}`}):Object.prototype.toString.call(n)==="[object Object]"?Object.keys(n):[]}const Dr={mem:[],get(n,e){const t=n[Pt][e];if(!Dr.mem.includes(t))return Rh(t)&&Dr.mem.push(t),[t,e,n[Pt],la(n[is],e)]},reset(){Dr.mem.length=0}},Ih={any(n,e){const t=e[Pt];return Qm(t).map(r=>[t[r],r,t,la(e[is],r)])},all(n,e){const t=[e];return G4(e[Pt],(r,i)=>{const s=Dr.get(e,i);s&&t.push(...Ih.all(n,s))}),t},regex(n,e){const t=ox(n),r=e[Pt];return Qm(r).filter(i=>t.test(i)).map(i=>[r[i],i,r,la(e[is],i)])}},ua={escaped:(n,e)=>ua.property(n,e),property:(n,e)=>{const t=n.text;if(e[Pt]&&e[Pt][t]!==void 0)return[e[Pt][t],t,e[Pt],la(e[is],t)]},typecheck:(n,e)=>{const t=n.text.replace(/^\?:/,"");if(t==="value")return Rh(e[Pt])?void 0:e;if(W4(e[Pt])===t)return e},lookahead:(n,e)=>{let t=!0,r=!1;return n.children.forEach(i=>{if(i.type==="expression"){const s=ua.expression(i,e)!==void 0;t=r===!0?t||s:t&&s}else r=i.type==="orExpr"}),t?e:void 0},expression:(n,e)=>{const t=n.children[0].text,r=n.children[1],i=n.children[2],s=e[Pt];if(Rh(s)!==!1)return K4(s[t],r,i)?e:void 0}};function K4(n,e,t){if(e===void 0)return n!==void 0;let r;const i=`${n}`;return t.type==="regex"?r=ox(t).test(i):r=i===t.text,e.type==="isnot"&&(r=r===!1&&n!==void 0),r}function J4(n,e,t,r){const i=[];for(let s=0,o=e.length;s<o;s+=1)i.push(...n(t,e[s],t,r));return i}function Y4(n,e,t,r){const i=[];for(let s=0,o=e.length;s<o;s+=1){const l=n(t,e[s],r);l&&i.push(l)}return i}function Q4(n,e,t){let r=n;return e.children.forEach(i=>{if(Ih[i.type])r=J4(Ih[i.type],r,i,t);else if(ua[i.type])r=Y4(ua[i.type],r,i,t);else throw new Error(`Unknown filter ${i.type}`)}),r}function X4(n,e,t){const r=[];let i=n;return e.children.forEach(s=>{if(s.type==="orPattern"){r.push(...i),i=n;return}i=ip(i,s,t)}),r.push(...i),r}function Z4(n){if(n==null)return 1;if(n==="*"||n==="+")return 1/0;const e=parseInt(n);return isNaN(e)?1:e}function eO(n,e,t){const r=[],i=e.children.find(u=>u.type==="quantifier"),s=Z4(i&&i.text);let o=n;i&&i.text==="*"&&r.push(...o);let l=0;for(;o.length>0&&l<s;)o=X4(o,e,t),r.push(...o),l+=1;return r}function tO(n,e,t){let r=n;return e.children.forEach(i=>r=ip(r,i,t)),r}function ip(n,e,t){let r;return e.type==="query"?r=Q4(n,e,t):e.type==="pattern"?r=eO(n,e,t):r=tO(n,e,t),Dr.reset(),Dr.mem.push(n),r}function nO(n,e){return Dr.reset(),Dr.mem.push(n),ip([[n,null,null,"#"]],e)}const Xm={value:n=>n.map(e=>e[Pt]),pointer:n=>n.map(e=>e[is]),all:n=>n,map:n=>{const e={};return n.forEach(t=>e[t[is]]=t[Pt]),e}};var di;(function(n){n.POINTER="pointer",n.VALUE="value",n.ALL="all",n.MAP="map"})(di||(di={}));sl.POINTER=di.POINTER;sl.VALUE=di.VALUE;sl.ALL=di.ALL;sl.MAP=di.MAP;function sl(n,e,t=di.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const r=U4(e);if(r==null)throw new Error(`empty ast for '${e}'`);if(r.rest!=="")throw new Error(`Failed parsing queryString from: '${r.rest}'`);const i=nO(n,r);return typeof t=="function"?i.map(s=>t(...s)):Xm[t]?Xm[t](i):i}var aa;(function(n){n.REPLACE_ITEMS="replace",n.INSERT_ITEMS="insert"})(aa||(aa={}));aa.REPLACE_ITEMS;aa.INSERT_ITEMS;const Xn={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},rO=Object.keys(Xn).filter(n=>Xn[n].type===!1),Zm=Object.prototype.hasOwnProperty;function eg(n){if(wr(n)===!1)return;if(n.enum)return"enum";const e=n.type;if(Array.isArray(e)||Xn[e])return e;const t=rO.filter(r=>n[r]);if(t.length===1)return t[0];if(t.length===0){for(let r=0,i=Xn.object.keywords.length;r<i;r+=1){const s=Xn.object.keywords[r];if(Zm.call(n,s))return"object"}for(let r=0,i=Xn.array.keywords.length;r<i;r+=1){const s=Xn.array.keywords[r];if(Zm.call(n,s))return"array"}return}throw new Error(`Mutiple typeIds [${t.join(", ")}] matched in ${JSON.stringify(n)}`)}function iO(n){const e=[],t=eg(n);if(t==null)return e;let r;if(Array.isArray(t)){r={};for(let i=0,s=t.length;i<s;i+=1)Object.assign(r,Xn[t[i]])}else r=Xn[t];return r.definitions==null||r.definitions.forEach(i=>{sl(n,i,(s,o,l,u)=>{wr(s)&&eg(s)&&e.push({pointer:_o.join(_o.split(u),!1),def:s})})}),e}function sO(n,e){if(this.callback(n,e)===!0)return;iO(n).forEach(r=>this.nextTypeDefs(r.def,_o.join(e,r.pointer,!1)))}function zl(n,e,t,r="definitions"){const i=e[r];Object.keys(i).forEach(s=>{if(i[s]===!1||wr(i[s])){n.nextTypeDefs(i[s],_o.join(t,r,s,!1));return}})}function Za(n,e,t="#"){const r={callback:e,nextTypeDefs:sO};r.nextTypeDefs(n,t),n.definitions!=null&&(r.callback=(i,s)=>{e(i,s),i.definitions!=null&&zl(r,i,s)},zl(r,n,t)),n.$defs!=null&&(r.callback=(i,s)=>{e(i,s),i.definitions!=null&&zl(r,i,s)},zl(r,n,t,"$defs"))}const oO=/(#|\/)+$/,Ul=/#$/,lO=/^[^:]+:\/\/[^/]+\//,uO=/\/[^/]*$/,aO=/#.*$/;function ca(n,e){return n==null&&e==null?"#":e==null?n.replace(Ul,""):n==null?e.replace(Ul,""):e[0]==="#"?`${n.replace(aO,"")}${e.replace(oO,"")}`:lO.test(e)?e.replace(Ul,""):`${n.replace(uO,"")}/${e.replace(Ul,"")}`}const $s=/(#|\/)+$/g,cO=["",null,"#"];function fO(n){if(cO.includes(n))return[];if(n=n.replace($s,""),n.indexOf("#")===-1)return[n.replace($s,"")];if(n.indexOf("#")===0)return[n.replace($s,"")];const e=n.split("#");return e[0]=e[0].replace($s,""),e[1]=`#${e[1].replace($s,"")}`,e}const hO=/(#|\/)+$/g,dO=n=>ye(n)==="object";function Jn(n,e,t){if(dO(t)&&(t=t.__ref||t.$ref),t==null)return e;let r;const i=t.replace(hO,"");if(n.remotes[i])return r=n.remotes[i],r&&r.$ref?Jn(n,e,r.$ref):r;if(n.ids[t])return r=Zr.get(e,n.ids[t]),r&&r.$ref?Jn(n,e,r.$ref):r;const s=fO(t);if(s.length===0)return e;if(s.length===1){if(t=s[0],n.remotes[t])return r=n.remotes[t],Jn(n,e,r.$ref);if(n.ids[t])return r=Zr.get(e,n.ids[t]),r&&r.$ref?Jn(n,e,r.$ref):r}if(s.length===2){const o=s[0];if(t=s[1],n.remotes[o])return n.remotes[o].getRef?n.remotes[o].getRef(t):Jn(n,n.remotes[o],t);if(n.ids[o])return Jn(n,Zr.get(e,n.ids[o]),t)}return r=Zr.get(e,n.ids[t]||t),r&&r.$ref?Jn(n,e,r.$ref):r}const tg="__compiled",ng="__ref",pO="getRef",mO="getRoot",gO=/(#|\/)+$/g;function bO(n,e,t=e,r=!1){if(!e||e[tg]!==void 0)return e;const i={ids:{},remotes:n.remotes},s=JSON.stringify(e),o=JSON.parse(s);if(Object.defineProperty(o,tg,{enumerable:!1,value:!0}),Object.defineProperty(o,pO,{enumerable:!1,value:Jn.bind(null,i,o)}),r===!1&&s.includes("$ref")===!1)return o;e!==t&&Object.defineProperty(o,"definitions",{enumerable:!1,value:Object.assign({},t.definitions,t.$defs,e.definitions,e.$defs)});const l={},u=()=>o;return Za(o,(a,c)=>{var f;if(a.id){if(a.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(c)){const g=c.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),b=Zr.get(o,g);a.id=(f=b.id)!==null&&f!==void 0?f:a.id}i.ids[a.id.replace(gO,"")]=c}c=`#${c}`.replace(/##+/,"#");const h=c.replace(/\/[^/]+$/,""),d=c.replace(/\/[^/]+\/[^/]+$/,""),p=l[h]||l[d],m=ca(p,a.id);l[c]=m,i.ids[m]==null&&(i.ids[m]=c),a.$ref&&!a[ng]&&(Object.defineProperty(a,ng,{enumerable:!1,value:ca(m,a.$ref)}),Object.defineProperty(a,mO,{enumerable:!1,value:u}))}),o}function lx(n,e,t,r=n.rootSchema,i="#"){r=n.resolveRef(r),t(r,e,i);const s=ye(e);s==="object"?Object.keys(e).forEach(o=>{const l=n.step(o,r,e,i),u=e[o];n.each(u,t,l,`${i}/${o}`)}):s==="array"&&e.forEach((o,l)=>{const u=n.step(l,r,e,i);n.each(o,t,u,`${i}/${l}`)})}const ux={additionalItemsError:ne("AdditionalItemsError"),additionalPropertiesError:ne("AdditionalPropertiesError"),anyOfError:ne("AnyOfError"),allOfError:ne("AllOfError"),constError:ne("ConstError"),containsError:ne("ContainsError"),containsArrayError:ne("ContainsArrayError"),containsAnyError:ne("ContainsAnyError"),enumError:ne("EnumError"),forbiddenPropertyError:ne("ForbiddenPropertyError"),formatURLError:ne("FormatURLError"),formatURIError:ne("FormatURIError"),formatURIReferenceError:ne("FormatURIReferenceError"),formatURITemplateError:ne("FormatURITemplateError"),formatDateError:ne("FormatDateError"),formatDateTimeError:ne("FormatDateTimeError"),formatEmailError:ne("FormatEmailError"),formatHostnameError:ne("FormatHostnameError"),formatIPV4Error:ne("FormatIPV4Error"),formatIPV4LeadingZeroError:ne("FormatIPV4LeadingZeroError"),formatIPV6Error:ne("FormatIPV6Error"),formatIPV6LeadingZeroError:ne("FormatIPV6LeadingZeroError"),formatJsonPointerError:ne("FormatJsonPointerError"),formatRegExError:ne("FormatRegExError"),formatTimeError:ne("FormatTimeError"),invalidSchemaError:ne("InvalidSchemaError"),invalidDataError:ne("InvalidDataError"),invalidTypeError:ne("InvalidTypeError"),invalidPropertyNameError:ne("InvalidPropertyNameError"),maximumError:ne("MaximumError"),maxItemsError:ne("MaxItemsError"),maxLengthError:ne("MaxLengthError"),maxPropertiesError:ne("MaxPropertiesError"),minimumError:ne("MinimumError"),minItemsError:ne("MinItemsError"),minItemsOneError:ne("MinItemsOneError"),minLengthError:ne("MinLengthError"),minLengthOneError:ne("MinLengthOneError"),minPropertiesError:ne("MinPropertiesError"),missingDependencyError:ne("MissingDependencyError"),missingOneOfPropertyError:ne("MissingOneOfPropertyError"),multipleOfError:ne("MultipleOfError"),multipleOneOfError:ne("MultipleOneOfError"),noAdditionalPropertiesError:ne("NoAdditionalPropertiesError"),notError:ne("NotError"),oneOfError:ne("OneOfError"),oneOfPropertyError:ne("OneOfPropertyError"),patternError:ne("PatternError"),patternPropertiesError:ne("PatternPropertiesError"),requiredPropertyError:ne("RequiredPropertyError"),schemaWarning:ne("SchemaWarning"),typeError:ne("TypeError"),undefinedValueError:ne("UndefinedValueError"),uniqueItemsError:ne("UniqueItemsError"),unknownPropertyError:ne("UnknownPropertyError"),valueNotEmptyError:ne("ValueNotEmptyError")};var sf={exports:{}},rg;function yO(){return rg||(rg=1,(function(n){(function(e){e.exports.is_uri=r,e.exports.is_http_uri=i,e.exports.is_https_uri=s,e.exports.is_web_uri=o,e.exports.isUri=r,e.exports.isHttpUri=i,e.exports.isHttpsUri=s,e.exports.isWebUri=o;var t=function(l){var u=l.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return u};function r(l){if(l&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(l)&&!/%[^0-9a-f]/i.test(l)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(l)){var u=[],a="",c="",f="",h="",d="",p="";if(u=t(l),a=u[1],c=u[2],f=u[3],h=u[4],d=u[5],!!(a&&a.length&&f.length>=0)){if(c&&c.length){if(!(f.length===0||/^\//.test(f)))return}else if(/^\/\//.test(f))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(a.toLowerCase()))return p+=a+":",c&&c.length&&(p+="//"+c),p+=f,h&&h.length&&(p+="?"+h),d&&d.length&&(p+="#"+d),p}}}function i(l,u){if(r(l)){var a=[],c="",f="",h="",d="",p="",m="",g="";if(a=t(l),c=a[1],f=a[2],h=a[3],p=a[4],m=a[5],!!c){if(u){if(c.toLowerCase()!="https")return}else if(c.toLowerCase()!="http")return;if(f)return/:(\d+)$/.test(f)&&(d=f.match(/:(\d+)$/)[0],f=f.replace(/:\d+$/,"")),g+=c+":",g+="//"+f,d&&(g+=d),g+=h,p&&p.length&&(g+="?"+p),m&&m.length&&(g+="#"+m),g}}}function s(l){return i(l,!0)}function o(l){return i(l)||s(l)}})(n)})(sf)),sf.exports}var xO=yO();const ig=gs(xO);var vt={},Cu={exports:{}},vO=Cu.exports,sg;function kO(){return sg||(sg=1,(function(n){(function(e,t){n.exports?n.exports=t():e.nearley=t()})(vO,function(){function e(a,c,f){return this.id=++e.highestId,this.name=a,this.symbols=c,this.postprocess=f,this}e.highestId=0,e.prototype.toString=function(a){var c=typeof a>"u"?this.symbols.map(u).join(" "):this.symbols.slice(0,a).map(u).join(" ")+"  "+this.symbols.slice(a).map(u).join(" ");return this.name+"  "+c};function t(a,c,f,h){this.rule=a,this.dot=c,this.reference=f,this.data=[],this.wantedBy=h,this.isComplete=this.dot===a.symbols.length}t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(a){var c=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return c.left=this,c.right=a,c.isComplete&&(c.data=c.build(),c.right=void 0),c},t.prototype.build=function(){var a=[],c=this;do a.push(c.right.data),c=c.left;while(c.left);return a.reverse(),a},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(a,c){this.grammar=a,this.index=c,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(a){for(var c=this.states,f=this.wants,h=this.completed,d=0;d<c.length;d++){var p=c[d];if(p.isComplete){if(p.finish(),p.data!==o.fail){for(var m=p.wantedBy,g=m.length;g--;){var b=m[g];this.complete(b,p)}if(p.reference===this.index){var y=p.rule.name;(this.completed[y]=this.completed[y]||[]).push(p)}}}else{var y=p.rule.symbols[p.dot];if(typeof y!="string"){this.scannable.push(p);continue}if(f[y]){if(f[y].push(p),h.hasOwnProperty(y))for(var x=h[y],g=0;g<x.length;g++){var w=x[g];this.complete(p,w)}}else f[y]=[p],this.predict(y)}}},r.prototype.predict=function(a){for(var c=this.grammar.byName[a]||[],f=0;f<c.length;f++){var h=c[f],d=this.wants[a],p=new t(h,0,this.index,d);this.states.push(p)}},r.prototype.complete=function(a,c){var f=a.nextState(c);this.states.push(f)};function i(a,c){this.rules=a,this.start=c||this.rules[0].name;var f=this.byName={};this.rules.forEach(function(h){f.hasOwnProperty(h.name)||(f[h.name]=[]),f[h.name].push(h)})}i.fromCompiled=function(h,c){var f=h.Lexer;h.ParserStart&&(c=h.ParserStart,h=h.ParserRules);var h=h.map(function(p){return new e(p.name,p.symbols,p.postprocess)}),d=new i(h,c);return d.lexer=f,d};function s(){this.reset("")}s.prototype.reset=function(a,c){this.buffer=a,this.index=0,this.line=c?c.line:1,this.lastLineBreak=c?-c.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var a=this.buffer[this.index++];return a===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:a}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(a,c){var f=this.buffer;if(typeof f=="string"){var h=f.split(`
`).slice(Math.max(0,this.line-5),this.line),d=f.indexOf(`
`,this.index);d===-1&&(d=f.length);var p=this.index-this.lastLineBreak,m=String(this.line).length;return c+=" at line "+this.line+" col "+p+`:

`,c+=h.map(function(b,y){return g(this.line-h.length+y+1,m)+" "+b},this).join(`
`),c+=`
`+g("",m+p)+`^
`,c}else return c+" at index "+(this.index-1);function g(b,y){var x=String(b);return Array(y-x.length+1).join(" ")+x}};function o(a,c,f){if(a instanceof i)var h=a,f=c;else var h=i.fromCompiled(a,c);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new s};for(var d in f||{})this.options[d]=f[d];this.lexer=this.options.lexer,this.lexerState=void 0;var p=new r(h,0);this.table=[p],p.wants[h.start]=[],p.predict(h.start),p.process(),this.current=0}o.fail={},o.prototype.feed=function(a){var c=this.lexer;c.reset(a,this.lexerState);for(var f;;){try{if(f=c.next(),!f)break}catch(k){var m=new r(this.grammar,this.current+1);this.table.push(m);var h=new Error(this.reportLexerError(k));throw h.offset=this.current,h.token=k.token,h}var d=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var p=this.current+1,m=new r(this.grammar,p);this.table.push(m);for(var g=f.text!==void 0?f.text:f.value,b=c.constructor===s?f.value:f,y=d.scannable,x=y.length;x--;){var w=y[x],D=w.rule.symbols[w.dot];if(D.test?D.test(b):D.type?D.type===f.type:D.literal===g){var A=w.nextState({data:b,token:f,isToken:!0,reference:p-1});m.states.push(A)}}if(m.process(),m.states.length===0){var h=new Error(this.reportError(f));throw h.offset=this.current,h.token=f,h}this.options.keepHistory&&(d.lexerState=c.save()),this.current++}return d&&(this.lexerState=c.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(a){var c,f,h=a.token;return h?(c="input "+JSON.stringify(h.text[0])+" (lexer error)",f=this.lexer.formatError(h,"Syntax error")):(c="input (lexer error)",f=a.message),this.reportErrorCommon(f,c)},o.prototype.reportError=function(a){var c=(a.type?a.type+" token: ":"")+JSON.stringify(a.value!==void 0?a.value:a),f=this.lexer.formatError(a,"Syntax error");return this.reportErrorCommon(f,c)},o.prototype.reportErrorCommon=function(a,c){var f=[];f.push(a);var h=this.table.length-2,d=this.table[h],p=d.states.filter(function(g){var b=g.rule.symbols[g.dot];return b&&typeof b!="string"});if(p.length===0)f.push("Unexpected "+c+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(d.states,f);else{f.push("Unexpected "+c+`. Instead, I was expecting to see one of the following:
`);var m=p.map(function(g){return this.buildFirstStateStack(g,[])||[g]},this);m.forEach(function(g){var b=g[0],y=b.rule.symbols[b.dot],x=this.getSymbolDisplay(y);f.push("A "+x+" based on:"),this.displayStateStack(g,f)},this)}return f.push(""),f.join(`
`)},o.prototype.displayStateStack=function(a,c){for(var f,h=0,d=0;d<a.length;d++){var p=a[d],m=p.rule.toString(p.dot);m===f?h++:(h>0&&c.push("    ^ "+h+" more lines identical to this"),h=0,c.push("    "+m)),f=m}},o.prototype.getSymbolDisplay=function(a){return l(a)},o.prototype.buildFirstStateStack=function(a,c){if(c.indexOf(a)!==-1)return null;if(a.wantedBy.length===0)return[a];var f=a.wantedBy[0],h=[a].concat(c),d=this.buildFirstStateStack(f,h);return d===null?null:[a].concat(d)},o.prototype.save=function(){var a=this.table[this.current];return a.lexerState=this.lexerState,a},o.prototype.restore=function(a){var c=a.index;this.current=c,this.table[c]=a,this.table.splice(c+1),this.lexerState=a.lexerState,this.results=this.finish()},o.prototype.rewind=function(a){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[a])},o.prototype.finish=function(){var a=[],c=this.grammar.start,f=this.table[this.table.length-1];return f.states.forEach(function(h){h.rule.name===c&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&a.push(h)}),a.map(function(h){return h.data})};function l(a){var c=typeof a;if(c==="string")return a;if(c==="object"){if(a.literal)return JSON.stringify(a.literal);if(a instanceof RegExp)return"character matching "+a;if(a.type)return a.type+" token";if(a.test)return"token matching "+String(a.test);throw new Error("Unknown symbol type: "+a)}}function u(a){var c=typeof a;if(c==="string")return a;if(c==="object"){if(a.literal)return JSON.stringify(a.literal);if(a instanceof RegExp)return a.toString();if(a.type)return"%"+a.type;if(a.test)return"<"+String(a.test)+">";throw new Error("Unknown symbol type: "+a)}}return{Parser:o,Grammar:i,Rule:e}})})(Cu)),Cu.exports}var Hl={},og;function wO(){if(og)return Hl;og=1,Object.defineProperty(Hl,"__esModule",{value:!0});function n(i){return i[0]}const e=i=>[].concat(...i.map(s=>Array.isArray(s)?e(s):s));function t(i){return i?Array.isArray(i)?e(i).join(""):i:""}const r={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:i=>i.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(i){return i.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(i){return i.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:n},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:n},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:i=>i[0].concat([i[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:n},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:i=>i[0].concat([i[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:n},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(i){return{DomainName:t(i[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(i){return{AddressLiteral:t(i[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(i){return{localPart:t(i[0]),domainPart:t(i[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(i){return{DotString:t(i[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(i){return{QuotedString:t(i[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:i=>i[0].concat([i[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:i=>i[0].concat([i[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:n},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(i){return i.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:i=>i[0].concat([i[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:n},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:n},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:i=>i.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:n},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:n},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:i=>i.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:n},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:n},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:n},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:n},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:n},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:n},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:n},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:n}],ParserStart:"Reverse_path"};return Hl.default=r,Hl}var lg;function DO(){if(lg)return vt;lg=1;var n=vt&&vt.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(vt,"__esModule",{value:!0}),vt.canonicalize=vt.canonicalize_quoted_string=vt.normalize=vt.normalize_dot_string=vt.parse=void 0;const e=kO(),t=n(wO());t.default.ParserStart="Mailbox";const r=e.Grammar.fromCompiled(t.default);function i(a){const c=new e.Parser(r);if(c.feed(a),c.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return c.results[0]}vt.parse=i;function s(a){return(function(){const h=a.indexOf("+");return h===-1?a:a.substr(0,h)})().replace(/\./g,"").toLowerCase()}vt.normalize_dot_string=s;function o(a){var c,f;const h=i(a),d=(c=h.domainPart.AddressLiteral)!==null&&c!==void 0?c:h.domainPart.DomainName.toLowerCase();return`${(f=h.localPart.QuotedString)!==null&&f!==void 0?f:s(h.localPart.DotString)}@${d}`}vt.normalize=o;function l(a){return`"${a.substr(1).substr(0,a.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}vt.canonicalize_quoted_string=l;function u(a){var c;const f=i(a),h=(c=f.domainPart.AddressLiteral)!==null&&c!==void 0?c:f.domainPart.DomainName.toLowerCase();return`${f.localPart.QuotedString?l(f.localPart.QuotedString):f.localPart.DotString}@${h}`}return vt.canonicalize=u,vt}var AO=DO();const CO=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),_O=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,SO=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,EO=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,OO=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,TO=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,FO=[0,31,28,31,30,31,30,31,31,30,31,30,31],PO=/^(?:\/(?:[^~/]|~0|~1)*)*$/,RO=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,IO=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,MO=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ax={date:(n,e,t,r)=>{if(typeof t!="string"||t==="")return;const i=t.match(OO);if(!i)return n.errors.formatDateTimeError({value:t,pointer:r,schema:e});const s=+i[1],o=+i[2],l=+i[3],u=s%4===0&&(s%100!==0||s%400===0);if(!(o>=1&&o<=12&&l>=1&&l<=(o==2&&u?29:FO[o])))return n.errors.formatDateError({value:t,pointer:r,schema:e})},"date-time":(n,e,t,r)=>{if(!(typeof t!="string"||t===""))return t===""||CO.test(t)?new Date(t).toString()==="Invalid Date"?n.errors.formatDateTimeError({value:t,pointer:r,schema:e}):void 0:n.errors.formatDateTimeError({value:t,pointer:r,schema:e})},email:(n,e,t,r)=>{if(typeof t!="string"||t==="")return;if(t[0]==='"')return n.errors.formatEmailError({value:t,pointer:r,schema:e});const[i,s,...o]=t.split("@");if(!i||!s||o.length!==0||i.length>64||s.length>253)return n.errors.formatEmailError({value:t,pointer:r,schema:e});if(i[0]==="."||i.endsWith(".")||i.includes(".."))return n.errors.formatEmailError({value:t,pointer:r,schema:e});if(!/^[a-z0-9.-]+$/i.test(s)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(i))return n.errors.formatEmailError({value:t,pointer:r,schema:e});if(!s.split(".").every(l=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(l)))return n.errors.formatEmailError({value:t,pointer:r,schema:e})},"idn-email":(n,e,t,r)=>{if(!(typeof t!="string"||t===""))try{AO.parse(t);return}catch{return n.errors.formatEmailError({value:t,pointer:r,schema:e})}},hostname:(n,e,t,r)=>{if(typeof t=="string"&&!(t===""||EO.test(t)))return n.errors.formatHostnameError({value:t,pointer:r,schema:e})},ipv4:(n,e,t,r)=>{if(!(typeof t!="string"||t==="")){if(t&&t[0]==="0")return n.errors.formatIPV4LeadingZeroError({value:t,pointer:r,schema:e});if(!(t.length<=15&&_O.test(t)))return n.errors.formatIPV4Error({value:t,pointer:r,schema:e})}},ipv6:(n,e,t,r)=>{if(!(typeof t!="string"||t==="")){if(t&&t[0]==="0")return n.errors.formatIPV6LeadingZeroError({value:t,pointer:r,schema:e});if(!(t.length<=45&&SO.test(t)))return n.errors.formatIPV6Error({value:t,pointer:r,schema:e})}},"json-pointer":(n,e,t,r)=>{if(!(typeof t!="string"||t==="")&&!PO.test(t))return n.errors.formatJsonPointerError({value:t,pointer:r,schema:e})},"relative-json-pointer":(n,e,t,r)=>{if(!(typeof t!="string"||t==="")&&!RO.test(t))return n.errors.formatJsonPointerError({value:t,pointer:r,schema:e})},regex:(n,e,t,r)=>{if(typeof t=="string"&&/\\Z$/.test(t)===!1){try{new RegExp(t);return}catch{}return n.errors.formatRegExError({value:t,pointer:r,schema:e})}if(!(typeof t=="object"||typeof t=="number"||Array.isArray(t)))return n.errors.formatRegExError({value:t,pointer:r,schema:e})},time:(n,e,t,r)=>typeof t!="string"||t===""||t.match(TO)?void 0:n.errors.formatDateTimeError({value:t,pointer:r,schema:e}),uri:(n,e,t,r)=>{if(!(typeof t!="string"||t==="")&&!ig.isUri(t))return n.errors.formatURIError({value:t,pointer:r,schema:e})},"uri-reference":(n,e,t,r)=>{if(!(typeof t!="string"||t==="")&&!IO.test(t))return n.errors.formatURIReferenceError({value:t,pointer:r,schema:e})},"uri-template":(n,e,t,r)=>{if(!(typeof t!="string"||t==="")&&!MO.test(t))return n.errors.formatURITemplateError({value:t,pointer:r,schema:e})},url:(n,e,t,r)=>{if(!(t===""||ig.isWebUri(t)))return n.errors.formatURLError({value:t,pointer:r,schema:e})}},cx={};function fx(n,e=cx){const{pointer:t="#",data:r,schema:i=n.rootSchema,withSchemaWarning:s=!1}=e,o=_o.split(t),l=hx(n,n.resolveRef(i),o,"#",r);if(!(!s&&(l==null?void 0:l.code)==="schema-warning"))return l}function hx(n,e,t,r,i=cx){if(t.length===0)return n.resolveRef(e);const s=t.shift();return e=n.step(s,e,i,r),yt(e)?e:(i=i[s],hx(n,e,t,`${r}/${s}`,i))}function BO(n){switch(ye(n)){case"string":case"array":return(n==null?void 0:n.length)===0;case"null":case"undefined":return!0;case"object":return Object.keys(n).length===0;default:return!1}}const ug=bs.templateDefaultOptions;let Zn;function of(n,e){const{$ref:t}=n;return t==null?!0:(Zn[e]==null||Zn[e][t]==null?0:Zn[e][t])<bs.GET_TEMPLATE_RECURSION_LIMIT}function ag(n,e,t){const{$ref:r}=e;return r==null?e:(Zn[t]=Zn[t]||{},Zn[t][r]=Zn[t][r]||0,Zn[t][r]+=1,n.resolveRef(e))}function $O(n,e){if(n==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===n)return e}catch{}return null}function dx(n,e,t,r,i){if(ye(e)!=="object")return Object.assign({pointer:r},e);if(of(e,r)===!1&&t==null)return!1;let s=oa(ag(n,e,r));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(of(e.anyOf[0],`${r}/anyOf/0`)){const o=ag(n,e.anyOf[0],`${r}/anyOf/0`);s=ep(s,o),s.pointer=e.anyOf[0].$ref||s.pointer}delete s.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((l,u)=>of(l,`${r}/allOf/${u}`)).reduceRight((l,u)=>l&&u,!0)){const l=[];let u=oa(t);for(let c=0;c<e.allOf.length;c+=1)l.push(Y2(n,e.allOf[c],u)),u=fn(n,u,{type:e.type,...l[c]},`${r}/allOf/${c}`,i);const a=X2(n,{allOf:l});a&&(s=Dt(s,a))}return s.pointer=s.pointer||e.$ref||r,s}const cg=n=>n&&typeof n=="object";function fn(n,e,t,r,i){var s;if(t==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(r==null)throw new Error("Missing pointer");let o=dx(n,t,e,r,i);if(!cg(o))return;if(r=o.pointer,o!=null&&o.const)return o.const;if(Array.isArray(o.oneOf))if(BO(e)){const c=o.oneOf[0].type||o.type||o.const&&typeof o.const||ye(e);o={...o.oneOf[0],type:c}}else{const c=Zd(n,e,o);if(yt(c)){if(e!=null&&i.removeInvalidData!==!0)return e;o=o.oneOf[0],e=void 0}else c.type=(s=c.type)!==null&&s!==void 0?s:o.type,o=c}if(!cg(o)||o.type==null)return;if(e instanceof File)return e;const l=Array.isArray(o.type)?NO(o.type,e,o.default):o.type,u=ye(e);return e!=null&&u!==l&&!(u==="number"&&l==="integer")&&(e=$O(l,e)),fg[l]==null?i.removeInvalidData?void 0:e:fg[l](n,o,e,r,i)}function NO(n,e,t){if(e==null){if(t!=null){const i=ye(t);if(n.includes(i))return i}return n[0]}const r=ye(e);return n.includes(r)?r:n[0]}const fg={null:(n,e,t)=>Ns(e,t,null),string:(n,e,t)=>Ns(e,t,""),number:(n,e,t)=>Ns(e,t,0),integer:(n,e,t)=>Ns(e,t,0),boolean:(n,e,t)=>Ns(e,t,!1),object:(n,e,t,r,i)=>{var s;const o=e.default===void 0?{}:e.default,l={},u=i.extendDefaults===!1&&e.default!==void 0?[]:(s=e.required)!==null&&s!==void 0?s:[];e.properties&&Object.keys(e.properties).forEach(f=>{const h=t==null||t[f]==null?o[f]:t[f],d=u.includes(f);(h!=null||d||i.addOptionalProps)&&(l[f]=fn(n,h,e.properties[f],`${r}/properties/${f}`,i))});let a=ex(n,e,l);if(a){a=Dt(e,a),delete a.dependencies;const f=fn(n,t,a,`${r}/dependencies`,i);Object.assign(l,f)}t&&(i.removeInvalidData===!0&&(e.additionalProperties===!1||ye(e.additionalProperties)==="object")?ye(e.additionalProperties)==="object"&&Object.keys(t).forEach(f=>{l[f]==null&&n.isValid(t[f],e.additionalProperties)&&(l[f]=t[f])}):Object.keys(t).forEach(f=>l[f]==null&&(l[f]=t[f])));const c=Xa(n,e,l);if(c){const f=fn(n,l,{type:"object",...c},r,i);Object.assign(l,f)}return l},array:(n,e,t,r,i)=>{var s,o;if(e.items==null)return t||[];const l=e.default===void 0?[]:e.default,u=t||l,a=i.extendDefaults===!1&&e.default!==void 0?0:e.minItems||0;if(Array.isArray(e.items)){for(let f=0,h=Math.max(a??0,(o=(s=e.items)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0);f<h;f+=1)u[f]=fn(n,u[f]==null?l[f]:u[f],e.items[f],`${r}/items/${f}`,i);return u}if(ye(e.items)!=="object")return u;const c=dx(n,e.items,t,r,i);if(c===!1)return u;if(r=c.pointer||r,c.oneOf&&u.length===0){const f=c.oneOf[0];for(let h=0;h<a;h+=1)u[h]=fn(n,u[h]==null?l[h]:u[h],f,`${r}/oneOf/0`,i);return u}if(c.oneOf&&u.length>0){const f=Math.max(a,u.length);for(let h=0;h<f;h+=1){let d=u[h]==null?l[h]:u[h],p=Zd(n,d,c);p==null||yt(p)?d!=null&&i.removeInvalidData!==!0?u[h]=d:(d=void 0,p=c.oneOf[0],u[h]=fn(n,d,p,`${r}/oneOf/${h}`,i)):u[h]=fn(n,d,p,`${r}/oneOf/${h}`,i)}return u}if(c.type){for(let f=0,h=Math.max(a,u.length);f<h;f+=1)u[f]=fn(n,u[f]==null?l[f]:u[f],c,`${r}/items`,i);return u}return u}};function Ns(n,e,t){return e??(n.const?n.const:n.default===void 0&&Array.isArray(n.enum)?n.enum[0]:n.default===void 0?t:n.default)}const px=(n,e,t=n.rootSchema,r)=>(Zn={},r?fn(n,e,t,"#",{...ug,...r}):fn(n,e,t,"#",ug));function mx(n,e,t=n.rootSchema,r="#"){return n.validate(e,t,r).length===0}function hg(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const s=n.charCodeAt(t++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}function dg(n){const e=`${n}`,t=e.indexOf(".");return t===-1?0:e.length-(t+1)}var lf,pg;function LO(){return pg||(pg=1,lf=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),lf}var jO=LO();const gx=gs(jO),qO=Object.prototype.hasOwnProperty,mg=(n,e)=>!(n[e]===void 0||!qO.call(n,e)),bx={additionalProperties:(n,e,t,r)=>{if(e.additionalProperties===!0||e.additionalProperties==null||ye(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const i=[];let s=Object.keys(t).filter(l=>bs.propertyBlacklist.includes(l)===!1);const o=Object.keys(e.properties||{});if(ye(e.patternProperties)==="object"){const l=Object.keys(e.patternProperties).map(u=>new RegExp(u));s=s.filter(u=>{for(let a=0;a<l.length;a+=1)if(l[a].test(u))return!1;return!0})}for(let l=0,u=s.length;l<u;l+=1){const a=s[l];if(o.indexOf(a)===-1){const c=wr(e.additionalProperties);if(c&&Array.isArray(e.additionalProperties.oneOf)){const f=n.resolveOneOf(t[a],e.additionalProperties,`${r}/${a}`);yt(f)?i.push(n.errors.additionalPropertiesError({pointer:r,schema:e.additionalProperties,value:t,property:s[l],properties:o,errors:f.data.errors})):i.push(...n.validate(t[a],f,r))}else c?i.push(...n.validate(t[a],e.additionalProperties,`${r}/${a}`)):i.push(n.errors.noAdditionalPropertiesError({pointer:r,schema:e,value:t,property:s[l],properties:o}))}}return i},allOf:S4,anyOf:T4,dependencies:O4,enum:(n,e,t,r)=>{const i=ye(t);if(i==="object"||i==="array"){const s=JSON.stringify(t);for(let o=0;o<e.enum.length;o+=1)if(JSON.stringify(e.enum[o])===s)return}else if(e.enum.includes(t))return;return n.errors.enumError({pointer:r,schema:e,value:t,values:e.enum})},format:(n,e,t,r)=>{if(n.validateFormat[e.format])return n.validateFormat[e.format](n,e,t,r)},items:(n,e,t,r)=>{if(e.items===!1)return Array.isArray(t)&&t.length===0?void 0:n.errors.invalidDataError({pointer:r,value:t,schema:e});const i=[];for(let s=0;s<t.length;s+=1){const o=t[s],l=n.step(s,e,t,r);if(yt(l))return[l];const u=n.validate(o,l,`${r}/${s}`);i.push(...u)}return i},maximum:(n,e,t,r)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<t)return n.errors.maximumError({maximum:e.maximum,length:t,value:t,pointer:r,schema:e});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===t)return n.errors.maximumError({maximum:e.maximum,length:t,pointer:r,schema:e,value:t})}},maxItems:(n,e,t,r)=>{if(!isNaN(e.maxItems)&&e.maxItems<t.length)return n.errors.maxItemsError({maximum:e.maxItems,length:t.length,schema:e,value:t,pointer:r})},maxLength:(n,e,t,r)=>{if(isNaN(e.maxLength))return;const i=hg(t).length;if(e.maxLength<i)return n.errors.maxLengthError({maxLength:e.maxLength,length:i,pointer:r,schema:e,value:t})},maxProperties:(n,e,t,r)=>{const i=Object.keys(t).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<i)return n.errors.maxPropertiesError({maxProperties:e.maxProperties,length:i,pointer:r,schema:e,value:t})},minLength:(n,e,t,r)=>{if(isNaN(e.minLength))return;const i=hg(t).length;if(e.minLength>i)return e.minLength===1?n.errors.minLengthOneError({minLength:e.minLength,length:i,pointer:r,schema:e,value:t}):n.errors.minLengthError({minLength:e.minLength,length:i,pointer:r,schema:e,value:t})},minimum:(n,e,t,r)=>{if(!isNaN(e.minimum)){if(e.minimum>t)return n.errors.minimumError({minimum:e.minimum,length:t,pointer:r,schema:e,value:t});if(e.exclusiveMinimum===!0&&e.minimum===t)return n.errors.minimumError({minimum:e.minimum,length:t,pointer:r,schema:e,value:t})}},minItems:(n,e,t,r)=>{if(!isNaN(e.minItems)&&e.minItems>t.length)return e.minItems===1?n.errors.minItemsOneError({minItems:e.minItems,length:t.length,pointer:r,schema:e,value:t}):n.errors.minItemsError({minItems:e.minItems,length:t.length,pointer:r,schema:e,value:t})},minProperties:(n,e,t,r)=>{if(isNaN(e.minProperties))return;const i=Object.keys(t).length;if(e.minProperties>i)return n.errors.minPropertiesError({minProperties:e.minProperties,length:i,pointer:r,schema:e,value:t})},multipleOf:(n,e,t,r)=>{if(isNaN(e.multipleOf)||typeof t!="number")return;const i=dg(t),s=dg(e.multipleOf);if(i>s)return n.errors.multipleOfError({multipleOf:e.multipleOf,value:t,pointer:r,schema:e});const o=Math.pow(10,s),l=Math.round(t*o),u=Math.round(e.multipleOf*o);if(l%u/o!==0)return n.errors.multipleOfError({multipleOf:e.multipleOf,value:t,pointer:r,schema:e})},not:(n,e,t,r)=>{const i=[];return n.validate(t,e.not,r).length===0&&i.push(n.errors.notError({value:t,not:e.not,pointer:r,schema:e})),i},oneOf:q8,pattern:(n,e,t,r)=>{if(new RegExp(e.pattern,"u").test(t)===!1)return n.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:t,schema:e,value:t,pointer:r})},patternProperties:(n,e,t,r)=>{const i=e.properties||{},s=e.patternProperties;if(ye(s)!=="object")return;const o=[],l=Object.keys(t),u=Object.keys(s).map(a=>({regex:new RegExp(a),patternSchema:s[a]}));return l.forEach(a=>{let c=!1;for(let f=0,h=u.length;f<h;f+=1)if(u[f].regex.test(a)){c=!0;const d=n.validate(t[a],u[f].patternSchema,`${r}/${a}`);d&&d.length>0&&o.push(...d)}i[a]||c===!1&&e.additionalProperties===!1&&o.push(n.errors.patternPropertiesError({key:a,pointer:r,schema:e,value:t,patterns:Object.keys(s).join(",")}))}),o},properties:(n,e,t,r)=>{const i=[],s=Object.keys(e.properties||{});for(let o=0;o<s.length;o+=1){const l=s[o];if(mg(t,l)){const u=n.step(l,e,t,r),a=n.validate(t[l],u,`${r}/${l}`);i.push(...a)}}return i},propertiesRequired:(n,e,t,r)=>{const i=[],s=Object.keys(e.properties||{});for(let o=0;o<s.length;o+=1){const l=s[o];if(t[l]===void 0)i.push(n.errors.requiredPropertyError({key:l,pointer:r,schema:e,value:t}));else{const u=n.step(l,e,t,r),a=n.validate(t[l],u,`${r}/${l}`);i.push(...a)}}return i},required:(n,e,t,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(!mg(t,i))return n.errors.requiredPropertyError({key:i,pointer:r,schema:e,value:t})})},requiredNotEmpty:(n,e,t,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(t[i]==null||t[i]==="")return n.errors.valueNotEmptyError({property:i,pointer:`${r}/${i}`,schema:e,value:t})})},uniqueItems:(n,e,t,r)=>{if((Array.isArray(t)&&e.uniqueItems)===!1)return;const i=[],s=[];return t.forEach((o,l)=>{for(let u=l+1;u<t.length;u+=1)gx(o,t[u])&&!i.includes(u)&&(s.push(n.errors.uniqueItemsError({pointer:`${r}/${u}`,duplicatePointer:`${r}/${l}`,arrayPointer:r,value:JSON.stringify(o),schema:e})),i.push(u))}),s}};function Pn(n){if(n===void 0)return;const e={type:ye(n)};return e.type==="object"&&wr(n)&&(e.properties={},Object.keys(n).forEach(t=>e.properties[t]=Pn(n[t]))),e.type==="array"&&Array.isArray(n)&&(n.length===1?e.items=Pn(n[0]):e.items=n.map(Pn)),e}const VO={array:(n,e,t,r,i)=>{const s=r==null?void 0:r[e],o=ye(t.items);if(o==="object")return Wm(n,t.items,s,`${i}/${e}`)||n.resolveRef(t.items);if(o==="array"){if(t.items[e]===!0)return Pn(s);if(t.items[e]===!1)return n.errors.invalidDataError({key:e,value:s,pointer:i,schema:t});if(t.items[e])return n.resolveRef(t.items[e]);if(t.additionalItems===!1)return n.errors.additionalItemsError({key:e,value:s,pointer:i,schema:t});if(t.additionalItems===!0||t.additionalItems===void 0)return Pn(s);if(ye(t.additionalItems)==="object")return t.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(t,null,2)} for ${JSON.stringify(r,null,2)}`)}return t.additionalItems!==!1&&s?Pn(s):new Error(`Invalid array schema for ${e} at ${i}`)},object:(n,e,t,r,i)=>{var s;t=Wm(n,t,r,i);const o=(s=t==null?void 0:t.properties)===null||s===void 0?void 0:s[e];if(o!==void 0){if(o===!1)return n.errors.forbiddenPropertyError({property:e,value:r,pointer:i,schema:t});if(o===!0)return Pn(r==null?void 0:r[e]);const a=n.resolveRef(o);if(yt(a))return a;if(a&&Array.isArray(a.oneOf)){const c=n.resolveOneOf(r[e],a,`${i}/${e}`);for(const f in a)f!=="oneOf"&&c[f]===void 0&&(c[f]=a[f]);return c}if(a)return a}const{patternProperties:l}=t;if(ye(l)==="object"){let a;const c=Object.keys(l);for(let f=0,h=c.length;f<h;f+=1)if(a=new RegExp(c[f]),a.test(e))return l[c[f]]}const{additionalProperties:u}=t;return ye(u)==="object"?t.additionalProperties:r&&(u===void 0||u===!0)?Pn(r[e]):n.errors.unknownPropertyError({property:e,value:r,pointer:`${i}`,schema:t})}};function yx(n,e,t,r,i="#"){var s;const o=ye(r);let l=(s=t.type)!==null&&s!==void 0?s:o;if(Array.isArray(l)){if(!l.includes(o))return n.errors.typeError({value:r,pointer:i,expected:t.type,received:o,schema:t});l=o}const u=VO[l];if(u){const a=u(n,`${e}`,t,r,i);return a===void 0?n.errors.schemaWarning({pointer:i,value:r,schema:t,key:e}):a}return new Error(`Unsupported schema type ${t.type} for key ${e}`)}function xx(n,e,t=n.rootSchema){var r;if(t.oneOf)return t.oneOf.map(s=>n.resolveRef(s));if(!((r=t.items)===null||r===void 0)&&r.oneOf)return t.items.oneOf.map(s=>n.resolveRef(s));const i=n.step(e,t,{},"#");return yt(i)?i:[i]}const zO={array:(n,e,t,r)=>n.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),object:(n,e,t,r)=>n.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),string:(n,e,t,r)=>n.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),integer:(n,e,t,r)=>n.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),number:(n,e,t,r)=>n.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),boolean:(n,e,t,r)=>n.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),null:(n,e,t,r)=>n.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r))};function UO(n,e){const t=ye(n);return t==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(n)||isNaN(n)?"integer":"number":t}function vx(n,e,t=n.rootSchema,r="#"){if(t=n.resolveRef(t),ye(t)==="boolean")return t?[]:[n.errors.invalidDataError({pointer:r,schema:t,value:e})];if(yt(t))return[t];if(t.const!==void 0)return gx(t.const,e)?[]:[n.errors.constError({pointer:r,schema:t,value:e,expected:t.const})];const i=UO(e,t.type),s=t.type||i;return i!==s&&(!Array.isArray(s)||!s.includes(i))?[n.errors.typeError({pointer:r,schema:t,value:e,received:i,expected:s})]:n.validateType[i]==null?[n.errors.invalidTypeError({pointer:r,schema:t,value:e,receivedType:i})]:Ao(n.validateType[i](n,t,e,r)).filter(sa)}const HO={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:bx,validateType:zO,validateFormat:ax,errors:ux,addRemoteSchema:ix,compileSchema:bO,createSchemaOf:Pn,each:lx,eachSchema:Za,getChildSchemaSelection:xx,getSchema:fx,getTemplate:px,isValid:mx,resolveAllOf:Q2,resolveAnyOf:nx,resolveOneOf:N2,resolveRef:Z2,step:yx,validate:vx,templateDefaultOptions:bs.templateDefaultOptions};class kx extends rx{constructor(e,t={}){super(ep(HO,t),e)}}const gg="__compiled",bg="__ref",WO="getRef",GO="getRoot",KO=/(#|\/)+$/g;function JO(n,e,t=e,r=!1){if(e===!0||e===!1||e===void 0||e[gg]!==void 0)return e;const i={ids:{},remotes:n.remotes},s=JSON.stringify(e),o=JSON.parse(s);if(Object.defineProperty(o,gg,{enumerable:!1,value:!0}),Object.defineProperty(o,WO,{enumerable:!1,value:Jn.bind(null,i,o)}),r===!1&&s.includes("$ref")===!1)return o;o!==t&&Object.defineProperty(o,"$defs",{enumerable:!0,value:Object.assign({},t.definitions,t.$defs,o.definitions,o.$defs)});const l={},u=()=>o;return Za(o,(a,c)=>{var f;if(a.$id){if(a.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(c)){const g=c.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),b=Zr.get(o,g);a.$id=(f=b.$id)!==null&&f!==void 0?f:a.$id}i.ids[a.$id.replace(KO,"")]=c}c=`#${c}`.replace(/##+/,"#");const h=c.replace(/\/[^/]+$/,""),d=c.replace(/\/[^/]+\/[^/]+$/,""),p=l[h]||l[d],m=ca(p,a.$id);l[c]=m,i.ids[m]==null&&(i.ids[m]=c),a.$ref&&!a[bg]&&(Object.defineProperty(a,bg,{enumerable:!1,value:ca(m,a.$ref)}),Object.defineProperty(a,GO,{enumerable:!1,value:u}))}),o}const YO={...bx,contains:(n,e,t,r)=>{if(e.contains===!1)return n.errors.containsArrayError({pointer:r,value:t,schema:e});if(e.contains===!0)return Array.isArray(t)&&t.length===0?n.errors.containsAnyError({pointer:r,value:t,schema:e}):void 0;if(ye(e.contains)==="object"){for(let i=0;i<t.length;i+=1)if(n.isValid(t[i],e.contains))return;return n.errors.containsError({pointer:r,schema:e,value:t})}},exclusiveMaximum:(n,e,t,r)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=t)return n.errors.maximumError({maximum:e.exclusiveMaximum,length:t,pointer:r,schema:e,value:t})},exclusiveMinimum:(n,e,t,r)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=t)return n.errors.minimumError({minimum:e.exclusiveMinimum,length:t,pointer:r,schema:e,value:t})},if:_4,maximum:(n,e,t,r)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<t)return n.errors.maximumError({maximum:e.maximum,length:t,pointer:r,schema:e,value:t})},minimum:(n,e,t,r)=>{if(!isNaN(e.minimum)&&e.minimum>t)return n.errors.minimumError({minimum:e.minimum,length:t,pointer:r,schema:e,value:t})},patternProperties:(n,e,t,r)=>{const i=e.properties||{},s=e.patternProperties;if(ye(s)!=="object")return;const o=[],l=Object.keys(t),u=Object.keys(s).map(a=>({regex:new RegExp(a),patternSchema:s[a]}));return l.forEach(a=>{let c=!1;for(let f=0,h=u.length;f<h;f+=1)if(u[f].regex.test(a)){if(c=!0,u[f].patternSchema===!1){o.push(n.errors.patternPropertiesError({key:a,pointer:r,patterns:Object.keys(s).join(","),schema:e,value:t}));return}const d=n.validate(t[a],u[f].patternSchema,`${r}/${a}`);d&&d.length>0&&o.push(...d)}i[a]||c===!1&&e.additionalProperties===!1&&o.push(n.errors.patternPropertiesError({key:a,pointer:r,patterns:Object.keys(s).join(","),schema:e,value:t}))}),o},propertyNames:(n,e,t,r)=>{if(e.propertyNames===!1)return Object.keys(t).length===0?void 0:n.errors.invalidPropertyNameError({property:Object.keys(t),pointer:r,value:t,schema:e});if(e.propertyNames===!0||ye(e.propertyNames)!=="object")return;const i=[],s=Object.keys(t),o={...e.propertyNames,type:"string"};return s.forEach(l=>{const u=n.validate(l,o,`${r}/${l}`);u.length>0&&i.push(n.errors.invalidPropertyNameError({property:l,pointer:r,validationError:u[0],value:t[l],schema:e}))}),i}},QO={array:(n,e,t,r)=>n.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),object:(n,e,t,r)=>n.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),string:(n,e,t,r)=>n.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),integer:(n,e,t,r)=>n.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),number:(n,e,t,r)=>n.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),boolean:(n,e,t,r)=>n.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r)),null:(n,e,t,r)=>n.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>n.validateKeyword[i](n,e,t,r))},XO={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:YO,validateType:QO,validateFormat:ax,errors:ux,addRemoteSchema:ix,compileSchema:JO,createSchemaOf:Pn,each:lx,eachSchema:Za,getChildSchemaSelection:xx,getSchema:fx,getTemplate:px,isValid:mx,resolveAllOf:Q2,resolveAnyOf:nx,resolveOneOf:N2,resolveRef:Z2,step:yx,validate:vx,templateDefaultOptions:bs.templateDefaultOptions};class wx extends rx{constructor(e,t={}){super(ep(XO,t),e)}}function En(n,e,t=[]){const r=document.createElement(n);return Object.entries(e).forEach(([i,s])=>{if(i==="text"){r.innerText=s;return}if(i==="inner"){r.innerHTML=s;return}r.setAttribute(i,s)}),t.forEach(i=>r.appendChild(i)),r}const yg={};function ZO(n){let e=yg[n];if(e)return e;e=yg[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);e.push(r)}for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function ss(n,e){typeof e!="string"&&(e=ss.defaultChars);const t=ZO(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,o=r.length;s<o;s+=3){const l=parseInt(r.slice(s+1,s+3),16);if(l<128){i+=t[l];continue}if((l&224)===192&&s+3<o){const u=parseInt(r.slice(s+4,s+6),16);if((u&192)===128){const a=l<<6&1984|u&63;a<128?i+="":i+=String.fromCharCode(a),s+=3;continue}}if((l&240)===224&&s+6<o){const u=parseInt(r.slice(s+4,s+6),16),a=parseInt(r.slice(s+7,s+9),16);if((u&192)===128&&(a&192)===128){const c=l<<12&61440|u<<6&4032|a&63;c<2048||c>=55296&&c<=57343?i+="":i+=String.fromCharCode(c),s+=6;continue}}if((l&248)===240&&s+9<o){const u=parseInt(r.slice(s+4,s+6),16),a=parseInt(r.slice(s+7,s+9),16),c=parseInt(r.slice(s+10,s+12),16);if((u&192)===128&&(a&192)===128&&(c&192)===128){let f=l<<18&1835008|u<<12&258048|a<<6&4032|c&63;f<65536||f>1114111?i+="":(f-=65536,i+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),s+=9;continue}}i+=""}return i})}ss.defaultChars=";/?:@&=+$,#";ss.componentChars="";const xg={};function e5(n){let e=xg[n];if(e)return e;e=xg[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function ol(n,e,t){typeof e!="string"&&(t=e,e=ol.defaultChars),typeof t>"u"&&(t=!0);const r=e5(e);let i="";for(let s=0,o=n.length;s<o;s++){const l=n.charCodeAt(s);if(t&&l===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(n.slice(s+1,s+3))){i+=n.slice(s,s+3),s+=2;continue}if(l<128){i+=r[l];continue}if(l>=55296&&l<=57343){if(l>=55296&&l<=56319&&s+1<o){const u=n.charCodeAt(s+1);if(u>=56320&&u<=57343){i+=encodeURIComponent(n[s]+n[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(n[s])}return i}ol.defaultChars=";/?:@&=+$,-_.!~*'()#";ol.componentChars="-_.!~*'()";function sp(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function fa(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const t5=/^([a-z0-9.+-]+:)/i,n5=/:[0-9]*$/,r5=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i5=["<",">",'"',"`"," ","\r",`
`,"	"],s5=["{","}","|","\\","^","`"].concat(i5),o5=["'"].concat(s5),vg=["%","/","?",";","#"].concat(o5),kg=["/","?","#"],l5=255,wg=/^[+a-z0-9A-Z_-]{0,63}$/,u5=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Dg={javascript:!0,"javascript:":!0},Ag={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function op(n,e){if(n&&n instanceof fa)return n;const t=new fa;return t.parse(n,e),t}fa.prototype.parse=function(n,e){let t,r,i,s=n;if(s=s.trim(),!e&&n.split("#").length===1){const a=r5.exec(s);if(a)return this.pathname=a[1],a[2]&&(this.search=a[2]),this}let o=t5.exec(s);if(o&&(o=o[0],t=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(e||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&Dg[o])&&(s=s.substr(2),this.slashes=!0)),!Dg[o]&&(i||o&&!Ag[o])){let a=-1;for(let p=0;p<kg.length;p++)r=s.indexOf(kg[p]),r!==-1&&(a===-1||r<a)&&(a=r);let c,f;a===-1?f=s.lastIndexOf("@"):f=s.lastIndexOf("@",a),f!==-1&&(c=s.slice(0,f),s=s.slice(f+1),this.auth=c),a=-1;for(let p=0;p<vg.length;p++)r=s.indexOf(vg[p]),r!==-1&&(a===-1||r<a)&&(a=r);a===-1&&(a=s.length),s[a-1]===":"&&a--;const h=s.slice(0,a);s=s.slice(a),this.parseHost(h),this.hostname=this.hostname||"";const d=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!d){const p=this.hostname.split(/\./);for(let m=0,g=p.length;m<g;m++){const b=p[m];if(b&&!b.match(wg)){let y="";for(let x=0,w=b.length;x<w;x++)b.charCodeAt(x)>127?y+="x":y+=b[x];if(!y.match(wg)){const x=p.slice(0,m),w=p.slice(m+1),D=b.match(u5);D&&(x.push(D[1]),w.unshift(D[2])),w.length&&(s=w.join(".")+s),this.hostname=x.join(".");break}}}}this.hostname.length>l5&&(this.hostname=""),d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const l=s.indexOf("#");l!==-1&&(this.hash=s.substr(l),s=s.slice(0,l));const u=s.indexOf("?");return u!==-1&&(this.search=s.substr(u),s=s.slice(0,u)),s&&(this.pathname=s),Ag[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};fa.prototype.parseHost=function(n){let e=n5.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const a5=Object.freeze(Object.defineProperty({__proto__:null,decode:ss,encode:ol,format:sp,parse:op},Symbol.toStringTag,{value:"Module"})),Dx=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ax=/[\0-\x1F\x7F-\x9F]/,c5=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,lp=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Cx=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,_x=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,f5=Object.freeze(Object.defineProperty({__proto__:null,Any:Dx,Cc:Ax,Cf:c5,P:lp,S:Cx,Z:_x},Symbol.toStringTag,{value:"Module"})),h5=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(n=>n.charCodeAt(0))),d5=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(n=>n.charCodeAt(0)));var uf;const p5=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),m5=(uf=String.fromCodePoint)!==null&&uf!==void 0?uf:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function g5(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=p5.get(n))!==null&&e!==void 0?e:n}var at;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(at||(at={}));const b5=32;var kr;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(kr||(kr={}));function Mh(n){return n>=at.ZERO&&n<=at.NINE}function y5(n){return n>=at.UPPER_A&&n<=at.UPPER_F||n>=at.LOWER_A&&n<=at.LOWER_F}function x5(n){return n>=at.UPPER_A&&n<=at.UPPER_Z||n>=at.LOWER_A&&n<=at.LOWER_Z||Mh(n)}function v5(n){return n===at.EQUALS||x5(n)}var it;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(it||(it={}));var gr;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(gr||(gr={}));class k5{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=it.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=gr.Strict}startEntity(e){this.decodeMode=e,this.state=it.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case it.EntityStart:return e.charCodeAt(t)===at.NUM?(this.state=it.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=it.NamedEntity,this.stateNamedEntity(e,t));case it.NumericStart:return this.stateNumericStart(e,t);case it.NumericDecimal:return this.stateNumericDecimal(e,t);case it.NumericHex:return this.stateNumericHex(e,t);case it.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|b5)===at.LOWER_X?(this.state=it.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=it.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){const s=r-t;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(t,s),i),this.consumed+=s}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(Mh(i)||y5(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(Mh(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===at.SEMI)this.consumed+=1;else if(this.decodeMode===gr.Strict)return 0;return this.emitCodePoint(g5(this.result),this.consumed),this.errors&&(e!==at.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&kr.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=w5(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===gr.Attribute&&(s===0||v5(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&kr.VALUE_LENGTH)>>14,s!==0){if(o===at.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==gr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,i=(r[t]&kr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~kr.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case it.NamedEntity:return this.result!==0&&(this.decodeMode!==gr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case it.NumericDecimal:return this.emitNumericEntity(0,2);case it.NumericHex:return this.emitNumericEntity(0,3);case it.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case it.EntityStart:return 0}}}function Sx(n){let e="";const t=new k5(n,r=>e+=m5(r));return function(i,s){let o=0,l=0;for(;(l=i.indexOf("&",l))>=0;){e+=i.slice(o,l),t.startEntity(s);const a=t.write(i,l+1);if(a<0){o=l+t.end();break}o=l+a,l=a===0?o+1:o}const u=e+i.slice(o);return e="",u}}function w5(n,e,t,r){const i=(e&kr.BRANCH_LENGTH)>>7,s=e&kr.JUMP_TABLE;if(i===0)return s!==0&&r===s?t:-1;if(s){const u=r-s;return u<0||u>=i?-1:n[t+u]-1}let o=t,l=o+i-1;for(;o<=l;){const u=o+l>>>1,a=n[u];if(a<r)o=u+1;else if(a>r)l=u-1;else return n[u+i]}return-1}const D5=Sx(h5);Sx(d5);function Ex(n,e=gr.Legacy){return D5(n,e)}function A5(n){return Object.prototype.toString.call(n)}function up(n){return A5(n)==="[object String]"}const C5=Object.prototype.hasOwnProperty;function _5(n,e){return C5.call(n,e)}function ec(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){n[r]=t[r]})}}),n}function Ox(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function ap(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function ha(n){if(n>65535){n-=65536;const e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}const Tx=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,S5=/&([a-z#][a-z0-9]{1,31});/gi,E5=new RegExp(Tx.source+"|"+S5.source,"gi"),O5=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function T5(n,e){if(e.charCodeAt(0)===35&&O5.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return ap(r)?ha(r):n}const t=Ex(n);return t!==n?t:n}function F5(n){return n.indexOf("\\")<0?n:n.replace(Tx,"$1")}function os(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(E5,function(e,t,r){return t||T5(e,r)})}const P5=/[&<>"]/,R5=/[&<>"]/g,I5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function M5(n){return I5[n]}function Rr(n){return P5.test(n)?n.replace(R5,M5):n}const B5=/[.?*+^$[\]\\(){}|-]/g;function $5(n){return n.replace(B5,"\\$&")}function _e(n){switch(n){case 9:case 32:return!0}return!1}function So(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Eo(n){return lp.test(n)||Cx.test(n)}function Oo(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function tc(n){return n=n.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(n=n.replace(//g,"")),n.toLowerCase().toUpperCase()}const N5={mdurl:a5,ucmicro:f5},L5=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Ox,assign:ec,escapeHtml:Rr,escapeRE:$5,fromCodePoint:ha,has:_5,isMdAsciiPunct:Oo,isPunctChar:Eo,isSpace:_e,isString:up,isValidEntityCode:ap,isWhiteSpace:So,lib:N5,normalizeReference:tc,unescapeAll:os,unescapeMd:F5},Symbol.toStringTag,{value:"Module"}));function j5(n,e,t){let r,i,s,o;const l=n.posMax,u=n.pos;for(n.pos=e+1,r=1;n.pos<l;){if(s=n.src.charCodeAt(n.pos),s===93&&(r--,r===0)){i=!0;break}if(o=n.pos,n.md.inline.skipToken(n),s===91){if(o===n.pos-1)r++;else if(t)return n.pos=u,-1}}let a=-1;return i&&(a=n.pos),n.pos=u,a}function q5(n,e,t){let r,i=e;const s={ok:!1,pos:0,str:""};if(n.charCodeAt(i)===60){for(i++;i<t;){if(r=n.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=os(n.slice(e+1,i)),s.ok=!0,s;if(r===92&&i+1<t){i+=2;continue}i++}return s}let o=0;for(;i<t&&(r=n.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<t){if(n.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}i++}return e===i||o!==0||(s.str=os(n.slice(e,i)),s.pos=i,s.ok=!0),s}function V5(n,e,t,r){let i,s=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(s>=t)return o;let l=n.charCodeAt(s);if(l!==34&&l!==39&&l!==40)return o;e++,s++,l===40&&(l=41),o.marker=l}for(;s<t;){if(i=n.charCodeAt(s),i===o.marker)return o.pos=s+1,o.str+=os(n.slice(e,s)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&s+1<t&&s++,s++}return o.can_continue=!0,o.str+=os(n.slice(e,s)),o}const z5=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:q5,parseLinkLabel:j5,parseLinkTitle:V5},Symbol.toStringTag,{value:"Module"})),Wn={};Wn.code_inline=function(n,e,t,r,i){const s=n[e];return"<code"+i.renderAttrs(s)+">"+Rr(s.content)+"</code>"};Wn.code_block=function(n,e,t,r,i){const s=n[e];return"<pre"+i.renderAttrs(s)+"><code>"+Rr(n[e].content)+`</code></pre>
`};Wn.fence=function(n,e,t,r,i){const s=n[e],o=s.info?os(s.info).trim():"";let l="",u="";if(o){const c=o.split(/(\s+)/g);l=c[0],u=c.slice(2).join("")}let a;if(t.highlight?a=t.highlight(s.content,l,u)||Rr(s.content):a=Rr(s.content),a.indexOf("<pre")===0)return a+`
`;if(o){const c=s.attrIndex("class"),f=s.attrs?s.attrs.slice():[];c<0?f.push(["class",t.langPrefix+l]):(f[c]=f[c].slice(),f[c][1]+=" "+t.langPrefix+l);const h={attrs:f};return`<pre><code${i.renderAttrs(h)}>${a}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${a}</code></pre>
`};Wn.image=function(n,e,t,r,i){const s=n[e];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,t,r),i.renderToken(n,e,t)};Wn.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};Wn.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Wn.text=function(n,e){return Rr(n[e].content)};Wn.html_block=function(n,e){return n[e].content};Wn.html_inline=function(n,e){return n[e].content};function ys(){this.rules=ec({},Wn)}ys.prototype.renderAttrs=function(e){let t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+Rr(e.attrs[t][0])+'="'+Rr(e.attrs[t][1])+'"';return i};ys.prototype.renderToken=function(e,t,r){const i=e[t];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&t+1<e.length)){const l=e[t+1];(l.type==="inline"||l.hidden||l.nesting===-1&&l.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};ys.prototype.renderInline=function(n,e,t){let r="";const i=this.rules;for(let s=0,o=n.length;s<o;s++){const l=n[s].type;typeof i[l]<"u"?r+=i[l](n,s,e,t,this):r+=this.renderToken(n,s,e)}return r};ys.prototype.renderInlineAsText=function(n,e,t){let r="";for(let i=0,s=n.length;i<s;i++)switch(n[i].type){case"text":r+=n[i].content;break;case"image":r+=this.renderInlineAsText(n[i].children,e,t);break;case"html_inline":case"html_block":r+=n[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};ys.prototype.render=function(n,e,t){let r="";const i=this.rules;for(let s=0,o=n.length;s<o;s++){const l=n[s].type;l==="inline"?r+=this.renderInline(n[s].children,e,t):typeof i[l]<"u"?r+=i[l](n,s,e,t,this):r+=this.renderToken(n,s,e,t)}return r};function Nt(){this.__rules__=[],this.__cache__=null}Nt.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};Nt.prototype.__compile__=function(){const n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};Nt.prototype.at=function(n,e,t){const r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Nt.prototype.before=function(n,e,t,r){const i=this.__find__(n),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};Nt.prototype.after=function(n,e,t,r){const i=this.__find__(n),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};Nt.prototype.push=function(n,e,t){const r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Nt.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};Nt.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};Nt.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};Nt.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function bn(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}bn.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};bn.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};bn.prototype.attrSet=function(e,t){const r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};bn.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r};bn.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};function Fx(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}Fx.prototype.Token=bn;const U5=/\r\n?|\n/g,H5=/\0/g;function W5(n){let e;e=n.src.replace(U5,`
`),e=e.replace(H5,""),n.src=e}function G5(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function K5(n){const e=n.tokens;for(let t=0,r=e.length;t<r;t++){const i=e[t];i.type==="inline"&&n.md.inline.parse(i.content,n.md,n.env,i.children)}}function J5(n){return/^<a[>\s]/i.test(n)}function Y5(n){return/^<\/a\s*>/i.test(n)}function Q5(n){const e=n.tokens;if(n.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let i=e[t].children,s=0;for(let o=i.length-1;o>=0;o--){const l=i[o];if(l.type==="link_close"){for(o--;i[o].level!==l.level&&i[o].type!=="link_open";)o--;continue}if(l.type==="html_inline"&&(J5(l.content)&&s>0&&s--,Y5(l.content)&&s++),!(s>0)&&l.type==="text"&&n.md.linkify.test(l.content)){const u=l.content;let a=n.md.linkify.match(u);const c=[];let f=l.level,h=0;a.length>0&&a[0].index===0&&o>0&&i[o-1].type==="text_special"&&(a=a.slice(1));for(let d=0;d<a.length;d++){const p=a[d].url,m=n.md.normalizeLink(p);if(!n.md.validateLink(m))continue;let g=a[d].text;a[d].schema?a[d].schema==="mailto:"&&!/^mailto:/i.test(g)?g=n.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=n.md.normalizeLinkText(g):g=n.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");const b=a[d].index;if(b>h){const D=new n.Token("text","",0);D.content=u.slice(h,b),D.level=f,c.push(D)}const y=new n.Token("link_open","a",1);y.attrs=[["href",m]],y.level=f++,y.markup="linkify",y.info="auto",c.push(y);const x=new n.Token("text","",0);x.content=g,x.level=f,c.push(x);const w=new n.Token("link_close","a",-1);w.level=--f,w.markup="linkify",w.info="auto",c.push(w),h=a[d].lastIndex}if(h<u.length){const d=new n.Token("text","",0);d.content=u.slice(h),d.level=f,c.push(d)}e[t].children=i=Ox(i,o,c)}}}}const Px=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,X5=/\((c|tm|r)\)/i,Z5=/\((c|tm|r)\)/ig,eT={c:"",r:"",tm:""};function tT(n,e){return eT[e.toLowerCase()]}function nT(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&(r.content=r.content.replace(Z5,tT)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function rT(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&Px.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function iT(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(X5.test(n.tokens[e].content)&&nT(n.tokens[e].children),Px.test(n.tokens[e].content)&&rT(n.tokens[e].children))}const sT=/['"]/,Cg=/['"]/g,_g="";function Wl(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function oT(n,e){let t;const r=[];for(let i=0;i<n.length;i++){const s=n[i],o=n[i].level;for(t=r.length-1;t>=0&&!(r[t].level<=o);t--);if(r.length=t+1,s.type!=="text")continue;let l=s.content,u=0,a=l.length;e:for(;u<a;){Cg.lastIndex=u;const c=Cg.exec(l);if(!c)break;let f=!0,h=!0;u=c.index+1;const d=c[0]==="'";let p=32;if(c.index-1>=0)p=l.charCodeAt(c.index-1);else for(t=i-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){p=n[t].content.charCodeAt(n[t].content.length-1);break}let m=32;if(u<a)m=l.charCodeAt(u);else for(t=i+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){m=n[t].content.charCodeAt(0);break}const g=Oo(p)||Eo(String.fromCharCode(p)),b=Oo(m)||Eo(String.fromCharCode(m)),y=So(p),x=So(m);if(x?f=!1:b&&(y||g||(f=!1)),y?h=!1:g&&(x||b||(h=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(h=f=!1),f&&h&&(f=g,h=b),!f&&!h){d&&(s.content=Wl(s.content,c.index,_g));continue}if(h)for(t=r.length-1;t>=0;t--){let w=r[t];if(r[t].level<o)break;if(w.single===d&&r[t].level===o){w=r[t];let D,A;d?(D=e.md.options.quotes[2],A=e.md.options.quotes[3]):(D=e.md.options.quotes[0],A=e.md.options.quotes[1]),s.content=Wl(s.content,c.index,A),n[w.token].content=Wl(n[w.token].content,w.pos,D),u+=A.length-1,w.token===i&&(u+=D.length-1),l=s.content,a=l.length,r.length=t;continue e}}f?r.push({token:i,pos:c.index,single:d,level:o}):h&&d&&(s.content=Wl(s.content,c.index,_g))}}}function lT(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!sT.test(n.tokens[e].content)||oT(n.tokens[e].children,n)}function uT(n){let e,t;const r=n.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const o=r[s].children,l=o.length;for(e=0;e<l;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=t=0;e<l;e++)o[e].type==="text"&&e+1<l&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==t&&(o[t]=o[e]),t++);e!==t&&(o.length=t)}}const af=[["normalize",W5],["block",G5],["inline",K5],["linkify",Q5],["replacements",iT],["smartquotes",lT],["text_join",uT]];function cp(){this.ruler=new Nt;for(let n=0;n<af.length;n++)this.ruler.push(af[n][0],af[n][1])}cp.prototype.process=function(n){const e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](n)};cp.prototype.State=Fx;function Gn(n,e,t,r){this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,l=0,u=0,a=i.length,c=!1;o<a;o++){const f=i.charCodeAt(o);if(!c)if(_e(f)){l++,f===9?u+=4-u%4:u++;continue}else c=!0;(f===10||o===a-1)&&(f!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),c=!1,l=0,u=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Gn.prototype.push=function(n,e,t){const r=new bn(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};Gn.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Gn.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Gn.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const r=this.src.charCodeAt(e);if(!_e(r))break}return e};Gn.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!_e(this.src.charCodeAt(--e)))return e+1;return e};Gn.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};Gn.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Gn.prototype.getLines=function(e,t,r,i){if(e>=t)return"";const s=new Array(t-e);for(let o=0,l=e;l<t;l++,o++){let u=0;const a=this.bMarks[l];let c=a,f;for(l+1<t||i?f=this.eMarks[l]+1:f=this.eMarks[l];c<f&&u<r;){const h=this.src.charCodeAt(c);if(_e(h))h===9?u+=4-(u+this.bsCount[l])%4:u++;else if(c-a<this.tShift[l])u++;else break;c++}u>r?s[o]=new Array(u-r+1).join(" ")+this.src.slice(c,f):s[o]=this.src.slice(c,f)}return s.join("")};Gn.prototype.Token=bn;const aT=65536;function cf(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function Sg(n){const e=[],t=n.length;let r=0,i=n.charCodeAt(r),s=!1,o=0,l="";for(;r<t;)i===124&&(s?(l+=n.substring(o,r-1),o=r):(e.push(l+n.substring(o,r)),l="",o=r+1)),s=i===92,r++,i=n.charCodeAt(r);return e.push(l+n.substring(o)),e}function cT(n,e,t,r){if(e+2>t)return!1;let i=e+1;if(n.sCount[i]<n.blkIndent||n.sCount[i]-n.blkIndent>=4)return!1;let s=n.bMarks[i]+n.tShift[i];if(s>=n.eMarks[i])return!1;const o=n.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=n.eMarks[i])return!1;const l=n.src.charCodeAt(s++);if(l!==124&&l!==45&&l!==58&&!_e(l)||o===45&&_e(l))return!1;for(;s<n.eMarks[i];){const w=n.src.charCodeAt(s);if(w!==124&&w!==45&&w!==58&&!_e(w))return!1;s++}let u=cf(n,e+1),a=u.split("|");const c=[];for(let w=0;w<a.length;w++){const D=a[w].trim();if(!D){if(w===0||w===a.length-1)continue;return!1}if(!/^:?-+:?$/.test(D))return!1;D.charCodeAt(D.length-1)===58?c.push(D.charCodeAt(0)===58?"center":"right"):D.charCodeAt(0)===58?c.push("left"):c.push("")}if(u=cf(n,e).trim(),u.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;a=Sg(u),a.length&&a[0]===""&&a.shift(),a.length&&a[a.length-1]===""&&a.pop();const f=a.length;if(f===0||f!==c.length)return!1;if(r)return!0;const h=n.parentType;n.parentType="table";const d=n.md.block.ruler.getRules("blockquote"),p=n.push("table_open","table",1),m=[e,0];p.map=m;const g=n.push("thead_open","thead",1);g.map=[e,e+1];const b=n.push("tr_open","tr",1);b.map=[e,e+1];for(let w=0;w<a.length;w++){const D=n.push("th_open","th",1);c[w]&&(D.attrs=[["style","text-align:"+c[w]]]);const A=n.push("inline","",0);A.content=a[w].trim(),A.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let y,x=0;for(i=e+2;i<t&&!(n.sCount[i]<n.blkIndent);i++){let w=!1;for(let A=0,k=d.length;A<k;A++)if(d[A](n,i,t,!0)){w=!0;break}if(w||(u=cf(n,i).trim(),!u)||n.sCount[i]-n.blkIndent>=4||(a=Sg(u),a.length&&a[0]===""&&a.shift(),a.length&&a[a.length-1]===""&&a.pop(),x+=f-a.length,x>aT))break;if(i===e+2){const A=n.push("tbody_open","tbody",1);A.map=y=[e+2,0]}const D=n.push("tr_open","tr",1);D.map=[i,i+1];for(let A=0;A<f;A++){const k=n.push("td_open","td",1);c[A]&&(k.attrs=[["style","text-align:"+c[A]]]);const C=n.push("inline","",0);C.content=a[A]?a[A].trim():"",C.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return y&&(n.push("tbody_close","tbody",-1),y[1]=i),n.push("table_close","table",-1),m[1]=i,n.parentType=h,n.line=i,!0}function fT(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let r=e+1,i=r;for(;r<t;){if(n.isEmpty(r)){r++;continue}if(n.sCount[r]-n.blkIndent>=4){r++,i=r;continue}break}n.line=i;const s=n.push("code_block","code",0);return s.content=n.getLines(e,i,4+n.blkIndent,!1)+`
`,s.map=[e,n.line],!0}function hT(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||i+3>s)return!1;const o=n.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let l=i;i=n.skipChars(i,o);let u=i-l;if(u<3)return!1;const a=n.src.slice(l,i),c=n.src.slice(i,s);if(o===96&&c.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let f=e,h=!1;for(;f++,!(f>=t||(i=l=n.bMarks[f]+n.tShift[f],s=n.eMarks[f],i<s&&n.sCount[f]<n.blkIndent));)if(n.src.charCodeAt(i)===o&&!(n.sCount[f]-n.blkIndent>=4)&&(i=n.skipChars(i,o),!(i-l<u)&&(i=n.skipSpaces(i),!(i<s)))){h=!0;break}u=n.sCount[e],n.line=f+(h?1:0);const d=n.push("fence","code",0);return d.info=c,d.content=n.getLines(e+1,f,u,!0),d.markup=a,d.map=[e,n.line],!0}function dT(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];const o=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==62)return!1;if(r)return!0;const l=[],u=[],a=[],c=[],f=n.md.block.ruler.getRules("blockquote"),h=n.parentType;n.parentType="blockquote";let d=!1,p;for(p=e;p<t;p++){const x=n.sCount[p]<n.blkIndent;if(i=n.bMarks[p]+n.tShift[p],s=n.eMarks[p],i>=s)break;if(n.src.charCodeAt(i++)===62&&!x){let D=n.sCount[p]+1,A,k;n.src.charCodeAt(i)===32?(i++,D++,k=!1,A=!0):n.src.charCodeAt(i)===9?(A=!0,(n.bsCount[p]+D)%4===3?(i++,D++,k=!1):k=!0):A=!1;let C=D;for(l.push(n.bMarks[p]),n.bMarks[p]=i;i<s;){const O=n.src.charCodeAt(i);if(_e(O))O===9?C+=4-(C+n.bsCount[p]+(k?1:0))%4:C++;else break;i++}d=i>=s,u.push(n.bsCount[p]),n.bsCount[p]=n.sCount[p]+1+(A?1:0),a.push(n.sCount[p]),n.sCount[p]=C-D,c.push(n.tShift[p]),n.tShift[p]=i-n.bMarks[p];continue}if(d)break;let w=!1;for(let D=0,A=f.length;D<A;D++)if(f[D](n,p,t,!0)){w=!0;break}if(w){n.lineMax=p,n.blkIndent!==0&&(l.push(n.bMarks[p]),u.push(n.bsCount[p]),c.push(n.tShift[p]),a.push(n.sCount[p]),n.sCount[p]-=n.blkIndent);break}l.push(n.bMarks[p]),u.push(n.bsCount[p]),c.push(n.tShift[p]),a.push(n.sCount[p]),n.sCount[p]=-1}const m=n.blkIndent;n.blkIndent=0;const g=n.push("blockquote_open","blockquote",1);g.markup=">";const b=[e,0];g.map=b,n.md.block.tokenize(n,e,p);const y=n.push("blockquote_close","blockquote",-1);y.markup=">",n.lineMax=o,n.parentType=h,b[1]=n.line;for(let x=0;x<c.length;x++)n.bMarks[x+e]=l[x],n.tShift[x+e]=c[x],n.sCount[x+e]=a[x],n.bsCount[x+e]=u[x];return n.blkIndent=m,!0}function pT(n,e,t,r){const i=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let s=n.bMarks[e]+n.tShift[e];const o=n.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let l=1;for(;s<i;){const a=n.src.charCodeAt(s++);if(a!==o&&!_e(a))return!1;a===o&&l++}if(l<3)return!1;if(r)return!0;n.line=e+1;const u=n.push("hr","hr",0);return u.map=[e,n.line],u.markup=Array(l+1).join(String.fromCharCode(o)),!0}function Eg(n,e){const t=n.eMarks[e];let r=n.bMarks[e]+n.tShift[e];const i=n.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<t){const s=n.src.charCodeAt(r);if(!_e(s))return-1}return r}function Og(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];let i=t;if(i+1>=r)return-1;let s=n.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=n.src.charCodeAt(i++),s>=48&&s<=57){if(i-t>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=n.src.charCodeAt(i),!_e(s))?-1:i}function mT(n,e){const t=n.level+2;for(let r=e+2,i=n.tokens.length-2;r<i;r++)n.tokens[r].level===t&&n.tokens[r].type==="paragraph_open"&&(n.tokens[r+2].hidden=!0,n.tokens[r].hidden=!0,r+=2)}function gT(n,e,t,r){let i,s,o,l,u=e,a=!0;if(n.sCount[u]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[u]-n.listIndent>=4&&n.sCount[u]<n.blkIndent)return!1;let c=!1;r&&n.parentType==="paragraph"&&n.sCount[u]>=n.blkIndent&&(c=!0);let f,h,d;if((d=Og(n,u))>=0){if(f=!0,o=n.bMarks[u]+n.tShift[u],h=Number(n.src.slice(o,d-1)),c&&h!==1)return!1}else if((d=Eg(n,u))>=0)f=!1;else return!1;if(c&&n.skipSpaces(d)>=n.eMarks[u])return!1;if(r)return!0;const p=n.src.charCodeAt(d-1),m=n.tokens.length;f?(l=n.push("ordered_list_open","ol",1),h!==1&&(l.attrs=[["start",h]])):l=n.push("bullet_list_open","ul",1);const g=[u,0];l.map=g,l.markup=String.fromCharCode(p);let b=!1;const y=n.md.block.ruler.getRules("list"),x=n.parentType;for(n.parentType="list";u<t;){s=d,i=n.eMarks[u];const w=n.sCount[u]+d-(n.bMarks[u]+n.tShift[u]);let D=w;for(;s<i;){const M=n.src.charCodeAt(s);if(M===9)D+=4-(D+n.bsCount[u])%4;else if(M===32)D++;else break;s++}const A=s;let k;A>=i?k=1:k=D-w,k>4&&(k=1);const C=w+k;l=n.push("list_item_open","li",1),l.markup=String.fromCharCode(p);const O=[u,0];l.map=O,f&&(l.info=n.src.slice(o,d-1));const L=n.tight,B=n.tShift[u],P=n.sCount[u],T=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=C,n.tight=!0,n.tShift[u]=A-n.bMarks[u],n.sCount[u]=D,A>=i&&n.isEmpty(u+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,u,t,!0),(!n.tight||b)&&(a=!1),b=n.line-u>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=T,n.tShift[u]=B,n.sCount[u]=P,n.tight=L,l=n.push("list_item_close","li",-1),l.markup=String.fromCharCode(p),u=n.line,O[1]=u,u>=t||n.sCount[u]<n.blkIndent||n.sCount[u]-n.blkIndent>=4)break;let F=!1;for(let M=0,ee=y.length;M<ee;M++)if(y[M](n,u,t,!0)){F=!0;break}if(F)break;if(f){if(d=Og(n,u),d<0)break;o=n.bMarks[u]+n.tShift[u]}else if(d=Eg(n,u),d<0)break;if(p!==n.src.charCodeAt(d-1))break}return f?l=n.push("ordered_list_close","ol",-1):l=n.push("bullet_list_close","ul",-1),l.markup=String.fromCharCode(p),g[1]=u,n.line=u,n.parentType=x,a&&mT(n,m),!0}function bT(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e],o=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==91)return!1;function l(y){const x=n.lineMax;if(y>=x||n.isEmpty(y))return null;let w=!1;if(n.sCount[y]-n.blkIndent>3&&(w=!0),n.sCount[y]<0&&(w=!0),!w){const k=n.md.block.ruler.getRules("reference"),C=n.parentType;n.parentType="reference";let O=!1;for(let L=0,B=k.length;L<B;L++)if(k[L](n,y,x,!0)){O=!0;break}if(n.parentType=C,O)return null}const D=n.bMarks[y]+n.tShift[y],A=n.eMarks[y];return n.src.slice(D,A+1)}let u=n.src.slice(i,s+1);s=u.length;let a=-1;for(i=1;i<s;i++){const y=u.charCodeAt(i);if(y===91)return!1;if(y===93){a=i;break}else if(y===10){const x=l(o);x!==null&&(u+=x,s=u.length,o++)}else if(y===92&&(i++,i<s&&u.charCodeAt(i)===10)){const x=l(o);x!==null&&(u+=x,s=u.length,o++)}}if(a<0||u.charCodeAt(a+1)!==58)return!1;for(i=a+2;i<s;i++){const y=u.charCodeAt(i);if(y===10){const x=l(o);x!==null&&(u+=x,s=u.length,o++)}else if(!_e(y))break}const c=n.md.helpers.parseLinkDestination(u,i,s);if(!c.ok)return!1;const f=n.md.normalizeLink(c.str);if(!n.md.validateLink(f))return!1;i=c.pos;const h=i,d=o,p=i;for(;i<s;i++){const y=u.charCodeAt(i);if(y===10){const x=l(o);x!==null&&(u+=x,s=u.length,o++)}else if(!_e(y))break}let m=n.md.helpers.parseLinkTitle(u,i,s);for(;m.can_continue;){const y=l(o);if(y===null)break;u+=y,i=s,s=u.length,o++,m=n.md.helpers.parseLinkTitle(u,i,s,m)}let g;for(i<s&&p!==i&&m.ok?(g=m.str,i=m.pos):(g="",i=h,o=d);i<s;){const y=u.charCodeAt(i);if(!_e(y))break;i++}if(i<s&&u.charCodeAt(i)!==10&&g)for(g="",i=h,o=d;i<s;){const y=u.charCodeAt(i);if(!_e(y))break;i++}if(i<s&&u.charCodeAt(i)!==10)return!1;const b=tc(u.slice(1,a));return b?(r||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[b]>"u"&&(n.env.references[b]={title:g,href:f}),n.line=o),!0):!1}const yT=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],xT="[a-zA-Z_:][a-zA-Z0-9:._-]*",vT="[^\"'=<>`\\x00-\\x20]+",kT="'[^']*'",wT='"[^"]*"',DT="(?:"+vT+"|"+kT+"|"+wT+")",AT="(?:\\s+"+xT+"(?:\\s*=\\s*"+DT+")?)",Rx="<[A-Za-z][A-Za-z0-9\\-]*"+AT+"*\\s*\\/?>",Ix="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",CT="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",_T="<[?][\\s\\S]*?[?]>",ST="<![A-Za-z][^>]*>",ET="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",OT=new RegExp("^(?:"+Rx+"|"+Ix+"|"+CT+"|"+_T+"|"+ST+"|"+ET+")"),TT=new RegExp("^(?:"+Rx+"|"+Ix+")"),wi=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+yT.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(TT.source+"\\s*$"),/^$/,!1]];function FT(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(i)!==60)return!1;let o=n.src.slice(i,s),l=0;for(;l<wi.length&&!wi[l][0].test(o);l++);if(l===wi.length)return!1;if(r)return wi[l][2];let u=e+1;if(!wi[l][1].test(o)){for(;u<t&&!(n.sCount[u]<n.blkIndent);u++)if(i=n.bMarks[u]+n.tShift[u],s=n.eMarks[u],o=n.src.slice(i,s),wi[l][1].test(o)){o.length!==0&&u++;break}}n.line=u;const a=n.push("html_block","",0);return a.map=[e,u],a.content=n.getLines(e,u,n.blkIndent,!0),!0}function PT(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],s=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let o=n.src.charCodeAt(i);if(o!==35||i>=s)return!1;let l=1;for(o=n.src.charCodeAt(++i);o===35&&i<s&&l<=6;)l++,o=n.src.charCodeAt(++i);if(l>6||i<s&&!_e(o))return!1;if(r)return!0;s=n.skipSpacesBack(s,i);const u=n.skipCharsBack(s,35,i);u>i&&_e(n.src.charCodeAt(u-1))&&(s=u),n.line=e+1;const a=n.push("heading_open","h"+String(l),1);a.markup="########".slice(0,l),a.map=[e,n.line];const c=n.push("inline","",0);c.content=n.src.slice(i,s).trim(),c.map=[e,n.line],c.children=[];const f=n.push("heading_close","h"+String(l),-1);return f.markup="########".slice(0,l),!0}function RT(n,e,t){const r=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;const i=n.parentType;n.parentType="paragraph";let s=0,o,l=e+1;for(;l<t&&!n.isEmpty(l);l++){if(n.sCount[l]-n.blkIndent>3)continue;if(n.sCount[l]>=n.blkIndent){let d=n.bMarks[l]+n.tShift[l];const p=n.eMarks[l];if(d<p&&(o=n.src.charCodeAt(d),(o===45||o===61)&&(d=n.skipChars(d,o),d=n.skipSpaces(d),d>=p))){s=o===61?1:2;break}}if(n.sCount[l]<0)continue;let h=!1;for(let d=0,p=r.length;d<p;d++)if(r[d](n,l,t,!0)){h=!0;break}if(h)break}if(!s)return!1;const u=n.getLines(e,l,n.blkIndent,!1).trim();n.line=l+1;const a=n.push("heading_open","h"+String(s),1);a.markup=String.fromCharCode(o),a.map=[e,n.line];const c=n.push("inline","",0);c.content=u,c.map=[e,n.line-1],c.children=[];const f=n.push("heading_close","h"+String(s),-1);return f.markup=String.fromCharCode(o),n.parentType=i,!0}function IT(n,e,t){const r=n.md.block.ruler.getRules("paragraph"),i=n.parentType;let s=e+1;for(n.parentType="paragraph";s<t&&!n.isEmpty(s);s++){if(n.sCount[s]-n.blkIndent>3||n.sCount[s]<0)continue;let a=!1;for(let c=0,f=r.length;c<f;c++)if(r[c](n,s,t,!0)){a=!0;break}if(a)break}const o=n.getLines(e,s,n.blkIndent,!1).trim();n.line=s;const l=n.push("paragraph_open","p",1);l.map=[e,n.line];const u=n.push("inline","",0);return u.content=o,u.map=[e,n.line],u.children=[],n.push("paragraph_close","p",-1),n.parentType=i,!0}const Gl=[["table",cT,["paragraph","reference"]],["code",fT],["fence",hT,["paragraph","reference","blockquote","list"]],["blockquote",dT,["paragraph","reference","blockquote","list"]],["hr",pT,["paragraph","reference","blockquote","list"]],["list",gT,["paragraph","reference","blockquote"]],["reference",bT],["html_block",FT,["paragraph","reference","blockquote"]],["heading",PT,["paragraph","reference","blockquote"]],["lheading",RT],["paragraph",IT]];function nc(){this.ruler=new Nt;for(let n=0;n<Gl.length;n++)this.ruler.push(Gl[n][0],Gl[n][1],{alt:(Gl[n][2]||[]).slice()})}nc.prototype.tokenize=function(n,e,t){const r=this.ruler.getRules(""),i=r.length,s=n.md.options.maxNesting;let o=e,l=!1;for(;o<t&&(n.line=o=n.skipEmptyLines(o),!(o>=t||n.sCount[o]<n.blkIndent));){if(n.level>=s){n.line=t;break}const u=n.line;let a=!1;for(let c=0;c<i;c++)if(a=r[c](n,o,t,!1),a){if(u>=n.line)throw new Error("block rule didn't increment state.line");break}if(!a)throw new Error("none of the block rules matched");n.tight=!l,n.isEmpty(n.line-1)&&(l=!0),o=n.line,o<t&&n.isEmpty(o)&&(l=!0,o++,n.line=o)}};nc.prototype.parse=function(n,e,t,r){if(!n)return;const i=new this.State(n,e,t,r);this.tokenize(i,i.line,i.lineMax)};nc.prototype.State=Gn;function ll(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}ll.prototype.pushPending=function(){const n=new bn("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};ll.prototype.push=function(n,e,t){this.pending&&this.pushPending();const r=new bn(n,e,t);let i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};ll.prototype.scanDelims=function(n,e){const t=this.posMax,r=this.src.charCodeAt(n),i=n>0?this.src.charCodeAt(n-1):32;let s=n;for(;s<t&&this.src.charCodeAt(s)===r;)s++;const o=s-n,l=s<t?this.src.charCodeAt(s):32,u=Oo(i)||Eo(String.fromCharCode(i)),a=Oo(l)||Eo(String.fromCharCode(l)),c=So(i),f=So(l),h=!f&&(!a||c||u),d=!c&&(!u||f||a);return{can_open:h&&(e||!d||u),can_close:d&&(e||!h||a),length:o}};ll.prototype.Token=bn;function MT(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function BT(n,e){let t=n.pos;for(;t<n.posMax&&!MT(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}const $T=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function NT(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;const t=n.pos,r=n.posMax;if(t+3>r||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;const i=n.pending.match($T);if(!i)return!1;const s=i[1],o=n.md.linkify.matchAtStart(n.src.slice(t-s.length));if(!o)return!1;let l=o.url;if(l.length<=s.length)return!1;l=l.replace(/\*+$/,"");const u=n.md.normalizeLink(l);if(!n.md.validateLink(u))return!1;if(!e){n.pending=n.pending.slice(0,-s.length);const a=n.push("link_open","a",1);a.attrs=[["href",u]],a.markup="linkify",a.info="auto";const c=n.push("text","",0);c.content=n.md.normalizeLinkText(l);const f=n.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return n.pos+=l.length-s.length,!0}function LT(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;const r=n.pending.length-1,i=n.posMax;if(!e)if(r>=0&&n.pending.charCodeAt(r)===32)if(r>=1&&n.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&n.pending.charCodeAt(s-1)===32;)s--;n.pending=n.pending.slice(0,s),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<i&&_e(n.src.charCodeAt(t));)t++;return n.pos=t,!0}const fp=[];for(let n=0;n<256;n++)fp.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){fp[n.charCodeAt(0)]=1});function jT(n,e){let t=n.pos;const r=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let i=n.src.charCodeAt(t);if(i===10){for(e||n.push("hardbreak","br",0),t++;t<r&&(i=n.src.charCodeAt(t),!!_e(i));)t++;return n.pos=t,!0}let s=n.src[t];if(i>=55296&&i<=56319&&t+1<r){const l=n.src.charCodeAt(t+1);l>=56320&&l<=57343&&(s+=n.src[t+1],t++)}const o="\\"+s;if(!e){const l=n.push("text_special","",0);i<256&&fp[i]!==0?l.content=s:l.content=o,l.markup=o,l.info="escape"}return n.pos=t+1,!0}function qT(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;const i=t;t++;const s=n.posMax;for(;t<s&&n.src.charCodeAt(t)===96;)t++;const o=n.src.slice(i,t),l=o.length;if(n.backticksScanned&&(n.backticks[l]||0)<=i)return e||(n.pending+=o),n.pos+=l,!0;let u=t,a;for(;(a=n.src.indexOf("`",u))!==-1;){for(u=a+1;u<s&&n.src.charCodeAt(u)===96;)u++;const c=u-a;if(c===l){if(!e){const f=n.push("code_inline","code",0);f.markup=o,f.content=n.src.slice(t,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=u,!0}n.backticks[c]=a}return n.backticksScanned=!0,e||(n.pending+=o),n.pos+=l,!0}function VT(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==126)return!1;const i=n.scanDelims(n.pos,!0);let s=i.length;const o=String.fromCharCode(r);if(s<2)return!1;let l;s%2&&(l=n.push("text","",0),l.content=o,s--);for(let u=0;u<s;u+=2)l=n.push("text","",0),l.content=o+o,n.delimiters.push({marker:r,length:0,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function Tg(n,e){let t;const r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s];if(o.marker!==126||o.end===-1)continue;const l=e[o.end];t=n.tokens[o.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[l.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[l.token-1].type==="text"&&n.tokens[l.token-1].content==="~"&&r.push(l.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<n.tokens.length&&n.tokens[o].type==="s_close";)o++;o--,s!==o&&(t=n.tokens[o],n.tokens[o]=n.tokens[s],n.tokens[s]=t)}}function zT(n){const e=n.tokens_meta,t=n.tokens_meta.length;Tg(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&Tg(n,e[r].delimiters)}const Mx={tokenize:VT,postProcess:zT};function UT(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;const i=n.scanDelims(n.pos,r===42);for(let s=0;s<i.length;s++){const o=n.push("text","",0);o.content=String.fromCharCode(r),n.delimiters.push({marker:r,length:i.length,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function Fg(n,e){const t=e.length;for(let r=t-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=e[i.end],o=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===s.token+1,l=String.fromCharCode(i.marker),u=n.tokens[i.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?l+l:l,u.content="";const a=n.tokens[s.token];a.type=o?"strong_close":"em_close",a.tag=o?"strong":"em",a.nesting=-1,a.markup=o?l+l:l,a.content="",o&&(n.tokens[e[r-1].token].content="",n.tokens[e[i.end+1].token].content="",r--)}}function HT(n){const e=n.tokens_meta,t=n.tokens_meta.length;Fg(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&Fg(n,e[r].delimiters)}const Bx={tokenize:UT,postProcess:HT};function WT(n,e){let t,r,i,s,o="",l="",u=n.pos,a=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const c=n.pos,f=n.posMax,h=n.pos+1,d=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(d<0)return!1;let p=d+1;if(p<f&&n.src.charCodeAt(p)===40){for(a=!1,p++;p<f&&(t=n.src.charCodeAt(p),!(!_e(t)&&t!==10));p++);if(p>=f)return!1;if(u=p,i=n.md.helpers.parseLinkDestination(n.src,p,n.posMax),i.ok){for(o=n.md.normalizeLink(i.str),n.md.validateLink(o)?p=i.pos:o="",u=p;p<f&&(t=n.src.charCodeAt(p),!(!_e(t)&&t!==10));p++);if(i=n.md.helpers.parseLinkTitle(n.src,p,n.posMax),p<f&&u!==p&&i.ok)for(l=i.str,p=i.pos;p<f&&(t=n.src.charCodeAt(p),!(!_e(t)&&t!==10));p++);}(p>=f||n.src.charCodeAt(p)!==41)&&(a=!0),p++}if(a){if(typeof n.env.references>"u")return!1;if(p<f&&n.src.charCodeAt(p)===91?(u=p+1,p=n.md.helpers.parseLinkLabel(n,p),p>=0?r=n.src.slice(u,p++):p=d+1):p=d+1,r||(r=n.src.slice(h,d)),s=n.env.references[tc(r)],!s)return n.pos=c,!1;o=s.href,l=s.title}if(!e){n.pos=h,n.posMax=d;const m=n.push("link_open","a",1),g=[["href",o]];m.attrs=g,l&&g.push(["title",l]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=p,n.posMax=f,!0}function GT(n,e){let t,r,i,s,o,l,u,a,c="";const f=n.pos,h=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const d=n.pos+2,p=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(p<0)return!1;if(s=p+1,s<h&&n.src.charCodeAt(s)===40){for(s++;s<h&&(t=n.src.charCodeAt(s),!(!_e(t)&&t!==10));s++);if(s>=h)return!1;for(a=s,l=n.md.helpers.parseLinkDestination(n.src,s,n.posMax),l.ok&&(c=n.md.normalizeLink(l.str),n.md.validateLink(c)?s=l.pos:c=""),a=s;s<h&&(t=n.src.charCodeAt(s),!(!_e(t)&&t!==10));s++);if(l=n.md.helpers.parseLinkTitle(n.src,s,n.posMax),s<h&&a!==s&&l.ok)for(u=l.str,s=l.pos;s<h&&(t=n.src.charCodeAt(s),!(!_e(t)&&t!==10));s++);else u="";if(s>=h||n.src.charCodeAt(s)!==41)return n.pos=f,!1;s++}else{if(typeof n.env.references>"u")return!1;if(s<h&&n.src.charCodeAt(s)===91?(a=s+1,s=n.md.helpers.parseLinkLabel(n,s),s>=0?i=n.src.slice(a,s++):s=p+1):s=p+1,i||(i=n.src.slice(d,p)),o=n.env.references[tc(i)],!o)return n.pos=f,!1;c=o.href,u=o.title}if(!e){r=n.src.slice(d,p);const m=[];n.md.inline.parse(r,n.md,n.env,m);const g=n.push("image","img",0),b=[["src",c],["alt",""]];g.attrs=b,g.children=m,g.content=r,u&&b.push(["title",u])}return n.pos=s,n.posMax=h,!0}const KT=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,JT=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function YT(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;const r=n.pos,i=n.posMax;for(;;){if(++t>=i)return!1;const o=n.src.charCodeAt(t);if(o===60)return!1;if(o===62)break}const s=n.src.slice(r+1,t);if(JT.test(s)){const o=n.md.normalizeLink(s);if(!n.md.validateLink(o))return!1;if(!e){const l=n.push("link_open","a",1);l.attrs=[["href",o]],l.markup="autolink",l.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(s);const a=n.push("link_close","a",-1);a.markup="autolink",a.info="auto"}return n.pos+=s.length+2,!0}if(KT.test(s)){const o=n.md.normalizeLink("mailto:"+s);if(!n.md.validateLink(o))return!1;if(!e){const l=n.push("link_open","a",1);l.attrs=[["href",o]],l.markup="autolink",l.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(s);const a=n.push("link_close","a",-1);a.markup="autolink",a.info="auto"}return n.pos+=s.length+2,!0}return!1}function QT(n){return/^<a[>\s]/i.test(n)}function XT(n){return/^<\/a\s*>/i.test(n)}function ZT(n){const e=n|32;return e>=97&&e<=122}function e9(n,e){if(!n.md.options.html)return!1;const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==60||r+2>=t)return!1;const i=n.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!ZT(i))return!1;const s=n.src.slice(r).match(OT);if(!s)return!1;if(!e){const o=n.push("html_inline","",0);o.content=s[0],QT(o.content)&&n.linkLevel++,XT(o.content)&&n.linkLevel--}return n.pos+=s[0].length,!0}const t9=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,n9=/^&([a-z][a-z0-9]{1,31});/i;function r9(n,e){const t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=r)return!1;if(n.src.charCodeAt(t+1)===35){const s=n.src.slice(t).match(t9);if(s){if(!e){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),l=n.push("text_special","",0);l.content=ap(o)?ha(o):ha(65533),l.markup=s[0],l.info="entity"}return n.pos+=s[0].length,!0}}else{const s=n.src.slice(t).match(n9);if(s){const o=Ex(s[0]);if(o!==s[0]){if(!e){const l=n.push("text_special","",0);l.content=o,l.markup=s[0],l.info="entity"}return n.pos+=s[0].length,!0}}}return!1}function Pg(n){const e={},t=n.length;if(!t)return;let r=0,i=-2;const s=[];for(let o=0;o<t;o++){const l=n[o];if(s.push(0),(n[r].marker!==l.marker||i!==l.token-1)&&(r=o),i=l.token,l.length=l.length||0,!l.close)continue;e.hasOwnProperty(l.marker)||(e[l.marker]=[-1,-1,-1,-1,-1,-1]);const u=e[l.marker][(l.open?3:0)+l.length%3];let a=r-s[r]-1,c=a;for(;a>u;a-=s[a]+1){const f=n[a];if(f.marker===l.marker&&f.open&&f.end<0){let h=!1;if((f.close||l.open)&&(f.length+l.length)%3===0&&(f.length%3!==0||l.length%3!==0)&&(h=!0),!h){const d=a>0&&!n[a-1].open?s[a-1]+1:0;s[o]=o-a+d,s[a]=d,l.open=!1,f.end=o,f.close=!1,c=-1,i=-2;break}}}c!==-1&&(e[l.marker][(l.open?3:0)+(l.length||0)%3]=c)}}function i9(n){const e=n.tokens_meta,t=n.tokens_meta.length;Pg(n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&Pg(e[r].delimiters)}function s9(n){let e,t,r=0;const i=n.tokens,s=n.tokens.length;for(e=t=0;e<s;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<s&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}const ff=[["text",BT],["linkify",NT],["newline",LT],["escape",jT],["backticks",qT],["strikethrough",Mx.tokenize],["emphasis",Bx.tokenize],["link",WT],["image",GT],["autolink",YT],["html_inline",e9],["entity",r9]],hf=[["balance_pairs",i9],["strikethrough",Mx.postProcess],["emphasis",Bx.postProcess],["fragments_join",s9]];function ul(){this.ruler=new Nt;for(let n=0;n<ff.length;n++)this.ruler.push(ff[n][0],ff[n][1]);this.ruler2=new Nt;for(let n=0;n<hf.length;n++)this.ruler2.push(hf[n][0],hf[n][1])}ul.prototype.skipToken=function(n){const e=n.pos,t=this.ruler.getRules(""),r=t.length,i=n.md.options.maxNesting,s=n.cache;if(typeof s[e]<"u"){n.pos=s[e];return}let o=!1;if(n.level<i){for(let l=0;l<r;l++)if(n.level++,o=t[l](n,!0),n.level--,o){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;o||n.pos++,s[e]=n.pos};ul.prototype.tokenize=function(n){const e=this.ruler.getRules(""),t=e.length,r=n.posMax,i=n.md.options.maxNesting;for(;n.pos<r;){const s=n.pos;let o=!1;if(n.level<i){for(let l=0;l<t;l++)if(o=e[l](n,!1),o){if(s>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(n.pos>=r)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};ul.prototype.parse=function(n,e,t,r){const i=new this.State(n,e,t,r);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let l=0;l<o;l++)s[l](i)};ul.prototype.State=ll;function o9(n){const e={};n=n||{},e.src_Any=Dx.source,e.src_Cc=Ax.source,e.src_Z=_x.source,e.src_P=lp.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function Bh(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function rc(n){return Object.prototype.toString.call(n)}function l9(n){return rc(n)==="[object String]"}function u9(n){return rc(n)==="[object Object]"}function a9(n){return rc(n)==="[object RegExp]"}function Rg(n){return rc(n)==="[object Function]"}function c9(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const $x={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function f9(n){return Object.keys(n||{}).reduce(function(e,t){return e||$x.hasOwnProperty(t)},!1)}const h9={"http:":{validate:function(n,e,t){const r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},d9="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",p9="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function m9(n){n.__index__=-1,n.__text_cache__=""}function g9(n){return function(e,t){const r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function Ig(){return function(n,e){e.normalize(n)}}function da(n){const e=n.re=o9(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(d9),t.push(e.src_xn),e.src_tlds=t.join("|");function r(l){return l.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];n.__compiled__={};function s(l,u){throw new Error('(LinkifyIt) Invalid schema "'+l+'": '+u)}Object.keys(n.__schemas__).forEach(function(l){const u=n.__schemas__[l];if(u===null)return;const a={validate:null,link:null};if(n.__compiled__[l]=a,u9(u)){a9(u.validate)?a.validate=g9(u.validate):Rg(u.validate)?a.validate=u.validate:s(l,u),Rg(u.normalize)?a.normalize=u.normalize:u.normalize?s(l,u):a.normalize=Ig();return}if(l9(u)){i.push(l);return}s(l,u)}),i.forEach(function(l){n.__compiled__[n.__schemas__[l]]&&(n.__compiled__[l].validate=n.__compiled__[n.__schemas__[l]].validate,n.__compiled__[l].normalize=n.__compiled__[n.__schemas__[l]].normalize)}),n.__compiled__[""]={validate:null,normalize:Ig()};const o=Object.keys(n.__compiled__).filter(function(l){return l.length>0&&n.__compiled__[l]}).map(c9).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),m9(n)}function b9(n,e){const t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function $h(n,e){const t=new b9(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function Kt(n,e){if(!(this instanceof Kt))return new Kt(n,e);e||f9(n)&&(e=n,n={}),this.__opts__=Bh({},$x,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Bh({},h9,n),this.__compiled__={},this.__tlds__=p9,this.__tlds_replaced__=!1,this.re={},da(this)}Kt.prototype.add=function(e,t){return this.__schemas__[e]=t,da(this),this};Kt.prototype.set=function(e){return this.__opts__=Bh(this.__opts__,e),this};Kt.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,s,o,l,u,a,c;if(this.re.schema_test.test(e)){for(u=this.re.schema_search,u.lastIndex=0;(t=u.exec(e))!==null;)if(s=this.testSchemaAt(e,t[2],u.lastIndex),s){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(a=e.search(this.re.host_fuzzy_test),a>=0&&(this.__index__<0||a<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,l=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&l>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=l))),this.__index__>=0};Kt.prototype.pretest=function(e){return this.re.pretest.test(e)};Kt.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};Kt.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push($h(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push($h(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};Kt.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,$h(this,0)):null};Kt.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),da(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,da(this),this)};Kt.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Kt.prototype.onCompile=function(){};const Ui=2147483647,Mn=36,hp=1,To=26,y9=38,x9=700,Nx=72,Lx=128,jx="-",v9=/^xn--/,k9=/[^\0-\x7F]/,w9=/[\x2E\u3002\uFF0E\uFF61]/g,D9={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},df=Mn-hp,Bn=Math.floor,pf=String.fromCharCode;function dr(n){throw new RangeError(D9[n])}function A9(n,e){const t=[];let r=n.length;for(;r--;)t[r]=e(n[r]);return t}function qx(n,e){const t=n.split("@");let r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(w9,".");const i=n.split("."),s=A9(i,e).join(".");return r+s}function Vx(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const s=n.charCodeAt(t++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const C9=n=>String.fromCodePoint(...n),_9=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:Mn},Mg=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},zx=function(n,e,t){let r=0;for(n=t?Bn(n/x9):n>>1,n+=Bn(n/e);n>df*To>>1;r+=Mn)n=Bn(n/df);return Bn(r+(df+1)*n/(n+y9))},Ux=function(n){const e=[],t=n.length;let r=0,i=Lx,s=Nx,o=n.lastIndexOf(jx);o<0&&(o=0);for(let l=0;l<o;++l)n.charCodeAt(l)>=128&&dr("not-basic"),e.push(n.charCodeAt(l));for(let l=o>0?o+1:0;l<t;){const u=r;for(let c=1,f=Mn;;f+=Mn){l>=t&&dr("invalid-input");const h=_9(n.charCodeAt(l++));h>=Mn&&dr("invalid-input"),h>Bn((Ui-r)/c)&&dr("overflow"),r+=h*c;const d=f<=s?hp:f>=s+To?To:f-s;if(h<d)break;const p=Mn-d;c>Bn(Ui/p)&&dr("overflow"),c*=p}const a=e.length+1;s=zx(r-u,a,u==0),Bn(r/a)>Ui-i&&dr("overflow"),i+=Bn(r/a),r%=a,e.splice(r++,0,i)}return String.fromCodePoint(...e)},Hx=function(n){const e=[];n=Vx(n);const t=n.length;let r=Lx,i=0,s=Nx;for(const u of n)u<128&&e.push(pf(u));const o=e.length;let l=o;for(o&&e.push(jx);l<t;){let u=Ui;for(const c of n)c>=r&&c<u&&(u=c);const a=l+1;u-r>Bn((Ui-i)/a)&&dr("overflow"),i+=(u-r)*a,r=u;for(const c of n)if(c<r&&++i>Ui&&dr("overflow"),c===r){let f=i;for(let h=Mn;;h+=Mn){const d=h<=s?hp:h>=s+To?To:h-s;if(f<d)break;const p=f-d,m=Mn-d;e.push(pf(Mg(d+p%m,0))),f=Bn(p/m)}e.push(pf(Mg(f,0))),s=zx(i,a,l===o),i=0,++l}++i,++r}return e.join("")},S9=function(n){return qx(n,function(e){return v9.test(e)?Ux(e.slice(4).toLowerCase()):e})},E9=function(n){return qx(n,function(e){return k9.test(e)?"xn--"+Hx(e):e})},Wx={version:"2.3.1",ucs2:{decode:Vx,encode:C9},decode:Ux,encode:Hx,toASCII:E9,toUnicode:S9},O9={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},T9={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},F9={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},P9={default:O9,zero:T9,commonmark:F9},R9=/^(vbscript|javascript|file|data):/,I9=/^data:image\/(gif|png|jpeg|webp);/;function M9(n){const e=n.trim().toLowerCase();return R9.test(e)?I9.test(e):!0}const Gx=["http:","https:","mailto:"];function B9(n){const e=op(n,!0);if(e.hostname&&(!e.protocol||Gx.indexOf(e.protocol)>=0))try{e.hostname=Wx.toASCII(e.hostname)}catch{}return ol(sp(e))}function $9(n){const e=op(n,!0);if(e.hostname&&(!e.protocol||Gx.indexOf(e.protocol)>=0))try{e.hostname=Wx.toUnicode(e.hostname)}catch{}return ss(sp(e),ss.defaultChars+"%")}function ln(n,e){if(!(this instanceof ln))return new ln(n,e);e||up(n)||(e=n||{},n="default"),this.inline=new ul,this.block=new nc,this.core=new cp,this.renderer=new ys,this.linkify=new Kt,this.validateLink=M9,this.normalizeLink=B9,this.normalizeLinkText=$9,this.utils=L5,this.helpers=ec({},z5),this.options={},this.configure(n),e&&this.set(e)}ln.prototype.set=function(n){return ec(this.options,n),this};ln.prototype.configure=function(n){const e=this;if(up(n)){const t=n;if(n=P9[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};ln.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};ln.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};ln.prototype.use=function(n){const e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};ln.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");const t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};ln.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};ln.prototype.parseInline=function(n,e){const t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};ln.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};function N9(n,e,t){const{parseMetaString:r,trimEndingNewline:i=!0,defaultLanguage:s="text",fallbackLanguage:o}=t,l=e.getLoadedLanguages();n.options.highlight=(u,a="text",c)=>{a===""&&(a=s),o&&!l.includes(a)&&(a=o);const f=(r==null?void 0:r(c,u,a))||{},h={...t,lang:a,meta:{...t.meta,...f,__raw:c}},d=[];return d.push({name:"@shikijs/markdown-it:block-class",code(p){p.properties.class=`language-${a}`}}),i&&u.endsWith(`
`)&&(u=u.slice(0,-1)),e.codeToHtml(u,{...h,transformers:[...d,...h.transformers||[]]})}}function L9(n,e){return function(t){N9(t,n,e)}}let li=class extends Error{constructor(e){super(e),this.name="ShikiError"}},dp=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function j9(){return 2147483648}function q9(){return typeof performance<"u"?performance.now():Date.now()}const V9=(n,e)=>n+(e-n%e)%e;async function z9(n){let e,t;const r={};function i(d){t=d,r.HEAPU8=new Uint8Array(d),r.HEAPU32=new Uint32Array(d)}function s(d,p,m){r.HEAPU8.copyWithin(d,p,p+m)}function o(d){try{return e.grow(d-t.byteLength+65535>>>16),i(e.buffer),1}catch{}}function l(d){const p=r.HEAPU8.length;d=d>>>0;const m=j9();if(d>m)return!1;for(let g=1;g<=4;g*=2){let b=p*(1+.2/g);b=Math.min(b,d+100663296);const y=Math.min(m,V9(Math.max(d,b),65536));if(o(y))return!0}return!1}const u=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function a(d,p,m=1024){const g=p+m;let b=p;for(;d[b]&&!(b>=g);)++b;if(b-p>16&&d.buffer&&u)return u.decode(d.subarray(p,b));let y="";for(;p<b;){let x=d[p++];if(!(x&128)){y+=String.fromCharCode(x);continue}const w=d[p++]&63;if((x&224)===192){y+=String.fromCharCode((x&31)<<6|w);continue}const D=d[p++]&63;if((x&240)===224?x=(x&15)<<12|w<<6|D:x=(x&7)<<18|w<<12|D<<6|d[p++]&63,x<65536)y+=String.fromCharCode(x);else{const A=x-65536;y+=String.fromCharCode(55296|A>>10,56320|A&1023)}}return y}function c(d,p){return d?a(r.HEAPU8,d,p):""}const f={emscripten_get_now:q9,emscripten_memcpy_big:s,emscripten_resize_heap:l,fd_write:()=>0};async function h(){const p=await n({env:f,wasi_snapshot_preview1:f});e=p.memory,i(e.buffer),Object.assign(r,p),r.UTF8ToString=c}return await h(),r}var U9=Object.defineProperty,H9=(n,e,t)=>e in n?U9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tt=(n,e,t)=>(H9(n,typeof e!="symbol"?e+"":e,t),t);let st=null;function W9(n){throw new dp(n.UTF8ToString(n.getLastOnigError()))}class ic{constructor(e){tt(this,"utf16Length"),tt(this,"utf8Length"),tt(this,"utf16Value"),tt(this,"utf8Value"),tt(this,"utf16OffsetToUtf8"),tt(this,"utf8OffsetToUtf16");const t=e.length,r=ic._utf8ByteLength(e),i=r!==t,s=i?new Uint32Array(t+1):null;i&&(s[t]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=t);const l=new Uint8Array(r);let u=0;for(let a=0;a<t;a++){const c=e.charCodeAt(a);let f=c,h=!1;if(c>=55296&&c<=56319&&a+1<t){const d=e.charCodeAt(a+1);d>=56320&&d<=57343&&(f=(c-55296<<10)+65536|d-56320,h=!0)}i&&(s[a]=u,h&&(s[a+1]=u),f<=127?o[u+0]=a:f<=2047?(o[u+0]=a,o[u+1]=a):f<=65535?(o[u+0]=a,o[u+1]=a,o[u+2]=a):(o[u+0]=a,o[u+1]=a,o[u+2]=a,o[u+3]=a)),f<=127?l[u++]=f:f<=2047?(l[u++]=192|(f&1984)>>>6,l[u++]=128|(f&63)>>>0):f<=65535?(l[u++]=224|(f&61440)>>>12,l[u++]=128|(f&4032)>>>6,l[u++]=128|(f&63)>>>0):(l[u++]=240|(f&1835008)>>>18,l[u++]=128|(f&258048)>>>12,l[u++]=128|(f&4032)>>>6,l[u++]=128|(f&63)>>>0),h&&a++}this.utf16Length=t,this.utf8Length=r,this.utf16Value=e,this.utf8Value=l,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let t=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,l=!1;if(s>=55296&&s<=56319&&r+1<i){const u=e.charCodeAt(r+1);u>=56320&&u<=57343&&(o=(s-55296<<10)+65536|u-56320,l=!0)}o<=127?t+=1:o<=2047?t+=2:o<=65535?t+=3:t+=4,l&&r++}return t}createString(e){const t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}const _n=class{constructor(n){if(tt(this,"id",++_n.LAST_ID),tt(this,"_onigBinding"),tt(this,"content"),tt(this,"utf16Length"),tt(this,"utf8Length"),tt(this,"utf16OffsetToUtf8"),tt(this,"utf8OffsetToUtf16"),tt(this,"ptr"),!st)throw new dp("Must invoke loadWasm first.");this._onigBinding=st,this.content=n;const e=new ic(n);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!_n._sharedPtrInUse?(_n._sharedPtr||(_n._sharedPtr=st.omalloc(1e4)),_n._sharedPtrInUse=!0,st.HEAPU8.set(e.utf8Value,_n._sharedPtr),this.ptr=_n._sharedPtr):this.ptr=e.createString(st)}convertUtf8OffsetToUtf16(n){return this.utf8OffsetToUtf16?n<0?0:n>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[n]:n}convertUtf16OffsetToUtf8(n){return this.utf16OffsetToUtf8?n<0?0:n>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[n]:n}dispose(){this.ptr===_n._sharedPtr?_n._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let al=_n;tt(al,"LAST_ID",0);tt(al,"_sharedPtr",0);tt(al,"_sharedPtrInUse",!1);class G9{constructor(e){if(tt(this,"_onigBinding"),tt(this,"_ptr"),!st)throw new dp("Must invoke loadWasm first.");const t=[],r=[];for(let l=0,u=e.length;l<u;l++){const a=new ic(e[l]);t[l]=a.createString(st),r[l]=a.utf8Length}const i=st.omalloc(4*e.length);st.HEAPU32.set(t,i/4);const s=st.omalloc(4*e.length);st.HEAPU32.set(r,s/4);const o=st.createOnigScanner(i,s,e.length);for(let l=0,u=e.length;l<u;l++)st.ofree(t[l]);st.ofree(s),st.ofree(i),o===0&&W9(st),this._onigBinding=st,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new al(e);const s=this._findNextMatchSync(e,t,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,t,!1,i)}_findNextMatchSync(e,t,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),i);if(o===0)return null;const l=s.HEAPU32;let u=o/4;const a=l[u++],c=l[u++],f=[];for(let h=0;h<c;h++){const d=e.convertUtf8OffsetToUtf16(l[u++]),p=e.convertUtf8OffsetToUtf16(l[u++]);f[h]={start:d,end:p,length:p-d}}return{index:a,captureIndices:f}}}function K9(n){return typeof n.instantiator=="function"}function J9(n){return typeof n.default=="function"}function Y9(n){return typeof n.data<"u"}function Q9(n){return typeof Response<"u"&&n instanceof Response}function X9(n){var e;return typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||ArrayBuffer.isView(n))||typeof Buffer<"u"&&((e=Buffer.isBuffer)==null?void 0:e.call(Buffer,n))||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&n instanceof Uint32Array}let Kl;function Z9(n){if(Kl)return Kl;async function e(){st=await z9(async t=>{let r=n;return r=await r,typeof r=="function"&&(r=await r(t)),typeof r=="function"&&(r=await r(t)),K9(r)?r=await r.instantiator(t):J9(r)?r=await r.default(t):(Y9(r)&&(r=r.data),Q9(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await eF(r)(t):r=await tF(r)(t):X9(r)?r=await mf(r)(t):r instanceof WebAssembly.Module?r=await mf(r)(t):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await mf(r.default)(t))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Kl=e(),Kl}function mf(n){return e=>WebAssembly.instantiate(n,e)}function eF(n){return e=>WebAssembly.instantiateStreaming(n,e)}function tF(n){return async e=>{const t=await n.arrayBuffer();return WebAssembly.instantiate(t,e)}}let nF;function rF(){return nF}async function iF(n){return n&&await Z9(n),{createScanner(e){return new G9(e.map(t=>typeof t=="string"?t:t.source))},createString(e){return new al(e)}}}function sF(n){return pp(n)}function pp(n){return Array.isArray(n)?oF(n):n instanceof RegExp?n:typeof n=="object"?lF(n):n}function oF(n){let e=[];for(let t=0,r=n.length;t<r;t++)e[t]=pp(n[t]);return e}function lF(n){let e={};for(let t in n)e[t]=pp(n[t]);return e}function Kx(n,...e){return e.forEach(t=>{for(let r in t)n[r]=t[r]}),n}function Jx(n){const e=~n.lastIndexOf("/")||~n.lastIndexOf("\\");return e===0?n:~e===n.length-1?Jx(n.substring(0,n.length-1)):n.substr(~e+1)}var gf=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Jl=class{static hasCaptures(n){return n===null?!1:(gf.lastIndex=0,gf.test(n))}static replaceCaptures(n,e,t){return n.replace(gf,(r,i,s,o)=>{let l=t[parseInt(i||s,10)];if(l){let u=e.substring(l.start,l.end);for(;u[0]===".";)u=u.substring(1);switch(o){case"downcase":return u.toLowerCase();case"upcase":return u.toUpperCase();default:return u}}else return r})}};function Yx(n,e){return n<e?-1:n>e?1:0}function Qx(n,e){if(n===null&&e===null)return 0;if(!n)return-1;if(!e)return 1;let t=n.length,r=e.length;if(t===r){for(let i=0;i<t;i++){let s=Yx(n[i],e[i]);if(s!==0)return s}return 0}return t-r}function Bg(n){return!!(/^#[0-9a-f]{6}$/i.test(n)||/^#[0-9a-f]{8}$/i.test(n)||/^#[0-9a-f]{3}$/i.test(n)||/^#[0-9a-f]{4}$/i.test(n))}function Xx(n){return n.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Zx=class{constructor(n){R(this,"cache",new Map);this.fn=n}get(n){if(this.cache.has(n))return this.cache.get(n);const e=this.fn(n);return this.cache.set(n,e),e}},pa=class{constructor(n,e,t){R(this,"_cachedMatchRoot",new Zx(n=>this._root.match(n)));this._colorMap=n,this._defaults=e,this._root=t}static createFromRawTheme(n,e){return this.createFromParsedTheme(cF(n),e)}static createFromParsedTheme(n,e){return hF(n,e)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(n){if(n===null)return this._defaults;const e=n.scopeName,r=this._cachedMatchRoot.get(e).find(i=>uF(n.parent,i.parentScopes));return r?new ev(r.fontStyle,r.foreground,r.background):null}},bf=class _u{constructor(e,t){this.parent=e,this.scopeName=t}static push(e,t){for(const r of t)e=new _u(e,r);return e}static from(...e){let t=null;for(let r=0;r<e.length;r++)t=new _u(t,e[r]);return t}push(e){return new _u(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let r=this;for(;r&&r!==e;)t.push(r.scopeName),r=r.parent;return r===e?t.reverse():void 0}};function uF(n,e){if(e.length===0)return!0;for(let t=0;t<e.length;t++){let r=e[t],i=!1;if(r===">"){if(t===e.length-1)return!1;r=e[++t],i=!0}for(;n&&!aF(n.scopeName,r);){if(i)return!1;n=n.parent}if(!n)return!1;n=n.parent}return!0}function aF(n,e){return e===n||n.startsWith(e)&&n[e.length]==="."}var ev=class{constructor(n,e,t){this.fontStyle=n,this.foregroundId=e,this.backgroundId=t}};function cF(n){if(!n)return[];if(!n.settings||!Array.isArray(n.settings))return[];let e=n.settings,t=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let l;if(typeof o.scope=="string"){let f=o.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),l=f.split(",")}else Array.isArray(o.scope)?l=o.scope:l=[""];let u=-1;if(typeof o.settings.fontStyle=="string"){u=0;let f=o.settings.fontStyle.split(" ");for(let h=0,d=f.length;h<d;h++)switch(f[h]){case"italic":u=u|1;break;case"bold":u=u|2;break;case"underline":u=u|4;break;case"strikethrough":u=u|8;break}}let a=null;typeof o.settings.foreground=="string"&&Bg(o.settings.foreground)&&(a=o.settings.foreground);let c=null;typeof o.settings.background=="string"&&Bg(o.settings.background)&&(c=o.settings.background);for(let f=0,h=l.length;f<h;f++){let p=l[f].trim().split(" "),m=p[p.length-1],g=null;p.length>1&&(g=p.slice(0,p.length-1),g.reverse()),t[r++]=new fF(m,g,i,u,a,c)}}return t}var fF=class{constructor(n,e,t,r,i,s){this.scope=n,this.parentScopes=e,this.index=t,this.fontStyle=r,this.foreground=i,this.background=s}},nr=(n=>(n[n.NotSet=-1]="NotSet",n[n.None=0]="None",n[n.Italic=1]="Italic",n[n.Bold=2]="Bold",n[n.Underline=4]="Underline",n[n.Strikethrough=8]="Strikethrough",n))(nr||{});function hF(n,e){n.sort((u,a)=>{let c=Yx(u.scope,a.scope);return c!==0||(c=Qx(u.parentScopes,a.parentScopes),c!==0)?c:u.index-a.index});let t=0,r="#000000",i="#ffffff";for(;n.length>=1&&n[0].scope==="";){let u=n.shift();u.fontStyle!==-1&&(t=u.fontStyle),u.foreground!==null&&(r=u.foreground),u.background!==null&&(i=u.background)}let s=new dF(e),o=new ev(t,s.getId(r),s.getId(i)),l=new mF(new Nh(0,null,-1,0,0),[]);for(let u=0,a=n.length;u<a;u++){let c=n[u];l.insert(0,c.scope,c.parentScopes,c.fontStyle,s.getId(c.foreground),s.getId(c.background))}return new pa(s,o,l)}var dF=class{constructor(n){R(this,"_isFrozen");R(this,"_lastColorId");R(this,"_id2color");R(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(n)){this._isFrozen=!0;for(let e=0,t=n.length;e<t;e++)this._color2id[n[e]]=e,this._id2color[e]=n[e]}else this._isFrozen=!1}getId(n){if(n===null)return 0;n=n.toUpperCase();let e=this._color2id[n];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${n}`);return e=++this._lastColorId,this._color2id[n]=e,this._id2color[e]=n,e}getColorMap(){return this._id2color.slice(0)}},pF=Object.freeze([]),Nh=class tv{constructor(e,t,r,i,s){R(this,"scopeDepth");R(this,"parentScopes");R(this,"fontStyle");R(this,"foreground");R(this,"background");this.scopeDepth=e,this.parentScopes=t||pF,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new tv(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let r=0,i=e.length;r<i;r++)t[r]=e[r].clone();return t}acceptOverwrite(e,t,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,t!==-1&&(this.fontStyle=t),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},mF=class Lh{constructor(e,t=[],r={}){R(this,"_rulesWithParentScopes");this._mainRule=e,this._children=r,this._rulesWithParentScopes=t}static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,t.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=t.parentScopes.length);){const s=t.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return t.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const t=this._rulesWithParentScopes.concat(this._mainRule);return t.sort(Lh._cmpBySpecificity),t}insert(e,t,r,i,s,o){if(t===""){this._doInsertHere(e,r,i,s,o);return}let l=t.indexOf("."),u,a;l===-1?(u=t,a=""):(u=t.substring(0,l),a=t.substring(l+1));let c;this._children.hasOwnProperty(u)?c=this._children[u]:(c=new Lh(this._mainRule.clone(),Nh.cloneArr(this._rulesWithParentScopes)),this._children[u]=c),c.insert(e+1,a,r,i,s,o)}_doInsertHere(e,t,r,i,s){if(t===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,l=this._rulesWithParentScopes.length;o<l;o++){let u=this._rulesWithParentScopes[o];if(Qx(u.parentScopes,t)===0){u.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new Nh(e,t,r,i,s))}},ls=class Yt{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const t=Yt.getLanguageId(e),r=Yt.getTokenType(e),i=Yt.getFontStyle(e),s=Yt.getForeground(e),o=Yt.getBackground(e);console.log({languageId:t,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,t,r,i,s,o,l){let u=Yt.getLanguageId(e),a=Yt.getTokenType(e),c=Yt.containsBalancedBrackets(e)?1:0,f=Yt.getFontStyle(e),h=Yt.getForeground(e),d=Yt.getBackground(e);return t!==0&&(u=t),r!==8&&(a=r),i!==null&&(c=i?1:0),s!==-1&&(f=s),o!==0&&(h=o),l!==0&&(d=l),(u<<0|a<<8|c<<10|f<<11|h<<15|d<<24)>>>0}};function ma(n,e){const t=[],r=gF(n);let i=r.next();for(;i!==null;){let u=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":u=1;break;case"L":u=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let a=o();if(t.push({matcher:a,priority:u}),i!==",")break;i=r.next()}return t;function s(){if(i==="-"){i=r.next();const u=s();return a=>!!u&&!u(a)}if(i==="("){i=r.next();const u=l();return i===")"&&(i=r.next()),u}if($g(i)){const u=[];do u.push(i),i=r.next();while($g(i));return a=>e(u,a)}return null}function o(){const u=[];let a=s();for(;a;)u.push(a),a=s();return c=>u.every(f=>f(c))}function l(){const u=[];let a=o();for(;a&&(u.push(a),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");a=o()}return c=>u.some(f=>f(c))}}function $g(n){return!!n&&!!n.match(/[\w\.:]+/)}function gF(n){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,t=e.exec(n);return{next:()=>{if(!t)return null;const r=t[0];return t=e.exec(n),r}}}function nv(n){typeof n.dispose=="function"&&n.dispose()}var Fo=class{constructor(n){this.scopeName=n}toKey(){return this.scopeName}},bF=class{constructor(n,e){this.scopeName=n,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},yF=class{constructor(){R(this,"_references",[]);R(this,"_seenReferenceKeys",new Set);R(this,"visitedRule",new Set)}get references(){return this._references}add(n){const e=n.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(n))}},xF=class{constructor(n,e){R(this,"seenFullScopeRequests",new Set);R(this,"seenPartialScopeRequests",new Set);R(this,"Q");this.repo=n,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Fo(this.initialScopeName)]}processQueue(){const n=this.Q;this.Q=[];const e=new yF;for(const t of n)vF(t,this.initialScopeName,this.repo,e);for(const t of e.references)if(t instanceof Fo){if(this.seenFullScopeRequests.has(t.scopeName))continue;this.seenFullScopeRequests.add(t.scopeName),this.Q.push(t)}else{if(this.seenFullScopeRequests.has(t.scopeName)||this.seenPartialScopeRequests.has(t.toKey()))continue;this.seenPartialScopeRequests.add(t.toKey()),this.Q.push(t)}}};function vF(n,e,t,r){const i=t.lookup(n.scopeName);if(!i){if(n.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=t.lookup(e);n instanceof Fo?Su({baseGrammar:s,selfGrammar:i},r):jh(n.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=t.injections(n.scopeName);if(o)for(const l of o)r.add(new Fo(l))}function jh(n,e,t){if(e.repository&&e.repository[n]){const r=e.repository[n];ga([r],e,t)}}function Su(n,e){n.selfGrammar.patterns&&Array.isArray(n.selfGrammar.patterns)&&ga(n.selfGrammar.patterns,{...n,repository:n.selfGrammar.repository},e),n.selfGrammar.injections&&ga(Object.values(n.selfGrammar.injections),{...n,repository:n.selfGrammar.repository},e)}function ga(n,e,t){for(const r of n){if(t.visitedRule.has(r))continue;t.visitedRule.add(r);const i=r.repository?Kx({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&ga(r.patterns,{...e,repository:i},t);const s=r.include;if(!s)continue;const o=rv(s);switch(o.kind){case 0:Su({...e,selfGrammar:e.baseGrammar},t);break;case 1:Su(e,t);break;case 2:jh(o.ruleName,{...e,repository:i},t);break;case 3:case 4:const l=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(l){const u={baseGrammar:e.baseGrammar,selfGrammar:l,repository:i};o.kind===4?jh(o.ruleName,u,t):Su(u,t)}else o.kind===4?t.add(new bF(o.scopeName,o.ruleName)):t.add(new Fo(o.scopeName));break}}}var kF=class{constructor(){R(this,"kind",0)}},wF=class{constructor(){R(this,"kind",1)}},DF=class{constructor(n){R(this,"kind",2);this.ruleName=n}},AF=class{constructor(n){R(this,"kind",3);this.scopeName=n}},CF=class{constructor(n,e){R(this,"kind",4);this.scopeName=n,this.ruleName=e}};function rv(n){if(n==="$base")return new kF;if(n==="$self")return new wF;const e=n.indexOf("#");if(e===-1)return new AF(n);if(e===0)return new DF(n.substring(1));{const t=n.substring(0,e),r=n.substring(e+1);return new CF(t,r)}}var _F=/\\(\d+)/,Ng=/\\(\d+)/g,SF=-1,iv=-2;var cl=class{constructor(n,e,t,r){R(this,"$location");R(this,"id");R(this,"_nameIsCapturing");R(this,"_name");R(this,"_contentNameIsCapturing");R(this,"_contentName");this.$location=n,this.id=e,this._name=t||null,this._nameIsCapturing=Jl.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Jl.hasCaptures(this._contentName)}get debugName(){const n=this.$location?`${Jx(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${n}`}getName(n,e){return!this._nameIsCapturing||this._name===null||n===null||e===null?this._name:Jl.replaceCaptures(this._name,n,e)}getContentName(n,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Jl.replaceCaptures(this._contentName,n,e)}},EF=class extends cl{constructor(e,t,r,i,s){super(e,t,r,i);R(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,r,i){throw new Error("Not supported!")}},OF=class extends cl{constructor(e,t,r,i,s){super(e,t,r,null);R(this,"_match");R(this,"captures");R(this,"_cachedCompiledPatterns");this._match=new Po(i,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Ro,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Lg=class extends cl{constructor(e,t,r,i,s){super(e,t,r,i);R(this,"hasMissingPatterns");R(this,"patterns");R(this,"_cachedCompiledPatterns");this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const r of this.patterns)e.getRule(r).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Ro,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},qh=class extends cl{constructor(e,t,r,i,s,o,l,u,a,c){super(e,t,r,i);R(this,"_begin");R(this,"beginCaptures");R(this,"_end");R(this,"endHasBackReferences");R(this,"endCaptures");R(this,"applyEndPatternLast");R(this,"hasMissingPatterns");R(this,"patterns");R(this,"_cachedCompiledPatterns");this._begin=new Po(s,this.id),this.beginCaptures=o,this._end=new Po(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=u,this.applyEndPatternLast=a||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,r,i){return this._getCachedCompiledPatterns(e,t).compileAG(e,r,i)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Ro;for(const r of this.patterns)e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}},ba=class extends cl{constructor(e,t,r,i,s,o,l,u,a){super(e,t,r,i);R(this,"_begin");R(this,"beginCaptures");R(this,"whileCaptures");R(this,"_while");R(this,"whileHasBackReferences");R(this,"hasMissingPatterns");R(this,"patterns");R(this,"_cachedCompiledPatterns");R(this,"_cachedCompiledWhilePatterns");this._begin=new Po(s,this.id),this.beginCaptures=o,this.whileCaptures=u,this._while=new Po(l,iv),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=a.patterns,this.hasMissingPatterns=a.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Ro;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,r,i){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,r,i)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Ro,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||""),this._cachedCompiledWhilePatterns}},sv=class pt{static createCaptureRule(e,t,r,i,s){return e.registerRule(o=>new EF(t,o,r,i,s))}static getCompiledRuleId(e,t,r){return e.id||t.registerRule(i=>{if(e.id=i,e.match)return new OF(e.$vscodeTextmateLocation,e.id,e.name,e.match,pt._compileCaptures(e.captures,t,r));if(typeof e.begin>"u"){e.repository&&(r=Kx({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new Lg(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,pt._compilePatterns(s,t,r))}return e.while?new ba(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,pt._compileCaptures(e.beginCaptures||e.captures,t,r),e.while,pt._compileCaptures(e.whileCaptures||e.captures,t,r),pt._compilePatterns(e.patterns,t,r)):new qh(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,pt._compileCaptures(e.beginCaptures||e.captures,t,r),e.end,pt._compileCaptures(e.endCaptures||e.captures,t,r),e.applyEndPatternLast,pt._compilePatterns(e.patterns,t,r))}),e.id}static _compileCaptures(e,t,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const l=parseInt(o,10);l>s&&(s=l)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const l=parseInt(o,10);let u=0;e[o].patterns&&(u=pt.getCompiledRuleId(e[o],t,r)),i[l]=pt.createCaptureRule(t,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,u)}}return i}static _compilePatterns(e,t,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const l=e[s];let u=-1;if(l.include){const a=rv(l.include);switch(a.kind){case 0:case 1:u=pt.getCompiledRuleId(r[l.include],t,r);break;case 2:let c=r[a.ruleName];c&&(u=pt.getCompiledRuleId(c,t,r));break;case 3:case 4:const f=a.scopeName,h=a.kind===4?a.ruleName:null,d=t.getExternalGrammar(f,r);if(d)if(h){let p=d.repository[h];p&&(u=pt.getCompiledRuleId(p,t,d.repository))}else u=pt.getCompiledRuleId(d.repository.$self,t,d.repository);break}}else u=pt.getCompiledRuleId(l,t,r);if(u!==-1){const a=t.getRule(u);let c=!1;if((a instanceof Lg||a instanceof qh||a instanceof ba)&&a.hasMissingPatterns&&a.patterns.length===0&&(c=!0),c)continue;i.push(u)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},Po=class ov{constructor(e,t){R(this,"source");R(this,"ruleId");R(this,"hasAnchor");R(this,"hasBackReferences");R(this,"_anchorCache");if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let l=0;l<r;l++)if(e.charAt(l)==="\\"&&l+1<r){const a=e.charAt(l+1);a==="z"?(s.push(e.substring(i,l)),s.push("$(?!\\n)(?<!\\n)"),i=l+2):(a==="A"||a==="G")&&(o=!0),l++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,typeof this.source=="string"?this.hasBackReferences=_F.test(this.source):this.hasBackReferences=!1}clone(){return new ov(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=t.map(i=>e.substring(i.start,i.end));return Ng.lastIndex=0,this.source.replace(Ng,(i,s)=>Xx(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],t=[],r=[],i=[],s,o,l,u;for(s=0,o=this.source.length;s<o;s++)l=this.source.charAt(s),e[s]=l,t[s]=l,r[s]=l,i[s]=l,l==="\\"&&s+1<o&&(u=this.source.charAt(s+1),u==="A"?(e[s+1]="",t[s+1]="",r[s+1]="A",i[s+1]="A"):u==="G"?(e[s+1]="",t[s+1]="G",r[s+1]="",i[s+1]="G"):(e[s+1]=u,t[s+1]=u,r[s+1]=u,i[s+1]=u),s++);return{A0_G0:e.join(""),A0_G1:t.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,t){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Ro=class{constructor(){R(this,"_items");R(this,"_hasAnchors");R(this,"_cached");R(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(n){this._items.push(n),this._hasAnchors=this._hasAnchors||n.hasAnchor}unshift(n){this._items.unshift(n),this._hasAnchors=this._hasAnchors||n.hasAnchor}length(){return this._items.length}setSource(n,e){this._items[n].source!==e&&(this._disposeCaches(),this._items[n].setSource(e))}compile(n){if(!this._cached){let e=this._items.map(t=>t.source);this._cached=new jg(n,e,this._items.map(t=>t.ruleId))}return this._cached}compileAG(n,e,t){return this._hasAnchors?e?t?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(n,e,t)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(n,e,t)),this._anchorCache.A1_G0):t?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(n,e,t)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(n,e,t)),this._anchorCache.A0_G0):this.compile(n)}_resolveAnchors(n,e,t){let r=this._items.map(i=>i.resolveAnchors(e,t));return new jg(n,r,this._items.map(i=>i.ruleId))}},jg=class{constructor(n,e,t){R(this,"scanner");this.regExps=e,this.rules=t,this.scanner=n.createOnigScanner(e)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const n=[];for(let e=0,t=this.rules.length;e<t;e++)n.push("   - "+this.rules[e]+": "+this.regExps[e]);return n.join(`
`)}findNextMatchSync(n,e,t){const r=this.scanner.findNextMatchSync(n,e,t);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},yf=class{constructor(n,e){this.languageId=n,this.tokenType=e}},tr,TF=(tr=class{constructor(e,t){R(this,"_defaultAttributes");R(this,"_embeddedLanguagesMatcher");R(this,"_getBasicScopeAttributes",new Zx(e=>{const t=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new yf(t,r)}));this._defaultAttributes=new yf(e,8),this._embeddedLanguagesMatcher=new FF(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?tr._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(tr.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}},R(tr,"_NULL_SCOPE_METADATA",new yf(0,0)),R(tr,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),tr),FF=class{constructor(n){R(this,"values");R(this,"scopesRegExp");if(n.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(n);const e=n.map(([t,r])=>Xx(t));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(n){if(!this.scopesRegExp)return;const e=n.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},qg=class{constructor(n,e){this.stack=n,this.stoppedEarly=e}};function lv(n,e,t,r,i,s,o,l){const u=e.content.length;let a=!1,c=-1;if(o){const d=PF(n,e,t,r,i,s);i=d.stack,r=d.linePos,t=d.isFirstLine,c=d.anchorPosition}const f=Date.now();for(;!a;){if(l!==0&&Date.now()-f>l)return new qg(i,!0);h()}return new qg(i,!1);function h(){const d=RF(n,e,t,r,i,c);if(!d){s.produce(i,u),a=!0;return}const p=d.captureIndices,m=d.matchedRuleId,g=p&&p.length>0?p[0].end>r:!1;if(m===SF){const b=i.getRule(n);s.produce(i,p[0].start),i=i.withContentNameScopesList(i.nameScopesList),Ws(n,e,t,i,s,b.endCaptures,p),s.produce(i,p[0].end);const y=i;if(i=i.parent,c=y.getAnchorPos(),!g&&y.getEnterPos()===r){i=y,s.produce(i,u),a=!0;return}}else{const b=n.getRule(m);s.produce(i,p[0].start);const y=i,x=b.getName(e.content,p),w=i.contentNameScopesList.pushAttributed(x,n);if(i=i.push(m,r,c,p[0].end===u,null,w,w),b instanceof qh){const D=b;Ws(n,e,t,i,s,D.beginCaptures,p),s.produce(i,p[0].end),c=p[0].end;const A=D.getContentName(e.content,p),k=w.pushAttributed(A,n);if(i=i.withContentNameScopesList(k),D.endHasBackReferences&&(i=i.withEndRule(D.getEndWithResolvedBackReferences(e.content,p))),!g&&y.hasSameRuleAs(i)){i=i.pop(),s.produce(i,u),a=!0;return}}else if(b instanceof ba){const D=b;Ws(n,e,t,i,s,D.beginCaptures,p),s.produce(i,p[0].end),c=p[0].end;const A=D.getContentName(e.content,p),k=w.pushAttributed(A,n);if(i=i.withContentNameScopesList(k),D.whileHasBackReferences&&(i=i.withEndRule(D.getWhileWithResolvedBackReferences(e.content,p))),!g&&y.hasSameRuleAs(i)){i=i.pop(),s.produce(i,u),a=!0;return}}else if(Ws(n,e,t,i,s,b.captures,p),s.produce(i,p[0].end),i=i.pop(),!g){i=i.safePop(),s.produce(i,u),a=!0;return}}p[0].end>r&&(r=p[0].end,t=!1)}}function PF(n,e,t,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const l=[];for(let u=i;u;u=u.pop()){const a=u.getRule(n);a instanceof ba&&l.push({rule:a,stack:u})}for(let u=l.pop();u;u=l.pop()){const{ruleScanner:a,findOptions:c}=BF(u.rule,n,u.stack.endRule,t,r===o),f=a.findNextMatchSync(e,r,c);if(f){if(f.ruleId!==iv){i=u.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(s.produce(u.stack,f.captureIndices[0].start),Ws(n,e,t,u.stack,s,u.rule.whileCaptures,f.captureIndices),s.produce(u.stack,f.captureIndices[0].end),o=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,t=!1))}else{i=u.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:t}}function RF(n,e,t,r,i,s){const o=IF(n,e,t,r,i,s),l=n.getInjections();if(l.length===0)return o;const u=MF(l,n,e,t,r,i,s);if(!u)return o;if(!o)return u;const a=o.captureIndices[0].start,c=u.captureIndices[0].start;return c<a||u.priorityMatch&&c===a?u:o}function IF(n,e,t,r,i,s){const o=i.getRule(n),{ruleScanner:l,findOptions:u}=uv(o,n,i.endRule,t,r===s),a=l.findNextMatchSync(e,r,u);return a?{captureIndices:a.captureIndices,matchedRuleId:a.ruleId}:null}function MF(n,e,t,r,i,s,o){let l=Number.MAX_VALUE,u=null,a,c=0;const f=s.contentNameScopesList.getScopeNames();for(let h=0,d=n.length;h<d;h++){const p=n[h];if(!p.matcher(f))continue;const m=e.getRule(p.ruleId),{ruleScanner:g,findOptions:b}=uv(m,e,null,r,i===o),y=g.findNextMatchSync(t,i,b);if(!y)continue;const x=y.captureIndices[0].start;if(!(x>=l)&&(l=x,u=y.captureIndices,a=y.ruleId,c=p.priority,l===i))break}return u?{priorityMatch:c===-1,captureIndices:u,matchedRuleId:a}:null}function uv(n,e,t,r,i){return{ruleScanner:n.compileAG(e,t,r,i),findOptions:0}}function BF(n,e,t,r,i){return{ruleScanner:n.compileWhileAG(e,t,r,i),findOptions:0}}function Ws(n,e,t,r,i,s,o){if(s.length===0)return;const l=e.content,u=Math.min(s.length,o.length),a=[],c=o[0].end;for(let f=0;f<u;f++){const h=s[f];if(h===null)continue;const d=o[f];if(d.length===0)continue;if(d.start>c)break;for(;a.length>0&&a[a.length-1].endPos<=d.start;)i.produceFromScopes(a[a.length-1].scopes,a[a.length-1].endPos),a.pop();if(a.length>0?i.produceFromScopes(a[a.length-1].scopes,d.start):i.produce(r,d.start),h.retokenizeCapturedWithRuleId){const m=h.getName(l,o),g=r.contentNameScopesList.pushAttributed(m,n),b=h.getContentName(l,o),y=g.pushAttributed(b,n),x=r.push(h.retokenizeCapturedWithRuleId,d.start,-1,!1,null,g,y),w=n.createOnigString(l.substring(0,d.end));lv(n,w,t&&d.start===0,d.start,x,i,!1,0),nv(w);continue}const p=h.getName(l,o);if(p!==null){const g=(a.length>0?a[a.length-1].scopes:r.contentNameScopesList).pushAttributed(p,n);a.push(new $F(g,d.end))}}for(;a.length>0;)i.produceFromScopes(a[a.length-1].scopes,a[a.length-1].endPos),a.pop()}var $F=class{constructor(n,e){R(this,"scopes");R(this,"endPos");this.scopes=n,this.endPos=e}};function NF(n,e,t,r,i,s,o,l){return new jF(n,e,t,r,i,s,o,l)}function Vg(n,e,t,r,i){const s=ma(e,ya),o=sv.getCompiledRuleId(t,r,i.repository);for(const l of s)n.push({debugSelector:e,matcher:l.matcher,ruleId:o,grammar:i,priority:l.priority})}function ya(n,e){if(e.length<n.length)return!1;let t=0;return n.every(r=>{for(let i=t;i<e.length;i++)if(LF(e[i],r))return t=i+1,!0;return!1})}function LF(n,e){if(!n)return!1;if(n===e)return!0;const t=e.length;return n.length>t&&n.substr(0,t)===e&&n[t]==="."}var jF=class{constructor(n,e,t,r,i,s,o,l){R(this,"_rootId");R(this,"_lastRuleId");R(this,"_ruleId2desc");R(this,"_includedGrammars");R(this,"_grammarRepository");R(this,"_grammar");R(this,"_injections");R(this,"_basicScopeAttributesProvider");R(this,"_tokenTypeMatchers");if(this._rootScopeName=n,this.balancedBracketSelectors=s,this._onigLib=l,this._basicScopeAttributesProvider=new TF(t,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=zg(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const u of Object.keys(i)){const a=ma(u,ya);for(const c of a)this._tokenTypeMatchers.push({matcher:c.matcher,type:i[u]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const n of this._ruleId2desc)n&&n.dispose()}createOnigScanner(n){return this._onigLib.createOnigScanner(n)}createOnigString(n){return this._onigLib.createOnigString(n)}getMetadataForScope(n){return this._basicScopeAttributesProvider.getBasicScopeAttributes(n)}_collectInjections(){const n={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],t=this._rootScopeName,r=n.lookup(t);if(r){const i=r.injections;if(i)for(let o in i)Vg(e,o,i[o],this,r);const s=this._grammarRepository.injections(t);s&&s.forEach(o=>{const l=this.getExternalGrammar(o);if(l){const u=l.injectionSelector;u&&Vg(e,u,l,this,l)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(n){const e=++this._lastRuleId,t=n(e);return this._ruleId2desc[e]=t,t}getRule(n){return this._ruleId2desc[n]}getExternalGrammar(n,e){if(this._includedGrammars[n])return this._includedGrammars[n];if(this._grammarRepository){const t=this._grammarRepository.lookup(n);if(t)return this._includedGrammars[n]=zg(t,e&&e.$base),this._includedGrammars[n]}}tokenizeLine(n,e,t=0){const r=this._tokenize(n,e,!1,t);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(n,e,t=0){const r=this._tokenize(n,e,!0,t);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(n,e,t,r){this._rootId===-1&&(this._rootId=sv.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===Vh.NULL){i=!0;const a=this._basicScopeAttributesProvider.getDefaultAttributes(),c=this.themeProvider.getDefaults(),f=ls.set(0,a.languageId,a.tokenType,null,c.fontStyle,c.foregroundId,c.backgroundId),h=this.getRule(this._rootId).getName(null,null);let d;h?d=ro.createRootAndLookUpScopeName(h,f,this):d=ro.createRoot("unknown",f),e=new Vh(null,this._rootId,-1,-1,!1,null,d,d)}else i=!1,e.reset();n=n+`
`;const s=this.createOnigString(n),o=s.content.length,l=new VF(t,n,this._tokenTypeMatchers,this.balancedBracketSelectors),u=lv(this,s,i,0,e,l,!0,r);return nv(s),{lineLength:o,lineTokens:l,ruleStack:u.stack,stoppedEarly:u.stoppedEarly}}};function zg(n,e){return n=sF(n),n.repository=n.repository||{},n.repository.$self={$vscodeTextmateLocation:n.$vscodeTextmateLocation,patterns:n.patterns,name:n.scopeName},n.repository.$base=e||n.repository.$self,n}var ro=class Sn{constructor(e,t,r){this.parent=e,this.scopePath=t,this.tokenAttributes=r}static fromExtension(e,t){let r=e,i=(e==null?void 0:e.scopePath)??null;for(const s of t)i=bf.push(i,s.scopeNames),r=new Sn(r,i,s.encodedTokenAttributes);return r}static createRoot(e,t){return new Sn(null,new bf(null,e),t)}static createRootAndLookUpScopeName(e,t,r){const i=r.getMetadataForScope(e),s=new bf(null,e),o=r.themeProvider.themeMatch(s),l=Sn.mergeAttributes(t,i,o);return new Sn(null,s,l)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Sn.equals(this,e)}static equals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}while(!0)}static mergeAttributes(e,t,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),ls.set(e,t.languageId,t.tokenType,null,i,s,o)}pushAttributed(e,t){if(e===null)return this;if(e.indexOf(" ")===-1)return Sn._pushAttributed(this,e,t);const r=e.split(/ /g);let i=this;for(const s of r)i=Sn._pushAttributed(i,s,t);return i}static _pushAttributed(e,t,r){const i=r.getMetadataForScope(t),s=e.scopePath.push(t),o=r.themeProvider.themeMatch(s),l=Sn.mergeAttributes(e.tokenAttributes,i,o);return new Sn(e,s,l)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){var i;const t=[];let r=this;for(;r&&r!==e;)t.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(((i=r.parent)==null?void 0:i.scopePath)??null)}),r=r.parent;return r===e?t.reverse():void 0}},Xt,Vh=(Xt=class{constructor(e,t,r,i,s,o,l,u){R(this,"_stackElementBrand");R(this,"_enterPos");R(this,"_anchorPos");R(this,"depth");this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=l,this.contentNameScopesList=u,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}equals(e){return e===null?!1:Xt._equals(this,e)}static _equals(e,t){return e===t?!0:this._structuralEquals(e,t)?ro.equals(e.contentNameScopesList,t.contentNameScopesList):!1}static _structuralEquals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Xt._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,r,i,s,o,l){return new Xt(this,e,t,r,i,s,o,l)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){var r,i;return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${(r=this.nameScopesList)==null?void 0:r.toString()}, ${(i=this.contentNameScopesList)==null?void 0:i.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Xt(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){var e,t,r;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((t=this.nameScopesList)==null?void 0:t.getExtensionIfDefined(((e=this.parent)==null?void 0:e.nameScopesList)??null))??[],contentNameScopesList:((r=this.contentNameScopesList)==null?void 0:r.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(e,t){const r=ro.fromExtension((e==null?void 0:e.nameScopesList)??null,t.nameScopesList);return new Xt(e,t.ruleId,t.enterPos??-1,t.anchorPos??-1,t.beginRuleCapturedEOL,t.endRule,r,ro.fromExtension(r,t.contentNameScopesList))}},R(Xt,"NULL",new Xt(null,0,0,0,!1,null,null,null)),Xt),qF=class{constructor(n,e){R(this,"balancedBracketScopes");R(this,"unbalancedBracketScopes");R(this,"allowAny",!1);this.balancedBracketScopes=n.flatMap(t=>t==="*"?(this.allowAny=!0,[]):ma(t,ya).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(t=>ma(t,ya).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(n){for(const e of this.unbalancedBracketScopes)if(e(n))return!1;for(const e of this.balancedBracketScopes)if(e(n))return!0;return this.allowAny}},VF=class{constructor(n,e,t,r){R(this,"_emitBinaryTokens");R(this,"_lineText");R(this,"_tokens");R(this,"_binaryTokens");R(this,"_lastTokenEndIndex");R(this,"_tokenTypeOverrides");this.balancedBracketSelectors=r,this._emitBinaryTokens=n,this._tokenTypeOverrides=t,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(n,e){this.produceFromScopes(n.contentNameScopesList,e)}produceFromScopes(n,e){var r;if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let i=(n==null?void 0:n.tokenAttributes)??0,s=!1;if((r=this.balancedBracketSelectors)!=null&&r.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const o=(n==null?void 0:n.getScopeNames())??[];for(const l of this._tokenTypeOverrides)l.matcher(o)&&(i=ls.set(i,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(o))}if(s&&(i=ls.set(i,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===i){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(i),this._lastTokenEndIndex=e;return}const t=(n==null?void 0:n.getScopeNames())??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:t}),this._lastTokenEndIndex=e}getResult(n,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(n,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(n,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(n,e),this._binaryTokens[this._binaryTokens.length-2]=0);const t=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)t[r]=this._binaryTokens[r];return t}},zF=class{constructor(n,e){R(this,"_grammars",new Map);R(this,"_rawGrammars",new Map);R(this,"_injectionGrammars",new Map);R(this,"_theme");this._onigLib=e,this._theme=n}dispose(){for(const n of this._grammars.values())n.dispose()}setTheme(n){this._theme=n}getColorMap(){return this._theme.getColorMap()}addGrammar(n,e){this._rawGrammars.set(n.scopeName,n),e&&this._injectionGrammars.set(n.scopeName,e)}lookup(n){return this._rawGrammars.get(n)}injections(n){return this._injectionGrammars.get(n)}getDefaults(){return this._theme.getDefaults()}themeMatch(n){return this._theme.match(n)}grammarForScopeName(n,e,t,r,i){if(!this._grammars.has(n)){let s=this._rawGrammars.get(n);if(!s)return null;this._grammars.set(n,NF(n,s,e,t,r,i,this,this._onigLib))}return this._grammars.get(n)}},UF=class{constructor(e){R(this,"_options");R(this,"_syncRegistry");R(this,"_ensureGrammarCache");this._options=e,this._syncRegistry=new zF(pa.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(pa.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,r){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,t,r){return this._loadGrammar(e,t,r.embeddedLanguages,r.tokenTypes,new qF(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,r,i,s){const o=new xF(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(l=>this._loadSingleGrammar(l.scopeName)),o.processQueue();return this._grammarForScopeName(e,t,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const t=this._options.loadGrammar(e);if(t){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,r)}}addGrammar(e,t=[],r=0,i=null){return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,t=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,t,r,i,s)}},zh=Vh.NULL;const HF=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];let fl=class{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}};fl.prototype.normal={};fl.prototype.property={};fl.prototype.space=void 0;function av(n,e){const t={},r={};for(const i of n)Object.assign(t,i.property),Object.assign(r,i.normal);return new fl(t,r,e)}function Uh(n){return n.toLowerCase()}class jt{constructor(e,t){this.attribute=t,this.property=e}}jt.prototype.attribute="";jt.prototype.booleanish=!1;jt.prototype.boolean=!1;jt.prototype.commaOrSpaceSeparated=!1;jt.prototype.commaSeparated=!1;jt.prototype.defined=!1;jt.prototype.mustUseProperty=!1;jt.prototype.number=!1;jt.prototype.overloadedBoolean=!1;jt.prototype.property="";jt.prototype.spaceSeparated=!1;jt.prototype.space=void 0;let WF=0;const ue=gi(),Je=gi(),Hh=gi(),z=gi(),Ce=gi(),Hi=gi(),zt=gi();function gi(){return 2**++WF}const Wh=Object.freeze(Object.defineProperty({__proto__:null,boolean:ue,booleanish:Je,commaOrSpaceSeparated:zt,commaSeparated:Hi,number:z,overloadedBoolean:Hh,spaceSeparated:Ce},Symbol.toStringTag,{value:"Module"})),xf=Object.keys(Wh);class mp extends jt{constructor(e,t,r,i){let s=-1;if(super(e,t),Ug(this,"space",i),typeof r=="number")for(;++s<xf.length;){const o=xf[s];Ug(this,xf[s],(r&Wh[o])===Wh[o])}}}mp.prototype.defined=!0;function Ug(n,e,t){t&&(n[e]=t)}function xs(n){const e={},t={};for(const[r,i]of Object.entries(n.properties)){const s=new mp(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,t[Uh(r)]=r,t[Uh(s.attribute)]=r}return new fl(e,t,n.space)}const cv=xs({properties:{ariaActiveDescendant:null,ariaAtomic:Je,ariaAutoComplete:null,ariaBusy:Je,ariaChecked:Je,ariaColCount:z,ariaColIndex:z,ariaColSpan:z,ariaControls:Ce,ariaCurrent:null,ariaDescribedBy:Ce,ariaDetails:null,ariaDisabled:Je,ariaDropEffect:Ce,ariaErrorMessage:null,ariaExpanded:Je,ariaFlowTo:Ce,ariaGrabbed:Je,ariaHasPopup:null,ariaHidden:Je,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ce,ariaLevel:z,ariaLive:null,ariaModal:Je,ariaMultiLine:Je,ariaMultiSelectable:Je,ariaOrientation:null,ariaOwns:Ce,ariaPlaceholder:null,ariaPosInSet:z,ariaPressed:Je,ariaReadOnly:Je,ariaRelevant:null,ariaRequired:Je,ariaRoleDescription:Ce,ariaRowCount:z,ariaRowIndex:z,ariaRowSpan:z,ariaSelected:Je,ariaSetSize:z,ariaSort:null,ariaValueMax:z,ariaValueMin:z,ariaValueNow:z,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function fv(n,e){return e in n?n[e]:e}function hv(n,e){return fv(n,e.toLowerCase())}const GF=xs({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Hi,acceptCharset:Ce,accessKey:Ce,action:null,allow:null,allowFullScreen:ue,allowPaymentRequest:ue,allowUserMedia:ue,alt:null,as:null,async:ue,autoCapitalize:null,autoComplete:Ce,autoFocus:ue,autoPlay:ue,blocking:Ce,capture:null,charSet:null,checked:ue,cite:null,className:Ce,cols:z,colSpan:null,content:null,contentEditable:Je,controls:ue,controlsList:Ce,coords:z|Hi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ue,defer:ue,dir:null,dirName:null,disabled:ue,download:Hh,draggable:Je,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ue,formTarget:null,headers:Ce,height:z,hidden:Hh,high:z,href:null,hrefLang:null,htmlFor:Ce,httpEquiv:Ce,id:null,imageSizes:null,imageSrcSet:null,inert:ue,inputMode:null,integrity:null,is:null,isMap:ue,itemId:null,itemProp:Ce,itemRef:Ce,itemScope:ue,itemType:Ce,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ue,low:z,manifest:null,max:null,maxLength:z,media:null,method:null,min:null,minLength:z,multiple:ue,muted:ue,name:null,nonce:null,noModule:ue,noValidate:ue,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ue,optimum:z,pattern:null,ping:Ce,placeholder:null,playsInline:ue,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ue,referrerPolicy:null,rel:Ce,required:ue,reversed:ue,rows:z,rowSpan:z,sandbox:Ce,scope:null,scoped:ue,seamless:ue,selected:ue,shadowRootClonable:ue,shadowRootDelegatesFocus:ue,shadowRootMode:null,shape:null,size:z,sizes:null,slot:null,span:z,spellCheck:Je,src:null,srcDoc:null,srcLang:null,srcSet:null,start:z,step:null,style:null,tabIndex:z,target:null,title:null,translate:null,type:null,typeMustMatch:ue,useMap:null,value:Je,width:z,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ce,axis:null,background:null,bgColor:null,border:z,borderColor:null,bottomMargin:z,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ue,declare:ue,event:null,face:null,frame:null,frameBorder:null,hSpace:z,leftMargin:z,link:null,longDesc:null,lowSrc:null,marginHeight:z,marginWidth:z,noResize:ue,noHref:ue,noShade:ue,noWrap:ue,object:null,profile:null,prompt:null,rev:null,rightMargin:z,rules:null,scheme:null,scrolling:Je,standby:null,summary:null,text:null,topMargin:z,valueType:null,version:null,vAlign:null,vLink:null,vSpace:z,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ue,disableRemotePlayback:ue,prefix:null,property:null,results:z,security:null,unselectable:null},space:"html",transform:hv}),KF=xs({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:zt,accentHeight:z,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:z,amplitude:z,arabicForm:null,ascent:z,attributeName:null,attributeType:null,azimuth:z,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:z,by:null,calcMode:null,capHeight:z,className:Ce,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:z,diffuseConstant:z,direction:null,display:null,dur:null,divisor:z,dominantBaseline:null,download:ue,dx:null,dy:null,edgeMode:null,editable:null,elevation:z,enableBackground:null,end:null,event:null,exponent:z,externalResourcesRequired:null,fill:null,fillOpacity:z,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Hi,g2:Hi,glyphName:Hi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:z,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:z,horizOriginX:z,horizOriginY:z,id:null,ideographic:z,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:z,k:z,k1:z,k2:z,k3:z,k4:z,kernelMatrix:zt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:z,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:z,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:z,overlineThickness:z,paintOrder:null,panose1:null,path:null,pathLength:z,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ce,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:z,pointsAtY:z,pointsAtZ:z,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zt,rev:zt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zt,requiredFeatures:zt,requiredFonts:zt,requiredFormats:zt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:z,specularExponent:z,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:z,strikethroughThickness:z,string:null,stroke:null,strokeDashArray:zt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:z,strokeOpacity:z,strokeWidth:null,style:null,surfaceScale:z,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zt,tabIndex:z,tableValues:null,target:null,targetX:z,targetY:z,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:z,underlineThickness:z,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:z,values:null,vAlphabetic:z,vMathematical:z,vectorEffect:null,vHanging:z,vIdeographic:z,version:null,vertAdvY:z,vertOriginX:z,vertOriginY:z,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:z,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:fv}),dv=xs({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),pv=xs({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:hv}),mv=xs({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),JF=/[A-Z]/g,Hg=/-[a-z]/g,YF=/^data[-\w.:]+$/i;function QF(n,e){const t=Uh(e);let r=e,i=jt;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&YF.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Hg,ZF);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Hg.test(s)){let o=s.replace(JF,XF);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=mp}return new i(r,e)}function XF(n){return"-"+n.toLowerCase()}function ZF(n){return n.charAt(1).toUpperCase()}const eP=av([cv,GF,dv,pv,mv],"html"),gv=av([cv,KF,dv,pv,mv],"svg"),Wg={}.hasOwnProperty;function tP(n,e){const t=e||{};function r(i,...s){let o=r.invalid;const l=r.handlers;if(i&&Wg.call(i,n)){const u=String(i[n]);o=Wg.call(l,u)?l[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=t.handlers||{},r.invalid=t.invalid,r.unknown=t.unknown,r}const nP=/["&'<>`]/g,rP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,iP=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,sP=/[|\\{}()[\]^$+*?.]/g,Gg=new WeakMap;function oP(n,e){if(n=n.replace(e.subset?lP(e.subset):nP,r),e.subset||e.escapeOnly)return n;return n.replace(rP,t).replace(iP,r);function t(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function lP(n){let e=Gg.get(n);return e||(e=uP(n),Gg.set(n,e)),e}function uP(n){const e=[];let t=-1;for(;++t<n.length;)e.push(n[t].replace(sP,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const aP=/[\dA-Fa-f]/;function cP(n,e,t){const r="&#x"+n.toString(16).toUpperCase();return t&&e&&!aP.test(String.fromCharCode(e))?r:r+";"}const fP=/\d/;function hP(n,e,t){const r="&#"+String(n);return t&&e&&!fP.test(String.fromCharCode(e))?r:r+";"}const dP=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],vf={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},pP=["cent","copy","divide","gt","lt","not","para","times"],bv={}.hasOwnProperty,Gh={};let Yl;for(Yl in vf)bv.call(vf,Yl)&&(Gh[vf[Yl]]=Yl);const mP=/[^\dA-Za-z]/;function gP(n,e,t,r){const i=String.fromCharCode(n);if(bv.call(Gh,i)){const s=Gh[i],o="&"+s;return t&&dP.includes(s)&&!pP.includes(s)&&(!r||e&&e!==61&&mP.test(String.fromCharCode(e)))?o:o+";"}return""}function bP(n,e,t){let r=cP(n,e,t.omitOptionalSemicolons),i;if((t.useNamedReferences||t.useShortestReferences)&&(i=gP(n,e,t.omitOptionalSemicolons,t.attribute)),(t.useShortestReferences||!i)&&t.useShortestReferences){const s=hP(n,e,t.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!t.useShortestReferences||i.length<r.length)?i:r}function Wi(n,e){return oP(n,Object.assign({format:bP},e))}const yP=/^>|^->|<!--|-->|--!>|<!-$/g,xP=[">"],vP=["<",">"];function kP(n,e,t,r){return r.settings.bogusComments?"<?"+Wi(n.value,Object.assign({},r.settings.characterReferences,{subset:xP}))+">":"<!--"+n.value.replace(yP,i)+"-->";function i(s){return Wi(s,Object.assign({},r.settings.characterReferences,{subset:vP}))}}function wP(n,e,t,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Kg(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=t.indexOf(e);for(;i!==-1;)r++,i=t.indexOf(e,i+e.length);return r}function DP(n,e){const t=e||{};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}function AP(n){return n.join(" ").trim()}const CP=/[ \t\n\f\r]/g;function gp(n){return typeof n=="object"?n.type==="text"?Jg(n.value):!1:Jg(n)}function Jg(n){return n.replace(CP,"")===""}const rt=xv(1),yv=xv(-1),_P=[];function xv(n){return e;function e(t,r,i){const s=t?t.children:_P;let o=(r||0)+n,l=s[o];if(!i)for(;l&&gp(l);)o+=n,l=s[o];return l}}const SP={}.hasOwnProperty;function vv(n){return e;function e(t,r,i){return SP.call(n,t.tagName)&&n[t.tagName](t,r,i)}}const bp=vv({body:OP,caption:kf,colgroup:kf,dd:RP,dt:PP,head:kf,html:EP,li:FP,optgroup:IP,option:MP,p:TP,rp:Yg,rt:Yg,tbody:$P,td:Qg,tfoot:NP,th:Qg,thead:BP,tr:LP});function kf(n,e,t){const r=rt(t,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&gp(r.value.charAt(0)))}function EP(n,e,t){const r=rt(t,e);return!r||r.type!=="comment"}function OP(n,e,t){const r=rt(t,e);return!r||r.type!=="comment"}function TP(n,e,t){const r=rt(t,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!t||!(t.type==="element"&&(t.tagName==="a"||t.tagName==="audio"||t.tagName==="del"||t.tagName==="ins"||t.tagName==="map"||t.tagName==="noscript"||t.tagName==="video"))}function FP(n,e,t){const r=rt(t,e);return!r||r.type==="element"&&r.tagName==="li"}function PP(n,e,t){const r=rt(t,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function RP(n,e,t){const r=rt(t,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function Yg(n,e,t){const r=rt(t,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function IP(n,e,t){const r=rt(t,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function MP(n,e,t){const r=rt(t,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function BP(n,e,t){const r=rt(t,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function $P(n,e,t){const r=rt(t,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function NP(n,e,t){return!rt(t,e)}function LP(n,e,t){const r=rt(t,e);return!r||r.type==="element"&&r.tagName==="tr"}function Qg(n,e,t){const r=rt(t,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const jP=vv({body:zP,colgroup:UP,head:VP,html:qP,tbody:HP});function qP(n){const e=rt(n,-1);return!e||e.type!=="comment"}function VP(n){const e=new Set;for(const r of n.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const t=n.children[0];return!t||t.type==="element"}function zP(n){const e=rt(n,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&gp(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function UP(n,e,t){const r=yv(t,e),i=rt(n,-1,!0);return t&&r&&r.type==="element"&&r.tagName==="colgroup"&&bp(r,t.children.indexOf(r),t)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function HP(n,e,t){const r=yv(t,e),i=rt(n,-1);return t&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&bp(r,t.children.indexOf(r),t)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Ql={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function WP(n,e,t,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(n.tagName.toLowerCase());const l=[];let u;i.space==="html"&&n.tagName==="svg"&&(r.schema=gv);const a=GP(r,n.properties),c=r.all(i.space==="html"&&n.tagName==="template"?n.content:n);return r.schema=i,c&&(o=!1),(a||!s||!jP(n,e,t))&&(l.push("<",n.tagName,a?" "+a:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(u=a.charAt(a.length-1),(!r.settings.tightSelfClosing||u==="/"||u&&u!=='"'&&u!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(c),!o&&(!s||!bp(n,e,t))&&l.push("</"+n.tagName+">"),l.join("")}function GP(n,e){const t=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=KP(n,i,e[i]);s&&t.push(s)}}for(;++r<t.length;){const s=n.settings.tightAttributes?t[r].charAt(t[r].length-1):void 0;r!==t.length-1&&s!=='"'&&s!=="'"&&(t[r]+=" ")}return t.join("")}function KP(n,e,t){const r=QF(n.schema,e),i=n.settings.allowParseErrors&&n.schema.space==="html"?0:1,s=n.settings.allowDangerousCharacters?0:1;let o=n.quote,l;if(r.overloadedBoolean&&(t===r.attribute||t==="")?t=!0:(r.boolean||r.overloadedBoolean)&&(typeof t!="string"||t===r.attribute||t==="")&&(t=!!t),t==null||t===!1||typeof t=="number"&&Number.isNaN(t))return"";const u=Wi(r.attribute,Object.assign({},n.settings.characterReferences,{subset:Ql.name[i][s]}));return t===!0||(t=Array.isArray(t)?(r.commaSeparated?DP:AP)(t,{padLeft:!n.settings.tightCommaSeparatedLists}):String(t),n.settings.collapseEmptyAttributes&&!t)?u:(n.settings.preferUnquoted&&(l=Wi(t,Object.assign({},n.settings.characterReferences,{attribute:!0,subset:Ql.unquoted[i][s]}))),l!==t&&(n.settings.quoteSmart&&Kg(t,o)>Kg(t,n.alternative)&&(o=n.alternative),l=o+Wi(t,Object.assign({},n.settings.characterReferences,{subset:(o==="'"?Ql.single:Ql.double)[i][s],attribute:!0}))+o),u+(l&&"="+l))}const JP=["<","&"];function kv(n,e,t,r){return t&&t.type==="element"&&(t.tagName==="script"||t.tagName==="style")?n.value:Wi(n.value,Object.assign({},r.settings.characterReferences,{subset:JP}))}function YP(n,e,t,r){return r.settings.allowDangerousHtml?n.value:kv(n,e,t,r)}function QP(n,e,t,r){return r.all(n)}const XP=tP("type",{invalid:ZP,unknown:eR,handlers:{comment:kP,doctype:wP,element:WP,raw:YP,root:QP,text:kv}});function ZP(n){throw new Error("Expected node, not `"+n+"`")}function eR(n){const e=n;throw new Error("Cannot compile unknown node `"+e.type+"`")}const tR={},nR={},rR=[];function iR(n,e){const t=tR,r=t.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:sR,all:oR,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||HF,characterReferences:t.characterReferences||nR,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:t.space==="svg"?gv:eP,quote:r,alternative:i}.one(Array.isArray(n)?{type:"root",children:n}:n,void 0,void 0)}function sR(n,e,t){return XP(n,e,t,this)}function oR(n){const e=[],t=n&&n.children||rR;let r=-1;for(;++r<t.length;)e[r]=this.one(t[r],r,n);return e.join("")}function lR(n){return Array.isArray(n)?n:[n]}function sc(n,e=!1){var s;const t=n.split(/(\r?\n)/g);let r=0;const i=[];for(let o=0;o<t.length;o+=2){const l=e?t[o]+(t[o+1]||""):t[o];i.push([l,r]),r+=t[o].length,r+=((s=t[o+1])==null?void 0:s.length)||0}return i}function yp(n){return!n||["plaintext","txt","text","plain"].includes(n)}function uR(n){return n==="ansi"||yp(n)}function xp(n){return n==="none"}function aR(n){return xp(n)}function wv(n,e){var r;if(!e)return n;n.properties||(n.properties={}),(r=n.properties).class||(r.class=[]),typeof n.properties.class=="string"&&(n.properties.class=n.properties.class.split(/\s+/g)),Array.isArray(n.properties.class)||(n.properties.class=[]);const t=Array.isArray(e)?e:e.split(/\s+/g);for(const i of t)i&&!n.properties.class.includes(i)&&n.properties.class.push(i);return n}function cR(n,e){let t=0;const r=[];for(const i of e)i>t&&r.push({...n,content:n.content.slice(t,i),offset:n.offset+t}),t=i;return t<n.content.length&&r.push({...n,content:n.content.slice(t),offset:n.offset+t}),r}function fR(n,e){const t=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return t.length?n.map(r=>r.flatMap(i=>{const s=t.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,l)=>o-l);return s.length?cR(i,s):i})):n}async function Dv(n){return Promise.resolve(typeof n=="function"?n():n).then(e=>e.default||e)}function xa(n,e){const t=typeof n=="string"?{}:{...n.colorReplacements},r=typeof n=="string"?n:n.name;for(const[i,s]of Object.entries((e==null?void 0:e.colorReplacements)||{}))typeof s=="string"?t[i]=s:i===r&&Object.assign(t,s);return t}function ei(n,e){return n&&((e==null?void 0:e[n==null?void 0:n.toLowerCase()])||n)}function Av(n){const e={};return n.color&&(e.color=n.color),n.bgColor&&(e["background-color"]=n.bgColor),n.fontStyle&&(n.fontStyle&nr.Italic&&(e["font-style"]="italic"),n.fontStyle&nr.Bold&&(e["font-weight"]="bold"),n.fontStyle&nr.Underline&&(e["text-decoration"]="underline")),e}function hR(n){return typeof n=="string"?n:Object.entries(n).map(([e,t])=>`${e}:${t}`).join(";")}function dR(n){const e=sc(n,!0).map(([i])=>i);function t(i){if(i===n.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const l of e){if(s<l.length)break;s-=l.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let l=0;l<i;l++)o+=e[l].length;return o+=s,o}return{lines:e,indexToPos:t,posToIndex:r}}class At extends Error{constructor(e){super(e),this.name="ShikiError"}}const Cv=new WeakMap;function oc(n,e){Cv.set(n,e)}function Io(n){return Cv.get(n)}class vs{constructor(...e){R(this,"_stacks",{});R(this,"lang");if(e.length===2){const[t,r]=e;this.lang=r,this._stacks=t}else{const[t,r,i]=e;this.lang=r,this._stacks={[i]:t}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new vs(Object.fromEntries(lR(t).map(r=>[r,zh])),e)}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return Xg(this._stacks[this.theme])}getScopes(e=this.theme){return Xg(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function Xg(n){const e=[],t=new Set;function r(i){var o;if(t.has(i))return;t.add(i);const s=(o=i==null?void 0:i.nameScopesList)==null?void 0:o.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(n),e}function pR(n,e){if(!(n instanceof vs))throw new At("Invalid grammar state");return n.getInternalStack(e)}function mR(){const n=new WeakMap;function e(t){if(!n.has(t.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>t.source.length)throw new At(`Invalid decoration offset: ${o}. Code length: ${t.source.length}`);return{...i.indexToPos(o),offset:o}}else{const l=i.lines[o.line];if(l===void 0)throw new At(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);if(o.character<0||o.character>l.length)throw new At(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${l.length}`);return{...o,offset:i.posToIndex(o.line,o.character)}}};const i=dR(t.source),s=(t.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));gR(s),n.set(t.meta,{decorations:s,converter:i,source:t.source})}return n.get(t.meta)}return{name:"shiki:decorations",tokens(t){var o;if(!((o=this.options.decorations)!=null&&o.length))return;const i=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return fR(t,i)},code(t){var c;if(!((c=this.options.decorations)!=null&&c.length))return;const r=e(this),i=Array.from(t.children).filter(f=>f.type==="element"&&f.tagName==="span");if(i.length!==r.converter.lines.length)throw new At(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(f,h,d,p){const m=i[f];let g="",b=-1,y=-1;if(h===0&&(b=0),d===0&&(y=0),d===Number.POSITIVE_INFINITY&&(y=m.children.length),b===-1||y===-1)for(let w=0;w<m.children.length;w++)g+=_v(m.children[w]),b===-1&&g.length===h&&(b=w+1),y===-1&&g.length===d&&(y=w+1);if(b===-1)throw new At(`Failed to find start index for decoration ${JSON.stringify(p.start)}`);if(y===-1)throw new At(`Failed to find end index for decoration ${JSON.stringify(p.end)}`);const x=m.children.slice(b,y);if(!p.alwaysWrap&&x.length===m.children.length)l(m,p,"line");else if(!p.alwaysWrap&&x.length===1&&x[0].type==="element")l(x[0],p,"token");else{const w={type:"element",tagName:"span",properties:{},children:x};l(w,p,"wrapper"),m.children.splice(b,x.length,w)}}function o(f,h){i[f]=l(i[f],h,"line")}function l(f,h,d){var g;const p=h.properties||{},m=h.transform||(b=>b);return f.tagName=h.tagName||"span",f.properties={...f.properties,...p,class:f.properties.class},(g=h.properties)!=null&&g.class&&wv(f,h.properties.class),f=m(f,d)||f,f}const u=[],a=r.decorations.sort((f,h)=>h.start.offset-f.start.offset);for(const f of a){const{start:h,end:d}=f;if(h.line===d.line)s(h.line,h.character,d.character,f);else if(h.line<d.line){s(h.line,h.character,Number.POSITIVE_INFINITY,f);for(let p=h.line+1;p<d.line;p++)u.unshift(()=>o(p,f));s(d.line,0,d.character,f)}}u.forEach(f=>f())}}}function gR(n){for(let e=0;e<n.length;e++){const t=n[e];if(t.start.offset>t.end.offset)throw new At(`Invalid decoration range: ${JSON.stringify(t.start)} - ${JSON.stringify(t.end)}`);for(let r=e+1;r<n.length;r++){const i=n[r],s=t.start.offset<i.start.offset&&i.start.offset<t.end.offset,o=t.start.offset<i.end.offset&&i.end.offset<t.end.offset,l=i.start.offset<t.start.offset&&t.start.offset<i.end.offset,u=i.start.offset<t.end.offset&&t.end.offset<i.end.offset;if(s||o||l||u){if(o&&o||l&&u)continue;throw new At(`Decorations ${JSON.stringify(t.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function _v(n){return n.type==="text"?n.value:n.type==="element"?n.children.map(_v).join(""):""}const bR=[mR()];function va(n){return[...n.transformers||[],...bR]}var ti=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],wf={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function yR(n,e){const t=n.indexOf("\x1B[",e);if(t!==-1){const r=n.indexOf("m",t);return{sequence:n.substring(t+2,r).split(";"),startPosition:t,position:r+1}}return{position:n.length}}function Zg(n,e){let t=1;const r=n[e+t++];let i;if(r==="2"){const s=[n[e+t++],n[e+t++],n[e+t]].map(o=>Number.parseInt(o));s.length===3&&!s.some(o=>Number.isNaN(o))&&(i={type:"rgb",rgb:s})}else if(r==="5"){const s=Number.parseInt(n[e+t]);Number.isNaN(s)||(i={type:"table",index:Number(s)})}return[t,i]}function xR(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t],i=Number.parseInt(r);if(!Number.isNaN(i))if(i===0)e.push({type:"resetAll"});else if(i<=9)wf[i]&&e.push({type:"setDecoration",value:wf[i]});else if(i<=29){const s=wf[i-20];s&&e.push({type:"resetDecoration",value:s})}else if(i<=37)e.push({type:"setForegroundColor",value:{type:"named",name:ti[i-30]}});else if(i===38){const[s,o]=Zg(n,t);o&&e.push({type:"setForegroundColor",value:o}),t+=s}else if(i===39)e.push({type:"resetForegroundColor"});else if(i<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:ti[i-40]}});else if(i===48){const[s,o]=Zg(n,t);o&&e.push({type:"setBackgroundColor",value:o}),t+=s}else i===49?e.push({type:"resetBackgroundColor"}):i>=90&&i<=97?e.push({type:"setForegroundColor",value:{type:"named",name:ti[i-90+8]}}):i>=100&&i<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:ti[i-100+8]}})}return e}function vR(){let n=null,e=null,t=new Set;return{parse(r){const i=[];let s=0;do{const o=yR(r,s),l=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(l.length>0&&i.push({value:l,foreground:n,background:e,decorations:new Set(t)}),o.sequence){const u=xR(o.sequence);for(const a of u)a.type==="resetAll"?(n=null,e=null,t.clear()):a.type==="resetForegroundColor"?n=null:a.type==="resetBackgroundColor"?e=null:a.type==="resetDecoration"&&t.delete(a.value);for(const a of u)a.type==="setForegroundColor"?n=a.value:a.type==="setBackgroundColor"?e=a.value:a.type==="setDecoration"&&t.add(a.value)}s=o.position}while(s<r.length);return i}}}var kR={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function wR(n=kR){function e(l){return n[l]}function t(l){return`#${l.map(u=>Math.max(0,Math.min(u,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let a=0;a<ti.length;a++)r.push(e(ti[a]));let l=[0,95,135,175,215,255];for(let a=0;a<6;a++)for(let c=0;c<6;c++)for(let f=0;f<6;f++)r.push(t([l[a],l[c],l[f]]));let u=8;for(let a=0;a<24;a++,u+=10)r.push(t([u,u,u]));return r}function s(l){return i()[l]}function o(l){switch(l.type){case"named":return e(l.name);case"rgb":return t(l.rgb);case"table":return s(l.index)}}return{value:o}}function DR(n,e,t){const r=xa(n,t),i=sc(e),s=wR(Object.fromEntries(ti.map(l=>{var u;return[l,(u=n.colors)==null?void 0:u[`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`]]}))),o=vR();return i.map(l=>o.parse(l[0]).map(u=>{let a,c;u.decorations.has("reverse")?(a=u.background?s.value(u.background):n.bg,c=u.foreground?s.value(u.foreground):n.fg):(a=u.foreground?s.value(u.foreground):n.fg,c=u.background?s.value(u.background):void 0),a=ei(a,r),c=ei(c,r),u.decorations.has("dim")&&(a=AR(a));let f=nr.None;return u.decorations.has("bold")&&(f|=nr.Bold),u.decorations.has("italic")&&(f|=nr.Italic),u.decorations.has("underline")&&(f|=nr.Underline),{content:u.value,offset:l[1],color:a,bgColor:c,fontStyle:f}}))}function AR(n){const e=n.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const t=n.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return t?`var(${t[1]}-dim)`:n}function vp(n,e,t={}){const{lang:r="text",theme:i=n.getLoadedThemes()[0]}=t;if(yp(r)||xp(i))return sc(e).map(u=>[{content:u[0],offset:u[1]}]);const{theme:s,colorMap:o}=n.setTheme(i);if(r==="ansi")return DR(s,e,t);const l=n.getLanguage(r);if(t.grammarState){if(t.grammarState.lang!==l.name)throw new li(`Grammar state language "${t.grammarState.lang}" does not match highlight language "${l.name}"`);if(!t.grammarState.themes.includes(s.name))throw new li(`Grammar state themes "${t.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return _R(e,l,s,o,t)}function CR(...n){if(n.length===2)return Io(n[1]);const[e,t,r={}]=n,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(yp(i)||xp(s))throw new li("Plain language does not have grammar state");if(i==="ansi")throw new li("ANSI language does not have grammar state");const{theme:o,colorMap:l}=e.setTheme(s),u=e.getLanguage(i);return new vs(ka(t,u,o,l,r).stateStack,u.name,o.name)}function _R(n,e,t,r,i){const s=ka(n,e,t,r,i),o=new vs(ka(n,e,t,r,i).stateStack,e.name,t.name);return oc(s.tokens,o),s.tokens}function ka(n,e,t,r,i){const s=xa(t,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:l=500}=i,u=sc(n);let a=i.grammarState?pR(i.grammarState,t.name)??zh:i.grammarContextCode!=null?ka(i.grammarContextCode,e,t,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:zh,c=[];const f=[];for(let h=0,d=u.length;h<d;h++){const[p,m]=u[h];if(p===""){c=[],f.push([]);continue}if(o>0&&p.length>=o){c=[],f.push([{content:p,offset:m,color:"",fontStyle:0}]);continue}let g,b,y;i.includeExplanation&&(g=e.tokenizeLine(p,a),b=g.tokens,y=0);const x=e.tokenizeLine2(p,a,l),w=x.tokens.length/2;for(let D=0;D<w;D++){const A=x.tokens[2*D],k=D+1<w?x.tokens[2*D+2]:p.length;if(A===k)continue;const C=x.tokens[2*D+1],O=ei(r[ls.getForeground(C)],s),L=ls.getFontStyle(C),B={content:p.substring(A,k),offset:m+A,color:O,fontStyle:L};if(i.includeExplanation){const P=[];if(i.includeExplanation!=="scopeName")for(const F of t.settings){let M;switch(typeof F.scope){case"string":M=F.scope.split(/,/).map(ee=>ee.trim());break;case"object":M=F.scope;break;default:continue}P.push({settings:F,selectors:M.map(ee=>ee.split(/ /))})}B.explanation=[];let T=0;for(;A+T<k;){const F=b[y],M=p.substring(F.startIndex,F.endIndex);T+=M.length,B.explanation.push({content:M,scopes:i.includeExplanation==="scopeName"?SR(F.scopes):ER(P,F.scopes)}),y+=1}}c.push(B)}f.push(c),c=[],a=x.ruleStack}return{tokens:f,stateStack:a}}function SR(n){return n.map(e=>({scopeName:e}))}function ER(n,e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t[r]={scopeName:s,themeMatches:TR(n,s,e.slice(0,r))}}return t}function e1(n,e){return n===e||e.substring(0,n.length)===n&&e[n.length]==="."}function OR(n,e,t){if(!e1(n[n.length-1],e))return!1;let r=n.length-2,i=t.length-1;for(;r>=0&&i>=0;)e1(n[r],t[i])&&(r-=1),i-=1;return r===-1}function TR(n,e,t){const r=[];for(const{selectors:i,settings:s}of n)for(const o of i)if(OR(o,e,t)){r.push(s);break}return r}function Sv(n,e,t){const r=Object.entries(t.themes).filter(u=>u[1]).map(u=>({color:u[0],theme:u[1]})),i=r.map(u=>{const a=vp(n,e,{...t,theme:u.theme}),c=Io(a),f=typeof u.theme=="string"?u.theme:u.theme.name;return{tokens:a,state:c,theme:f}}),s=FR(...i.map(u=>u.tokens)),o=s[0].map((u,a)=>u.map((c,f)=>{const h={content:c.content,variants:{},offset:c.offset};return"includeExplanation"in t&&t.includeExplanation&&(h.explanation=c.explanation),s.forEach((d,p)=>{const{content:m,explanation:g,offset:b,...y}=d[a][f];h.variants[r[p].color]=y}),h})),l=i[0].state?new vs(Object.fromEntries(i.map(u=>{var a;return[u.theme,(a=u.state)==null?void 0:a.getInternalStack(u.theme)]})),i[0].state.lang):void 0;return l&&oc(o,l),o}function FR(...n){const e=n.map(()=>[]),t=n.length;for(let r=0;r<n[0].length;r++){const i=n.map(u=>u[r]),s=e.map(()=>[]);e.forEach((u,a)=>u.push(s[a]));const o=i.map(()=>0),l=i.map(u=>u[0]);for(;l.every(u=>u);){const u=Math.min(...l.map(a=>a.content.length));for(let a=0;a<t;a++){const c=l[a];c.content.length===u?(s[a].push(c),o[a]+=1,l[a]=i[a][o[a]]):(s[a].push({...c,content:c.content.slice(0,u)}),l[a]={...c,content:c.content.slice(u),offset:c.offset+u})}}}return e}function wa(n,e,t){let r,i,s,o,l,u;if("themes"in t){const{defaultColor:a="light",cssVariablePrefix:c="--shiki-"}=t,f=Object.entries(t.themes).filter(g=>g[1]).map(g=>({color:g[0],theme:g[1]})).sort((g,b)=>g.color===a?-1:b.color===a?1:0);if(f.length===0)throw new li("`themes` option must not be empty");const h=Sv(n,e,t);if(u=Io(h),a&&!f.find(g=>g.color===a))throw new li(`\`themes\` option must contain the defaultColor key \`${a}\``);const d=f.map(g=>n.getTheme(g.theme)),p=f.map(g=>g.color);s=h.map(g=>g.map(b=>PR(b,p,c,a))),u&&oc(s,u);const m=f.map(g=>xa(g.theme,t));i=f.map((g,b)=>(b===0&&a?"":`${c+g.color}:`)+(ei(d[b].fg,m[b])||"inherit")).join(";"),r=f.map((g,b)=>(b===0&&a?"":`${c+g.color}-bg:`)+(ei(d[b].bg,m[b])||"inherit")).join(";"),o=`shiki-themes ${d.map(g=>g.name).join(" ")}`,l=a?void 0:[i,r].join(";")}else if("theme"in t){const a=xa(t.theme,t);s=vp(n,e,t);const c=n.getTheme(t.theme);r=ei(c.bg,a),i=ei(c.fg,a),o=c.name,u=Io(s)}else throw new li("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:l,grammarState:u}}function PR(n,e,t,r){const i={content:n.content,explanation:n.explanation,offset:n.offset},s=e.map(u=>Av(n.variants[u])),o=new Set(s.flatMap(u=>Object.keys(u))),l={};return s.forEach((u,a)=>{for(const c of o){const f=u[c]||"inherit";if(a===0&&r)l[c]=f;else{const h=c==="color"?"":c==="background-color"?"-bg":`-${c}`,d=t+e[a]+(c==="color"?"":h);l[d]=f}}}),i.htmlStyle=l,i}function Da(n,e,t,r={meta:{},options:t,codeToHast:(i,s)=>Da(n,i,s),codeToTokens:(i,s)=>wa(n,i,s)}){var d,p;let i=e;for(const m of va(t))i=((d=m.preprocess)==null?void 0:d.call(r,i,t))||i;let{tokens:s,fg:o,bg:l,themeName:u,rootStyle:a,grammarState:c}=wa(n,i,t);const{mergeWhitespaces:f=!0}=t;f===!0?s=IR(s):f==="never"&&(s=MR(s));const h={...r,get source(){return i}};for(const m of va(t))s=((p=m.tokens)==null?void 0:p.call(h,s))||s;return RR(s,{...t,fg:o,bg:l,themeName:u,rootStyle:a},h,c)}function RR(n,e,t,r=Io(n)){var p,m,g;const i=va(e),s=[],o={type:"root",children:[]},{structure:l="classic",tabindex:u="0"}=e;let a={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...u!==!1&&u!=null?{tabindex:u.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([b])=>!b.startsWith("_")))},children:[]},c={type:"element",tagName:"code",properties:{},children:s};const f=[],h={...t,structure:l,addClassToHast:wv,get source(){return t.source},get tokens(){return n},get options(){return e},get root(){return o},get pre(){return a},get code(){return c},get lines(){return f}};if(n.forEach((b,y)=>{var D,A;y&&(l==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):l==="classic"&&s.push({type:"text",value:`
`}));let x={type:"element",tagName:"span",properties:{class:"line"},children:[]},w=0;for(const k of b){let C={type:"element",tagName:"span",properties:{...k.htmlAttrs},children:[{type:"text",value:k.content}]};k.htmlStyle;const O=hR(k.htmlStyle||Av(k));O&&(C.properties.style=O);for(const L of i)C=((D=L==null?void 0:L.span)==null?void 0:D.call(h,C,y+1,w,x,k))||C;l==="inline"?o.children.push(C):l==="classic"&&x.children.push(C),w+=k.content.length}if(l==="classic"){for(const k of i)x=((A=k==null?void 0:k.line)==null?void 0:A.call(h,x,y+1))||x;f.push(x),s.push(x)}}),l==="classic"){for(const b of i)c=((p=b==null?void 0:b.code)==null?void 0:p.call(h,c))||c;a.children.push(c);for(const b of i)a=((m=b==null?void 0:b.pre)==null?void 0:m.call(h,a))||a;o.children.push(a)}let d=o;for(const b of i)d=((g=b==null?void 0:b.root)==null?void 0:g.call(h,d))||d;return r&&oc(d,r),d}function IR(n){return n.map(e=>{const t=[];let r="",i=0;return e.forEach((s,o)=>{const u=!(s.fontStyle&&s.fontStyle&nr.Underline);u&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(u?t.push({...s,offset:i,content:r+s.content}):t.push({content:r,offset:i},s),i=0,r=""):t.push(s)}),t})}function MR(n){return n.map(e=>e.flatMap(t=>{if(t.content.match(/^\s+$/))return t;const r=t.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return t;const[,i,s,o]=r;if(!i&&!o)return t;const l=[{...t,offset:t.offset+i.length,content:s}];return i&&l.unshift({content:i,offset:t.offset}),o&&l.push({content:o,offset:t.offset+i.length+s.length}),l}))}function BR(n,e,t){var s;const r={meta:{},options:t,codeToHast:(o,l)=>Da(n,o,l),codeToTokens:(o,l)=>wa(n,o,l)};let i=iR(Da(n,e,t,r));for(const o of va(t))i=((s=o.postprocess)==null?void 0:s.call(r,i,t))||i;return i}const t1={light:"#333333",dark:"#bbbbbb"},n1={light:"#fffffe",dark:"#1e1e1e"},r1="__shiki_resolved";function kp(n){var l,u,a,c,f;if(n!=null&&n[r1])return n;const e={...n};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||(e.type="dark"),e.colorReplacements={...e.colorReplacements},e.settings||(e.settings=[]);let{bg:t,fg:r}=e;if(!t||!r){const h=e.settings?e.settings.find(d=>!d.name&&!d.scope):void 0;(l=h==null?void 0:h.settings)!=null&&l.foreground&&(r=h.settings.foreground),(u=h==null?void 0:h.settings)!=null&&u.background&&(t=h.settings.background),!r&&((a=e==null?void 0:e.colors)!=null&&a["editor.foreground"])&&(r=e.colors["editor.foreground"]),!t&&((c=e==null?void 0:e.colors)!=null&&c["editor.background"])&&(t=e.colors["editor.background"]),r||(r=e.type==="light"?t1.light:t1.dark),t||(t=e.type==="light"?n1.light:n1.dark),e.fg=r,e.bg=t}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(h){var p;if(s.has(h))return s.get(h);i+=1;const d=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return(p=e.colorReplacements)!=null&&p[`#${d}`]?o(h):(s.set(h,d),d)}e.settings=e.settings.map(h=>{var g,b;const d=((g=h.settings)==null?void 0:g.foreground)&&!h.settings.foreground.startsWith("#"),p=((b=h.settings)==null?void 0:b.background)&&!h.settings.background.startsWith("#");if(!d&&!p)return h;const m={...h,settings:{...h.settings}};if(d){const y=o(h.settings.foreground);e.colorReplacements[y]=h.settings.foreground,m.settings.foreground=y}if(p){const y=o(h.settings.background);e.colorReplacements[y]=h.settings.background,m.settings.background=y}return m});for(const h of Object.keys(e.colors||{}))if((h==="editor.foreground"||h==="editor.background"||h.startsWith("terminal.ansi"))&&!((f=e.colors[h])!=null&&f.startsWith("#"))){const d=o(e.colors[h]);e.colorReplacements[d]=e.colors[h],e.colors[h]=d}return Object.defineProperty(e,r1,{enumerable:!1,writable:!1,value:!0}),e}async function Ev(n){return Array.from(new Set((await Promise.all(n.filter(e=>!uR(e)).map(async e=>await Dv(e).then(t=>Array.isArray(t)?t:[t])))).flat()))}async function Ov(n){return(await Promise.all(n.map(async t=>aR(t)?null:kp(await Dv(t))))).filter(t=>!!t)}class $R extends UF{constructor(t,r,i,s={}){super(t);R(this,"_resolvedThemes",new Map);R(this,"_resolvedGrammars",new Map);R(this,"_langMap",new Map);R(this,"_langGraph",new Map);R(this,"_textmateThemeCache",new WeakMap);R(this,"_loadedThemesCache",null);R(this,"_loadedLanguagesCache",null);this._resolver=t,this._themes=r,this._langs=i,this._alias=s,this._themes.map(o=>this.loadTheme(o)),this.loadLanguages(this._langs)}getTheme(t){return typeof t=="string"?this._resolvedThemes.get(t):this.loadTheme(t)}loadTheme(t){const r=kp(t);return r.name&&(this._resolvedThemes.set(r.name,r),this._loadedThemesCache=null),r}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(t){let r=this._textmateThemeCache.get(t);r||(r=pa.createFromRawTheme(t),this._textmateThemeCache.set(t,r)),this._syncRegistry.setTheme(r)}getGrammar(t){if(this._alias[t]){const r=new Set([t]);for(;this._alias[t];){if(t=this._alias[t],r.has(t))throw new At(`Circular alias \`${Array.from(r).join(" -> ")} -> ${t}\``);r.add(t)}}return this._resolvedGrammars.get(t)}loadLanguage(t){var o,l,u,a;if(this.getGrammar(t.name))return;const r=new Set([...this._langMap.values()].filter(c=>{var f;return(f=c.embeddedLangsLazy)==null?void 0:f.includes(t.name)}));this._resolver.addLanguage(t);const i={balancedBracketSelectors:t.balancedBracketSelectors||["*"],unbalancedBracketSelectors:t.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(t.scopeName,t);const s=this.loadGrammarWithConfiguration(t.scopeName,1,i);if(s.name=t.name,this._resolvedGrammars.set(t.name,s),t.aliases&&t.aliases.forEach(c=>{this._alias[c]=t.name}),this._loadedLanguagesCache=null,r.size)for(const c of r)this._resolvedGrammars.delete(c.name),this._loadedLanguagesCache=null,(l=(o=this._syncRegistry)==null?void 0:o._injectionGrammars)==null||l.delete(c.scopeName),(a=(u=this._syncRegistry)==null?void 0:u._grammars)==null||a.delete(c.scopeName),this.loadLanguage(this._langMap.get(c.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(t){for(const s of t)this.resolveEmbeddedLanguages(s);const r=Array.from(this._langGraph.entries()),i=r.filter(([s,o])=>!o);if(i.length){const s=r.filter(([o,l])=>{var u;return l&&((u=l.embeddedLangs)==null?void 0:u.some(a=>i.map(([c])=>c).includes(a)))}).filter(o=>!i.includes(o));throw new At(`Missing languages ${i.map(([o])=>`\`${o}\``).join(", ")}, required by ${s.map(([o])=>`\`${o}\``).join(", ")}`)}for(const[s,o]of r)this._resolver.addLanguage(o);for(const[s,o]of r)this.loadLanguage(o)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(t){if(this._langMap.set(t.name,t),this._langGraph.set(t.name,t),t.embeddedLangs)for(const r of t.embeddedLangs)this._langGraph.set(r,this._langMap.get(r))}}class NR{constructor(e,t){R(this,"_langs",new Map);R(this,"_scopeToLang",new Map);R(this,"_injections",new Map);R(this,"_onigLib");this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},t.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(t=>{this._langs.set(t,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)})}getInjections(e){const t=e.split(".");let r=[];for(let i=1;i<=t.length;i++){const s=t.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let Ls=0;function LR(n){Ls+=1,n.warnings!==!1&&Ls>=10&&Ls%10===0&&console.warn(`[Shiki] ${Ls} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!n.engine)throw new At("`engine` option is required for synchronous mode");const t=(n.langs||[]).flat(1),r=(n.themes||[]).flat(1).map(kp),i=new NR(n.engine,t),s=new $R(i,r,t,n.langAlias);let o;function l(y){g();const x=s.getGrammar(typeof y=="string"?y:y.name);if(!x)throw new At(`Language \`${y}\` not found, you may need to load it first`);return x}function u(y){if(y==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};g();const x=s.getTheme(y);if(!x)throw new At(`Theme \`${y}\` not found, you may need to load it first`);return x}function a(y){g();const x=u(y);o!==y&&(s.setTheme(x),o=y);const w=s.getColorMap();return{theme:x,colorMap:w}}function c(){return g(),s.getLoadedThemes()}function f(){return g(),s.getLoadedLanguages()}function h(...y){g(),s.loadLanguages(y.flat(1))}async function d(...y){return h(await Ev(y))}function p(...y){g();for(const x of y.flat(1))s.loadTheme(x)}async function m(...y){return g(),p(await Ov(y))}function g(){if(e)throw new At("Shiki instance has been disposed")}function b(){e||(e=!0,s.dispose(),Ls-=1)}return{setTheme:a,getTheme:u,getLanguage:l,getLoadedThemes:c,getLoadedLanguages:f,loadLanguage:d,loadLanguageSync:h,loadTheme:m,loadThemeSync:p,dispose:b,[Symbol.dispose]:b}}async function jR(n={}){n.loadWasm;const[e,t,r]=await Promise.all([Ov(n.themes||[]),Ev(n.langs||[]),n.engine||iF(n.loadWasm||rF())]);return LR({...n,themes:e,langs:t,engine:r})}async function qR(n={}){const e=await jR(n);return{getLastGrammarState:(...t)=>CR(e,...t),codeToTokensBase:(t,r)=>vp(e,t,r),codeToTokensWithThemes:(t,r)=>Sv(e,t,r),codeToTokens:(t,r)=>wa(e,t,r),codeToHast:(t,r)=>Da(e,t,r),codeToHtml:(t,r)=>BR(e,t,r),...e,getInternalContext:()=>e}}const Kh=ln({linkify:!0,typographer:!0});(async()=>{const n=await qR({themes:[Sc(()=>import("./vitesse-light-CVO1_9PV.js"),[]),Sc(()=>import("./vitesse-dark-D0r3Knsf.js"),[])],langs:[Sc(()=>import("./javascript-ySlJ1b_l.js"),[])]});Kh.use(L9(n,{themes:{light:"vitesse-light",dark:"vitesse-dark"}}))})();function Gi(n,e=!0){return e?Kh.renderInline(n):Kh.render(n)}var Df={},i1;function VR(){return i1||(i1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.parse=n.enableErrorLogging=n.disableErrorLogging=n.setErrorLogger=void 0;let e=console.error;function t(k){e=k}n.setErrorLogger=t;function r(){e=()=>{}}n.disableErrorLogging=r;function i(){e=console.error}n.enableErrorLogging=i;function s(k){if(k!==void 0){if(k===null)return null;if(k==="")return"";k=k.replace(/\\+$/,C=>C.length%2===0?C:C.slice(0,-1));try{return JSON.parse(k)}catch(C){const[O,L]=k.trimLeft()[0]===":"?o(k,C):o(k,C,b);if(s.lastParseReminding=L,s.onExtraToken&&L.length>0){const B=L.trimRight();s.lastParseReminding=B,B.length>0&&s.onExtraToken(k,O,B)}return O}}}n.parse=s,(function(k){k.onExtraToken=(C,O,L)=>{e("parsed json with extra tokens:",{text:C,data:O,reminding:L})}})(s=n.parse||(n.parse={}));function o(k,C,O){const L=u[k[0]]||O;if(!L)throw e(`no parser registered for ${JSON.stringify(k[0])}:`,{s:k}),C;return L(k,C)}function l(k,C,O){return k[0]==='"'?p(k):k[0]==="'"?g(k):b(k,C,O)}const u={};function a(k){return k.trimLeft()}u[" "]=c,u["\r"]=c,u[`
`]=c,u["	"]=c;function c(k,C){return k=a(k),o(k,C)}u["["]=f;function f(k,C){k=k.substr(1);const O=[];for(k=a(k);k.length>0;){if(k[0]==="]"){k=k.substr(1);break}const L=o(k,C,(B,P)=>b(B,P,[",","]"]));O.push(L[0]),k=L[1],k=a(k),k[0]===","&&(k=k.substring(1),k=a(k))}return[O,k]}for(const k of"0123456789.-".slice())u[k]=h;function h(k){for(let C=0;C<k.length;C++){const O=k[C];if(u[O]===h)continue;const L=k.substring(0,C);return k=k.substring(C),[d(L),k]}return[d(k),""]}function d(k){if(k==="-")return-0;const C=+k;return Number.isNaN(C)?k:C}u['"']=p;function p(k){for(let C=1;C<k.length;C++){const O=k[C];if(O==="\\"){C++;continue}if(O==='"'){const L=m(k.substring(0,C+1));return k=k.substring(C+1),[JSON.parse(L),k]}}return[JSON.parse(m(k)+'"'),""]}function m(k){return k.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}u["'"]=g;function g(k){for(let C=1;C<k.length;C++){const O=k[C];if(O==="\\"){C++;continue}if(O==="'"){const L=m(k.substring(0,C+1));return k=k.substring(C+1),[JSON.parse('"'+L.slice(1,-1)+'"'),k]}}return[JSON.parse('"'+m(k.slice(1))+'"'),""]}function b(k,C,O=[" "]){const L=Math.min(...O.map(T=>{const F=k.indexOf(T);return F===-1?k.length:F})),B=k.substring(0,L).trim(),P=k.substring(L);return[B,P]}u["{"]=y;function y(k,C){k=k.substr(1);const O={};for(k=a(k);k.length>0;){if(k[0]==="}"){k=k.substr(1);break}const L=l(k,C,[":","}"]),B=L[0];if(k=L[1],k=a(k),k[0]!==":"){O[B]=void 0;break}if(k=k.substr(1),k=a(k),k.length===0){O[B]=void 0;break}const P=o(k,C);O[B]=P[0],k=P[1],k=a(k),k[0]===","&&(k=k.substr(1),k=a(k))}return[O,k]}u.t=x;function x(k,C){return A(k,"true",!0,C)}u.f=w;function w(k,C){return A(k,"false",!1,C)}u.n=D;function D(k,C){return A(k,"null",null,C)}function A(k,C,O,L){for(let B=C.length;B>=1;B--)if(k.startsWith(C.slice(0,B)))return[O,k.slice(B)];{const B=JSON.stringify(k.slice(0,C.length));throw e(`unknown token starting with ${B}:`,{s:k}),L}}})(Df)),Df}var Tv=VR();function zR(n){let e=null;try{e=JSON.parse(n.doc.toString())}catch{try{e=Tv.parse(n.doc.toString())}catch{}}const t=Qd(n,Re.JSON);return{data:e,pointers:t}}var UR=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,HR=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,WR=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Af={Space_Separator:UR,ID_Start:HR,ID_Continue:WR},ze={isSpaceSeparator(n){return typeof n=="string"&&Af.Space_Separator.test(n)},isIdStartChar(n){return typeof n=="string"&&(n>="a"&&n<="z"||n>="A"&&n<="Z"||n==="$"||n==="_"||Af.ID_Start.test(n))},isIdContinueChar(n){return typeof n=="string"&&(n>="a"&&n<="z"||n>="A"&&n<="Z"||n>="0"&&n<="9"||n==="$"||n==="_"||n===""||n===""||Af.ID_Continue.test(n))},isDigit(n){return typeof n=="string"&&/[0-9]/.test(n)},isHexDigit(n){return typeof n=="string"&&/[0-9A-Fa-f]/.test(n)}};let Jh,_t,er,Aa,Ir,dn,ot,wp,io;var GR=function(e,t){Jh=String(e),_t="start",er=[],Aa=0,Ir=1,dn=0,ot=void 0,wp=void 0,io=void 0;do ot=KR(),QR[_t]();while(ot.type!=="eof");return typeof t=="function"?Yh({"":io},"",t):io};function Yh(n,e,t){const r=n[e];if(r!=null&&typeof r=="object")if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=String(i),o=Yh(r,s,t);o===void 0?delete r[s]:Object.defineProperty(r,s,{value:o,writable:!0,enumerable:!0,configurable:!0})}else for(const i in r){const s=Yh(r,i,t);s===void 0?delete r[i]:Object.defineProperty(r,i,{value:s,writable:!0,enumerable:!0,configurable:!0})}return t.call(n,e,r)}let ae,oe,Gs,Kn,pe;function KR(){for(ae="default",oe="",Gs=!1,Kn=1;;){pe=sr();const n=Fv[ae]();if(n)return n}}function sr(){if(Jh[Aa])return String.fromCodePoint(Jh.codePointAt(Aa))}function $(){const n=sr();return n===`
`?(Ir++,dn=0):n?dn+=n.length:dn++,n&&(Aa+=n.length),n}const Fv={default(){switch(pe){case"	":case"\v":case"\f":case" ":case"":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":$();return;case"/":$(),ae="comment";return;case void 0:return $(),Se("eof")}if(ze.isSpaceSeparator(pe)){$();return}return Fv[_t]()},comment(){switch(pe){case"*":$(),ae="multiLineComment";return;case"/":$(),ae="singleLineComment";return}throw Ee($())},multiLineComment(){switch(pe){case"*":$(),ae="multiLineCommentAsterisk";return;case void 0:throw Ee($())}$()},multiLineCommentAsterisk(){switch(pe){case"*":$();return;case"/":$(),ae="default";return;case void 0:throw Ee($())}$(),ae="multiLineComment"},singleLineComment(){switch(pe){case`
`:case"\r":case"\u2028":case"\u2029":$(),ae="default";return;case void 0:return $(),Se("eof")}$()},value(){switch(pe){case"{":case"[":return Se("punctuator",$());case"n":return $(),Vr("ull"),Se("null",null);case"t":return $(),Vr("rue"),Se("boolean",!0);case"f":return $(),Vr("alse"),Se("boolean",!1);case"-":case"+":$()==="-"&&(Kn=-1),ae="sign";return;case".":oe=$(),ae="decimalPointLeading";return;case"0":oe=$(),ae="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":oe=$(),ae="decimalInteger";return;case"I":return $(),Vr("nfinity"),Se("numeric",1/0);case"N":return $(),Vr("aN"),Se("numeric",NaN);case'"':case"'":Gs=$()==='"',oe="",ae="string";return}throw Ee($())},identifierNameStartEscape(){if(pe!=="u")throw Ee($());$();const n=Qh();switch(n){case"$":case"_":break;default:if(!ze.isIdStartChar(n))throw s1();break}oe+=n,ae="identifierName"},identifierName(){switch(pe){case"$":case"_":case"":case"":oe+=$();return;case"\\":$(),ae="identifierNameEscape";return}if(ze.isIdContinueChar(pe)){oe+=$();return}return Se("identifier",oe)},identifierNameEscape(){if(pe!=="u")throw Ee($());$();const n=Qh();switch(n){case"$":case"_":case"":case"":break;default:if(!ze.isIdContinueChar(n))throw s1();break}oe+=n,ae="identifierName"},sign(){switch(pe){case".":oe=$(),ae="decimalPointLeading";return;case"0":oe=$(),ae="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":oe=$(),ae="decimalInteger";return;case"I":return $(),Vr("nfinity"),Se("numeric",Kn*(1/0));case"N":return $(),Vr("aN"),Se("numeric",NaN)}throw Ee($())},zero(){switch(pe){case".":oe+=$(),ae="decimalPoint";return;case"e":case"E":oe+=$(),ae="decimalExponent";return;case"x":case"X":oe+=$(),ae="hexadecimal";return}return Se("numeric",Kn*0)},decimalInteger(){switch(pe){case".":oe+=$(),ae="decimalPoint";return;case"e":case"E":oe+=$(),ae="decimalExponent";return}if(ze.isDigit(pe)){oe+=$();return}return Se("numeric",Kn*Number(oe))},decimalPointLeading(){if(ze.isDigit(pe)){oe+=$(),ae="decimalFraction";return}throw Ee($())},decimalPoint(){switch(pe){case"e":case"E":oe+=$(),ae="decimalExponent";return}if(ze.isDigit(pe)){oe+=$(),ae="decimalFraction";return}return Se("numeric",Kn*Number(oe))},decimalFraction(){switch(pe){case"e":case"E":oe+=$(),ae="decimalExponent";return}if(ze.isDigit(pe)){oe+=$();return}return Se("numeric",Kn*Number(oe))},decimalExponent(){switch(pe){case"+":case"-":oe+=$(),ae="decimalExponentSign";return}if(ze.isDigit(pe)){oe+=$(),ae="decimalExponentInteger";return}throw Ee($())},decimalExponentSign(){if(ze.isDigit(pe)){oe+=$(),ae="decimalExponentInteger";return}throw Ee($())},decimalExponentInteger(){if(ze.isDigit(pe)){oe+=$();return}return Se("numeric",Kn*Number(oe))},hexadecimal(){if(ze.isHexDigit(pe)){oe+=$(),ae="hexadecimalInteger";return}throw Ee($())},hexadecimalInteger(){if(ze.isHexDigit(pe)){oe+=$();return}return Se("numeric",Kn*Number(oe))},string(){switch(pe){case"\\":$(),oe+=JR();return;case'"':if(Gs)return $(),Se("string",oe);oe+=$();return;case"'":if(!Gs)return $(),Se("string",oe);oe+=$();return;case`
`:case"\r":throw Ee($());case"\u2028":case"\u2029":XR(pe);break;case void 0:throw Ee($())}oe+=$()},start(){switch(pe){case"{":case"[":return Se("punctuator",$())}ae="value"},beforePropertyName(){switch(pe){case"$":case"_":oe=$(),ae="identifierName";return;case"\\":$(),ae="identifierNameStartEscape";return;case"}":return Se("punctuator",$());case'"':case"'":Gs=$()==='"',ae="string";return}if(ze.isIdStartChar(pe)){oe+=$(),ae="identifierName";return}throw Ee($())},afterPropertyName(){if(pe===":")return Se("punctuator",$());throw Ee($())},beforePropertyValue(){ae="value"},afterPropertyValue(){switch(pe){case",":case"}":return Se("punctuator",$())}throw Ee($())},beforeArrayValue(){if(pe==="]")return Se("punctuator",$());ae="value"},afterArrayValue(){switch(pe){case",":case"]":return Se("punctuator",$())}throw Ee($())},end(){throw Ee($())}};function Se(n,e){return{type:n,value:e,line:Ir,column:dn}}function Vr(n){for(const e of n){if(sr()!==e)throw Ee($());$()}}function JR(){switch(sr()){case"b":return $(),"\b";case"f":return $(),"\f";case"n":return $(),`
`;case"r":return $(),"\r";case"t":return $(),"	";case"v":return $(),"\v";case"0":if($(),ze.isDigit(sr()))throw Ee($());return"\0";case"x":return $(),YR();case"u":return $(),Qh();case`
`:case"\u2028":case"\u2029":return $(),"";case"\r":return $(),sr()===`
`&&$(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Ee($());case void 0:throw Ee($())}return $()}function YR(){let n="",e=sr();if(!ze.isHexDigit(e)||(n+=$(),e=sr(),!ze.isHexDigit(e)))throw Ee($());return n+=$(),String.fromCodePoint(parseInt(n,16))}function Qh(){let n="",e=4;for(;e-- >0;){const t=sr();if(!ze.isHexDigit(t))throw Ee($());n+=$()}return String.fromCodePoint(parseInt(n,16))}const QR={start(){if(ot.type==="eof")throw zr();Cf()},beforePropertyName(){switch(ot.type){case"identifier":case"string":wp=ot.value,_t="afterPropertyName";return;case"punctuator":Xl();return;case"eof":throw zr()}},afterPropertyName(){if(ot.type==="eof")throw zr();_t="beforePropertyValue"},beforePropertyValue(){if(ot.type==="eof")throw zr();Cf()},beforeArrayValue(){if(ot.type==="eof")throw zr();if(ot.type==="punctuator"&&ot.value==="]"){Xl();return}Cf()},afterPropertyValue(){if(ot.type==="eof")throw zr();switch(ot.value){case",":_t="beforePropertyName";return;case"}":Xl()}},afterArrayValue(){if(ot.type==="eof")throw zr();switch(ot.value){case",":_t="beforeArrayValue";return;case"]":Xl()}},end(){}};function Cf(){let n;switch(ot.type){case"punctuator":switch(ot.value){case"{":n={};break;case"[":n=[];break}break;case"null":case"boolean":case"numeric":case"string":n=ot.value;break}if(io===void 0)io=n;else{const e=er[er.length-1];Array.isArray(e)?e.push(n):Object.defineProperty(e,wp,{value:n,writable:!0,enumerable:!0,configurable:!0})}if(n!==null&&typeof n=="object")er.push(n),Array.isArray(n)?_t="beforeArrayValue":_t="beforePropertyName";else{const e=er[er.length-1];e==null?_t="end":Array.isArray(e)?_t="afterArrayValue":_t="afterPropertyValue"}}function Xl(){er.pop();const n=er[er.length-1];n==null?_t="end":Array.isArray(n)?_t="afterArrayValue":_t="afterPropertyValue"}function Ee(n){return Ca(n===void 0?`JSON5: invalid end of input at ${Ir}:${dn}`:`JSON5: invalid character '${Pv(n)}' at ${Ir}:${dn}`)}function zr(){return Ca(`JSON5: invalid end of input at ${Ir}:${dn}`)}function s1(){return dn-=5,Ca(`JSON5: invalid identifier character at ${Ir}:${dn}`)}function XR(n){console.warn(`JSON5: '${Pv(n)}' in strings is not valid ECMAScript; consider escaping`)}function Pv(n){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[n])return e[n];if(n<" "){const t=n.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return n}function Ca(n){const e=new SyntaxError(n);return e.lineNumber=Ir,e.columnNumber=dn,e}var ZR=function(e,t,r){const i=[];let s="",o,l,u="",a;if(t!=null&&typeof t=="object"&&!Array.isArray(t)&&(r=t.space,a=t.quote,t=t.replacer),typeof t=="function")l=t;else if(Array.isArray(t)){o=[];for(const m of t){let g;typeof m=="string"?g=m:(typeof m=="number"||m instanceof String||m instanceof Number)&&(g=String(m)),g!==void 0&&o.indexOf(g)<0&&o.push(g)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),typeof r=="number"?r>0&&(r=Math.min(10,Math.floor(r)),u="          ".substr(0,r)):typeof r=="string"&&(u=r.substr(0,10)),c("",{"":e});function c(m,g){let b=g[m];switch(b!=null&&(typeof b.toJSON5=="function"?b=b.toJSON5(m):typeof b.toJSON=="function"&&(b=b.toJSON(m))),l&&(b=l.call(g,m,b)),b instanceof Number?b=Number(b):b instanceof String?b=String(b):b instanceof Boolean&&(b=b.valueOf()),b){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof b=="string")return f(b);if(typeof b=="number")return String(b);if(typeof b=="object")return Array.isArray(b)?p(b):h(b)}function f(m){const g={"'":.1,'"':.2},b={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let y="";for(let w=0;w<m.length;w++){const D=m[w];switch(D){case"'":case'"':g[D]++,y+=D;continue;case"\0":if(ze.isDigit(m[w+1])){y+="\\x00";continue}}if(b[D]){y+=b[D];continue}if(D<" "){let A=D.charCodeAt(0).toString(16);y+="\\x"+("00"+A).substring(A.length);continue}y+=D}const x=a||Object.keys(g).reduce((w,D)=>g[w]<g[D]?w:D);return y=y.replace(new RegExp(x,"g"),b[x]),x+y+x}function h(m){if(i.indexOf(m)>=0)throw TypeError("Converting circular structure to JSON5");i.push(m);let g=s;s=s+u;let b=o||Object.keys(m),y=[];for(const w of b){const D=c(w,m);if(D!==void 0){let A=d(w)+":";u!==""&&(A+=" "),A+=D,y.push(A)}}let x;if(y.length===0)x="{}";else{let w;if(u==="")w=y.join(","),x="{"+w+"}";else{let D=`,
`+s;w=y.join(D),x=`{
`+s+w+`,
`+g+"}"}}return i.pop(),s=g,x}function d(m){if(m.length===0)return f(m);const g=String.fromCodePoint(m.codePointAt(0));if(!ze.isIdStartChar(g))return f(m);for(let b=g.length;b<m.length;b++)if(!ze.isIdContinueChar(String.fromCodePoint(m.codePointAt(b))))return f(m);return m}function p(m){if(i.indexOf(m)>=0)throw TypeError("Converting circular structure to JSON5");i.push(m);let g=s;s=s+u;let b=[];for(let x=0;x<m.length;x++){const w=c(String(x),m);b.push(w!==void 0?w:"null")}let y;if(b.length===0)y="[]";else if(u==="")y="["+b.join(",")+"]";else{let x=`,
`+s,w=b.join(x);y=`[
`+s+w+`,
`+g+"]"}return i.pop(),s=g,y}};const eI={parse:GR,stringify:ZR};var tI=eI;function nI(n){const e=n.doc.toString();let t=null;try{t=tI.parse(e)}catch{try{t=Tv.parse(e)}catch{}}const r=Qd(n,Re.JSON5);return{data:t,pointers:r}}const Dp=Symbol.for("yaml.alias"),Xh=Symbol.for("yaml.document"),Ar=Symbol.for("yaml.map"),Rv=Symbol.for("yaml.pair"),Vn=Symbol.for("yaml.scalar"),ks=Symbol.for("yaml.seq"),un=Symbol.for("yaml.node.type"),Nr=n=>!!n&&typeof n=="object"&&n[un]===Dp,bi=n=>!!n&&typeof n=="object"&&n[un]===Xh,ws=n=>!!n&&typeof n=="object"&&n[un]===Ar,Be=n=>!!n&&typeof n=="object"&&n[un]===Rv,Ae=n=>!!n&&typeof n=="object"&&n[un]===Vn,Ds=n=>!!n&&typeof n=="object"&&n[un]===ks;function Ne(n){if(n&&typeof n=="object")switch(n[un]){case Ar:case ks:return!0}return!1}function je(n){if(n&&typeof n=="object")switch(n[un]){case Dp:case Ar:case Vn:case ks:return!0}return!1}const Iv=n=>(Ae(n)||Ne(n))&&!!n.anchor,Mt=Symbol("break visit"),Mv=Symbol("skip children"),Ln=Symbol("remove node");function yi(n,e){const t=Bv(e);bi(n)?Ri(null,n.contents,t,Object.freeze([n]))===Ln&&(n.contents=null):Ri(null,n,t,Object.freeze([]))}yi.BREAK=Mt;yi.SKIP=Mv;yi.REMOVE=Ln;function Ri(n,e,t,r){const i=$v(n,e,t,r);if(je(i)||Be(i))return Nv(n,r,i),Ri(n,i,t,r);if(typeof i!="symbol"){if(Ne(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){const o=Ri(s,e.items[s],t,r);if(typeof o=="number")s=o-1;else{if(o===Mt)return Mt;o===Ln&&(e.items.splice(s,1),s-=1)}}}else if(Be(e)){r=Object.freeze(r.concat(e));const s=Ri("key",e.key,t,r);if(s===Mt)return Mt;s===Ln&&(e.key=null);const o=Ri("value",e.value,t,r);if(o===Mt)return Mt;o===Ln&&(e.value=null)}}return i}async function lc(n,e){const t=Bv(e);bi(n)?await Ii(null,n.contents,t,Object.freeze([n]))===Ln&&(n.contents=null):await Ii(null,n,t,Object.freeze([]))}lc.BREAK=Mt;lc.SKIP=Mv;lc.REMOVE=Ln;async function Ii(n,e,t,r){const i=await $v(n,e,t,r);if(je(i)||Be(i))return Nv(n,r,i),Ii(n,i,t,r);if(typeof i!="symbol"){if(Ne(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){const o=await Ii(s,e.items[s],t,r);if(typeof o=="number")s=o-1;else{if(o===Mt)return Mt;o===Ln&&(e.items.splice(s,1),s-=1)}}}else if(Be(e)){r=Object.freeze(r.concat(e));const s=await Ii("key",e.key,t,r);if(s===Mt)return Mt;s===Ln&&(e.key=null);const o=await Ii("value",e.value,t,r);if(o===Mt)return Mt;o===Ln&&(e.value=null)}}return i}function Bv(n){return typeof n=="object"&&(n.Collection||n.Node||n.Value)?Object.assign({Alias:n.Node,Map:n.Node,Scalar:n.Node,Seq:n.Node},n.Value&&{Map:n.Value,Scalar:n.Value,Seq:n.Value},n.Collection&&{Map:n.Collection,Seq:n.Collection},n):n}function $v(n,e,t,r){var i,s,o,l,u;if(typeof t=="function")return t(n,e,r);if(ws(e))return(i=t.Map)==null?void 0:i.call(t,n,e,r);if(Ds(e))return(s=t.Seq)==null?void 0:s.call(t,n,e,r);if(Be(e))return(o=t.Pair)==null?void 0:o.call(t,n,e,r);if(Ae(e))return(l=t.Scalar)==null?void 0:l.call(t,n,e,r);if(Nr(e))return(u=t.Alias)==null?void 0:u.call(t,n,e,r)}function Nv(n,e,t){const r=e[e.length-1];if(Ne(r))r.items[n]=t;else if(Be(r))n==="key"?r.key=t:r.value=t;else if(bi(r))r.contents=t;else{const i=Nr(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const rI={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},iI=n=>n.replace(/[!,[\]{}]/g,e=>rI[e]);class kt{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},kt.defaultYaml,e),this.tags=Object.assign({},kt.defaultTags,t)}clone(){const e=new kt(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new kt(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:kt.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},kt.defaultTags);break}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:kt.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},kt.defaultTags),this.atNextDocument=!1);const r=e.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(t(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[s,o]=r;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return t(0,"%YAML directive should contain exactly one part"),!1;const[s]=r;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{const o=/^\d+\.\d+$/.test(s);return t(6,`Unsupported YAML version ${s}`,o),!1}}default:return t(0,`Unknown directive ${i}`,!0),!1}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!")return t(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&t("Verbatim tags must end with a >"),o)}const[,r,i]=e.match(/^(.*!)([^!]*)$/s);i||t(`The ${e} tag has no suffix`);const s=this.tags[r];if(s)try{return s+decodeURIComponent(i)}catch(o){return t(String(o)),null}return r==="!"?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,r]of Object.entries(this.tags))if(e.startsWith(r))return t+iI(e.substring(r.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(e&&r.length>0&&je(e.contents)){const s={};yi(e.contents,(o,l)=>{je(l)&&l.tag&&(s[l.tag]=!0)}),i=Object.keys(s)}else i=[];for(const[s,o]of r)s==="!!"&&o==="tag:yaml.org,2002:"||(!e||i.some(l=>l.startsWith(o)))&&t.push(`%TAG ${s} ${o}`);return t.join(`
`)}}kt.defaultYaml={explicit:!1,version:"1.2"};kt.defaultTags={"!!":"tag:yaml.org,2002:"};function Lv(n){if(/[\x00-\x19\s,[\]{}]/.test(n)){const t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(n)}`;throw new Error(t)}return!0}function jv(n){const e=new Set;return yi(n,{Value(t,r){r.anchor&&e.add(r.anchor)}}),e}function qv(n,e){for(let t=1;;++t){const r=`${n}${t}`;if(!e.has(r))return r}}function sI(n,e){const t=[],r=new Map;let i=null;return{onAnchor:s=>{t.push(s),i??(i=jv(n));const o=qv(e,i);return i.add(o),o},setAnchors:()=>{for(const s of t){const o=r.get(s);if(typeof o=="object"&&o.anchor&&(Ae(o.node)||Ne(o.node)))o.node.anchor=o.anchor;else{const l=new Error("Failed to resolve repeated object (this should not happen)");throw l.source=s,l}}},sourceObjects:r}}function Mi(n,e,t,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,s=r.length;i<s;++i){const o=r[i],l=Mi(n,r,String(i),o);l===void 0?delete r[i]:l!==o&&(r[i]=l)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const s=r.get(i),o=Mi(n,r,i,s);o===void 0?r.delete(i):o!==s&&r.set(i,o)}else if(r instanceof Set)for(const i of Array.from(r)){const s=Mi(n,r,i,i);s===void 0?r.delete(i):s!==i&&(r.delete(i),r.add(s))}else for(const[i,s]of Object.entries(r)){const o=Mi(n,r,i,s);o===void 0?delete r[i]:o!==s&&(r[i]=o)}return n.call(e,t,r)}function rn(n,e,t){if(Array.isArray(n))return n.map((r,i)=>rn(r,String(i),t));if(n&&typeof n.toJSON=="function"){if(!t||!Iv(n))return n.toJSON(e,t);const r={aliasCount:0,count:1,res:void 0};t.anchors.set(n,r),t.onCreate=s=>{r.res=s,delete t.onCreate};const i=n.toJSON(e,t);return t.onCreate&&t.onCreate(i),i}return typeof n=="bigint"&&!(t!=null&&t.keep)?Number(n):n}class Ap{constructor(e){Object.defineProperty(this,un,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:r,onAnchor:i,reviver:s}={}){if(!bi(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},l=rn(this,"",o);if(typeof i=="function")for(const{count:u,res:a}of o.anchors.values())i(a,u);return typeof s=="function"?Mi(s,{"":l},"",l):l}}class uc extends Ap{constructor(e){super(Dp),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,t){let r;t!=null&&t.aliasResolveCache?r=t.aliasResolveCache:(r=[],yi(e,{Node:(s,o)=>{(Nr(o)||Iv(o))&&r.push(o)}}),t&&(t.aliasResolveCache=r));let i;for(const s of r){if(s===this)break;s.anchor===this.source&&(i=s)}return i}toJSON(e,t){if(!t)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:s}=t,o=this.resolve(i,t);if(!o){const u=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(u)}let l=r.get(o);if(l||(rn(o,null,t),l=r.get(o)),!l||l.res===void 0){const u="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(u)}if(s>=0&&(l.count+=1,l.aliasCount===0&&(l.aliasCount=Eu(i,o,r)),l.count*l.aliasCount>s)){const u="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(u)}return l.res}toString(e,t,r){const i=`*${this.source}`;if(e){if(Lv(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(e.implicitKey)return`${i} `}return i}}function Eu(n,e,t){if(Nr(e)){const r=e.resolve(n),i=t&&r&&t.get(r);return i?i.count*i.aliasCount:0}else if(Ne(e)){let r=0;for(const i of e.items){const s=Eu(n,i,t);s>r&&(r=s)}return r}else if(Be(e)){const r=Eu(n,e.key,t),i=Eu(n,e.value,t);return Math.max(r,i)}return 1}const Vv=n=>!n||typeof n!="function"&&typeof n!="object";class se extends Ap{constructor(e){super(Vn),this.value=e}toJSON(e,t){return t!=null&&t.keep?this.value:rn(this.value,e,t)}toString(){return String(this.value)}}se.BLOCK_FOLDED="BLOCK_FOLDED";se.BLOCK_LITERAL="BLOCK_LITERAL";se.PLAIN="PLAIN";se.QUOTE_DOUBLE="QUOTE_DOUBLE";se.QUOTE_SINGLE="QUOTE_SINGLE";const oI="tag:yaml.org,2002:";function lI(n,e,t){if(e){const r=t.filter(s=>s.tag===e),i=r.find(s=>!s.format)??r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return t.find(r=>{var i;return((i=r.identify)==null?void 0:i.call(r,n))&&!r.format})}function Mo(n,e,t){var f,h,d;if(bi(n)&&(n=n.contents),je(n))return n;if(Be(n)){const p=(h=(f=t.schema[Ar]).createNode)==null?void 0:h.call(f,t.schema,null,t);return p.items.push(n),p}(n instanceof String||n instanceof Number||n instanceof Boolean||typeof BigInt<"u"&&n instanceof BigInt)&&(n=n.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:s,schema:o,sourceObjects:l}=t;let u;if(r&&n&&typeof n=="object"){if(u=l.get(n),u)return u.anchor??(u.anchor=i(n)),new uc(u.anchor);u={anchor:null,node:null},l.set(n,u)}e!=null&&e.startsWith("!!")&&(e=oI+e.slice(2));let a=lI(n,e,o.tags);if(!a){if(n&&typeof n.toJSON=="function"&&(n=n.toJSON()),!n||typeof n!="object"){const p=new se(n);return u&&(u.node=p),p}a=n instanceof Map?o[Ar]:Symbol.iterator in Object(n)?o[ks]:o[Ar]}s&&(s(a),delete t.onTagObj);const c=a!=null&&a.createNode?a.createNode(t.schema,n,t):typeof((d=a==null?void 0:a.nodeClass)==null?void 0:d.from)=="function"?a.nodeClass.from(t.schema,n,t):new se(n);return e?c.tag=e:a.default||(c.tag=a.tag),u&&(u.node=c),c}function _a(n,e,t){let r=t;for(let i=e.length-1;i>=0;--i){const s=e[i];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const o=[];o[s]=r,r=o}else r=new Map([[s,r]])}return Mo(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:n,sourceObjects:new Map})}const Ks=n=>n==null||typeof n=="object"&&!!n[Symbol.iterator]().next().done;class zv extends Ap{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(r=>je(r)||Be(r)?r.clone(e):r),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Ks(e))this.add(t);else{const[r,...i]=e,s=this.get(r,!0);if(Ne(s))s.addIn(i,t);else if(s===void 0&&this.schema)this.set(r,_a(this.schema,i,t));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(e){const[t,...r]=e;if(r.length===0)return this.delete(t);const i=this.get(t,!0);if(Ne(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${r}`)}getIn(e,t){const[r,...i]=e,s=this.get(r,!0);return i.length===0?!t&&Ae(s)?s.value:s:Ne(s)?s.getIn(i,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!Be(t))return!1;const r=t.value;return r==null||e&&Ae(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[t,...r]=e;if(r.length===0)return this.has(t);const i=this.get(t,!0);return Ne(i)?i.hasIn(r):!1}setIn(e,t){const[r,...i]=e;if(i.length===0)this.set(r,t);else{const s=this.get(r,!0);if(Ne(s))s.setIn(i,t);else if(s===void 0&&this.schema)this.set(r,_a(this.schema,i,t));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}const uI=n=>n.replace(/^(?!$)(?: $)?/gm,"#");function rr(n,e){return/^\n+$/.test(n)?n.substring(1):e?n.replace(/^(?! *$)/gm,e):n}const ni=(n,e,t)=>n.endsWith(`
`)?rr(t,e):t.includes(`
`)?`
`+rr(t,e):(n.endsWith(" ")?"":" ")+t,Uv="flow",Zh="block",Ou="quoted";function ac(n,e,t="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:s=20,onFold:o,onOverflow:l}={}){if(!i||i<0)return n;i<s&&(s=0);const u=Math.max(1+s,1+i-e.length);if(n.length<=u)return n;const a=[],c={};let f=i-e.length;typeof r=="number"&&(r>i-Math.max(2,s)?a.push(0):f=i-r);let h,d,p=!1,m=-1,g=-1,b=-1;t===Zh&&(m=o1(n,m,e.length),m!==-1&&(f=m+u));for(let x;x=n[m+=1];){if(t===Ou&&x==="\\"){switch(g=m,n[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}b=m}if(x===`
`)t===Zh&&(m=o1(n,m,e.length)),f=m+e.length+u,h=void 0;else{if(x===" "&&d&&d!==" "&&d!==`
`&&d!=="	"){const w=n[m+1];w&&w!==" "&&w!==`
`&&w!=="	"&&(h=m)}if(m>=f)if(h)a.push(h),f=h+u,h=void 0;else if(t===Ou){for(;d===" "||d==="	";)d=x,x=n[m+=1],p=!0;const w=m>b+1?m-2:g-1;if(c[w])return n;a.push(w),c[w]=!0,f=w+u,h=void 0}else p=!0}d=x}if(p&&l&&l(),a.length===0)return n;o&&o();let y=n.slice(0,a[0]);for(let x=0;x<a.length;++x){const w=a[x],D=a[x+1]||n.length;w===0?y=`
${e}${n.slice(0,D)}`:(t===Ou&&c[w]&&(y+=`${n[w]}\\`),y+=`
${e}${n.slice(w+1,D)}`)}return y}function o1(n,e,t){let r=e,i=e+1,s=n[i];for(;s===" "||s==="	";)if(e<i+t)s=n[++e];else{do s=n[++e];while(s&&s!==`
`);r=e,i=e+1,s=n[i]}return r}const cc=(n,e)=>({indentAtStart:e?n.indent.length:n.indentAtStart,lineWidth:n.options.lineWidth,minContentWidth:n.options.minContentWidth}),fc=n=>/^(%|---|\.\.\.)/m.test(n);function aI(n,e,t){if(!e||e<0)return!1;const r=e-t,i=n.length;if(i<=r)return!1;for(let s=0,o=0;s<i;++s)if(n[s]===`
`){if(s-o>r)return!0;if(o=s+1,i-o<=r)return!1}return!0}function so(n,e){const t=JSON.stringify(n);if(e.options.doubleQuotedAsJSON)return t;const{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(fc(n)?"  ":"");let o="",l=0;for(let u=0,a=t[u];a;a=t[++u])if(a===" "&&t[u+1]==="\\"&&t[u+2]==="n"&&(o+=t.slice(l,u)+"\\ ",u+=1,l=u,a="\\"),a==="\\")switch(t[u+1]){case"u":{o+=t.slice(l,u);const c=t.substr(u+2,4);switch(c){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:c.substr(0,2)==="00"?o+="\\x"+c.substr(2):o+=t.substr(u,6)}u+=5,l=u+1}break;case"n":if(r||t[u+2]==='"'||t.length<i)u+=1;else{for(o+=t.slice(l,u)+`

`;t[u+2]==="\\"&&t[u+3]==="n"&&t[u+4]!=='"';)o+=`
`,u+=2;o+=s,t[u+2]===" "&&(o+="\\"),u+=1,l=u+1}break;default:u+=1}return o=l?o+t.slice(l):t,r?o:ac(o,s,Ou,cc(e,!1))}function ed(n,e){if(e.options.singleQuote===!1||e.implicitKey&&n.includes(`
`)||/[ \t]\n|\n[ \t]/.test(n))return so(n,e);const t=e.indent||(fc(n)?"  ":""),r="'"+n.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?r:ac(r,t,Uv,cc(e,!1))}function Bi(n,e){const{singleQuote:t}=e.options;let r;if(t===!1)r=so;else{const i=n.includes('"'),s=n.includes("'");i&&!s?r=ed:s&&!i?r=so:r=t?ed:so}return r(n,e)}let td;try{td=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{td=/\n+(?!\n|$)/g}function Tu({comment:n,type:e,value:t},r,i,s){const{blockQuote:o,commentString:l,lineWidth:u}=r.options;if(!o||/\n[\t ]+$/.test(t))return Bi(t,r);const a=r.indent||(r.forceBlockIndent||fc(t)?"  ":""),c=o==="literal"?!0:o==="folded"||e===se.BLOCK_FOLDED?!1:e===se.BLOCK_LITERAL?!0:!aI(t,u,a.length);if(!t)return c?`|
`:`>
`;let f,h;for(h=t.length;h>0;--h){const D=t[h-1];if(D!==`
`&&D!=="	"&&D!==" ")break}let d=t.substring(h);const p=d.indexOf(`
`);p===-1?f="-":t===d||p!==d.length-1?(f="+",s&&s()):f="",d&&(t=t.slice(0,-d.length),d[d.length-1]===`
`&&(d=d.slice(0,-1)),d=d.replace(td,`$&${a}`));let m=!1,g,b=-1;for(g=0;g<t.length;++g){const D=t[g];if(D===" ")m=!0;else if(D===`
`)b=g;else break}let y=t.substring(0,b<g?b+1:g);y&&(t=t.substring(y.length),y=y.replace(/\n+/g,`$&${a}`));let w=(m?a?"2":"1":"")+f;if(n&&(w+=" "+l(n.replace(/ ?[\r\n]+/g," ")),i&&i()),!c){const D=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`);let A=!1;const k=cc(r,!0);o!=="folded"&&e!==se.BLOCK_FOLDED&&(k.onOverflow=()=>{A=!0});const C=ac(`${y}${D}${d}`,a,Zh,k);if(!A)return`>${w}
${a}${C}`}return t=t.replace(/\n+/g,`$&${a}`),`|${w}
${a}${y}${t}${d}`}function cI(n,e,t,r){const{type:i,value:s}=n,{actualString:o,implicitKey:l,indent:u,indentStep:a,inFlow:c}=e;if(l&&s.includes(`
`)||c&&/[[\]{},]/.test(s))return Bi(s,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return l||c||!s.includes(`
`)?Bi(s,e):Tu(n,e,t,r);if(!l&&!c&&i!==se.PLAIN&&s.includes(`
`))return Tu(n,e,t,r);if(fc(s)){if(u==="")return e.forceBlockIndent=!0,Tu(n,e,t,r);if(l&&u===a)return Bi(s,e)}const f=s.replace(/\n+/g,`$&
${u}`);if(o){const h=m=>{var g;return m.default&&m.tag!=="tag:yaml.org,2002:str"&&((g=m.test)==null?void 0:g.test(f))},{compat:d,tags:p}=e.doc.schema;if(p.some(h)||d!=null&&d.some(h))return Bi(s,e)}return l?f:ac(f,u,Uv,cc(e,!1))}function hl(n,e,t,r){const{implicitKey:i,inFlow:s}=e,o=typeof n.value=="string"?n:Object.assign({},n,{value:String(n.value)});let{type:l}=n;l!==se.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(l=se.QUOTE_DOUBLE);const u=c=>{switch(c){case se.BLOCK_FOLDED:case se.BLOCK_LITERAL:return i||s?Bi(o.value,e):Tu(o,e,t,r);case se.QUOTE_DOUBLE:return so(o.value,e);case se.QUOTE_SINGLE:return ed(o.value,e);case se.PLAIN:return cI(o,e,t,r);default:return null}};let a=u(l);if(a===null){const{defaultKeyType:c,defaultStringType:f}=e.options,h=i&&c||f;if(a=u(h),a===null)throw new Error(`Unsupported default string type ${h}`)}return a}function Hv(n,e){const t=Object.assign({blockQuote:!0,commentString:uI,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},n.schema.toStringOptions,e);let r;switch(t.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:n,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:r,options:t}}function fI(n,e){var i;if(e.tag){const s=n.filter(o=>o.tag===e.tag);if(s.length>0)return s.find(o=>o.format===e.format)??s[0]}let t,r;if(Ae(e)){r=e.value;let s=n.filter(o=>{var l;return(l=o.identify)==null?void 0:l.call(o,r)});if(s.length>1){const o=s.filter(l=>l.test);o.length>0&&(s=o)}t=s.find(o=>o.format===e.format)??s.find(o=>!o.format)}else r=e,t=n.find(s=>s.nodeClass&&r instanceof s.nodeClass);if(!t){const s=((i=r==null?void 0:r.constructor)==null?void 0:i.name)??(r===null?"null":typeof r);throw new Error(`Tag not resolved for ${s} value`)}return t}function hI(n,e,{anchors:t,doc:r}){if(!r.directives)return"";const i=[],s=(Ae(n)||Ne(n))&&n.anchor;s&&Lv(s)&&(t.add(s),i.push(`&${s}`));const o=n.tag??(e.default?null:e.tag);return o&&i.push(r.directives.tagString(o)),i.join(" ")}function us(n,e,t,r){var u;if(Be(n))return n.toString(e,t,r);if(Nr(n)){if(e.doc.directives)return n.toString(e);if((u=e.resolvedAliases)!=null&&u.has(n))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(n):e.resolvedAliases=new Set([n]),n=n.resolve(e.doc)}let i;const s=je(n)?n:e.doc.createNode(n,{onTagObj:a=>i=a});i??(i=fI(e.doc.schema.tags,s));const o=hI(s,i,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const l=typeof i.stringify=="function"?i.stringify(s,e,t,r):Ae(s)?hl(s,e,t,r):s.toString(e,t,r);return o?Ae(s)||l[0]==="{"||l[0]==="["?`${o} ${l}`:`${o}
${e.indent}${l}`:l}function dI({key:n,value:e},t,r,i){const{allNullValues:s,doc:o,indent:l,indentStep:u,options:{commentString:a,indentSeq:c,simpleKeys:f}}=t;let h=je(n)&&n.comment||null;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Ne(n)||!je(n)&&typeof n=="object"){const k="With simple keys, collection cannot be used as a key value";throw new Error(k)}}let d=!f&&(!n||h&&e==null&&!t.inFlow||Ne(n)||(Ae(n)?n.type===se.BLOCK_FOLDED||n.type===se.BLOCK_LITERAL:typeof n=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!d&&(f||!s),indent:l+u});let p=!1,m=!1,g=us(n,t,()=>p=!0,()=>m=!0);if(!d&&!t.inFlow&&g.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(t.inFlow){if(s||e==null)return p&&r&&r(),g===""?"?":d?`? ${g}`:g}else if(s&&!f||e==null&&d)return g=`? ${g}`,h&&!p?g+=ni(g,t.indent,a(h)):m&&i&&i(),g;p&&(h=null),d?(h&&(g+=ni(g,t.indent,a(h))),g=`? ${g}
${l}:`):(g=`${g}:`,h&&(g+=ni(g,t.indent,a(h))));let b,y,x;je(e)?(b=!!e.spaceBefore,y=e.commentBefore,x=e.comment):(b=!1,y=null,x=null,e&&typeof e=="object"&&(e=o.createNode(e))),t.implicitKey=!1,!d&&!h&&Ae(e)&&(t.indentAtStart=g.length+1),m=!1,!c&&u.length>=2&&!t.inFlow&&!d&&Ds(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let w=!1;const D=us(e,t,()=>w=!0,()=>m=!0);let A=" ";if(h||b||y){if(A=b?`
`:"",y){const k=a(y);A+=`
${rr(k,t.indent)}`}D===""&&!t.inFlow?A===`
`&&(A=`

`):A+=`
${t.indent}`}else if(!d&&Ne(e)){const k=D[0],C=D.indexOf(`
`),O=C!==-1,L=t.inFlow??e.flow??e.items.length===0;if(O||!L){let B=!1;if(O&&(k==="&"||k==="!")){let P=D.indexOf(" ");k==="&"&&P!==-1&&P<C&&D[P+1]==="!"&&(P=D.indexOf(" ",P+1)),(P===-1||C<P)&&(B=!0)}B||(A=`
${t.indent}`)}}else(D===""||D[0]===`
`)&&(A="");return g+=A+D,t.inFlow?w&&r&&r():x&&!w?g+=ni(g,t.indent,a(x)):m&&i&&i(),g}function Wv(n,e){(n==="debug"||n==="warn")&&console.warn(e)}const Zl="<<",or={identify:n=>n===Zl||typeof n=="symbol"&&n.description===Zl,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new se(Symbol(Zl)),{addToJSMap:Gv}),stringify:()=>Zl},pI=(n,e)=>(or.identify(e)||Ae(e)&&(!e.type||e.type===se.PLAIN)&&or.identify(e.value))&&(n==null?void 0:n.doc.schema.tags.some(t=>t.tag===or.tag&&t.default));function Gv(n,e,t){if(t=n&&Nr(t)?t.resolve(n.doc):t,Ds(t))for(const r of t.items)_f(n,e,r);else if(Array.isArray(t))for(const r of t)_f(n,e,r);else _f(n,e,t)}function _f(n,e,t){const r=n&&Nr(t)?t.resolve(n.doc):t;if(!ws(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,n,Map);for(const[s,o]of i)e instanceof Map?e.has(s)||e.set(s,o):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function Kv(n,e,{key:t,value:r}){if(je(t)&&t.addToJSMap)t.addToJSMap(n,e,r);else if(pI(n,t))Gv(n,e,r);else{const i=rn(t,"",n);if(e instanceof Map)e.set(i,rn(r,i,n));else if(e instanceof Set)e.add(i);else{const s=mI(t,i,n),o=rn(r,s,n);s in e?Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[s]=o}}return e}function mI(n,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(je(n)&&(t!=null&&t.doc)){const r=Hv(t.doc,{});r.anchors=new Set;for(const s of t.anchors.keys())r.anchors.add(s.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=n.toString(r);if(!t.mapKeyWarned){let s=JSON.stringify(i);s.length>40&&(s=s.substring(0,36)+'..."'),Wv(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return i}return JSON.stringify(e)}function Cp(n,e,t){const r=Mo(n,void 0,t),i=Mo(e,void 0,t);return new bt(r,i)}class bt{constructor(e,t=null){Object.defineProperty(this,un,{value:Rv}),this.key=e,this.value=t}clone(e){let{key:t,value:r}=this;return je(t)&&(t=t.clone(e)),je(r)&&(r=r.clone(e)),new bt(t,r)}toJSON(e,t){const r=t!=null&&t.mapAsMap?new Map:{};return Kv(t,r,this)}toString(e,t,r){return e!=null&&e.doc?dI(this,e,t,r):JSON.stringify(this)}}function Jv(n,e,t){return(e.inFlow??n.flow?bI:gI)(n,e,t)}function gI({comment:n,items:e},t,{blockItemPrefix:r,flowChars:i,itemIndent:s,onChompKeep:o,onComment:l}){const{indent:u,options:{commentString:a}}=t,c=Object.assign({},t,{indent:s,type:null});let f=!1;const h=[];for(let p=0;p<e.length;++p){const m=e[p];let g=null;if(je(m))!f&&m.spaceBefore&&h.push(""),Sa(t,h,m.commentBefore,f),m.comment&&(g=m.comment);else if(Be(m)){const y=je(m.key)?m.key:null;y&&(!f&&y.spaceBefore&&h.push(""),Sa(t,h,y.commentBefore,f))}f=!1;let b=us(m,c,()=>g=null,()=>f=!0);g&&(b+=ni(b,s,a(g))),f&&g&&(f=!1),h.push(r+b)}let d;if(h.length===0)d=i.start+i.end;else{d=h[0];for(let p=1;p<h.length;++p){const m=h[p];d+=m?`
${u}${m}`:`
`}}return n?(d+=`
`+rr(a(n),u),l&&l()):f&&o&&o(),d}function bI({items:n},e,{flowChars:t,itemIndent:r}){const{indent:i,indentStep:s,flowCollectionPadding:o,options:{commentString:l}}=e;r+=s;const u=Object.assign({},e,{indent:r,inFlow:!0,type:null});let a=!1,c=0;const f=[];for(let p=0;p<n.length;++p){const m=n[p];let g=null;if(je(m))m.spaceBefore&&f.push(""),Sa(e,f,m.commentBefore,!1),m.comment&&(g=m.comment);else if(Be(m)){const y=je(m.key)?m.key:null;y&&(y.spaceBefore&&f.push(""),Sa(e,f,y.commentBefore,!1),y.comment&&(a=!0));const x=je(m.value)?m.value:null;x?(x.comment&&(g=x.comment),x.commentBefore&&(a=!0)):m.value==null&&(y!=null&&y.comment)&&(g=y.comment)}g&&(a=!0);let b=us(m,u,()=>g=null);p<n.length-1&&(b+=","),g&&(b+=ni(b,r,l(g))),!a&&(f.length>c||b.includes(`
`))&&(a=!0),f.push(b),c=f.length}const{start:h,end:d}=t;if(f.length===0)return h+d;if(!a){const p=f.reduce((m,g)=>m+g.length+2,2);a=e.options.lineWidth>0&&p>e.options.lineWidth}if(a){let p=h;for(const m of f)p+=m?`
${s}${i}${m}`:`
`;return`${p}
${i}${d}`}else return`${h}${o}${f.join(" ")}${o}${d}`}function Sa({indent:n,options:{commentString:e}},t,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const s=rr(e(r),n);t.push(s.trimStart())}}function ri(n,e){const t=Ae(e)?e.value:e;for(const r of n)if(Be(r)&&(r.key===e||r.key===t||Ae(r.key)&&r.key.value===t))return r}class Ht extends zv{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Ar,e),this.items=[]}static from(e,t,r){const{keepUndefined:i,replacer:s}=r,o=new this(e),l=(u,a)=>{if(typeof s=="function")a=s.call(t,u,a);else if(Array.isArray(s)&&!s.includes(u))return;(a!==void 0||i)&&o.items.push(Cp(u,a,r))};if(t instanceof Map)for(const[u,a]of t)l(u,a);else if(t&&typeof t=="object")for(const u of Object.keys(t))l(u,t[u]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,t){var o;let r;Be(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new bt(e,e==null?void 0:e.value):r=new bt(e.key,e.value);const i=ri(this.items,r.key),s=(o=this.schema)==null?void 0:o.sortMapEntries;if(i){if(!t)throw new Error(`Key ${r.key} already set`);Ae(i.value)&&Vv(r.value)?i.value.value=r.value:i.value=r.value}else if(s){const l=this.items.findIndex(u=>s(r,u)<0);l===-1?this.items.push(r):this.items.splice(l,0,r)}else this.items.push(r)}delete(e){const t=ri(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){const r=ri(this.items,e),i=r==null?void 0:r.value;return(!t&&Ae(i)?i.value:i)??void 0}has(e){return!!ri(this.items,e)}set(e,t){this.add(new bt(e,t),!0)}toJSON(e,t,r){const i=r?new r:t!=null&&t.mapAsMap?new Map:{};t!=null&&t.onCreate&&t.onCreate(i);for(const s of this.items)Kv(t,i,s);return i}toString(e,t,r){if(!e)return JSON.stringify(this);for(const i of this.items)if(!Be(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Jv(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:t})}}const As={collection:"map",default:!0,nodeClass:Ht,tag:"tag:yaml.org,2002:map",resolve(n,e){return ws(n)||e("Expected a mapping for this tag"),n},createNode:(n,e,t)=>Ht.from(n,e,t)};class Mr extends zv{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(ks,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=eu(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){const r=eu(e);if(typeof r!="number")return;const i=this.items[r];return!t&&Ae(i)?i.value:i}has(e){const t=eu(e);return typeof t=="number"&&t<this.items.length}set(e,t){const r=eu(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[r];Ae(i)&&Vv(t)?i.value=t:this.items[r]=t}toJSON(e,t){const r=[];t!=null&&t.onCreate&&t.onCreate(r);let i=0;for(const s of this.items)r.push(rn(s,String(i++),t));return r}toString(e,t,r){return e?Jv(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:t}):JSON.stringify(this)}static from(e,t,r){const{replacer:i}=r,s=new this(e);if(t&&Symbol.iterator in Object(t)){let o=0;for(let l of t){if(typeof i=="function"){const u=t instanceof Set?l:String(o++);l=i.call(t,u,l)}s.items.push(Mo(l,void 0,r))}}return s}}function eu(n){let e=Ae(n)?n.value:n;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Cs={collection:"seq",default:!0,nodeClass:Mr,tag:"tag:yaml.org,2002:seq",resolve(n,e){return Ds(n)||e("Expected a sequence for this tag"),n},createNode:(n,e,t)=>Mr.from(n,e,t)},hc={identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify(n,e,t,r){return e=Object.assign({actualString:!0},e),hl(n,e,t,r)}},dc={identify:n=>n==null,createNode:()=>new se(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new se(null),stringify:({source:n},e)=>typeof n=="string"&&dc.test.test(n)?n:e.options.nullStr},_p={identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:n=>new se(n[0]==="t"||n[0]==="T"),stringify({source:n,value:e},t){if(n&&_p.test.test(n)){const r=n[0]==="t"||n[0]==="T";if(e===r)return n}return e?t.options.trueStr:t.options.falseStr}};function yn({format:n,minFractionDigits:e,tag:t,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let s=JSON.stringify(r);if(!n&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let l=e-(s.length-o-1);for(;l-- >0;)s+="0"}return s}const Yv={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:yn},Qv={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n),stringify(n){const e=Number(n.value);return isFinite(e)?e.toExponential():yn(n)}},Xv={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(n){const e=new se(parseFloat(n)),t=n.indexOf(".");return t!==-1&&n[n.length-1]==="0"&&(e.minFractionDigits=n.length-t-1),e},stringify:yn},pc=n=>typeof n=="bigint"||Number.isInteger(n),Sp=(n,e,t,{intAsBigInt:r})=>r?BigInt(n):parseInt(n.substring(e),t);function Zv(n,e,t){const{value:r}=n;return pc(r)&&r>=0?t+r.toString(e):yn(n)}const ek={identify:n=>pc(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(n,e,t)=>Sp(n,2,8,t),stringify:n=>Zv(n,8,"0o")},tk={identify:pc,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(n,e,t)=>Sp(n,0,10,t),stringify:yn},nk={identify:n=>pc(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(n,e,t)=>Sp(n,2,16,t),stringify:n=>Zv(n,16,"0x")},yI=[As,Cs,hc,dc,_p,ek,tk,nk,Yv,Qv,Xv];function l1(n){return typeof n=="bigint"||Number.isInteger(n)}const tu=({value:n})=>JSON.stringify(n),xI=[{identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify:tu},{identify:n=>n==null,createNode:()=>new se(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:tu},{identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:n=>n==="true",stringify:tu},{identify:l1,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(n,e,{intAsBigInt:t})=>t?BigInt(n):parseInt(n,10),stringify:({value:n})=>l1(n)?n.toString():JSON.stringify(n)},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:n=>parseFloat(n),stringify:tu}],vI={default:!0,tag:"",test:/^/,resolve(n,e){return e(`Unresolved plain scalar ${JSON.stringify(n)}`),n}},kI=[As,Cs].concat(xI,vI),Ep={identify:n=>n instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(n,e){if(typeof atob=="function"){const t=atob(n.replace(/[\n\r]/g,"")),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),n},stringify({comment:n,type:e,value:t},r,i,s){if(!t)return"";const o=t;let l;if(typeof btoa=="function"){let u="";for(let a=0;a<o.length;++a)u+=String.fromCharCode(o[a]);l=btoa(u)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=se.BLOCK_LITERAL),e!==se.QUOTE_DOUBLE){const u=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),a=Math.ceil(l.length/u),c=new Array(a);for(let f=0,h=0;f<a;++f,h+=u)c[f]=l.substr(h,u);l=c.join(e===se.BLOCK_LITERAL?`
`:" ")}return hl({comment:n,type:e,value:l},r,i,s)}};function rk(n,e){if(Ds(n))for(let t=0;t<n.items.length;++t){let r=n.items[t];if(!Be(r)){if(ws(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");const i=r.items[0]||new bt(new se(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const s=i.value??i.key;s.comment=s.comment?`${r.comment}
${s.comment}`:r.comment}r=i}n.items[t]=Be(r)?r:new bt(r)}}else e("Expected a sequence for this tag");return n}function ik(n,e,t){const{replacer:r}=t,i=new Mr(n);i.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof r=="function"&&(o=r.call(e,String(s++),o));let l,u;if(Array.isArray(o))if(o.length===2)l=o[0],u=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const a=Object.keys(o);if(a.length===1)l=a[0],u=o[l];else throw new TypeError(`Expected tuple with one key, not ${a.length} keys`)}else l=o;i.items.push(Cp(l,u,t))}return i}const Op={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:rk,createNode:ik};class Ki extends Mr{constructor(){super(),this.add=Ht.prototype.add.bind(this),this.delete=Ht.prototype.delete.bind(this),this.get=Ht.prototype.get.bind(this),this.has=Ht.prototype.has.bind(this),this.set=Ht.prototype.set.bind(this),this.tag=Ki.tag}toJSON(e,t){if(!t)return super.toJSON(e);const r=new Map;t!=null&&t.onCreate&&t.onCreate(r);for(const i of this.items){let s,o;if(Be(i)?(s=rn(i.key,"",t),o=rn(i.value,s,t)):s=rn(i,"",t),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,o)}return r}static from(e,t,r){const i=ik(e,t,r),s=new this;return s.items=i.items,s}}Ki.tag="tag:yaml.org,2002:omap";const Tp={collection:"seq",identify:n=>n instanceof Map,nodeClass:Ki,default:!1,tag:"tag:yaml.org,2002:omap",resolve(n,e){const t=rk(n,e),r=[];for(const{key:i}of t.items)Ae(i)&&(r.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new Ki,t)},createNode:(n,e,t)=>Ki.from(n,e,t)};function sk({value:n,source:e},t){return e&&(n?ok:lk).test.test(e)?e:n?t.options.trueStr:t.options.falseStr}const ok={identify:n=>n===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new se(!0),stringify:sk},lk={identify:n=>n===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new se(!1),stringify:sk},wI={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:yn},DI={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n.replace(/_/g,"")),stringify(n){const e=Number(n.value);return isFinite(e)?e.toExponential():yn(n)}},AI={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(n){const e=new se(parseFloat(n.replace(/_/g,""))),t=n.indexOf(".");if(t!==-1){const r=n.substring(t+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:yn},dl=n=>typeof n=="bigint"||Number.isInteger(n);function mc(n,e,t,{intAsBigInt:r}){const i=n[0];if((i==="-"||i==="+")&&(e+=1),n=n.substring(e).replace(/_/g,""),r){switch(t){case 2:n=`0b${n}`;break;case 8:n=`0o${n}`;break;case 16:n=`0x${n}`;break}const o=BigInt(n);return i==="-"?BigInt(-1)*o:o}const s=parseInt(n,t);return i==="-"?-1*s:s}function Fp(n,e,t){const{value:r}=n;if(dl(r)){const i=r.toString(e);return r<0?"-"+t+i.substr(1):t+i}return yn(n)}const CI={identify:dl,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(n,e,t)=>mc(n,2,2,t),stringify:n=>Fp(n,2,"0b")},_I={identify:dl,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(n,e,t)=>mc(n,1,8,t),stringify:n=>Fp(n,8,"0")},SI={identify:dl,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(n,e,t)=>mc(n,0,10,t),stringify:yn},EI={identify:dl,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(n,e,t)=>mc(n,2,16,t),stringify:n=>Fp(n,16,"0x")};class Ji extends Ht{constructor(e){super(e),this.tag=Ji.tag}add(e){let t;Be(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new bt(e.key,null):t=new bt(e,null),ri(this.items,t.key)||this.items.push(t)}get(e,t){const r=ri(this.items,e);return!t&&Be(r)?Ae(r.key)?r.key.value:r.key:r}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);const r=ri(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new bt(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,r);throw new Error("Set items must all have null values")}static from(e,t,r){const{replacer:i}=r,s=new this(e);if(t&&Symbol.iterator in Object(t))for(let o of t)typeof i=="function"&&(o=i.call(t,o,o)),s.items.push(Cp(o,null,r));return s}}Ji.tag="tag:yaml.org,2002:set";const Pp={collection:"map",identify:n=>n instanceof Set,nodeClass:Ji,default:!1,tag:"tag:yaml.org,2002:set",createNode:(n,e,t)=>Ji.from(n,e,t),resolve(n,e){if(ws(n)){if(n.hasAllNullValues(!0))return Object.assign(new Ji,n);e("Set items must all have null values")}else e("Expected a mapping for this tag");return n}};function Rp(n,e){const t=n[0],r=t==="-"||t==="+"?n.substring(1):n,i=o=>e?BigInt(o):Number(o),s=r.replace(/_/g,"").split(":").reduce((o,l)=>o*i(60)+i(l),i(0));return t==="-"?i(-1)*s:s}function uk(n){let{value:e}=n,t=o=>o;if(typeof e=="bigint")t=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return yn(n);let r="";e<0&&(r="-",e*=t(-1));const i=t(60),s=[e%i];return e<60?s.unshift(0):(e=(e-s[0])/i,s.unshift(e%i),e>=60&&(e=(e-s[0])/i,s.unshift(e))),r+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const ak={identify:n=>typeof n=="bigint"||Number.isInteger(n),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(n,e,{intAsBigInt:t})=>Rp(n,t),stringify:uk},ck={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:n=>Rp(n,!1),stringify:uk},gc={identify:n=>n instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(n){const e=n.match(gc.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,t,r,i,s,o,l]=e.map(Number),u=e[7]?Number((e[7]+"00").substr(1,3)):0;let a=Date.UTC(t,r-1,i,s||0,o||0,l||0,u);const c=e[8];if(c&&c!=="Z"){let f=Rp(c,!1);Math.abs(f)<30&&(f*=60),a-=6e4*f}return new Date(a)},stringify:({value:n})=>(n==null?void 0:n.toISOString().replace(/(T00:00:00)?\.000Z$/,""))??""},u1=[As,Cs,hc,dc,ok,lk,CI,_I,SI,EI,wI,DI,AI,Ep,or,Tp,Op,Pp,ak,ck,gc],a1=new Map([["core",yI],["failsafe",[As,Cs,hc]],["json",kI],["yaml11",u1],["yaml-1.1",u1]]),c1={binary:Ep,bool:_p,float:Xv,floatExp:Qv,floatNaN:Yv,floatTime:ck,int:tk,intHex:nk,intOct:ek,intTime:ak,map:As,merge:or,null:dc,omap:Tp,pairs:Op,seq:Cs,set:Pp,timestamp:gc},OI={"tag:yaml.org,2002:binary":Ep,"tag:yaml.org,2002:merge":or,"tag:yaml.org,2002:omap":Tp,"tag:yaml.org,2002:pairs":Op,"tag:yaml.org,2002:set":Pp,"tag:yaml.org,2002:timestamp":gc};function Sf(n,e,t){const r=a1.get(e);if(r&&!n)return t&&!r.includes(or)?r.concat(or):r.slice();let i=r;if(!i)if(Array.isArray(n))i=[];else{const s=Array.from(a1.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(n))for(const s of n)i=i.concat(s);else typeof n=="function"&&(i=n(i.slice()));return t&&(i=i.concat(or)),i.reduce((s,o)=>{const l=typeof o=="string"?c1[o]:o;if(!l){const u=JSON.stringify(o),a=Object.keys(c1).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown custom tag ${u}; use one of ${a}`)}return s.includes(l)||s.push(l),s},[])}const TI=(n,e)=>n.key<e.key?-1:n.key>e.key?1:0;class bc{constructor({compat:e,customTags:t,merge:r,resolveKnownTags:i,schema:s,sortMapEntries:o,toStringDefaults:l}){this.compat=Array.isArray(e)?Sf(e,"compat"):e?Sf(null,e):null,this.name=typeof s=="string"&&s||"core",this.knownTags=i?OI:{},this.tags=Sf(t,this.name,r),this.toStringOptions=l??null,Object.defineProperty(this,Ar,{value:As}),Object.defineProperty(this,Vn,{value:hc}),Object.defineProperty(this,ks,{value:Cs}),this.sortMapEntries=typeof o=="function"?o:o===!0?TI:null}clone(){const e=Object.create(bc.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function FI(n,e){var u;const t=[];let r=e.directives===!0;if(e.directives!==!1&&n.directives){const a=n.directives.toString(n);a?(t.push(a),r=!0):n.directives.docStart&&(r=!0)}r&&t.push("---");const i=Hv(n,e),{commentString:s}=i.options;if(n.commentBefore){t.length!==1&&t.unshift("");const a=s(n.commentBefore);t.unshift(rr(a,""))}let o=!1,l=null;if(n.contents){if(je(n.contents)){if(n.contents.spaceBefore&&r&&t.push(""),n.contents.commentBefore){const f=s(n.contents.commentBefore);t.push(rr(f,""))}i.forceBlockIndent=!!n.comment,l=n.contents.comment}const a=l?void 0:()=>o=!0;let c=us(n.contents,i,()=>l=null,a);l&&(c+=ni(c,"",s(l))),(c[0]==="|"||c[0]===">")&&t[t.length-1]==="---"?t[t.length-1]=`--- ${c}`:t.push(c)}else t.push(us(n.contents,i));if((u=n.directives)!=null&&u.docEnd)if(n.comment){const a=s(n.comment);a.includes(`
`)?(t.push("..."),t.push(rr(a,""))):t.push(`... ${a}`)}else t.push("...");else{let a=n.comment;a&&o&&(a=a.replace(/^\n+/,"")),a&&((!o||l)&&t[t.length-1]!==""&&t.push(""),t.push(rr(s(a),"")))}return t.join(`
`)+`
`}class _s{constructor(e,t,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,un,{value:Xh});let i=null;typeof t=="function"||Array.isArray(t)?i=t:r===void 0&&t&&(r=t,t=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=s;let{version:o}=s;r!=null&&r._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new kt({version:o}),this.setSchema(o,r),this.contents=e===void 0?null:this.createNode(e,i,r)}clone(){const e=Object.create(_s.prototype,{[un]:{value:Xh}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=je(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Di(this.contents)&&this.contents.add(e)}addIn(e,t){Di(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const r=jv(this);e.anchor=!t||r.has(t)?qv(t||"a",r):t}return new uc(e.anchor)}createNode(e,t,r){let i;if(typeof t=="function")e=t.call({"":e},"",e),i=t;else if(Array.isArray(t)){const g=y=>typeof y=="number"||y instanceof String||y instanceof Number,b=t.filter(g).map(String);b.length>0&&(t=t.concat(b)),i=t}else r===void 0&&t&&(r=t,t=void 0);const{aliasDuplicateObjects:s,anchorPrefix:o,flow:l,keepUndefined:u,onTagObj:a,tag:c}=r??{},{onAnchor:f,setAnchors:h,sourceObjects:d}=sI(this,o||"a"),p={aliasDuplicateObjects:s??!0,keepUndefined:u??!1,onAnchor:f,onTagObj:a,replacer:i,schema:this.schema,sourceObjects:d},m=Mo(e,c,p);return l&&Ne(m)&&(m.flow=!0),h(),m}createPair(e,t,r={}){const i=this.createNode(e,null,r),s=this.createNode(t,null,r);return new bt(i,s)}delete(e){return Di(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Ks(e)?this.contents==null?!1:(this.contents=null,!0):Di(this.contents)?this.contents.deleteIn(e):!1}get(e,t){return Ne(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Ks(e)?!t&&Ae(this.contents)?this.contents.value:this.contents:Ne(this.contents)?this.contents.getIn(e,t):void 0}has(e){return Ne(this.contents)?this.contents.has(e):!1}hasIn(e){return Ks(e)?this.contents!==void 0:Ne(this.contents)?this.contents.hasIn(e):!1}set(e,t){this.contents==null?this.contents=_a(this.schema,[e],t):Di(this.contents)&&this.contents.set(e,t)}setIn(e,t){Ks(e)?this.contents=t:this.contents==null?this.contents=_a(this.schema,Array.from(e),t):Di(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new kt({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new kt({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(r)this.schema=new bc(Object.assign(r,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:r,maxAliasCount:i,onAnchor:s,reviver:o}={}){const l={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},u=rn(this.contents,t??"",l);if(typeof s=="function")for(const{count:a,res:c}of l.anchors.values())s(c,a);return typeof o=="function"?Mi(o,{"":u},"",u):u}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return FI(this,e)}}function Di(n){if(Ne(n))return!0;throw new Error("Expected a YAML collection as document contents")}class Ip extends Error{constructor(e,t,r,i){super(),this.name=e,this.code=r,this.message=i,this.pos=t}}class ii extends Ip{constructor(e,t,r){super("YAMLParseError",e,t,r)}}class fk extends Ip{constructor(e,t,r){super("YAMLWarning",e,t,r)}}const Ea=(n,e)=>t=>{if(t.pos[0]===-1)return;t.linePos=t.pos.map(l=>e.linePos(l));const{line:r,col:i}=t.linePos[0];t.message+=` at line ${r}, column ${i}`;let s=i-1,o=n.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){const l=Math.min(s-39,o.length-79);o=""+o.substring(l),s-=l-1}if(o.length>80&&(o=o.substring(0,79)+""),r>1&&/^ *$/.test(o.substring(0,s))){let l=n.substring(e.lineStarts[r-2],e.lineStarts[r-1]);l.length>80&&(l=l.substring(0,79)+`
`),o=l+o}if(/[^ ]/.test(o)){let l=1;const u=t.linePos[1];u&&u.line===r&&u.col>i&&(l=Math.max(1,Math.min(u.col-i,80-s)));const a=" ".repeat(s)+"^".repeat(l);t.message+=`:

${o}
${a}
`}};function as(n,{flow:e,indicator:t,next:r,offset:i,onError:s,parentIndent:o,startOnNewline:l}){let u=!1,a=l,c=l,f="",h="",d=!1,p=!1,m=null,g=null,b=null,y=null,x=null,w=null,D=null;for(const C of n)switch(p&&(C.type!=="space"&&C.type!=="newline"&&C.type!=="comma"&&s(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),m&&(a&&C.type!=="comment"&&C.type!=="newline"&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),C.type){case"space":!e&&(t!=="doc-start"||(r==null?void 0:r.type)!=="flow-collection")&&C.source.includes("	")&&(m=C),c=!0;break;case"comment":{c||s(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const O=C.source.substring(1)||" ";f?f+=h+O:f=O,h="",a=!1;break}case"newline":a?f?f+=C.source:(!w||t!=="seq-item-ind")&&(u=!0):h+=C.source,a=!0,d=!0,(g||b)&&(y=C),c=!0;break;case"anchor":g&&s(C,"MULTIPLE_ANCHORS","A node can have at most one anchor"),C.source.endsWith(":")&&s(C.offset+C.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=C,D??(D=C.offset),a=!1,c=!1,p=!0;break;case"tag":{b&&s(C,"MULTIPLE_TAGS","A node can have at most one tag"),b=C,D??(D=C.offset),a=!1,c=!1,p=!0;break}case t:(g||b)&&s(C,"BAD_PROP_ORDER",`Anchors and tags must be after the ${C.source} indicator`),w&&s(C,"UNEXPECTED_TOKEN",`Unexpected ${C.source} in ${e??"collection"}`),w=C,a=t==="seq-item-ind"||t==="explicit-key-ind",c=!1;break;case"comma":if(e){x&&s(C,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),x=C,a=!1,c=!1;break}default:s(C,"UNEXPECTED_TOKEN",`Unexpected ${C.type} token`),a=!1,c=!1}const A=n[n.length-1],k=A?A.offset+A.source.length:i;return p&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(a&&m.indent<=o||(r==null?void 0:r.type)==="block-map"||(r==null?void 0:r.type)==="block-seq")&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:x,found:w,spaceBefore:u,comment:f,hasNewline:d,anchor:g,tag:b,newlineAfterProp:y,end:k,start:D??k}}function Bo(n){if(!n)return null;switch(n.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(n.source.includes(`
`))return!0;if(n.end){for(const e of n.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of n.items){for(const t of e.start)if(t.type==="newline")return!0;if(e.sep){for(const t of e.sep)if(t.type==="newline")return!0}if(Bo(e.key)||Bo(e.value))return!0}return!1;default:return!0}}function nd(n,e,t){if((e==null?void 0:e.type)==="flow-collection"){const r=e.end[0];r.indent===n&&(r.source==="]"||r.source==="}")&&Bo(e)&&t(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function hk(n,e,t){const{uniqueKeys:r}=n.options;if(r===!1)return!1;const i=typeof r=="function"?r:(s,o)=>s===o||Ae(s)&&Ae(o)&&s.value===o.value;return e.some(s=>i(s.key,t))}const f1="All mapping items must start at the same column";function PI({composeNode:n,composeEmptyNode:e},t,r,i,s){var c;const o=(s==null?void 0:s.nodeClass)??Ht,l=new o(t.schema);t.atRoot&&(t.atRoot=!1);let u=r.offset,a=null;for(const f of r.items){const{start:h,key:d,sep:p,value:m}=f,g=as(h,{indicator:"explicit-key-ind",next:d??(p==null?void 0:p[0]),offset:u,onError:i,parentIndent:r.indent,startOnNewline:!0}),b=!g.found;if(b){if(d&&(d.type==="block-seq"?i(u,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in d&&d.indent!==r.indent&&i(u,"BAD_INDENT",f1)),!g.anchor&&!g.tag&&!p){a=g.end,g.comment&&(l.comment?l.comment+=`
`+g.comment:l.comment=g.comment);continue}(g.newlineAfterProp||Bo(d))&&i(d??h[h.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((c=g.found)==null?void 0:c.indent)!==r.indent&&i(u,"BAD_INDENT",f1);t.atKey=!0;const y=g.end,x=d?n(t,d,g,i):e(t,y,h,null,g,i);t.schema.compat&&nd(r.indent,d,i),t.atKey=!1,hk(t,l.items,x)&&i(y,"DUPLICATE_KEY","Map keys must be unique");const w=as(p??[],{indicator:"map-value-ind",next:m,offset:x.range[2],onError:i,parentIndent:r.indent,startOnNewline:!d||d.type==="block-scalar"});if(u=w.end,w.found){b&&((m==null?void 0:m.type)==="block-map"&&!w.hasNewline&&i(u,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),t.options.strict&&g.start<w.found.offset-1024&&i(x.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const D=m?n(t,m,w,i):e(t,u,p,null,w,i);t.schema.compat&&nd(r.indent,m,i),u=D.range[2];const A=new bt(x,D);t.options.keepSourceTokens&&(A.srcToken=f),l.items.push(A)}else{b&&i(x.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),w.comment&&(x.comment?x.comment+=`
`+w.comment:x.comment=w.comment);const D=new bt(x);t.options.keepSourceTokens&&(D.srcToken=f),l.items.push(D)}}return a&&a<u&&i(a,"IMPOSSIBLE","Map comment with trailing content"),l.range=[r.offset,u,a??u],l}function RI({composeNode:n,composeEmptyNode:e},t,r,i,s){const o=(s==null?void 0:s.nodeClass)??Mr,l=new o(t.schema);t.atRoot&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let u=r.offset,a=null;for(const{start:c,value:f}of r.items){const h=as(c,{indicator:"seq-item-ind",next:f,offset:u,onError:i,parentIndent:r.indent,startOnNewline:!0});if(!h.found)if(h.anchor||h.tag||f)f&&f.type==="block-seq"?i(h.end,"BAD_INDENT","All sequence items must start at the same column"):i(u,"MISSING_CHAR","Sequence item without - indicator");else{a=h.end,h.comment&&(l.comment=h.comment);continue}const d=f?n(t,f,h,i):e(t,h.end,c,null,h,i);t.schema.compat&&nd(r.indent,f,i),u=d.range[2],l.items.push(d)}return l.range=[r.offset,u,a??u],l}function pl(n,e,t,r){let i="";if(n){let s=!1,o="";for(const l of n){const{source:u,type:a}=l;switch(a){case"space":s=!0;break;case"comment":{t&&!s&&r(l,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const c=u.substring(1)||" ";i?i+=o+c:i=c,o="";break}case"newline":i&&(o+=u),s=!0;break;default:r(l,"UNEXPECTED_TOKEN",`Unexpected ${a} at node end`)}e+=u.length}}return{comment:i,offset:e}}const Ef="Block collections are not allowed within flow collections",Of=n=>n&&(n.type==="block-map"||n.type==="block-seq");function II({composeNode:n,composeEmptyNode:e},t,r,i,s){const o=r.start.source==="{",l=o?"flow map":"flow sequence",u=(s==null?void 0:s.nodeClass)??(o?Ht:Mr),a=new u(t.schema);a.flow=!0;const c=t.atRoot;c&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let f=r.offset+r.start.source.length;for(let g=0;g<r.items.length;++g){const b=r.items[g],{start:y,key:x,sep:w,value:D}=b,A=as(y,{flow:l,indicator:"explicit-key-ind",next:x??(w==null?void 0:w[0]),offset:f,onError:i,parentIndent:r.indent,startOnNewline:!1});if(!A.found){if(!A.anchor&&!A.tag&&!w&&!D){g===0&&A.comma?i(A.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${l}`):g<r.items.length-1&&i(A.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${l}`),A.comment&&(a.comment?a.comment+=`
`+A.comment:a.comment=A.comment),f=A.end;continue}!o&&t.options.strict&&Bo(x)&&i(x,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(g===0)A.comma&&i(A.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${l}`);else if(A.comma||i(A.start,"MISSING_CHAR",`Missing , between ${l} items`),A.comment){let k="";e:for(const C of y)switch(C.type){case"comma":case"space":break;case"comment":k=C.source.substring(1);break e;default:break e}if(k){let C=a.items[a.items.length-1];Be(C)&&(C=C.value??C.key),C.comment?C.comment+=`
`+k:C.comment=k,A.comment=A.comment.substring(k.length+1)}}if(!o&&!w&&!A.found){const k=D?n(t,D,A,i):e(t,A.end,w,null,A,i);a.items.push(k),f=k.range[2],Of(D)&&i(k.range,"BLOCK_IN_FLOW",Ef)}else{t.atKey=!0;const k=A.end,C=x?n(t,x,A,i):e(t,k,y,null,A,i);Of(x)&&i(C.range,"BLOCK_IN_FLOW",Ef),t.atKey=!1;const O=as(w??[],{flow:l,indicator:"map-value-ind",next:D,offset:C.range[2],onError:i,parentIndent:r.indent,startOnNewline:!1});if(O.found){if(!o&&!A.found&&t.options.strict){if(w)for(const P of w){if(P===O.found)break;if(P.type==="newline"){i(P,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}A.start<O.found.offset-1024&&i(O.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else D&&("source"in D&&D.source&&D.source[0]===":"?i(D,"MISSING_CHAR",`Missing space after : in ${l}`):i(O.start,"MISSING_CHAR",`Missing , or : between ${l} items`));const L=D?n(t,D,O,i):O.found?e(t,O.end,w,null,O,i):null;L?Of(D)&&i(L.range,"BLOCK_IN_FLOW",Ef):O.comment&&(C.comment?C.comment+=`
`+O.comment:C.comment=O.comment);const B=new bt(C,L);if(t.options.keepSourceTokens&&(B.srcToken=b),o){const P=a;hk(t,P.items,C)&&i(k,"DUPLICATE_KEY","Map keys must be unique"),P.items.push(B)}else{const P=new Ht(t.schema);P.flow=!0,P.items.push(B);const T=(L??C).range;P.range=[C.range[0],T[1],T[2]],a.items.push(P)}f=L?L.range[2]:O.end}}const h=o?"}":"]",[d,...p]=r.end;let m=f;if(d&&d.source===h)m=d.offset+d.source.length;else{const g=l[0].toUpperCase()+l.substring(1),b=c?`${g} must end with a ${h}`:`${g} in block collection must be sufficiently indented and end with a ${h}`;i(f,c?"MISSING_CHAR":"BAD_INDENT",b),d&&d.source.length!==1&&p.unshift(d)}if(p.length>0){const g=pl(p,m,t.options.strict,i);g.comment&&(a.comment?a.comment+=`
`+g.comment:a.comment=g.comment),a.range=[r.offset,m,g.offset]}else a.range=[r.offset,m,m];return a}function Tf(n,e,t,r,i,s){const o=t.type==="block-map"?PI(n,e,t,r,s):t.type==="block-seq"?RI(n,e,t,r,s):II(n,e,t,r,s),l=o.constructor;return i==="!"||i===l.tagName?(o.tag=l.tagName,o):(i&&(o.tag=i),o)}function MI(n,e,t,r,i){var h;const s=r.tag,o=s?e.directives.tagName(s.source,d=>i(s,"TAG_RESOLVE_FAILED",d)):null;if(t.type==="block-seq"){const{anchor:d,newlineAfterProp:p}=r,m=d&&s?d.offset>s.offset?d:s:d??s;m&&(!p||p.offset<m.offset)&&i(m,"MISSING_CHAR","Missing newline after block sequence props")}const l=t.type==="block-map"?"map":t.type==="block-seq"?"seq":t.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===Ht.tagName&&l==="map"||o===Mr.tagName&&l==="seq")return Tf(n,e,t,i,o);let u=e.schema.tags.find(d=>d.tag===o&&d.collection===l);if(!u){const d=e.schema.knownTags[o];if(d&&d.collection===l)e.schema.tags.push(Object.assign({},d,{default:!1})),u=d;else return d?i(s,"BAD_COLLECTION_TYPE",`${d.tag} used for ${l} collection, but expects ${d.collection??"scalar"}`,!0):i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Tf(n,e,t,i,o)}const a=Tf(n,e,t,i,o,u),c=((h=u.resolve)==null?void 0:h.call(u,a,d=>i(s,"TAG_RESOLVE_FAILED",d),e.options))??a,f=je(c)?c:new se(c);return f.range=a.range,f.tag=o,u!=null&&u.format&&(f.format=u.format),f}function dk(n,e,t){const r=e.offset,i=BI(e,n.options.strict,t);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const s=i.mode===">"?se.BLOCK_FOLDED:se.BLOCK_LITERAL,o=e.source?$I(e.source):[];let l=o.length;for(let m=o.length-1;m>=0;--m){const g=o[m][1];if(g===""||g==="\r")l=m;else break}if(l===0){const m=i.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let g=r+i.length;return e.source&&(g+=e.source.length),{value:m,type:s,comment:i.comment,range:[r,g,g]}}let u=e.indent+i.indent,a=e.offset+i.length,c=0;for(let m=0;m<l;++m){const[g,b]=o[m];if(b===""||b==="\r")i.indent===0&&g.length>u&&(u=g.length);else{g.length<u&&t(a+g.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(u=g.length),c=m,u===0&&!n.atRoot&&t(a,"BAD_INDENT","Block scalar values in collections must be indented");break}a+=g.length+b.length+1}for(let m=o.length-1;m>=l;--m)o[m][0].length>u&&(l=m+1);let f="",h="",d=!1;for(let m=0;m<c;++m)f+=o[m][0].slice(u)+`
`;for(let m=c;m<l;++m){let[g,b]=o[m];a+=g.length+b.length+1;const y=b[b.length-1]==="\r";if(y&&(b=b.slice(0,-1)),b&&g.length<u){const w=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;t(a-b.length-(y?2:1),"BAD_INDENT",w),g=""}s===se.BLOCK_LITERAL?(f+=h+g.slice(u)+b,h=`
`):g.length>u||b[0]==="	"?(h===" "?h=`
`:!d&&h===`
`&&(h=`

`),f+=h+g.slice(u)+b,h=`
`,d=!0):b===""?h===`
`?f+=`
`:h=`
`:(f+=h+b,h=" ",d=!1)}switch(i.chomp){case"-":break;case"+":for(let m=l;m<o.length;++m)f+=`
`+o[m][0].slice(u);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}const p=r+i.length+e.source.length;return{value:f,type:s,comment:i.comment,range:[r,p,p]}}function BI({offset:n,props:e},t,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],s=i[0];let o=0,l="",u=-1;for(let h=1;h<i.length;++h){const d=i[h];if(!l&&(d==="-"||d==="+"))l=d;else{const p=Number(d);!o&&p?o=p:u===-1&&(u=n+h)}}u!==-1&&r(u,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let a=!1,c="",f=i.length;for(let h=1;h<e.length;++h){const d=e[h];switch(d.type){case"space":a=!0;case"newline":f+=d.source.length;break;case"comment":t&&!a&&r(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=d.source.length,c=d.source.substring(1);break;case"error":r(d,"UNEXPECTED_TOKEN",d.message),f+=d.source.length;break;default:{const p=`Unexpected token in block scalar header: ${d.type}`;r(d,"UNEXPECTED_TOKEN",p);const m=d.source;m&&typeof m=="string"&&(f+=m.length)}}}return{mode:s,indent:o,chomp:l,comment:c,length:f}}function $I(n){const e=n.split(/\n( *)/),t=e[0],r=t.match(/^( *)/),s=[r!=null&&r[1]?[r[1],t.slice(r[1].length)]:["",t]];for(let o=1;o<e.length;o+=2)s.push([e[o],e[o+1]]);return s}function pk(n,e,t){const{offset:r,type:i,source:s,end:o}=n;let l,u;const a=(h,d,p)=>t(r+h,d,p);switch(i){case"scalar":l=se.PLAIN,u=NI(s,a);break;case"single-quoted-scalar":l=se.QUOTE_SINGLE,u=LI(s,a);break;case"double-quoted-scalar":l=se.QUOTE_DOUBLE,u=jI(s,a);break;default:return t(n,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+s.length,r+s.length]}}const c=r+s.length,f=pl(o,c,e,t);return{value:u,type:l,comment:f.comment,range:[r,c,f.offset]}}function NI(n,e){let t="";switch(n[0]){case"	":t="a tab character";break;case",":t="flow indicator character ,";break;case"%":t="directive indicator character %";break;case"|":case">":{t=`block scalar indicator ${n[0]}`;break}case"@":case"`":{t=`reserved character ${n[0]}`;break}}return t&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${t}`),mk(n)}function LI(n,e){return(n[n.length-1]!=="'"||n.length===1)&&e(n.length,"MISSING_CHAR","Missing closing 'quote"),mk(n.slice(1,-1)).replace(/''/g,"'")}function mk(n){let e,t;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),t=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,t=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(n);if(!r)return n;let i=r[1],s=" ",o=e.lastIndex;for(t.lastIndex=o;r=t.exec(n);)r[1]===""?s===`
`?i+=s:s=`
`:(i+=s+r[1],s=" "),o=t.lastIndex;const l=/[ \t]*(.*)/sy;return l.lastIndex=o,r=l.exec(n),i+s+((r==null?void 0:r[1])??"")}function jI(n,e){let t="";for(let r=1;r<n.length-1;++r){const i=n[r];if(!(i==="\r"&&n[r+1]===`
`))if(i===`
`){const{fold:s,offset:o}=qI(n,r);t+=s,r=o}else if(i==="\\"){let s=n[++r];const o=VI[s];if(o)t+=o;else if(s===`
`)for(s=n[r+1];s===" "||s==="	";)s=n[++r+1];else if(s==="\r"&&n[r+1]===`
`)for(s=n[++r+1];s===" "||s==="	";)s=n[++r+1];else if(s==="x"||s==="u"||s==="U"){const l={x:2,u:4,U:8}[s];t+=zI(n,r+1,l,e),r+=l}else{const l=n.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${l}`),t+=l}}else if(i===" "||i==="	"){const s=r;let o=n[r+1];for(;o===" "||o==="	";)o=n[++r+1];o!==`
`&&!(o==="\r"&&n[r+2]===`
`)&&(t+=r>s?n.slice(s,r+1):i)}else t+=i}return(n[n.length-1]!=='"'||n.length===1)&&e(n.length,"MISSING_CHAR",'Missing closing "quote'),t}function qI(n,e){let t="",r=n[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&n[e+2]!==`
`);)r===`
`&&(t+=`
`),e+=1,r=n[e+1];return t||(t=" "),{fold:t,offset:e}}const VI={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function zI(n,e,t,r){const i=n.substr(e,t),o=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const l=n.substr(e-2,t+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${l}`),l}return String.fromCodePoint(o)}function gk(n,e,t,r){const{value:i,type:s,comment:o,range:l}=e.type==="block-scalar"?dk(n,e,r):pk(e,n.options.strict,r),u=t?n.directives.tagName(t.source,f=>r(t,"TAG_RESOLVE_FAILED",f)):null;let a;n.options.stringKeys&&n.atKey?a=n.schema[Vn]:u?a=UI(n.schema,i,u,t,r):e.type==="scalar"?a=HI(n,i,e,r):a=n.schema[Vn];let c;try{const f=a.resolve(i,h=>r(t??e,"TAG_RESOLVE_FAILED",h),n.options);c=Ae(f)?f:new se(f)}catch(f){const h=f instanceof Error?f.message:String(f);r(t??e,"TAG_RESOLVE_FAILED",h),c=new se(i)}return c.range=l,c.source=i,s&&(c.type=s),u&&(c.tag=u),a.format&&(c.format=a.format),o&&(c.comment=o),c}function UI(n,e,t,r,i){var l;if(t==="!")return n[Vn];const s=[];for(const u of n.tags)if(!u.collection&&u.tag===t)if(u.default&&u.test)s.push(u);else return u;for(const u of s)if((l=u.test)!=null&&l.test(e))return u;const o=n.knownTags[t];return o&&!o.collection?(n.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${t}`,t!=="tag:yaml.org,2002:str"),n[Vn])}function HI({atKey:n,directives:e,schema:t},r,i,s){const o=t.tags.find(l=>{var u;return(l.default===!0||n&&l.default==="key")&&((u=l.test)==null?void 0:u.test(r))})||t[Vn];if(t.compat){const l=t.compat.find(u=>{var a;return u.default&&((a=u.test)==null?void 0:a.test(r))})??t[Vn];if(o.tag!==l.tag){const u=e.tagString(o.tag),a=e.tagString(l.tag),c=`Value may be parsed as either ${u} or ${a}`;s(i,"TAG_RESOLVE_FAILED",c,!0)}}return o}function WI(n,e,t){if(e){t??(t=e.length);for(let r=t-1;r>=0;--r){let i=e[r];switch(i.type){case"space":case"comment":case"newline":n-=i.source.length;continue}for(i=e[++r];(i==null?void 0:i.type)==="space";)n+=i.source.length,i=e[++r];break}}return n}const GI={composeNode:bk,composeEmptyNode:Mp};function bk(n,e,t,r){const i=n.atKey,{spaceBefore:s,comment:o,anchor:l,tag:u}=t;let a,c=!0;switch(e.type){case"alias":a=KI(n,e,r),(l||u)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":a=gk(n,e,u,r),l&&(a.anchor=l.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":a=MI(GI,n,e,t,r),l&&(a.anchor=l.source.substring(1));break;default:{const f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",f),a=Mp(n,e.offset,void 0,null,t,r),c=!1}}return l&&a.anchor===""&&r(l,"BAD_ALIAS","Anchor cannot be an empty string"),i&&n.options.stringKeys&&(!Ae(a)||typeof a.value!="string"||a.tag&&a.tag!=="tag:yaml.org,2002:str")&&r(u??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(a.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?a.comment=o:a.commentBefore=o),n.options.keepSourceTokens&&c&&(a.srcToken=e),a}function Mp(n,e,t,r,{spaceBefore:i,comment:s,anchor:o,tag:l,end:u},a){const c={type:"scalar",offset:WI(e,t,r),indent:-1,source:""},f=gk(n,c,l,a);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&a(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(f.spaceBefore=!0),s&&(f.comment=s,f.range[2]=u),f}function KI({options:n},{offset:e,source:t,end:r},i){const s=new uc(t.substring(1));s.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&i(e+t.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+t.length,l=pl(r,o,n.strict,i);return s.range=[e,o,l.offset],l.comment&&(s.comment=l.comment),s}function JI(n,e,{offset:t,start:r,value:i,end:s},o){const l=Object.assign({_directives:e},n),u=new _s(void 0,l),a={atKey:!1,atRoot:!0,directives:u.directives,options:u.options,schema:u.schema},c=as(r,{indicator:"doc-start",next:i??(s==null?void 0:s[0]),offset:t,onError:o,parentIndent:0,startOnNewline:!0});c.found&&(u.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!c.hasNewline&&o(c.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),u.contents=i?bk(a,i,c,o):Mp(a,c.end,r,null,c,o);const f=u.contents.range[2],h=pl(s,f,!1,o);return h.comment&&(u.comment=h.comment),u.range=[t,f,h.offset],u}function js(n){if(typeof n=="number")return[n,n+1];if(Array.isArray(n))return n.length===2?n:[n[0],n[1]];const{offset:e,source:t}=n;return[e,e+(typeof t=="string"?t.length:1)]}function h1(n){var i;let e="",t=!1,r=!1;for(let s=0;s<n.length;++s){const o=n[s];switch(o[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(o.substring(1)||" "),t=!0,r=!1;break;case"%":((i=n[s+1])==null?void 0:i[0])!=="#"&&(s+=1),t=!1;break;default:t||(r=!0),t=!1}}return{comment:e,afterEmptyLine:r}}class Bp{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,r,i,s)=>{const o=js(t);s?this.warnings.push(new fk(o,r,i)):this.errors.push(new ii(o,r,i))},this.directives=new kt({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:r,afterEmptyLine:i}=h1(this.prelude);if(r){const s=e.contents;if(t)e.comment=e.comment?`${e.comment}
${r}`:r;else if(i||e.directives.docStart||!s)e.commentBefore=r;else if(Ne(s)&&!s.flow&&s.items.length>0){let o=s.items[0];Be(o)&&(o=o.key);const l=o.commentBefore;o.commentBefore=l?`${r}
${l}`:r}else{const o=s.commentBefore;s.commentBefore=o?`${r}
${o}`:r}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:h1(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,r=-1){for(const i of e)yield*this.next(i);yield*this.end(t,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,r,i)=>{const s=js(e);s[0]+=t,this.onError(s,"BAD_DIRECTIVE",r,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=JI(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new ii(js(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new ii(js(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const t=pl(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new ii(js(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const r=Object.assign({_directives:this.directives},this.options),i=new _s(void 0,r);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,t,t],this.decorate(i,!1),yield i}}}function YI(n,e=!0,t){if(n){const r=(i,s,o)=>{const l=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(t)t(l,s,o);else throw new ii([l,l+1],s,o)};switch(n.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return pk(n,e,r);case"block-scalar":return dk({options:{strict:e}},n,r)}}return null}function QI(n,e){const{implicitKey:t=!1,indent:r,inFlow:i=!1,offset:s=-1,type:o="PLAIN"}=e,l=hl({type:o,value:n},{implicitKey:t,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),u=e.end??[{type:"newline",offset:-1,indent:r,source:`
`}];switch(l[0]){case"|":case">":{const a=l.indexOf(`
`),c=l.substring(0,a),f=l.substring(a+1)+`
`,h=[{type:"block-scalar-header",offset:s,indent:r,source:c}];return yk(h,u)||h.push({type:"newline",offset:-1,indent:r,source:`
`}),{type:"block-scalar",offset:s,indent:r,props:h,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:r,source:l,end:u};case"'":return{type:"single-quoted-scalar",offset:s,indent:r,source:l,end:u};default:return{type:"scalar",offset:s,indent:r,source:l,end:u}}}function XI(n,e,t={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:s=!1,type:o}=t,l="indent"in n?n.indent:null;if(r&&typeof l=="number"&&(l+=2),!o)switch(n.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{const a=n.props[0];if(a.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o=a.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}const u=hl({type:o,value:e},{implicitKey:i||l===null,indent:l!==null&&l>0?" ".repeat(l):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}});switch(u[0]){case"|":case">":ZI(n,u);break;case'"':Ff(n,u,"double-quoted-scalar");break;case"'":Ff(n,u,"single-quoted-scalar");break;default:Ff(n,u,"scalar")}}function ZI(n,e){const t=e.indexOf(`
`),r=e.substring(0,t),i=e.substring(t+1)+`
`;if(n.type==="block-scalar"){const s=n.props[0];if(s.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s.source=r,n.source=i}else{const{offset:s}=n,o="indent"in n?n.indent:-1,l=[{type:"block-scalar-header",offset:s,indent:o,source:r}];yk(l,"end"in n?n.end:void 0)||l.push({type:"newline",offset:-1,indent:o,source:`
`});for(const u of Object.keys(n))u!=="type"&&u!=="offset"&&delete n[u];Object.assign(n,{type:"block-scalar",indent:o,props:l,source:i})}}function yk(n,e){if(e)for(const t of e)switch(t.type){case"space":case"comment":n.push(t);break;case"newline":return n.push(t),!0}return!1}function Ff(n,e,t){switch(n.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":n.type=t,n.source=e;break;case"block-scalar":{const r=n.props.slice(1);let i=e.length;n.props[0].type==="block-scalar-header"&&(i-=n.props[0].source.length);for(const s of r)s.offset+=i;delete n.props,Object.assign(n,{type:t,source:e,end:r});break}case"block-map":case"block-seq":{const i={type:"newline",offset:n.offset+e.length,indent:n.indent,source:`
`};delete n.items,Object.assign(n,{type:t,source:e,end:[i]});break}default:{const r="indent"in n?n.indent:-1,i="end"in n&&Array.isArray(n.end)?n.end.filter(s=>s.type==="space"||s.type==="comment"||s.type==="newline"):[];for(const s of Object.keys(n))s!=="type"&&s!=="offset"&&delete n[s];Object.assign(n,{type:t,indent:r,source:e,end:i})}}}const eM=n=>"type"in n?Oa(n):Fu(n);function Oa(n){switch(n.type){case"block-scalar":{let e="";for(const t of n.props)e+=Oa(t);return e+n.source}case"block-map":case"block-seq":{let e="";for(const t of n.items)e+=Fu(t);return e}case"flow-collection":{let e=n.start.source;for(const t of n.items)e+=Fu(t);for(const t of n.end)e+=t.source;return e}case"document":{let e=Fu(n);if(n.end)for(const t of n.end)e+=t.source;return e}default:{let e=n.source;if("end"in n&&n.end)for(const t of n.end)e+=t.source;return e}}}function Fu({start:n,key:e,sep:t,value:r}){let i="";for(const s of n)i+=s.source;if(e&&(i+=Oa(e)),t)for(const s of t)i+=s.source;return r&&(i+=Oa(r)),i}const rd=Symbol("break visit"),tM=Symbol("skip children"),xk=Symbol("remove item");function pi(n,e){"type"in n&&n.type==="document"&&(n={start:n.start,value:n.value}),vk(Object.freeze([]),n,e)}pi.BREAK=rd;pi.SKIP=tM;pi.REMOVE=xk;pi.itemAtPath=(n,e)=>{let t=n;for(const[r,i]of e){const s=t==null?void 0:t[r];if(s&&"items"in s)t=s.items[i];else return}return t};pi.parentCollection=(n,e)=>{const t=pi.itemAtPath(n,e.slice(0,-1)),r=e[e.length-1][0],i=t==null?void 0:t[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function vk(n,e,t){let r=t(e,n);if(typeof r=="symbol")return r;for(const i of["key","value"]){const s=e[i];if(s&&"items"in s){for(let o=0;o<s.items.length;++o){const l=vk(Object.freeze(n.concat([[i,o]])),s.items[o],t);if(typeof l=="number")o=l-1;else{if(l===rd)return rd;l===xk&&(s.items.splice(o,1),o-=1)}}typeof r=="function"&&i==="key"&&(r=r(e,n))}}return typeof r=="function"?r(e,n):r}const yc="\uFEFF",xc="",vc="",$o="",nM=n=>!!n&&"items"in n,rM=n=>!!n&&(n.type==="scalar"||n.type==="single-quoted-scalar"||n.type==="double-quoted-scalar"||n.type==="block-scalar");function iM(n){switch(n){case yc:return"<BOM>";case xc:return"<DOC>";case vc:return"<FLOW_END>";case $o:return"<SCALAR>";default:return JSON.stringify(n)}}function kk(n){switch(n){case yc:return"byte-order-mark";case xc:return"doc-mode";case vc:return"flow-error-end";case $o:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(n[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const sM=Object.freeze(Object.defineProperty({__proto__:null,BOM:yc,DOCUMENT:xc,FLOW_END:vc,SCALAR:$o,createScalarToken:QI,isCollection:nM,isScalar:rM,prettyToken:iM,resolveAsScalar:YI,setScalarValue:XI,stringify:eM,tokenType:kk,visit:pi},Symbol.toStringTag,{value:"Module"}));function cn(n){switch(n){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const d1=new Set("0123456789ABCDEFabcdef"),oM=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),nu=new Set(",[]{}"),lM=new Set(` ,[]{}
\r	`),Pf=n=>!n||lM.has(n);class wk{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let r=this.next??"stream";for(;r&&(t||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;t===" "||t==="	";)t=this.buffer[++e];return!t||t==="#"||t===`
`?!0:t==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let r=0;for(;t===" ";)t=this.buffer[++r+e];if(t==="\r"){const i=this.buffer[r+e+1];if(i===`
`||!i&&!this.atEnd)return e+r+1}return t===`
`||r>=this.indentNext||!t&&!this.atEnd?e+r:-1}if(t==="-"||t==="."){const r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&cn(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===yc&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let t=e.length,r=e.indexOf("#");for(;r!==-1;){const s=e[r-1];if(s===" "||s==="	"){t=r-1;break}else r=e.indexOf("#",r+1)}for(;;){const s=e[t-1];if(s===" "||s==="	")t-=1;else break}const i=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield xc,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if((t==="---"||t==="...")&&cn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,t==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!cn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&cn(t)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Pf),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=yield*this.parseBlockScalarHeader(),t+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,r=-1;do e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=r=t):t=0,t+=yield*this.pushSpaces(!0);while(e+t>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&cn(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield vc,yield*this.parseLineStart();let s=0;for(;i[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),i[s]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Pf),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||cn(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;t!==-1&&this.buffer[t+1]==="'";)t=this.buffer.indexOf("'",t+2);else for(;t!==-1;){let s=0;for(;this.buffer[t-1-s]==="\\";)s+=1;if(s%2===0)break;t=this.buffer.indexOf('"',t+1)}const r=this.buffer.substring(0,t);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const s=this.continueScalar(i+1);if(s===-1)break;i=r.indexOf(`
`,s)}i!==-1&&(t=i-(r[i-1]==="\r"?2:1))}if(t===-1){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if(t==="+")this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if(t!=="-")break}return yield*this.pushUntil(t=>cn(t)||t==="#")}*parseBlockScalar(){let e=this.pos-1,t=0,r;e:for(let s=this.pos;r=this.buffer[s];++s)switch(r){case" ":t+=1;break;case`
`:e=s,t=0;break;case"\r":{const o=this.buffer[s+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(t>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=t:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const s=this.continueScalar(e+1);if(s===-1)break;e=this.buffer.indexOf(`
`,s)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let i=e+1;for(r=this.buffer[i];r===" ";)r=this.buffer[++i];if(r==="	"){for(;r==="	"||r===" "||r==="\r"||r===`
`;)r=this.buffer[++i];e=i-1}else if(!this.blockScalarKeep)do{let s=e-1,o=this.buffer[s];o==="\r"&&(o=this.buffer[--s]);const l=s;for(;o===" ";)o=this.buffer[--s];if(o===`
`&&s>=this.pos&&s+1+t>l)e=s;else break}while(!0);return yield $o,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const s=this.buffer[r+1];if(cn(s)||e&&nu.has(s))break;t=r}else if(cn(i)){let s=this.buffer[r+1];if(i==="\r"&&(s===`
`?(r+=1,i=`
`,s=this.buffer[r+1]):t=r),s==="#"||e&&nu.has(s))break;if(i===`
`){const o=this.continueScalar(r+1);if(o===-1)break;r=Math.max(r,o-2)}}else{if(e&&nu.has(i))break;t=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield $o,yield*this.pushToIndex(t+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Pf))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(cn(t)||e&&nu.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,t=this.buffer[e];for(;!cn(t)&&t!==">";)t=this.buffer[++e];return yield*this.pushToIndex(t===">"?e+1:e,!1)}else{let e=this.pos+1,t=this.buffer[e];for(;t;)if(oM.has(t))t=this.buffer[++e];else if(t==="%"&&d1.has(this.buffer[e+1])&&d1.has(this.buffer[e+2]))t=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let t=this.pos-1,r;do r=this.buffer[++t];while(r===" "||e&&r==="	");const i=t-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=t),i}*pushUntil(e){let t=this.pos,r=this.buffer[t];for(;!e(r);)r=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class Dk{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,r=this.lineStarts.length;for(;t<r;){const s=t+r>>1;this.lineStarts[s]<e?t=s+1:r=s}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(t===0)return{line:0,col:e};const i=this.lineStarts[t-1];return{line:t,col:e-i+1}}}}function pr(n,e){for(let t=0;t<n.length;++t)if(n[t].type===e)return!0;return!1}function p1(n){for(let e=0;e<n.length;++e)switch(n[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Ak(n){switch(n==null?void 0:n.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function ru(n){switch(n.type){case"document":return n.start;case"block-map":{const e=n.items[n.items.length-1];return e.sep??e.start}case"block-seq":return n.items[n.items.length-1].start;default:return[]}}function Ai(n){var t;if(n.length===0)return[];let e=n.length;e:for(;--e>=0;)switch(n[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((t=n[++e])==null?void 0:t.type)==="space";);return n.splice(e,n.length)}function m1(n){if(n.start.type==="flow-seq-start")for(const e of n.items)e.sep&&!e.value&&!pr(e.start,"explicit-key-ind")&&!pr(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,Ak(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class $p{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new wk,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(e,t))yield*this.next(r);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const t=kk(e);if(t)if(t==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const r=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(!t)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield t;else{const r=this.peek(1);switch(t.type==="block-scalar"?t.indent="indent"in r?r.indent:0:t.type==="flow-collection"&&r.type==="document"&&(t.indent=0),t.type==="flow-collection"&&m1(t),r.type){case"document":r.value=t;break;case"block-scalar":r.props.push(t);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=t;else{Object.assign(i,{key:t,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:t}):i.value=t;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:t,sep:[]}):i.sep?i.value=t:Object.assign(i,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){const i=t.items[t.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&p1(i.start)===-1&&(t.indent===0||i.start.every(s=>s.type!=="comment"||s.indent<t.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),t.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{p1(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const t=ru(this.peek(2)),r=Ai(t);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const i="end"in t.value?t.value.end:void 0,s=Array.isArray(i)?i[i.length-1]:void 0;(s==null?void 0:s.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const i=e.items[e.items.length-2],s=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(s)){Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const i=!this.onKeyLine&&this.indent===e.indent,s=i&&(t.sep||t.explicitKey)&&this.type!=="seq-item-ind";let o=[];if(s&&t.sep&&!t.value){const l=[];for(let u=0;u<t.sep.length;++u){const a=t.sep[u];switch(a.type){case"newline":l.push(u);break;case"space":break;case"comment":a.indent>e.indent&&(l.length=0);break;default:l.length=0}}l.length>=2&&(o=t.sep.splice(l[1]))}switch(this.type){case"anchor":case"tag":s||t.value?(o.push(this.sourceToken),e.items.push({start:o}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":!t.sep&&!t.explicitKey?(t.start.push(this.sourceToken),t.explicitKey=!0):s||t.value?(o.push(this.sourceToken),e.items.push({start:o,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(pr(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(Ak(t.key)&&!pr(t.sep,"newline")){const l=Ai(t.start),u=t.key,a=t.sep;a.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:l,key:u,sep:a}]})}else o.length>0?t.sep=t.sep.concat(o,this.sourceToken):t.sep.push(this.sourceToken);else if(pr(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const l=Ai(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:l,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||s?e.items.push({start:o,key:null,sep:[this.sourceToken]}):pr(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const l=this.flowScalar(this.type);s||t.value?(e.items.push({start:o,key:l,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(l):(Object.assign(t,{key:l,sep:[]}),this.onKeyLine=!0);return}default:{const l=this.startBlockValue(e);if(l){if(l.type==="block-seq"){if(!t.explicitKey&&t.sep&&!pr(t.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else i&&e.items.push({start:o});this.stack.push(l);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const i="end"in t.value?t.value.end:void 0,s=Array.isArray(i)?i[i.length-1]:void 0;(s==null?void 0:s.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const i=e.items[e.items.length-2],s=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(s)){Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;t.value||pr(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>e.indent){const i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!t||t.value?e.items.push({start:[],key:i,sep:[]}):t.sep?this.stack.push(i):Object.assign(t,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=ru(r),s=Ai(i);m1(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const l={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=l}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=ru(e),r=Ai(t);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const t=ru(e),r=Ai(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return this.type!=="comment"||this.indent<=t?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Ck(n){const e=n.prettyErrors!==!1;return{lineCounter:n.lineCounter||e&&new Dk||null,prettyErrors:e}}function uM(n,e={}){const{lineCounter:t,prettyErrors:r}=Ck(e),i=new $p(t==null?void 0:t.addNewLine),s=new Bp(e),o=Array.from(s.compose(i.parse(n)));if(r&&t)for(const l of o)l.errors.forEach(Ea(n,t)),l.warnings.forEach(Ea(n,t));return o.length>0?o:Object.assign([],{empty:!0},s.streamInfo())}function _k(n,e={}){const{lineCounter:t,prettyErrors:r}=Ck(e),i=new $p(t==null?void 0:t.addNewLine),s=new Bp(e);let o=null;for(const l of s.compose(i.parse(n),!0,n.length))if(!o)o=l;else if(o.options.logLevel!=="silent"){o.errors.push(new ii(l.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&t&&(o.errors.forEach(Ea(n,t)),o.warnings.forEach(Ea(n,t))),o}function aM(n,e,t){let r;typeof e=="function"?r=e:t===void 0&&e&&typeof e=="object"&&(t=e);const i=_k(n,t);if(!i)return null;if(i.warnings.forEach(s=>Wv(i.options.logLevel,s)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},t))}function cM(n,e,t){let r=null;if(typeof e=="function"||Array.isArray(e)?r=e:t===void 0&&e&&(t=e),typeof t=="string"&&(t=t.length),typeof t=="number"){const i=Math.round(t);t=i<1?void 0:i>8?{indent:8}:{indent:i}}if(n===void 0){const{keepUndefined:i}=t??e??{};if(!i)return}return bi(n)&&!r?n.toString(t):new _s(n,r,t).toString(t)}const fM=Object.freeze(Object.defineProperty({__proto__:null,Alias:uc,CST:sM,Composer:Bp,Document:_s,Lexer:wk,LineCounter:Dk,Pair:bt,Parser:$p,Scalar:se,Schema:bc,YAMLError:Ip,YAMLMap:Ht,YAMLParseError:ii,YAMLSeq:Mr,YAMLWarning:fk,isAlias:Nr,isCollection:Ne,isDocument:bi,isMap:ws,isNode:je,isPair:Be,isScalar:Ae,isSeq:Ds,parse:aM,parseAllDocuments:uM,parseDocument:_k,stringify:cM,visit:yi,visitAsync:lc},Symbol.toStringTag,{value:"Module"}));function hM(n){let e=null;try{e=fM.parse(n.doc.toString())}catch{}const t=Qd(n,Re.YAML);return{data:e,pointers:t}}const Sk=n=>{switch(n){case Re.JSON:return zR;case Re.JSON5:return nI;case Re.YAML:return hM}};function dM(n){return Object.entries(n)}function Js(n,e){if(typeof n=="string"||typeof n!="object"||n===null)return n;if(Array.isArray(n))return n.map(i=>Js(i,e));if(n instanceof Map){const i=new Map;for(const[s,o]of n){const l=s,u=Js(o,e);i.set(l,u)}return i}if(n instanceof Set){const i=new Set;for(const s of n){const o=Js(s,e);i.add(o)}return i}const t={};function r(i,s,o,l){o===i&&l===s?t[o]=Js(s,e):t[o]=l}for(const[i,s]of dM(n)){const o=e(i,s);if(o.length===2&&typeof o[0]=="string")r(i,s,o[0],o[1]);else for(const[l,u]of o)r(i,s,l,u)}return t}var pM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class mM{constructor(){this.completions=new Map,this.reservedKeys=new Set}reserve(e){this.reservedKeys.add(e)}add(e){this.reservedKeys.has(e.label)||this.completions.set(e.label,e)}}function oo(n){return!(!n||yt(n)||n.name==="UnknownPropertyError"||n.type==="undefined")}class gM{constructor(e){var t,r,i;this.opts=e,this.originalSchema=null,this.schema=null,this.laxSchema=null,this.mode=Re.JSON,this.mode=(t=e.mode)!==null&&t!==void 0?t:Re.JSON,this.parser=(i=(r=this.opts)===null||r===void 0?void 0:r.jsonParser)!==null&&i!==void 0?i:Sk(this.mode)}doComplete(e){var t;const r=Xd(e.state);if(this.originalSchema!==r&&(this.schema=(t=Hr(r,r))!==null&&t!==void 0?t:r,this.laxSchema=yM(this.schema)),!this.schema||!this.laxSchema)return[];$e.log("xxx","trying with original schema");const i=this.doCompleteForSchema(e,this.schema);return i.options.length!==0?i:($e.log("xxx","no completions with original schema, trying with lax schema"),this.doCompleteForSchema(e,this.laxSchema))}doCompleteForSchema(e,t){var r,i;const s={from:e.pos,to:e.pos,options:[],filter:!1},o=e.state.doc.sliceString(0);let l=ef(e.state,e.pos),u=e.state.sliceDoc(l.from,e.pos).replace(/^(["'])/,"");if($e.log("xxx","node",l,"prefix",u,"ctx",e),!(wu(l,this.mode)||ql(l,this.mode))&&!e.explicit)return $e.log("xxx","no completions for non-word/primitive",l),s;const a=Ci(e.state.doc,l),c=Ci(e.state.doc,l,!1);if(l&&(wu(l,this.mode)||ql(l,this.mode)))s.from=l.from,s.to=l.to;else{const p=e.matchBefore(/[A-Za-z0-9._]*/),m=e.pos-a.length;$e.log("xxx","overwriteStart after",m,"ctx.pos",e.pos,"word",p,"currentWord",a,"=>",o[m-1],"..",o[m],"..",o),s.from=l.name===le.INVALID?(r=p==null?void 0:p.from)!==null&&r!==void 0?r:e.pos:m,s.to=e.pos}const f=new mM;let h=!0;const d=zm(l,le.PROPERTY_NAME,this.mode);if(d&&($e.log("xxx","closestPropertyNameNode",d,"node",l),l=d),ql(l,this.mode)){$e.log("xxx","isPropertyNameNode",l);const p=l.parent;if(p){const m=Vm(p,this.mode);h=!m||m.name===le.INVALID&&m.from-m.to===0||(m.parent?il(m.parent).length<=1:!1),$e.log("xxx","addValue",h,Vm(p,this.mode),l),l=(i=zm(p,le.OBJECT,this.mode))!==null&&i!==void 0?i:null}}if($e.log("xxx",l,a,e,"node at pos",ef(e.state,e.pos)),l&&[le.OBJECT,le.JSON_TEXT].includes(We(l.name,this.mode))&&(ql(ef(e.state,e.pos),this.mode)||d)){if(l.from===e.pos)return $e.log("xxx","no completions for just before opening brace"),s;this.getPropertyCompletions(t,e,l,f,h,c)}else{const p={},m=this.getValueCompletions(t,e,p,f);$e.log("xxx","getValueCompletions res",m)}return s.options=Array.from(f.completions.values()).filter(p=>ku(p.label).startsWith(u)),$e.log("xxx","result",s,"prefix",u,"collector.completions",f.completions,"reservedKeys",f.reservedKeys),s}applySnippetCompletion(e){return s8(typeof e.apply!="string"?e.label:e.apply,e)}getPropertyCompletions(e,t,r,i,s,o){const l=S8(r,le.PROPERTY,this.mode);$e.log("xxx","getPropertyCompletions",r,t,l),l.forEach(a=>{const c=Ci(t.state.doc,Fh(a,le.PROPERTY_NAME,this.mode));i.reserve(ku(c))});const u=this.getSchemas(e,t);$e.log("xxx","propertyCompletion schemas",u),u.forEach(a=>{if(typeof a!="object")return;const c=a.properties;c&&Object.entries(c).forEach(([h,d])=>{var p,m;if(typeof d=="object"){const g=(p=d.description)!==null&&p!==void 0?p:"",b=(m=d.type)!==null&&m!==void 0?m:"",y=Array.isArray(b)?b.toString():b,x={label:h,apply:this.getInsertTextForProperty(h,s,o,e,d),type:"property",detail:y,info:()=>En("div",{inner:Gi(g)})};i.add(this.applySnippetCompletion(x))}});const f=a.propertyNames;if(typeof f=="object"&&(f.enum&&f.enum.forEach(h=>{const d=h==null?void 0:h.toString();if(d){const p={label:d,apply:this.getInsertTextForProperty(d,s,o,e),type:"property"};i.add(this.applySnippetCompletion(p))}}),f.const)){const h=f.const.toString(),d={label:h,apply:this.getInsertTextForProperty(h,s,o,e),type:"property"};i.add(this.applySnippetCompletion(d))}})}getInsertTextForProperty(e,t,r,i,s){s=s&&Hr(s,i);let o=this.getInsertTextForPropertyName(e,r);if(!t)return o;o+=": ";let l,u=0;if(typeof s=="object"){if(typeof s.default<"u")l||(l=this.getInsertTextForGuessedValue(s.default,"")),u++;else if(s.enum&&(!l&&s.enum.length===1&&(l=this.getInsertTextForGuessedValue(s.enum[0],"")),u+=s.enum.length),typeof s.const<"u"&&(l||(l=this.getInsertTextForGuessedValue(s.const,"")),u++),Array.isArray(s.examples)&&s.examples.length&&(l||(l=this.getInsertTextForGuessedValue(s.examples[0],"")),u+=s.examples.length),l===void 0&&u===0){let a=Array.isArray(s.type)?s.type[0]:s.type;switch(a||(s.properties?a="object":s.items&&(a="array")),a){case"boolean":l="#{}";break;case"string":l=this.getInsertTextForString("");break;case"object":switch(this.mode){case Re.JSON5:l="{#{}}";break;case Re.YAML:l="#{}";break;default:l="{#{}}";break}break;case"array":l="[#{}]";break;case"number":case"integer":l="#{0}";break;case"null":l="#{null}";break;default:l="#{}";break}}}return(!l||u>1)&&($e.log("xxx","value",l,"nValueProposals",u,s),l="#{}"),o+l}getInsertTextForPropertyName(e,t){switch(this.mode){case Re.JSON5:case Re.YAML:return t.startsWith('"')?`"${e}"`:t.startsWith("'")?`'${e}'`:e;default:return`"${e}"`}}getInsertTextForString(e,t="#"){switch(this.mode){case Re.JSON5:return`'${t}{${e}}'`;case Re.YAML:return`${t}{${e}}`;default:return`"${t}{${e}}"`}}getInsertTextForGuessedValue(e,t=""){switch(typeof e){case"object":return e===null?"${null}"+t:this.getInsertTextForValue(e,t);case"string":{let r=JSON.stringify(e);return r=r.substr(1,r.length-2),r=this.getInsertTextForPlainText(r),this.getInsertTextForString(r,"$")+t}case"number":case"boolean":return"${"+JSON.stringify(e)+"}"+t}return this.getInsertTextForValue(e,t)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,t){const r=JSON.stringify(e,null,"	");return r==="{}"?"{#{}}"+t:r==="[]"?"[#{}]"+t:this.getInsertTextForPlainText(r+t)}getValueCompletions(e,t,r,i){let s=et(t.state).resolveInner(t.pos,-1),o=null,l;if($e.log("xxx","getValueCompletions",s,t),s&&wu(s,this.mode)&&(o=s,s=s.parent),!s){this.addSchemaValueCompletions(e,r,i);return}if(We(s.name,this.mode)===le.PROPERTY){const a=Fh(s,le.PROPERTY_NAME,this.mode);a&&(l=Ci(t.state.doc,a),s=s.parent)}if($e.log("xxx","node",s,"parentKey",l),s&&(l!==void 0||We(s.name,this.mode)===le.ARRAY)){const a=this.getSchemas(e,t);for(const c of a){if(typeof c!="object")return;if(We(s.name,this.mode)===le.ARRAY&&c.items){let f=i;if(c.uniqueItems&&(f=Object.assign(Object.assign({},f),{add(h){f.completions.has(h.label)||i.add(h)},reserve(h){i.reserve(h)}})),Array.isArray(c.items)){let h=0;if(o){const p=$2(s,o,this.mode);p>=0&&(h=p)}const d=c.items[h];d&&this.addSchemaValueCompletions(d,r,f)}else this.addSchemaValueCompletions(c.items,r,f)}if((c.type==null||c.type!=="object")&&this.addSchemaValueCompletions(c,r,i),l!==void 0){let f=!1;if(c.properties){const h=c.properties[l];h&&(f=!0,this.addSchemaValueCompletions(h,r,i))}if(c.patternProperties&&!f)for(const h of Object.keys(c.patternProperties)){const d=this.extendedRegExp(h);if(d!=null&&d.test(l)){f=!0;const p=c.patternProperties[h];p&&this.addSchemaValueCompletions(p,r,i)}}if(c.additionalProperties&&!f){const h=c.additionalProperties;this.addSchemaValueCompletions(h,r,i)}}r.boolean&&(this.addBooleanValueCompletion(!0,i),this.addBooleanValueCompletion(!1,i)),r.null&&this.addNullValueCompletion(i)}}return{valuePrefix:o?Ci(t.state.doc,o,!0,!1):""}}addSchemaValueCompletions(e,t,r){typeof e=="object"&&(this.addEnumValueCompletions(e,r),this.addDefaultValueCompletions(e,r),this.collectTypes(e,t),Array.isArray(e.allOf)&&e.allOf.forEach(i=>this.addSchemaValueCompletions(i,t,r)),Array.isArray(e.anyOf)&&e.anyOf.forEach(i=>this.addSchemaValueCompletions(i,t,r)),Array.isArray(e.oneOf)&&e.oneOf.forEach(i=>this.addSchemaValueCompletions(i,t,r)))}addDefaultValueCompletions(e,t,r=0){let i=!1;if(typeof e.default<"u"){let s=e.type,o=e.default;for(let u=r;u>0;u--)o=[o],s="array";const l=Object.assign(Object.assign({type:s==null?void 0:s.toString()},this.getAppliedValue(o)),{detail:"Default value"});t.add(l),i=!0}Array.isArray(e.examples)&&e.examples.forEach(s=>{let o=e.type,l=s;for(let u=r;u>0;u--)l=[l],o="array";t.add(Object.assign({type:o==null?void 0:o.toString()},this.getAppliedValue(l))),i=!0}),!i&&typeof e.items=="object"&&!Array.isArray(e.items)&&r<5&&this.addDefaultValueCompletions(e.items,t,r+1)}addEnumValueCompletions(e,t){var r,i;if(typeof e.const<"u"&&t.add(Object.assign(Object.assign({type:(r=e.type)===null||r===void 0?void 0:r.toString()},this.getAppliedValue(e.const)),{info:e.description})),Array.isArray(e.enum))for(let s=0,o=e.enum.length;s<o;s++){const l=e.enum[s];t.add(Object.assign(Object.assign({type:(i=e.type)===null||i===void 0?void 0:i.toString()},this.getAppliedValue(l)),{info:e.description}))}}addBooleanValueCompletion(e,t){t.add({type:"boolean",label:e?"true":"false"})}addNullValueCompletion(e){e.add({type:"null",label:"null"})}collectTypes(e,t){if(Array.isArray(e.enum)||typeof e.const<"u")return;const r=e.type;Array.isArray(r)?r.forEach(i=>t[i]=!0):r&&(t[r]=!0)}getSchemas(e,t){var r,i,s;const{data:o}=this.parser(t.state),l=new wx(e);let u=M2(t.state,t.pos,-1,this.mode);if(u===""&&(u=void 0),u!=null&&u.endsWith("/")){u=u.substring(0,u.length-1);const p=g1(e,o,u);if(p!=null)return[p]}let a=u!=null?u.replace(/\/[^/]*$/,""):void 0;a===""&&(a=void 0);const c=g1(e,o,a),f=u==null?void 0:u.split("/").pop(),h=f==null||f in((r=c==null?void 0:c.properties)!==null&&r!==void 0?r:{});let d=l.getSchema({pointer:u,data:o??void 0});return!h&&(d==null?void 0:d.type)==="null"&&this.mode==="yaml"&&(d=void 0),$e.log("xxxx","draft.getSchema",d,"data",o,"pointer",u,"pointerPointsToKnownProperty",h),yt(d)&&(d=(i=d.data)===null||i===void 0?void 0:i.schema),!oo(d)&&c?[c]:(oo(d)||(d=l.getSchema({pointer:a}),u=a),$e.log("xxx","pointer..",JSON.stringify(u)),!oo(d)&&(!u||u==="/")&&(d=(s=Hr(e,e))!==null&&s!==void 0?s:e),$e.log("xxx","subSchema..",d),d?Array.isArray(d.allOf)?[d,...d.allOf.map(p=>Hr(p,e))]:Array.isArray(d.oneOf)?[d,...d.oneOf.map(p=>Hr(p,e))]:Array.isArray(d.anyOf)?[d,...d.anyOf.map(p=>Hr(p,e))]:[d]:[])}getAppliedValue(e){const t=ku(JSON.stringify(e));switch(this.mode){case Re.JSON5:return{label:t,apply:C8(JSON.stringify(e))};case Re.YAML:return{label:t,apply:t};default:return{label:t,apply:JSON.stringify(e)}}}getValueFromLabel(e){return JSON.parse(e)}extendedRegExp(e){let t="";e.startsWith("(?i)")&&(e=e.substring(4),t="i");try{return new RegExp(e,t+"u")}catch{try{return new RegExp(e,t)}catch{return}}}}function bM(n={}){const e=new gM(n);return function(r){return e.doComplete(r)}}function yM(n){return Js(n,(e,t)=>e==="additionalProperties"&&t===!1?[]:e==="required"&&Array.isArray(t)?[]:e==="unevaluatedProperties"&&t===!1?[]:e==="unevaluatedItems"&&t===!1?[]:[e,t])}function g1(n,e,t){const r=new wx(n),i=r.getSchema({pointer:t,data:e??void 0});if(!oo(i))return;const s=Ek(r,i),o={};for(let h of s){let d=vM(t,h);const p=r.getSchema({pointer:d,data:e??void 0});oo(p)&&Object.assign(o,{[h]:p})}if(s.length===0||Object.keys(o).length===0)return;const l=i,{allOf:u,anyOf:a,oneOf:c}=l,f=pM(l,["allOf","anyOf","oneOf"]);return Object.assign(Object.assign({},f),{properties:o})}function Ek(n,e){if(e=Hr(e,n.rootSchema),typeof e!="object"||e==null)return[];const t=[];function r(i){const s=Ek(n,i);t.push(...s)}if(typeof e.properties=="object"&&e.properties!=null&&t.push(...Object.keys(e.properties)),typeof e.then=="object"&&e.then!=null&&r(e.then),Array.isArray(e.allOf))for(const i of e.allOf)r(i);if(Array.isArray(e.anyOf))for(const i of e.anyOf)r(i);if(Array.isArray(e.oneOf))for(const i of e.oneOf)r(i);return t}function Hr(n,e){if(typeof n=="object"&&n.$ref){const t=xM(e,n.$ref);if(typeof t=="object"){const r=Object.assign(Object.assign({},n),t);return Reflect.deleteProperty(r,"$ref"),r}}return n}function xM(n,e){const t=e.split("/");let r=n;return t.forEach(i=>{if(i){if(i==="#"){r=n;return}typeof r=="object"&&(r=r[i])}}),r}function vM(n,e){return n===void 0?`/${e}`:`${n}/${e}`}const No=(n,e)=>{const t=n.length>2;let r=n.map((i,s)=>{const o="`"+(e?e(i):i)+"`";return s===n.length-1?"or "+o:o});return t?r.join(", "):r.join(" ")},kM=n=>{var e,t,r;return!((e=n==null?void 0:n.data)===null||e===void 0)&&e.pointer&&((t=n==null?void 0:n.data)===null||t===void 0?void 0:t.pointer)!=="#"?n.data.pointer.slice(1):!((r=n==null?void 0:n.data)===null||r===void 0)&&r.property?`/${n.data.property}`:""},wM=n=>n.startState.field(ia)!==n.state.field(ia);function DM(n){const e=new CM(n);return t=>e.doValidation(t)}const AM=["NoAdditionalPropertiesError","RequiredPropertyError","InvalidPropertyNameError","ForbiddenPropertyError","UndefinedValueError"];class CM{constructor(e){var t,r,i,s;this.options=e,this.schema=null,this.mode=Re.JSON,this.rewriteError=o=>{var l,u,a,c,f;const h=o==null?void 0:o.data,d=h==null?void 0:h.errors;return o.code==="one-of-error"&&(d!=null&&d.length)?`Expected one of ${No(d,m=>m.data.expected)}`:o.code==="type-error"?`Expected \`${!((l=o==null?void 0:o.data)===null||l===void 0)&&l.expected&&Array.isArray((u=o==null?void 0:o.data)===null||u===void 0?void 0:u.expected)?No((a=o==null?void 0:o.data)===null||a===void 0?void 0:a.expected):(c=o==null?void 0:o.data)===null||c===void 0?void 0:c.expected}\` but received \`${(f=o==null?void 0:o.data)===null||f===void 0?void 0:f.received}\``:o.message.replaceAll("in `#` ","").replaceAll("at `#`","").replaceAll("/",".").replaceAll("#.","")},this.mode=(r=(t=this.options)===null||t===void 0?void 0:t.mode)!==null&&r!==void 0?r:Re.JSON,this.parser=(s=(i=this.options)===null||i===void 0?void 0:i.jsonParser)!==null&&s!==void 0?s:Sk(this.mode)}get schemaTitle(){var e,t,r;return(r=(t=(e=this.schema)===null||e===void 0?void 0:e.getSchema())===null||t===void 0?void 0:t.title)!==null&&r!==void 0?r:"json-schema"}doValidation(e){const t=Xd(e.state);if(!t)return[];if(this.schema=new kx(t),!this.schema)return[];const r=e.state.doc.toString();if(!(r!=null&&r.length))return[];const i=this.parser(e.state);if(i.data==null)return[];let s=[];try{s=this.schema.validate(i.data)}catch{}return $e.log("xxx","validation errors",s,i.data),s.length?s.reduce((o,l)=>{const u=()=>{const f=this.rewriteError(l);o.push({from:0,to:0,message:f,severity:"error",source:this.schemaTitle,renderMessage:()=>{const h=En("div",{});return h.innerHTML=Gi(f),h}})},a=kM(l),c=i.pointers.get(a);if(l.name==="MaxPropertiesError"||l.name==="MinPropertiesError"||a==="")u();else if(c){const f=AM.includes(l.name),h=this.rewriteError(l),d=f?c.keyFrom:c.valueFrom,p=f?c.keyTo:c.valueTo;p!==void 0&&d!==void 0&&o.push({from:d,to:p,message:h,renderMessage:()=>{const m=En("div",{});return m.innerHTML=Gi(h),m},severity:"error",source:this.schemaTitle})}else u();return o},[]):[]}}function _M(n){const e=new SM(n);return async function(r,i,s){return e.doHover(r,i,s)}}function b1(n){if(n.type)return n.$ref?`${n.$ref} (${n.type})`:n.type;if(n.$ref)return`${n.$ref}`}function Rf(n,e,t){return`${e}: ${No(n[e].map(r=>{try{const{data:i}=t.resolveRef({data:r,pointer:r.$ref});return b1(i||r)}catch{return r.type}}))}`}class SM{constructor(e){var t,r;this.opts=e,this.schema=null,this.mode=Re.JSON,this.opts=Object.assign({parser:JSON.parse},this.opts),this.mode=(r=(t=this.opts)===null||t===void 0?void 0:t.mode)!==null&&r!==void 0?r:Re.JSON}getDataForCursor(e,t,r){const i=Xd(e.state);if(!i)return null;this.schema=new kx(i);const s=M2(e.state,t,r,this.mode);let o;try{o=this.opts.parser(e.state.doc.toString())}catch{}if(!s)return null;let l=this.schema.getSchema({pointer:s,data:o,withSchemaWarning:!0});return yt(l)&&(l!=null&&l.data.schema.$ref?l=this.schema.resolveRef(l):l=l==null?void 0:l.data.schema),{schema:l,pointer:s}}formatMessage(e){const{message:t,typeInfo:r}=e;return t?En("div",{class:"cm6-json-schema-hover"},[En("div",{class:"cm6-json-schema-hover--description",inner:Gi(t,!1)}),En("div",{class:"cm6-json-schema-hover--code-wrapper"},[En("div",{class:"cm6-json-schema-hover--code",inner:Gi(r,!1)})])]):En("div",{class:"cm6-json-schema-hover"},[En("div",{class:"cm6-json-schema-hover--code-wrapper"},[En("code",{class:"cm6-json-schema-hover--code",inner:Gi(r,!1)})])])}getHoverTexts(e,t){let r="",i=null;const{schema:s}=e;return s.oneOf&&(r=Rf(s,"oneOf",t)),s.anyOf&&(r=Rf(s,"anyOf",t)),s.allOf&&(r=Rf(s,"allOf",t)),s.type&&(r=Array.isArray(s.type)?No(s.type):s.type),s.$ref&&(r=` Reference: ${s.$ref}`),s.enum&&(r=`\`enum\`: ${No(s.enum)}`),s.format&&(r+=`\`format\`: ${s.format}`),s.pattern&&(r+=`\`pattern\`: ${s.pattern}`),s.description&&(i=s.description),{message:i,typeInfo:r}}async doHover(e,t,r){var i,s,o,l;const u=t,a=t;try{const c=this.getDataForCursor(e,t,r);if($e.log("cursorData",c),!(c!=null&&c.schema))return null;const h=((s=(i=this.opts)===null||i===void 0?void 0:i.getHoverTexts)!==null&&s!==void 0?s:this.getHoverTexts)(c,this.schema),p=((l=(o=this.opts)===null||o===void 0?void 0:o.formatHover)!==null&&l!==void 0?l:this.formatMessage)(h);return{pos:u,end:a,arrow:!0,above:!0,create:m=>({dom:p})}}catch(c){return $e.log(c),null}}}function EM(n){return[v2(),Dh(k6()),Dh(DM(),{needsRefresh:wM}),x2.data.of({autocomplete:bM()}),Iy(_M()),T8(n)]}const OM=(n,e)=>{const t=Ok(n);return t.push(v2()),e!==void 0&&t.push(EM(e)),n||t.push(tE),t},Ok=n=>{const e=[JS()];return n&&e.push(he.readOnly.of(!0)),e},TM=n=>Ok(n),FM=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=Lp(n.state,t.from);return r.line?PM(n):r.block?IM(n):!1};function Np(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const PM=Np($M,0),RM=Np(Tk,0),IM=Np((n,e)=>Tk(n,e,BM(e)),0);function Lp(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const qs=50;function MM(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-qs,r),o=n.sliceDoc(i,i+qs),l=/\s*$/.exec(s)[0].length,u=/^\s*/.exec(o)[0].length,a=s.length-l;if(s.slice(a-e.length,a)==e&&o.slice(u,u+t.length)==t)return{open:{pos:r-l,margin:l&&1},close:{pos:i+u,margin:u&&1}};let c,f;i-r<=2*qs?c=f=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+qs),f=n.sliceDoc(i-qs,i));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-t.length;return c.slice(h,h+e.length)==e&&f.slice(p,p+t.length)==t?{open:{pos:r+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-d-t.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function BM(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to);i.from>r.from&&i.from==t.to&&(i=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Tk(n,e,t=e.selection.ranges){let r=t.map(s=>Lp(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>MM(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,l;o<i.length;o++)if(l=i[o]){let u=r[o],{open:a,close:c}=l;s.push({from:a.pos-u.open.length,to:a.pos+a.margin},{from:c.pos-c.margin,to:c.pos+u.close.length})}return{changes:s}}return null}function $M(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let l=r.length,u=1e9,a=Lp(e,s).line;if(a){for(let c=s;c<=o;){let f=e.doc.lineAt(c);if(f.from>i&&(s==o||o>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,p=f.text.slice(h,h+a.length)==a?h:-1;h<f.text.length&&h<u&&(u=h),r.push({line:f,comment:p,token:a,indent:h,empty:d,single:!1})}c=f.to+1}if(u<1e9)for(let c=l;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=u);r.length==l+1&&(r[l].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:u,indent:a,empty:c,single:f}of r)(f||!c)&&s.push({from:l.from+a,insert:u+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:u}of r)if(l>=0){let a=o.from+l,c=a+u.length;o.text[c-o.from]==" "&&c++,s.push({from:a,to:c})}return{changes:s}}return null}const id=cr.define(),NM=cr.define(),LM=Q.define(),Fk=Q.define({combine(n){return gn(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),Pk=Ke.define({create(){return $n.empty},update(n,e){let t=e.state.facet(Fk),r=e.annotation(id);if(r){let u=Bt.fromTransaction(e,r.selection),a=r.side,c=a==0?n.undone:n.done;return u?c=Ta(c,c.length,t.minDepth,u):c=Mk(c,e.startState.selection),new $n(a==0?r.rest:c,a==0?c:r.rest)}let i=e.annotation(NM);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(Xe.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Bt.fromTransaction(e),o=e.annotation(Xe.time),l=e.annotation(Xe.userEvent);return s?n=n.addChanges(s,o,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new $n(n.done.map(Bt.fromJSON),n.undone.map(Bt.fromJSON))}});function jM(n={}){return[Pk,Fk.of(n),Y.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Rk:e.inputType=="historyRedo"?sd:null;return r?(e.preventDefault(),r(t)):!1}})]}function kc(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(Pk,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const Rk=kc(0,!1),sd=kc(1,!1),qM=kc(0,!0),VM=kc(1,!0);class Bt{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Bt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Bt(e.changes&&nt.fromJSON(e.changes),[],e.mapped&&Nn.fromJSON(e.mapped),e.startSelection&&I.fromJSON(e.startSelection),e.selectionsAfter.map(I.fromJSON))}static fromTransaction(e,t){let r=en;for(let i of e.startState.facet(LM)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Bt(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,en)}static selection(e){return new Bt(void 0,en,void 0,void 0,e)}}function Ta(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function zM(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,l)=>{for(let u=0;u<t.length;){let a=t[u++],c=t[u++];l>=a&&o<=c&&(r=!0)}}),r}function UM(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function Ik(n,e){return n.length?e.length?n.concat(e):n:e}const en=[],HM=200;function Mk(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-HM));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),Ta(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Bt.selection([e])]}function WM(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function If(n,e){if(!n.length)return n;let t=n.length,r=en;for(;t;){let i=GM(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Bt.selection(r)]:en}function GM(n,e,t){let r=Ik(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):en,t);if(!n.changes)return Bt.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Bt(i,re.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const KM=/^(input\.type|delete)($|\.)/;class $n{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new $n(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||KM.test(r))&&(!l.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,zM(l.changes,e.changes))||r=="input.type.compose")?o=Ta(o,o.length-1,i.minDepth,new Bt(e.changes.compose(l.changes),Ik(re.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,en)):o=Ta(o,o.length,i.minDepth,e),new $n(o,en,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:en;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&UM(s[s.length-1],e)?this:new $n(Mk(this.done,e),this.undone,t,r)}addMapping(e){return new $n(If(this.done,e),If(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:id.of({side:e,rest:WM(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=i.length==1?en:i.slice(0,i.length-1);return s.mapped&&(l=If(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:id.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}$n.empty=new $n(en,en);const JM=[{key:"Mod-z",run:Rk,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:sd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:sd,preventDefault:!0},{key:"Mod-u",run:qM,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:VM,preventDefault:!0}];function Ss(n,e){return I.create(n.ranges.map(e),n.mainIndex)}function xn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function vn({state:n,dispatch:e},t){let r=Ss(n.selection,t);return r.eq(n.selection,!0)?!1:(e(xn(n,r)),!0)}function wc(n,e){return I.cursor(e?n.to:n.from)}function Bk(n,e){return vn(n,t=>t.empty?n.moveByChar(t,e):wc(t,e))}function xt(n){return n.textDirectionAt(n.state.selection.main.head)==Te.LTR}const $k=n=>Bk(n,!xt(n)),Nk=n=>Bk(n,xt(n));function Lk(n,e){return vn(n,t=>t.empty?n.moveByGroup(t,e):wc(t,e))}const YM=n=>Lk(n,!xt(n)),QM=n=>Lk(n,xt(n));function XM(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Dc(n,e,t){let r=et(n).resolveInner(e.head),i=t?fe.closedBy:fe.openedBy;for(let u=e.head;;){let a=t?r.childAfter(u):r.childBefore(u);if(!a)break;XM(n,a,i)?r=a:u=t?a.to:a.from}let s=r.type.prop(i),o,l;return s&&(o=t?In(n,r.from,1):In(n,r.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?r.to:r.from,I.cursor(l,t?-1:1)}const ZM=n=>vn(n,e=>Dc(n.state,e,!xt(n))),eB=n=>vn(n,e=>Dc(n.state,e,xt(n)));function jk(n,e){return vn(n,t=>{if(!t.empty)return wc(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const qk=n=>jk(n,!1),Vk=n=>jk(n,!0);function zk(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(Y.scrollMargins)){let o=s(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function Uk(n,e){let t=zk(n),{state:r}=n,i=Ss(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):wc(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),u=l.top+t.marginTop,a=l.bottom-t.marginBottom;o&&o.top>u&&o.bottom<a&&(s=Y.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-u}))}return n.dispatch(xn(r,i),{effects:s}),!0}const y1=n=>Uk(n,!1),od=n=>Uk(n,!0);function Lr(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=I.cursor(r.from+s))}return i}const tB=n=>vn(n,e=>Lr(n,e,!0)),nB=n=>vn(n,e=>Lr(n,e,!1)),rB=n=>vn(n,e=>Lr(n,e,!xt(n))),iB=n=>vn(n,e=>Lr(n,e,xt(n))),sB=n=>vn(n,e=>I.cursor(n.lineBlockAt(e.head).from,1)),oB=n=>vn(n,e=>I.cursor(n.lineBlockAt(e.head).to,-1));function lB(n,e,t){let r=!1,i=Ss(n.selection,s=>{let o=In(n,s.head,-1)||In(n,s.head,1)||s.head>0&&In(n,s.head-1,1)||s.head<n.doc.length&&In(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return I.cursor(l)});return r?(e(xn(n,i)),!0):!1}const uB=({state:n,dispatch:e})=>lB(n,e);function an(n,e){let t=Ss(n.state.selection,r=>{let i=e(r);return I.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(xn(n.state,t)),!0)}function Hk(n,e){return an(n,t=>n.moveByChar(t,e))}const Wk=n=>Hk(n,!xt(n)),Gk=n=>Hk(n,xt(n));function Kk(n,e){return an(n,t=>n.moveByGroup(t,e))}const aB=n=>Kk(n,!xt(n)),cB=n=>Kk(n,xt(n)),fB=n=>an(n,e=>Dc(n.state,e,!xt(n))),hB=n=>an(n,e=>Dc(n.state,e,xt(n)));function Jk(n,e){return an(n,t=>n.moveVertically(t,e))}const Yk=n=>Jk(n,!1),Qk=n=>Jk(n,!0);function Xk(n,e){return an(n,t=>n.moveVertically(t,e,zk(n).height))}const x1=n=>Xk(n,!1),v1=n=>Xk(n,!0),dB=n=>an(n,e=>Lr(n,e,!0)),pB=n=>an(n,e=>Lr(n,e,!1)),mB=n=>an(n,e=>Lr(n,e,!xt(n))),gB=n=>an(n,e=>Lr(n,e,xt(n))),bB=n=>an(n,e=>I.cursor(n.lineBlockAt(e.head).from)),yB=n=>an(n,e=>I.cursor(n.lineBlockAt(e.head).to)),k1=({state:n,dispatch:e})=>(e(xn(n,{anchor:0})),!0),w1=({state:n,dispatch:e})=>(e(xn(n,{anchor:n.doc.length})),!0),D1=({state:n,dispatch:e})=>(e(xn(n,{anchor:n.selection.main.anchor,head:0})),!0),A1=({state:n,dispatch:e})=>(e(xn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),xB=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),vB=({state:n,dispatch:e})=>{let t=Ac(n).map(({from:r,to:i})=>I.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:I.create(t),userEvent:"select"})),!0},kB=({state:n,dispatch:e})=>{let t=Ss(n.selection,r=>{let i=et(n),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&o.next)return I.range(l.to,l.from)}return r});return t.eq(n.selection)?!1:(e(xn(n,t)),!0)};function Zk(n,e){let{state:t}=n,r=t.selection,i=t.selection.ranges.slice();for(let s of t.selection.ranges){let o=t.doc.lineAt(s.head);if(e?o.to<n.state.doc.length:o.from>0)for(let l=s;;){let u=n.moveVertically(l,e);if(u.head<o.from||u.head>o.to){i.some(a=>a.head==u.head)||i.push(u);break}else{if(u.head==l.head)break;l=u}}}return i.length==r.ranges.length?!1:(n.dispatch(xn(t,I.create(i,i.length-1))),!0)}const wB=n=>Zk(n,!1),DB=n=>Zk(n,!0),AB=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=I.create([t.main]):t.main.empty||(r=I.create([I.cursor(t.main.head)])),r?(e(xn(n,r)),!0):!1};function ml(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let u=e(s);u<o?(t="delete.backward",u=iu(n,u,!1)):u>o&&(t="delete.forward",u=iu(n,u,!0)),o=Math.min(o,u),l=Math.max(l,u)}else o=iu(n,o,!1),l=iu(n,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:I.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Y.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function iu(n,e,t){if(n instanceof Y)for(let r of n.state.facet(Y.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const ew=(n,e,t)=>ml(n,r=>{let i=r.from,{state:s}=n,o=s.doc.lineAt(i),l,u;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,i-o.from))){if(l[l.length-1]=="	")return i-1;let a=ps(l,s.tabSize),c=a%Zu(s)||Zu(s);for(let f=0;f<c&&l[l.length-1-f]==" ";f++)i--;u=i}else u=dt(o.text,i-o.from,e,e)+o.from,u==i&&o.number!=(e?s.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(u-o.from,i-o.from))&&(u=dt(o.text,u-o.from,!1,!1)+o.from);return u}),ld=n=>ew(n,!1,!0),tw=n=>ew(n,!0,!1),nw=(n,e)=>ml(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let l=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let u=dt(s.text,r-s.from,e)+s.from,a=s.text.slice(Math.min(r,u)-s.from,Math.max(r,u)-s.from),c=o(a);if(l!=null&&c!=l)break;(a!=" "||r!=t.head)&&(l=c),r=u}return r}),rw=n=>nw(n,!1),CB=n=>nw(n,!0),_B=n=>ml(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),SB=n=>ml(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),EB=n=>ml(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),OB=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:ge.of(["",""])},range:I.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},TB=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:dt(s.text,i-s.from,!1)+s.from,l=i==s.to?i+1:dt(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:n.doc.slice(i,l).append(n.doc.slice(o,i))},range:I.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ac(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function iw(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of Ac(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let u of s.ranges)i.push(I.range(Math.min(n.doc.length,u.anchor+l),Math.min(n.doc.length,u.head+l)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let u of s.ranges)i.push(I.range(u.anchor-l,u.head-l))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:I.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const FB=({state:n,dispatch:e})=>iw(n,e,!1),PB=({state:n,dispatch:e})=>iw(n,e,!0);function sw(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of Ac(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const RB=({state:n,dispatch:e})=>sw(n,e,!1),IB=({state:n,dispatch:e})=>sw(n,e,!0),MB=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Ac(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ss(e.selection,i=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(i.head),l=n.coordsAtPos(i.head,i.assoc||1);l&&(s=o.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function BB(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=et(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(fe.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const C1=ow(!1),$B=ow(!0);function ow(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,l=e.doc.lineAt(s),u=!n&&s==o&&BB(e,s);n&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let a=new Ga(e,{simulateBreak:s,simulateDoubleBreak:!!u}),c=qd(a,s);for(c==null&&(c=ps(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;u?{from:s,to:o}=u:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let f=["",vo(e,c)];return u&&f.push(vo(e,a.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:ge.of(f)},range:I.cursor(s+1+f[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function jp(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let l=n.doc.lineAt(o);l.number>t&&(r.empty||r.to>l.from)&&(e(l,i,r),t=l.number),o=l.to+1}let s=n.changes(i);return{changes:i,range:I.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const NB=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Ga(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=jp(n,(s,o,l)=>{let u=qd(r,s.from);if(u==null)return;/\S/.test(s.text)||(u=0);let a=/^\s*/.exec(s.text)[0],c=vo(n,u);(a!=c||l.from<s.from+a.length)&&(t[s.from]=u,o.push({from:s.from,to:s.from+a.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},lw=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(jp(n,(t,r)=>{r.push({from:t.from,insert:n.facet(tl)})}),{userEvent:"input.indent"})),!0),uw=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(jp(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=ps(i,n.tabSize),o=0,l=vo(n,Math.max(0,s-Zu(n)));for(;o<i.length&&o<l.length&&i.charCodeAt(o)==l.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),LB=n=>(n.setTabFocusMode(),!0),jB=[{key:"Ctrl-b",run:$k,shift:Wk,preventDefault:!0},{key:"Ctrl-f",run:Nk,shift:Gk},{key:"Ctrl-p",run:qk,shift:Yk},{key:"Ctrl-n",run:Vk,shift:Qk},{key:"Ctrl-a",run:sB,shift:bB},{key:"Ctrl-e",run:oB,shift:yB},{key:"Ctrl-d",run:tw},{key:"Ctrl-h",run:ld},{key:"Ctrl-k",run:_B},{key:"Ctrl-Alt-h",run:rw},{key:"Ctrl-o",run:OB},{key:"Ctrl-t",run:TB},{key:"Ctrl-v",run:od}],qB=[{key:"ArrowLeft",run:$k,shift:Wk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:YM,shift:aB,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:rB,shift:mB,preventDefault:!0},{key:"ArrowRight",run:Nk,shift:Gk,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:QM,shift:cB,preventDefault:!0},{mac:"Cmd-ArrowRight",run:iB,shift:gB,preventDefault:!0},{key:"ArrowUp",run:qk,shift:Yk,preventDefault:!0},{mac:"Cmd-ArrowUp",run:k1,shift:D1},{mac:"Ctrl-ArrowUp",run:y1,shift:x1},{key:"ArrowDown",run:Vk,shift:Qk,preventDefault:!0},{mac:"Cmd-ArrowDown",run:w1,shift:A1},{mac:"Ctrl-ArrowDown",run:od,shift:v1},{key:"PageUp",run:y1,shift:x1},{key:"PageDown",run:od,shift:v1},{key:"Home",run:nB,shift:pB,preventDefault:!0},{key:"Mod-Home",run:k1,shift:D1},{key:"End",run:tB,shift:dB,preventDefault:!0},{key:"Mod-End",run:w1,shift:A1},{key:"Enter",run:C1,shift:C1},{key:"Mod-a",run:xB},{key:"Backspace",run:ld,shift:ld,preventDefault:!0},{key:"Delete",run:tw,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:rw,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:CB,preventDefault:!0},{mac:"Mod-Backspace",run:SB,preventDefault:!0},{mac:"Mod-Delete",run:EB,preventDefault:!0}].concat(jB.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),VB=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ZM,shift:fB},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:eB,shift:hB},{key:"Alt-ArrowUp",run:FB},{key:"Shift-Alt-ArrowUp",run:RB},{key:"Alt-ArrowDown",run:PB},{key:"Shift-Alt-ArrowDown",run:IB},{key:"Mod-Alt-ArrowUp",run:wB},{key:"Mod-Alt-ArrowDown",run:DB},{key:"Escape",run:AB},{key:"Mod-Enter",run:$B},{key:"Alt-l",mac:"Ctrl-l",run:vB},{key:"Mod-i",run:kB,preventDefault:!0},{key:"Mod-[",run:uw},{key:"Mod-]",run:lw},{key:"Mod-Alt-\\",run:NB},{key:"Shift-Mod-k",run:MB},{key:"Shift-Mod-\\",run:uB},{key:"Mod-/",run:FM},{key:"Alt-A",run:RM},{key:"Ctrl-m",mac:"Shift-Alt-m",run:LB}].concat(qB),zB={key:"Tab",run:lw,shift:uw},_1=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class cs{constructor(e,t,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?l=>s(_1(l)):_1,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Rt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=kd(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Tn(e);let i=this.normalize(t);if(i.length)for(let s=0,o=r;;s++){let l=i.charCodeAt(s),u=this.match(l,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(u)return this.value=u,this;break}o==r&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(cs.prototype[Symbol.iterator]=function(){return this});const aw={from:-1,to:-1,match:/.*/.exec("")},qp="gm"+(/x/.unicode==null?"":"u");class cw{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=aw,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new fw(e,t,r,i,s);this.re=new RegExp(t,qp+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Fa(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=Fa(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Mf=new WeakMap;class Yi{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=Mf.get(e);if(!i||i.from>=r||i.to<=t){let l=new Yi(t,e.sliceString(t,r));return Mf.set(e,l),l}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),Mf.set(e,new Yi(o,s)),new Yi(t,s.slice(t-o,r-o))}}class fw{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=aw,this.matchPos=Fa(e,i),this.re=new RegExp(t,qp+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Yi.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=Fa(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Yi.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(cw.prototype[Symbol.iterator]=fw.prototype[Symbol.iterator]=function(){return this});function UB(n){try{return new RegExp(n,qp),!0}catch{return!1}}function Fa(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function ud(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=ke("input",{class:"cm-textfield",name:"line",value:e}),r=ke("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:lo.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},ke("label",n.state.phrase("Go to line"),": ",t)," ",ke("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),ke("button",{name:"close",onclick:()=>{n.dispatch({effects:lo.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=n,l=o.doc.lineAt(o.selection.main.head),[,u,a,c,f]=s,h=c?+c.slice(1):0,d=a?+a:l.number;if(a&&f){let g=d/100;u&&(g=g*(u=="-"?-1:1)+l.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else a&&u&&(d=d*(u=="-"?-1:1)+l.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),m=I.cursor(p.from+Math.max(0,Math.min(h,p.length)));n.dispatch({effects:[lo.of(!1),Y.scrollIntoView(m.from,{y:"center"})],selection:m}),n.focus()}return{dom:r}}const lo=re.define(),S1=Ke.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(lo)&&(n=t.value);return n},provide:n=>bo.from(n,e=>e?ud:null)}),HB=n=>{let e=go(n,ud);if(!e){let t=[lo.of(!0)];n.state.field(S1,!1)==null&&t.push(re.appendConfig.of([S1,WB])),n.dispatch({effects:t}),e=go(n,ud)}return e&&e.dom.querySelector("input").select(),!0},WB=Y.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),GB={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},KB=Q.define({combine(n){return gn(n,GB,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function JB(n){return[e$,ZB]}const YB=te.mark({class:"cm-selectionMatch"}),QB=te.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function E1(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=Me.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=Me.Word)}function XB(n,e,t,r){return n(e.sliceDoc(t,t+1))==Me.Word&&n(e.sliceDoc(r-1,r))==Me.Word}const ZB=qe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(KB),{state:t}=n,r=t.selection;if(r.ranges.length>1)return te.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return te.none;let u=t.wordAt(i.head);if(!u)return te.none;o=t.charCategorizer(i.head),s=t.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return te.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(E1(o,t,i.from,i.to)&&XB(o,t,i.from,i.to)))return te.none}else if(s=t.sliceDoc(i.from,i.to),!s)return te.none}let l=[];for(let u of n.visibleRanges){let a=new cs(t.doc,s,u.from,u.to);for(;!a.next().done;){let{from:c,to:f}=a.value;if((!o||E1(o,t,c,f))&&(i.empty&&c<=i.from&&f>=i.to?l.push(QB.range(c,f)):(c>=i.to||f<=i.from)&&l.push(YB.range(c,f)),l.length>e.maxMatches))return te.none}}return te.set(l)}},{decorations:n=>n.decorations}),e$=Y.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),t$=({state:n,dispatch:e})=>{let{selection:t}=n,r=I.create(t.ranges.map(i=>n.wordAt(i.head)||I.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function n$(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,l=new cs(n.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new cs(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(u=>u.from==l.value.from))continue;if(s){let u=n.wordAt(l.value.from);if(!u||u.from!=l.value.from||u.to!=l.value.to)continue}return l.value}}const r$=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return t$({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=n$(n,r);return i?(e(n.update({selection:n.selection.addRange(I.range(i.from,i.to),!1),effects:Y.scrollIntoView(i.to)})),!0):!1},Es=Q.define({combine(n){return gn(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new m$(e),scrollToMatch:e=>Y.scrollIntoView(e)})}});class hw{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||UB(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new l$(this):new s$(this)}getCursor(e,t=0,r){let i=e.doc?e:he.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Si(this,i,t,r):_i(this,i,t,r)}}class dw{constructor(e){this.spec=e}}function _i(n,e,t,r){return new cs(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?i$(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function i$(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e(Pa(i,t-s))!=Me.Word||e(Ra(i,t-s))!=Me.Word)&&(e(Ra(i,r-s))!=Me.Word||e(Pa(i,r-s))!=Me.Word))}class s$ extends dw{constructor(e){super(e)}nextMatch(e,t,r){let i=_i(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);i=_i(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==r?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=_i(this.spec,e,s,i),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=_i(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=_i(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Si(n,e,t,r){return new cw(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?o$(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function Pa(n,e){return n.slice(dt(n,e,!1),e)}function Ra(n,e){return n.slice(e,dt(n,e))}function o$(n){return(e,t,r)=>!r[0].length||(n(Pa(r.input,r.index))!=Me.Word||n(Ra(r.input,r.index))!=Me.Word)&&(n(Ra(r.input,r.index+r[0].length))!=Me.Word||n(Pa(r.input,r.index+r[0].length))!=Me.Word)}class l$ extends dw{nextMatch(e,t,r){let i=Si(this.spec,e,r,e.doc.length).next();return i.done&&(i=Si(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=Si(this.spec,e,s,r),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return t})}matchAll(e,t){let r=Si(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Si(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Lo=re.define(),Vp=re.define(),Cr=Ke.define({create(n){return new Bf(ad(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Lo)?n=new Bf(t.value.create(),n.panel):t.is(Vp)&&(n=new Bf(n.query,t.value?zp:null));return n},provide:n=>bo.from(n,e=>e.panel)});class Bf{constructor(e,t){this.query=e,this.panel=t}}const u$=te.mark({class:"cm-searchMatch"}),a$=te.mark({class:"cm-searchMatch cm-searchMatch-selected"}),c$=qe.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Cr))}update(n){let e=n.state.field(Cr);(e!=n.startState.field(Cr)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return te.none;let{view:t}=this,r=new lr;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:l,to:u}=s[i];for(;i<o-1&&u>s[i+1].from-500;)u=s[++i].to;n.highlight(t.state,l,u,(a,c)=>{let f=t.state.selection.ranges.some(h=>h.from==a&&h.to==c);r.add(a,c,f?a$:u$)})}return r.finish()}},{decorations:n=>n.decorations});function gl(n){return e=>{let t=e.state.field(Cr,!1);return t&&t.query.spec.valid?n(e,t):gw(e)}}const Ia=gl((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=I.single(r.from,r.to),s=n.state.facet(Es);return n.dispatch({selection:i,effects:[Up(n,r),s.scrollToMatch(i.main,n)],userEvent:"select.search"}),mw(n),!0}),Ma=gl((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=I.single(i.from,i.to),o=n.state.facet(Es);return n.dispatch({selection:s,effects:[Up(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),mw(n),!0}),f$=gl((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:I.create(t.map(r=>I.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),h$=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let l=new cs(n.doc,n.sliceDoc(r,i));!l.next().done;){if(s.length>1e3)return!1;l.value.from==r&&(o=s.length),s.push(I.range(l.value.from,l.value.to))}return e(n.update({selection:I.create(s,o),userEvent:"select.search.matches"})),!0},O1=gl((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=s,l=[],u,a,c=[];o.from==r&&o.to==i&&(a=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=e.nextMatch(t,o.from,o.to),c.push(Y.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+".")));let f=n.state.changes(l);return o&&(u=I.single(o.from,o.to).map(f),c.push(Up(n,o)),c.push(t.facet(Es).scrollToMatch(u.main,n))),n.dispatch({changes:f,selection:u,effects:c,userEvent:"input.replace"}),!0}),d$=gl((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Y.announce.of(r),userEvent:"input.replace.all"}),!0});function zp(n){return n.state.facet(Es).createPanel(n)}function ad(n,e){var t,r,i,s,o;let l=n.selection.main,u=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!u)return e;let a=n.facet(Es);return new hw({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:a.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:a.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:a.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:a.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:a.wholeWord})}function pw(n){let e=go(n,zp);return e&&e.dom.querySelector("[main-field]")}function mw(n){let e=pw(n);e&&e==n.root.activeElement&&e.select()}const gw=n=>{let e=n.state.field(Cr,!1);if(e&&e.panel){let t=pw(n);if(t&&t!=n.root.activeElement){let r=ad(n.state,e.query.spec);r.valid&&n.dispatch({effects:Lo.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[Vp.of(!0),e?Lo.of(ad(n.state,e.query.spec)):re.appendConfig.of(b$)]});return!0},bw=n=>{let e=n.state.field(Cr,!1);if(!e||!e.panel)return!1;let t=go(n,zp);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Vp.of(!1)}),!0},p$=[{key:"Mod-f",run:gw,scope:"editor search-panel"},{key:"F3",run:Ia,shift:Ma,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ia,shift:Ma,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:bw,scope:"editor search-panel"},{key:"Mod-Shift-l",run:h$},{key:"Mod-Alt-g",run:HB},{key:"Mod-d",run:r$,preventDefault:!0}];class m${constructor(e){this.view=e;let t=this.query=e.state.field(Cr).query.spec;this.commit=this.commit.bind(this),this.searchField=ke("input",{value:t.search,placeholder:Vt(e,"Find"),"aria-label":Vt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ke("input",{value:t.replace,placeholder:Vt(e,"Replace"),"aria-label":Vt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ke("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=ke("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=ke("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,o){return ke("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=ke("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Ia(e),[Vt(e,"next")]),r("prev",()=>Ma(e),[Vt(e,"previous")]),r("select",()=>f$(e),[Vt(e,"all")]),ke("label",null,[this.caseField,Vt(e,"match case")]),ke("label",null,[this.reField,Vt(e,"regexp")]),ke("label",null,[this.wordField,Vt(e,"by word")]),...e.state.readOnly?[]:[ke("br"),this.replaceField,r("replace",()=>O1(e),[Vt(e,"replace")]),r("replaceAll",()=>d$(e),[Vt(e,"replace all")])],ke("button",{name:"close",onclick:()=>bw(e),"aria-label":Vt(e,"close"),type:"button"},[""])])}commit(){let e=new hw({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Lo.of(e)}))}keydown(e){P_(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ma:Ia)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),O1(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(Lo)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Es).top}}function Vt(n,e){return n.state.phrase(e)}const su=30,ou=/[\s\.,:;?!]/;function Up(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-su),o=Math.min(i,t+su),l=n.state.sliceDoc(s,o);if(s!=r.from){for(let u=0;u<su;u++)if(!ou.test(l[u+1])&&ou.test(l[u])){l=l.slice(u);break}}if(o!=i){for(let u=l.length-1;u>l.length-su;u--)if(!ou.test(l[u-1])&&ou.test(l[u])){l=l.slice(0,u);break}}return Y.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${r.number}.`)}const g$=Y.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),b$=[Cr,$r.low(c$),g$],y$=[OS(),PS(),J_(),jM(),n6(),N_(),z_(),he.allowMultipleSelections.of(!0),VE(),i6(l6,{fallback:!0}),p6(),l8(),y8(),aS(),hS(),tS(),JB(),Zo.of([...f8,...VB,...p$,...JM,...XE,...F2,...NS])];/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var x$=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[y$]}),v$=Symbol("vue-codemirror-global-config"),Ct,k$=function(n){var e=n.onUpdate,t=n.onChange,r=n.onFocus,i=n.onBlur,s=(function(o,l){var u={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&l.indexOf(a)<0&&(u[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var c=0;for(a=Object.getOwnPropertySymbols(o);c<a.length;c++)l.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(o,a[c])&&(u[a[c]]=o[a[c]])}return u})(n,["onUpdate","onChange","onFocus","onBlur"]);return he.create({doc:s.doc,selection:s.selection,extensions:(Array.isArray(s.extensions)?s.extensions:[s.extensions]).concat([Y.updateListener.of((function(o){e(o),o.docChanged&&t(o.state.doc.toString(),o),o.focusChanged&&(o.view.hasFocus?r(o):i(o))}))])})},Ei=function(n){var e=new Ko;return{compartment:e,run:function(t){e.get(n.state)?n.dispatch({effects:e.reconfigure(t)}):n.dispatch({effects:re.appendConfig.of(e.of(t))})}}},T1=function(n,e){var t=Ei(n),r=t.compartment,i=t.run;return function(s){var o=r.get(n.state);i(s??o!==e?e:[])}},lu={type:Boolean,default:void 0},w$={autofocus:lu,disabled:lu,indentWithTab:lu,tabSize:Number,placeholder:String,style:Object,autoDestroy:lu,phrases:Object,root:Object,extensions:Array,selection:Object},D$={modelValue:{type:String,default:""}},A$=Object.assign(Object.assign({},w$),D$);(function(n){n.Change="change",n.Update="update",n.Focus="focus",n.Blur="blur",n.Ready="ready",n.ModelUpdate="update:modelValue"})(Ct||(Ct={}));var Kr={};Kr[Ct.Change]=function(n,e){return!0},Kr[Ct.Update]=function(n){return!0},Kr[Ct.Focus]=function(n){return!0},Kr[Ct.Blur]=function(n){return!0},Kr[Ct.Ready]=function(n){return!0};var yw={};yw[Ct.ModelUpdate]=Kr[Ct.Change];var C$=Object.assign(Object.assign({},Kr),yw),_$=V({name:"VueCodemirror",props:Object.assign({},A$),emits:Object.assign({},C$),setup:function(n,e){var t=Ec(),r=Ec(),i=Ec(),s=Object.assign(Object.assign({},x$),Yw(v$,{})),o=X((function(){var l={};return Object.keys(Qw(n)).forEach((function(u){var a;u!=="modelValue"&&(l[u]=(a=n[u])!==null&&a!==void 0?a:s[u])})),l}));return mi((function(){var l;r.value=k$({doc:n.modelValue,selection:o.value.selection,extensions:(l=s.extensions)!==null&&l!==void 0?l:[],onFocus:function(a){return e.emit(Ct.Focus,a)},onBlur:function(a){return e.emit(Ct.Blur,a)},onUpdate:function(a){return e.emit(Ct.Update,a)},onChange:function(a,c){a!==n.modelValue&&(e.emit(Ct.Change,a,c),e.emit(Ct.ModelUpdate,a,c))}}),i.value=(function(a){return new Y(Object.assign({},a))})({state:r.value,parent:t.value,root:o.value.root});var u=(function(a){var c=function(){return a.state.doc.toString()},f=Ei(a).run,h=T1(a,[Y.editable.of(!1),he.readOnly.of(!0)]),d=T1(a,Zo.of([zB])),p=Ei(a).run,m=Ei(a).run,g=Ei(a).run,b=Ei(a).run;return{focus:function(){return a.focus()},getDoc:c,setDoc:function(y){y!==c()&&a.dispatch({changes:{from:0,to:a.state.doc.length,insert:y}})},reExtensions:f,toggleDisabled:h,toggleIndentWithTab:d,setTabSize:function(y){p([he.tabSize.of(y),tl.of(" ".repeat(y))])},setPhrases:function(y){m([he.phrases.of(y)])},setPlaceholder:function(y){g(sS(y))},setStyle:function(y){y===void 0&&(y={}),b(Y.theme({"&":Object.assign({},y)}))}}})(i.value);He((function(){return n.modelValue}),(function(a){a!==u.getDoc()&&u.setDoc(a)})),He((function(){return n.extensions}),(function(a){return u.reExtensions(a||[])}),{immediate:!0}),He((function(){return o.value.disabled}),(function(a){return u.toggleDisabled(a)}),{immediate:!0}),He((function(){return o.value.indentWithTab}),(function(a){return u.toggleIndentWithTab(a)}),{immediate:!0}),He((function(){return o.value.tabSize}),(function(a){return u.setTabSize(a)}),{immediate:!0}),He((function(){return o.value.phrases}),(function(a){return u.setPhrases(a||{})}),{immediate:!0}),He((function(){return o.value.placeholder}),(function(a){return u.setPlaceholder(a)}),{immediate:!0}),He((function(){return o.value.style}),(function(a){return u.setStyle(a)}),{immediate:!0}),o.value.autofocus&&u.focus(),e.emit(Ct.Ready,{state:r.value,view:i.value,container:t.value})})),Xw((function(){o.value.autoDestroy&&i.value&&(function(l){l.destroy()})(i.value)})),function(){return Zw("div",{class:"v-codemirror",style:{display:"contents"},ref:t})}}}),S$=_$;const Cc=V({__name:"CodeEditor",props:Br({class:{default:""},placeholder:{default:"Payload..."},language:{},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},validationSchema:{default:void 0},asChild:{type:Boolean},as:{}},{modelValue:{default:()=>""},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=n,t=Un(n,"modelValue"),r=X(()=>e.language==="json"?OM(e.readonly,e.validationSchema):TM(e.readonly)),i=s=>{t.value=s};return(s,o)=>(S(),j(v(S$),{placeholder:n.placeholder,style:{height:"100%"},extensions:r.value,"indent-with-tab":!0,"tab-size":4,"model-value":t.value,disabled:n.disabled,onChange:i},null,8,["placeholder","extensions","model-value","disabled"]))}}),E$=V({__name:"RequestBodyJson",props:Br({schema:{}},{modelValue:{default:()=>""},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Un(n,"modelValue");return(t,r)=>(S(),j(Cc,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value=i),language:"json",readonly:!1,placeholder:"Your JSON Payload","validation-schema":n.schema},null,8,["modelValue","validation-schema"]))}}),O$=V({__name:"RequestBodyPlainText",setup(n){return(e,t)=>(S(),j(Cc,{language:"plain",readonly:!1,placeholder:"Your Plain Text Content"}))}}),T$={class:"min-h-0 w-full flex-1"},F$=V({__name:"RequestBodyContent",props:{payloadType:{},payload:{},schema:{}},emits:["update:payload"],setup(n,{emit:e}){const t=e,r=i=>{t("update:payload",i)};return(i,s)=>(S(),W("div",T$,[n.payloadType===v(Ge).JSON?(S(),j(E$,{key:0,"model-value":n.payload,schema:n.schema,"onUpdate:modelValue":r},null,8,["model-value","schema"])):n.payloadType===v(Ge).FORM_DATA?(S(),j(P3,{key:1,"model-value":n.payload,"onUpdate:modelValue":r},null,8,["model-value"])):n.payloadType===v(Ge).PLAIN_TEXT?(S(),j(O$,{key:2,"model-value":n.payload,"onUpdate:modelValue":r},null,8,["model-value"])):(S(),j(R3,{key:3,"onUpdate:modelValue":r}))]))}}),P$={class:"dark:bg-subtle-background max-w-full flex-1 overflow-auto bg-red-50 p-2 leading-tight wrap-anywhere"},R$=["innerHTML"],I$=V({__name:"SchemaExtractionErrorButton",props:{errorHtml:{}},setup(n){return(e,t)=>(S(),j(v(K1),null,{default:E(()=>[_(v(WA),null,{default:E(()=>[_(v(Gt),{size:"xs",variant:"ghost"},{default:E(()=>[_(v(eA)),t[0]||(t[0]=Z(" Error Info ",-1))]),_:1})]),_:1}),_(v(J1),{class:"to-background flex max-h-[90dvh] flex-col bg-gradient-to-bl from-red-50 to-50% sm:max-w-[600px] dark:from-red-900/15"},{default:E(()=>[_(v(Y1),null,{default:E(()=>[_(v(Q1),null,{default:E(()=>[...t[1]||(t[1]=[Z("Schema Extraction Error",-1)])]),_:1}),_(v(X1),null,{default:E(()=>[...t[2]||(t[2]=[Z(" The following error was thrown when trying to call the `rules()` method from the request. ",-1)])]),_:1})]),_:1}),N("div",P$,[N("p",{innerHTML:n.errorHtml},null,8,R$)]),t[4]||(t[4]=N("p",{class:"text-xs italic"}," Note: An attempt to understand the schema statically (from the code as is) was made. The schema might not be complete. ",-1)),_(v(dD),{class:"sm:justify-start"},{default:E(()=>[_(v(HA),{"as-child":""},{default:E(()=>[_(v(Gt),{variant:"secondary"},{default:E(()=>[...t[3]||(t[3]=[Z("Dismiss",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),M$={class:"px-panel flex items-center justify-between border-b bg-gradient-to-tr from-red-50 to-transparent to-50% py-1 dark:from-red-900/15"},B$={class:"flex items-start gap-2 text-xs"},$$={class:"px-1 py-2"},N$=V({__name:"RequestBodyErrorDisplay",props:{extractionError:{}},setup(n){const e=n;return(t,r)=>(S(),W("div",M$,[N("div",B$,[N("div",$$,[_(v(nb),{class:"size-4 text-red-600 dark:text-red-500"})]),r[0]||(r[0]=N("div",null,[N("span",{class:"flex items-center gap-1 font-bold"},"Extraction Error"),N("p",{class:"text-subtle-foreground mb-0"}," It wasn't possible to fully extract the shape of this route, there was an error. ")],-1))]),_(I$,{"error-html":e.extractionError},null,8,["error-html"])]))}}),L$={class:"flex min-h-0 flex-1 flex-col"},j$=V({__name:"RequestBody",setup(n){const{payloadType:e,payload:t,pendingRequestData:r,supportsAutoFill:i,autofill:s,types:o}=A3();return(l,u)=>{var a,c,f,h,d,p;return S(),W("div",L$,[_(ds,{class:"border-b"},{toolbox:E(()=>[_(v(z$),{disabled:!v(i),onClick:v(s)},null,8,["disabled","onClick"])]),default:E(()=>[_(v(H$),{modelValue:v(e),"onUpdate:modelValue":u[0]||(u[0]=m=>U1(e)?e.value=m:null),types:v(o)},null,8,["modelValue","types"])]),_:1}),((c=(a=v(r))==null?void 0:a.schema)==null?void 0:c.extractionErrors)!=null?(S(),j(N$,{key:0,"extraction-error":(h=(f=v(r))==null?void 0:f.schema)==null?void 0:h.extractionErrors},null,8,["extraction-error"])):Ie("",!0),_(F$,{"payload-type":v(e),payload:v(t),schema:(p=(d=v(r))==null?void 0:d.schema)==null?void 0:p.shape,"onUpdate:payload":u[1]||(u[1]=m=>t.value=m)},null,8,["payload-type","payload","schema"])])}}}),q$=V({__name:"AppBorderBeam",props:{class:{default:""},size:{default:200},duration:{default:15e3},borderWidth:{default:1.5},anchor:{default:10},colorFrom:{default:"#ffaa40"},colorTo:{default:"#9c40ff"},delay:{default:0}},setup(n){eD(i=>({v94863366:i.size,v93e5c0cc:t.value,v1ba16601:i.anchor,c2a7dda4:i.borderWidth,v48ad4a3e:i.colorFrom,v76e2991c:i.colorTo,ff289aba:r.value}));const e=n,t=X(()=>`${e.duration}s`),r=X(()=>`${e.delay}s`);return(i,s)=>(S(),W("div",{class:Fe(v(De)("border-beam","pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-composite:intersect] ![mask-clip:padding-box,border-box] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","animate-border-beam after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e.class))},null,2))}}),V$=I1(q$,[["__scopeId","data-v-799e4936"]]),xw=V({__name:"AppGlowingButton",props:{duration:{default:10},beamSize:{default:200},variant:{default:"secondary"},size:{default:"xs"},class:{},asChild:{type:Boolean},as:{}},setup(n){const e=n;return(t,r)=>(S(),j(v(Gt),{size:n.size,variant:n.variant,class:Fe(v(De)("group relative",e.class))},{default:E(()=>[_(V$,{size:n.beamSize,duration:n.duration,delay:0,"border-width":1,class:"group-disabled:hidden"},null,8,["size","duration"]),ie(t.$slots,"default")]),_:3},8,["size","variant","class"]))}}),z$=V({__name:"RequestBodyAutoFillButton",setup(n){return(e,t)=>(S(),j(xw,null,{default:E(()=>[_(v(bA),{class:"transition-all will-change-transform group-hover:rotate-12"}),t[0]||(t[0]=Z(" Auto Fill ",-1))]),_:1}))}}),U$={class:"flex items-center"},H$=V({__name:"RequestBodySelector",props:Br({types:{}},{modelValue:{default:()=>""},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=n,t=Un(n,"modelValue");return(r,i)=>(S(),W("div",U$,[i[1]||(i[1]=N("span",{class:"text-muted-foreground w-[80px] text-xs"},"Payload Type:",-1)),_(v(zo),{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=s=>t.value=s)},{default:E(()=>[_(v(Uo),{class:"min-w-[120px] rounded-none border-0 text-xs shadow-none focus:ring-0"},{default:E(()=>[_(v(Ho))]),_:1}),_(v(Wo),null,{default:E(()=>[(S(!0),W(Le,null,sn(e.types,s=>(S(),j(v(Sr),{key:s.id,value:s.id},{default:E(()=>[Z(de(s.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]))}}),W$={class:"flex flex-1 flex-col space-y-4 overflow-hidden"},G$={key:0,class:"rounded-md bg-yellow-50 p-3 dark:bg-yellow-900/20"},K$={class:"flex min-h-0 flex-1 flex-col space-y-3"},J$={class:"mb-2 flex items-center justify-between"},Y$={class:"bg-subtle-background text-foreground flex-1 overflow-auto rounded-md border p-4 font-mono text-sm leading-relaxed break-all whitespace-break-spaces"},Q$={class:"flex justify-end border-t pt-4 dark:border-gray-700"},X$=V({__name:"CurlExportDialog",props:{open:{type:Boolean},command:{},hasSpecialAuth:{type:Boolean}},emits:["update:open"],setup(n,{emit:e}){const t=n,r=e,{copy:i,copied:s}=fs(),o=()=>{i(t.command)},l=()=>{r("update:open",!1)};return(u,a)=>(S(),j(v(K1),{open:n.open,"onUpdate:open":a[0]||(a[0]=c=>r("update:open",c))},{default:E(()=>[_(v(J1),{class:"flex max-h-[90vh] max-w-2xl flex-col overflow-hidden sm:max-w-2xl"},{default:E(()=>[_(v(Y1),null,{default:E(()=>[_(v(Q1),null,{default:E(()=>[...a[1]||(a[1]=[Z("cURL Command",-1)])]),_:1}),_(v(X1),null,{default:E(()=>[...a[2]||(a[2]=[Z(" Copy the generated cURL command to use in your terminal or scripts. ",-1)])]),_:1})]),_:1}),N("div",W$,[n.hasSpecialAuth?(S(),W("div",G$,[...a[3]||(a[3]=[N("p",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Note: Authorization has been dropped as special authorization types (Current User, Impersonate) are not supported in cURL commands. ",-1)])])):Ie("",!0),N("div",K$,[N("div",J$,[a[4]||(a[4]=N("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Command ",-1)),_(v(Gt),{variant:"outline",size:"sm",class:"flex items-center gap-2",onClick:o},{default:E(()=>[v(s)?(S(),j(v(pD),{key:0,class:"h-4 w-4"})):(S(),j(v(mD),{key:1,class:"h-4 w-4"})),Z(" "+de(v(s)?"Copied!":"Copy"),1)]),_:1})]),N("pre",Y$,de(n.command),1)])]),N("div",Q$,[_(v(Gt),{variant:"outline",onClick:l},{default:E(()=>[...a[5]||(a[5]=[Z("Close",-1)])]),_:1})])]),_:1})]),_:1},8,["open"]))}}),Z$={class:"flex flex-1 items-center"},e7={class:"flex gap-2 pr-2"},t7=V({__name:"RequestBuilderEndpoint",props:{class:{}},setup(n){const e=n,t=["GET","POST","PUT","PATCH","DELETE"],r=ar(),i=hs(),s=ce(!1),o=ce(""),l=ce(!1),u=X(()=>r.pendingRequestData),a=X({get:()=>{var g;return((g=u.value)==null?void 0:g.endpoint)??""},set:g=>r.updateRequestEndpoint(g)}),c=X({get:()=>{var g,b;return((b=(g=u.value)==null?void 0:g.method)==null?void 0:b.toUpperCase())??"GET"},set:g=>r.updateRequestMethod(g.toUpperCase())}),f=X(()=>{var y;const g=(y=r.pendingRequestData)==null?void 0:y.supportedRoutes,b=(g==null?void 0:g.map(x=>x.method))??[];return t.filter(x=>b.includes(x))}),h=X(()=>t.filter(g=>!f.value.includes(g))),d=g=>{g.key==="Enter"&&(g.preventDefault(),p())},p=async function(){r.pendingRequestData&&await r.executeCurrentRequest()},m=()=>{if(!r.pendingRequestData)return;const g=xA(r.pendingRequestData,i.apiUrl);o.value=g.command,l.value=g.hasSpecialAuth,s.value=!0};return(g,b)=>{var y;return S(),W(Le,null,[N("div",{class:Fe(v(De)("flex",e.class))},[_(v(zo),{modelValue:c.value,"onUpdate:modelValue":b[0]||(b[0]=x=>c.value=x)},{default:E(()=>[_(v(Uo),{class:"h-full w-[95px] rounded-none border-0 border-r pr-1.5 pl-5 text-xs shadow-none focus:ring-0 focus-visible:ring-0"},{default:E(()=>[_(v(Ho),{placeholder:c.value?"":"Select a Method"},{default:E(()=>[Z(de(c.value||"Select a Method"),1)]),_:1},8,["placeholder"])]),_:1}),_(v(Wo),null,{default:E(()=>[_(v(Iu),null,{default:E(()=>[_(v(Mu),null,{default:E(()=>[...b[3]||(b[3]=[Z("Supported",-1)])]),_:1}),(S(!0),W(Le,null,sn(f.value,x=>(S(),j(v(Sr),{key:x,value:x},{default:E(()=>[Z(de(x),1)]),_:2},1032,["value"]))),128))]),_:1}),h.value.length!==0?(S(),j(v(Iu),{key:0},{default:E(()=>[_(v(Mu),null,{default:E(()=>[...b[4]||(b[4]=[Z("Other",-1)])]),_:1}),(S(!0),W(Le,null,sn(h.value,x=>(S(),j(v(Sr),{key:x,value:x},{default:E(()=>[Z(de(x),1)]),_:2},1032,["value"]))),128))]),_:1})):Ie("",!0)]),_:1})]),_:1},8,["modelValue"]),N("div",Z$,[_(v(_r),{ref:"inputRef",modelValue:a.value,"onUpdate:modelValue":b[1]||(b[1]=x=>a.value=x),class:"h-full flex-1 rounded-none border-0 text-xs shadow-none focus:ring-0 focus-visible:ring-0",placeholder:"<endpoint>",onKeydown:d},null,8,["modelValue"]),N("div",e7,[_(v(Gt),{size:"xs",disabled:!u.value||((y=u.value)==null?void 0:y.isProcessing),class:"gap-0",onClick:p},{default:E(()=>[b[5]||(b[5]=Z(" Send ( ",-1)),_(v(iA),{class:"size-3 px-0"}),b[6]||(b[6]=Z(" ) ",-1))]),_:1},8,["disabled"]),_(Lf,{value:"Export cURL"},{default:E(()=>[_(v(Gt),{variant:"outline",size:"xs",disabled:!u.value,onClick:m},{default:E(()=>[_(v(rA))]),_:1},8,["disabled"])]),_:1})])])],2),_(X$,{open:s.value,"onUpdate:open":b[2]||(b[2]=x=>s.value=x),command:o.value,"has-special-auth":l.value},null,8,["open","command","has-special-auth"])],64)}}}),n7=V({__name:"RequestHeaders",setup(n){const e=ar(),t=hs(),r=W1(),i=ce([]),s=X(()=>e.pendingRequestData);let o=[];const l=X({get:()=>i.value.map(f=>({type:"text",key:f.key,value:String(f.value)})),set:f=>{i.value=f.map(h=>({key:h.key,value:h.value}))}}),u=f=>{switch(f){case uu.Uuid:return r.generateValue("uuid");case uu.Email:return r.generateValue("email");case uu.String:return r.generateValue("word");default:return r.generateValue("word")}},a=()=>{s.value!==null&&e.updateRequestHeaders(i.value.filter(f=>f.value!==null))},c=(f=null)=>{const h=(f==null?void 0:f.headers)??[],d=h.map(m=>m.key),p=o.filter(m=>!d.includes(m.key));i.value=[...p,...h]};return He(i,()=>a(),{deep:!0}),He(s,(f,h)=>{(f==null?void 0:f.endpoint)===(h==null?void 0:h.endpoint)&&(f==null?void 0:f.method)===(h==null?void 0:h.method)||c(h)},{deep:!0}),gd(()=>{o=t.headers.map(f=>({key:f.header,value:f.type==="generator"?u(f.value):f.value})),c()}),(f,h)=>(S(),W(Le,null,[_(ds,{class:"border-b"},{default:E(()=>[...h[1]||(h[1]=[Z("Request Headers",-1)])]),_:1}),_(vd,{ref:"parametersBuilder",modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=d=>l.value=d)},null,8,["modelValue"])],64))}}),r7={class:"px-panel bg-subtle-background flex border-b py-2 text-xs"},i7={class:"flex-1"},s7={key:0},o7={key:1,class:"text-subtle-foreground"},l7=V({__name:"RequestParameters",setup(n){const e=ar(),{copy:t,copied:r}=fs(),i=ce([]),s=ce(""),o=X(()=>e.pendingRequestData),l=()=>t(s.value);return H1(i,()=>{o.value!==null&&(e.updateQueryParameters(i.value),s.value=e.getRequestUrl(o.value))},{deep:!0,debounce:200}),He(()=>{var u;return(u=o.value)==null?void 0:u.endpoint},(u,a)=>{u!==a&&o.value&&(i.value=o.value.queryParameters.map(c=>({key:c.key,value:c.value})))},{immediate:!0}),(u,a)=>(S(),W(Le,null,[_(ds,{class:"border-b"},{default:E(()=>[...a[1]||(a[1]=[Z("Query Parameters",-1)])]),_:1}),N("div",r7,[N("div",i7,[a[2]||(a[2]=N("small",{class:"font-medium"},"URL Preview",-1)),s.value.length?(S(),W("p",s7,de(s.value),1)):(S(),W("p",o7,"Pick an endpoint to start"))]),N("div",null,[_(Go,{"on-click":l,copied:v(r)},null,8,["copied"])])]),_(vd,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=c=>i.value=c),class:"flex-1"},null,8,["modelValue"])],64))}}),u7={class:"relative flex h-full max-h-full flex-1 flex-col","data-testid":"request-builder-root"},a7={class:"bg-subtle-background border-b"},c7=V({__name:"RequestBuilder",setup(n){return(e,t)=>(S(),W("div",u7,[_(v(t7),{class:"h-toolbar border-b"}),_(v(ub),{"default-value":"body",class:"mt-0 flex flex-1 flex-col overflow-hidden","data-testid":"app-tabs-container"},{default:E(()=>[N("div",a7,[_(v(ab),{class:"h-toolbar px-panel rounded-none"},{default:E(()=>[_(v(Yr),{value:"parameters",label:"Parameters"}),_(v(Yr),{value:"body",label:"Body"}),_(v(Yr),{value:"authorization",label:"Authorization"}),_(v(Yr),{value:"headers",label:"Headers"})]),_:1})]),_(v(Jr),{value:"parameters",class:"mt-0 flex max-h-full min-h-0 flex-1 flex-col"},{default:E(()=>[_(v(l7))]),_:1}),_(v(Jr),{value:"body",class:"mt-0 flex max-h-full min-h-0 flex-1 flex-col"},{default:E(()=>[_(v(j$))]),_:1}),_(v(Jr),{value:"authorization",class:"mt-0 flex max-h-full min-h-0 flex-1 flex-col"},{default:E(()=>[_(v(D3))]),_:1}),_(v(Jr),{value:"headers",class:"mt-0 flex max-h-full min-h-0 flex-1 flex-col"},{default:E(()=>[_(v(n7))]),_:1})]),_:1})]))}}),f7=V({__name:"AppSpinner",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("svg",{class:Fe(v(De)("size-4 text-zinc-900",e.class)),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[...r[0]||(r[0]=[N("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),N("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])],2))}}),h7=V({__name:"StatusIndicator",props:{status:{}},setup(n){const e=n,t={[Qe.INFORMATION]:"text-zinc-500",[Qe.SUCCESS]:"text-emerald-600",[Qe.REDIRECT]:"text-blue-500",[Qe.CLIENT_ERROR]:"text-amber-500",[Qe.SERVER_ERROR]:"text-rose-500",[Qe.OTHER]:"text-zinc-500",[Qe.EMPTY]:"text-zinc-900",[Qe.PENDING]:""},r=X(()=>t[e.status]);return(i,s)=>e.status===v(Qe).PENDING?(S(),j(f7,{key:0,"data-testid":"pending-request-spinner",class:"text-accent-foreground size-4 animate-spin"})):(S(),j(Aw,{key:1,class:Fe(r.value)},null,8,["class"]))}}),d7={class:"flex items-center space-x-2"},p7={class:"text-xs text-nowrap","data-testid":"response-status-text"},m7=V({__name:"ResponseStatusCode",props:{status:{},response:{}},setup(n){const e=n;return(t,r)=>(S(),W("div",d7,[_(h7,{status:e.status},null,8,["status"]),N("span",p7,de(e.status),1),e.response?(S(),j(v(uo),{key:0,variant:"outline",class:"text-nowrap","data-testid":"response-status-badge"},{default:E(()=>[Z(de(e.response.statusCode)+" - "+de(e.response.statusText),1)]),_:1})):e.status!==v(Qe).EMPTY?(S(),j(v(uo),{key:1,variant:"outline",class:"text-nowrap"},{default:E(()=>[...r[0]||(r[0]=[Z(" - ",-1)])]),_:1})):Ie("",!0)]))}}),g7=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],b7=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],y7=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],x7=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],F1=(n,e,t)=>{let r=n;return typeof e=="string"||Array.isArray(e)?r=n.toLocaleString(e,t):(e===!0||t!==void 0)&&(r=n.toLocaleString(void 0,t)),r},vw=n=>{if(typeof n=="number")return Math.log10(n);const e=n.toString(10);return e.length+Math.log10(`0.${e.slice(0,15)}`)},v7=n=>typeof n=="number"?Math.log(n):vw(n)*Math.log(10),k7=(n,e)=>{if(typeof n=="number")return n/e;const t=n/BigInt(e),r=n%BigInt(e);return Number(t)+Number(r)/e},P1=(n,e)=>{if(e===void 0)return n;if(typeof e!="number"||!Number.isSafeInteger(e)||e<0)throw new TypeError(`Expected fixedWidth to be a non-negative integer, got ${typeof e}: ${e}`);return e===0?n:n.length<e?n.padStart(e," "):n},w7=n=>{const{minimumFractionDigits:e,maximumFractionDigits:t}=n;if(!(e===void 0&&t===void 0))return{...e!==void 0&&{minimumFractionDigits:e},...t!==void 0&&{maximumFractionDigits:t},roundingMode:"trunc"}};function D7(n,e){if(typeof n!="bigint"&&!Number.isFinite(n))throw new TypeError(`Expected a finite number, got ${typeof n}: ${n}`);e={bits:!1,binary:!1,space:!0,nonBreakingSpace:!1,...e};const t=e.bits?e.binary?x7:y7:e.binary?b7:g7,r=e.space?e.nonBreakingSpace?"":" ":"",i=typeof n=="number"?n===0:n===0n;if(e.signed&&i){const a=` 0${r}${t[0]}`;return P1(a,e.fixedWidth)}const s=n<0,o=s?"-":e.signed?"+":"";s&&(n=-n);const l=w7(e);let u;if(n<1){const a=F1(n,e.locale,l);u=o+a+r+t[0]}else{const a=Math.min(Math.floor(e.binary?v7(n)/Math.log(1024):vw(n)/3),t.length-1);if(n=k7(n,(e.binary?1024:1e3)**a),!l){const h=Math.max(3,Math.floor(n).toString().length);n=n.toPrecision(h)}const c=F1(Number(n),e.locale,l),f=t[a];u=o+c+r+f}return P1(u,e.fixedWidth)}const R1=n=>Number.isFinite(n)?n:0;function A7(n){return{days:Math.trunc(n/864e5),hours:Math.trunc(n/36e5%24),minutes:Math.trunc(n/6e4%60),seconds:Math.trunc(n/1e3%60),milliseconds:Math.trunc(n%1e3),microseconds:Math.trunc(R1(n*1e3)%1e3),nanoseconds:Math.trunc(R1(n*1e6)%1e3)}}function C7(n){return{days:n/86400000n,hours:n/3600000n%24n,minutes:n/60000n%60n,seconds:n/1000n%60n,milliseconds:n%1000n,microseconds:0n,nanoseconds:0n}}function _7(n){switch(typeof n){case"number":{if(Number.isFinite(n))return A7(n);break}case"bigint":return C7(n)}throw new TypeError("Expected a finite number or bigint")}const S7=n=>n===0||n===0n,E7=(n,e)=>e===1||e===1n?n:`${n}s`,O7=1e-7,T7=24n*60n*60n*1000n;function F7(n,e){const t=typeof n=="bigint";if(!t&&!Number.isFinite(n))throw new TypeError("Expected a finite number or bigint");e={...e};const r=n<0?"-":"";n=n<0?-n:n,e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let i=[];const s=(c,f)=>{const h=Math.floor(c*10**f+O7);return(Math.round(h)/10**f).toFixed(f)},o=(c,f,h,d)=>{if(!((i.length===0||!e.colonNotation)&&S7(c)&&!(e.colonNotation&&h==="m"))){if(d??(d=String(c)),e.colonNotation){const p=d.includes(".")?d.split(".")[0].length:d.length,m=i.length>0?2:1;d="0".repeat(Math.max(0,m-p))+d}else d+=e.verbose?" "+E7(f,c):h;i.push(d)}},l=_7(n),u=BigInt(l.days);if(e.hideYearAndDays?o(BigInt(u)*24n+BigInt(l.hours),"hour","h"):(e.hideYear?o(u,"day","d"):(o(u/365n,"year","y"),o(u%365n,"day","d")),o(Number(l.hours),"hour","h")),o(Number(l.minutes),"minute","m"),!e.hideSeconds)if(e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&n<1e3&&!e.subSecondsAsDecimals){const c=Number(l.seconds),f=Number(l.milliseconds),h=Number(l.microseconds),d=Number(l.nanoseconds);if(o(c,"second","s"),e.formatSubMilliseconds)o(f,"millisecond","ms"),o(h,"microsecond","s"),o(d,"nanosecond","ns");else{const p=f+h/1e3+d/1e6,m=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,g=p>=1?Math.round(p):Math.ceil(p),b=m?p.toFixed(m):g;o(Number.parseFloat(b),"millisecond","ms",b)}}else{const c=(t?Number(n%T7):n)/1e3%60,f=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,h=s(c,f),d=e.keepDecimalsOnWholeSeconds?h:h.replace(/\.0+$/,"");o(Number.parseFloat(d),"second","s",d)}if(i.length===0)return r+"0"+(e.verbose?" milliseconds":"ms");const a=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(i=i.slice(0,Math.max(e.unitCount,1))),r+i.join(a)}const P7={class:"flex w-full items-center justify-between gap-1"},R7={class:"flex items-center space-x-2"},I7={class:"text-xs"},M7={"data-testid":"response-status-duration"},B7={"data-testid":"response-status-size"},$7={key:0,class:"flex items-center"},N7=["title"],L7={key:0},j7=V({__name:"ResponseStatus",props:{class:{},asChild:{type:Boolean},as:{}},setup(n){const e=n,t=ar(),r=La(),i=X(()=>t.pendingRequestData),s=X(()=>r.lastLog),o=X(()=>{var h;return(h=i.value)!=null&&h.isProcessing?Qe.PENDING:!s.value||!s.value.response?Qe.EMPTY:s.value.response.status??Qe.EMPTY}),l=X(()=>{var h,d,p;return D7((h=i.value)!=null&&h.wasExecuted?((p=(d=s.value)==null?void 0:d.response)==null?void 0:p.sizeInBytes)??0:0,{space:!1})}),u=X(()=>{var h,d;return F7(((h=i.value)==null?void 0:h.durationInMs)??((d=s.value)==null?void 0:d.durationInMs)??0,{verbose:!1,secondsDecimalDigits:2,keepDecimalsOnWholeSeconds:!0})}),a=X(()=>{var p;if(((p=s.value)==null?void 0:p.response)===void 0)return"";const h=new Date(s.value.response.timestamp*1e3);return tD(h).value}),c=X(()=>{var d;return((d=s.value)==null?void 0:d.response)===void 0?"":new Date(s.value.response.timestamp*1e3).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),f=()=>{t.cancelCurrentRequest()};return(h,d)=>{var p,m,g,b,y;return S(),W("div",{class:Fe(v(De)("h-toolbar relative flex items-center justify-between p-2",e.class))},[N("div",P7,[N("div",R7,[_(m7,{status:o.value,response:(p=i.value)!=null&&p.isProcessing||(m=s.value)==null?void 0:m.response},null,8,["status","response"]),d[1]||(d[1]=N("div",{class:"w-8 border-b border-zinc-200"},null,-1)),N("span",I7,[N("span",M7,de(u.value),1),(g=i.value)!=null&&g.isProcessing?Ie("",!0):(S(),W(Le,{key:0},[d[0]||(d[0]=N("span",{class:"text-color-muted mx-1 text-xs"},"/",-1)),N("span",B7,de(l.value),1)],64))])]),(b=i.value)!=null&&b.isProcessing?Ie("",!0):(S(),W("div",$7,[N("small",{class:"text-subtle text-xs",title:c.value},de(a.value),9,N7)]))]),(y=i.value)!=null&&y.isProcessing?(S(),W("div",L7,[_(v(Gt),{variant:"outline",size:"xs",onClick:f},{default:E(()=>[_(v(pA)),d[2]||(d[2]=Z(" Cancel ",-1))]),_:1})])):Ie("",!0)],2)}}}),q7=V({__name:"ResponseViewerEmptyState",setup(n){return(e,t)=>(S(),j(Cw,null,{default:E(()=>[t[0]||(t[0]=N("h2",{class:"text-lg font-medium"},"You didn't perform any requests yet",-1)),t[1]||(t[1]=N("p",{class:"mb-2 text-sm"}," Make request and the result will appear here. Make sure to check the Wiki in case of doubts. ",-1)),_(_w)]),_:1}))}}),V7={class:"via-background relative max-h-full flex-1 overflow-hidden bg-gradient-to-br from-red-50 from-10% p-4 dark:from-red-900/15"},z7={class:"relative z-10 flex max-h-full flex-col p-2"},U7={class:"text-lg font-medium text-red-500"},H7={class:"text-sm"},W7={key:0},G7={key:1},K7={key:0,class:"bg-background mt-2 ml-0.5 overflow-scroll rounded-sm p-2 text-sm shadow-[0_0_0_5px_rgba(0,0,0,0.2)]"},J7=V({__name:"ResponseViewerErrorState",props:{error:{}},setup(n){const e=n,t=X({get:()=>e.error.body,set:()=>{}});return(r,i)=>(S(),W("div",V7,[N("div",z7,[N("div",null,[_(v(uo),{variant:"outline",class:"p-0 px-1 text-xs"},{default:E(()=>[...i[1]||(i[1]=[Z(" Internal Error ",-1)])]),_:1}),N("h2",U7,de(e.error.message),1)]),N("p",H7,[i[2]||(i[2]=Z(" It wasn't possible to relay the request via the internal proxy. ",-1)),e.error.message?(S(),W("span",W7," The below information might help, otherwise, check the console for more details. ")):(S(),W("span",G7,"Check the console for more details."))]),e.error.body?(S(),W("div",K7,[_(Cc,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=s=>t.value=s),language:"json",readonly:!0},null,8,["modelValue"])])):Ie("",!0)]),_(M1)]))}}),Y7=V({__name:"ResponseBody",props:{content:{}},setup(n){return(e,t)=>(S(),j(Cc,{language:"json",readonly:!0,placeholder:n.content===""?"Empty":"Response JSON Payload","model-value":n.content,disabled:n.content===""},null,8,["placeholder","model-value","disabled"]))}}),Q7={class:"relative w-full overflow-auto"},X7=V({__name:"AppTable",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("div",Q7,[N("table",{class:Fe(v(De)("w-full caption-bottom text-sm",e.class))},[ie(t.$slots,"default")],2)]))}}),Z7=V({__name:"AppTableBody",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("tbody",{class:Fe(v(De)("[&_tr:last-child]:border-0",e.class))},[ie(t.$slots,"default")],2))}}),$f=V({__name:"AppTableCell",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("td",{class:Fe(v(De)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-0.5",e.class))},[ie(t.$slots,"default")],2))}}),eN=V({__name:"AppTableRow",props:{class:{}},setup(n){const e=n;return(t,r)=>(S(),W("tr",{class:Fe(v(De)("border-b transition-colors hover:bg-zinc-100/50 data-[state=selected]:bg-zinc-100 dark:hover:bg-zinc-800/50 dark:data-[state=selected]:bg-zinc-800",e.class))},[ie(t.$slots,"default")],2))}}),tN=V({__name:"KeyValueDisplayListItem",props:{item:{}},setup(n){const e=n,{copy:t,copied:r}=fs(),i=()=>{t(String(e.item.value))};return(s,o)=>(S(),j(v(eN),{class:"flex-wrap border-0"},{default:E(()=>[_(v($f),{class:"pl-panel w-1/4 border-b-1 border-b-transparent align-top font-medium"},{default:E(()=>[Z(de(n.item.key),1)]),_:1}),_(v($f),{class:"border-b-1 border-gray-100 align-top break-words dark:border-gray-700"},{default:E(()=>[ie(s.$slots,"value",{item:e.item},()=>[Z(de(n.item.value),1)])]),_:3}),_(v($f),{class:"px-panel w-10 border-b-1 border-gray-100 align-top dark:border-gray-700"},{default:E(()=>[_(Go,{"on-click":i,copied:v(r)},null,8,["copied"])]),_:1})]),_:3}))}}),kw=V({__name:"KeyValueDisplayList",props:{items:{}},setup(n){return(e,t)=>(S(),j(v(X7),{class:"table-fixed text-xs"},{default:E(()=>[_(v(Z7),{class:"max-w-full"},{default:E(()=>[(S(!0),W(Le,null,sn(n.items,(r,i)=>(S(),j(tN,{key:i,item:r},{value:E(({item:s})=>[ie(e.$slots,"value",{item:s})]),_:3},8,["item"]))),128))]),_:3})]),_:3}))}}),nN={class:"flex translate-x-2 items-center space-x-2"},rN={class:"px-panel flex-start flex w-10 items-center"},iN={class:"min-h-0 flex-1 overflow-y-auto"},sN={key:0,class:"mb-1 flex items-center gap-1 text-green-500"},oN=V({__name:"ResponseCookies",props:{cookies:{}},setup(n){const e=n,t=ce(!1),r=X(()=>e.cookies.map(u=>{const a=u.value.decrypted!==null,c=t.value?u.value.decrypted??u.value.raw:u.value.raw;return{key:u.key,value:c,isDecryptable:a}})),{copy:i,copied:s}=fs(),o=()=>{const u=r.value.reduce((a,c)=>`${a}${c.key}: ${c.value}
`,"");i(u)},l=X(()=>{var u;return((u=e.cookies)==null?void 0:u.length)??!1});return(u,a)=>(S(),W(Le,null,[_(ds,{class:"border-b"},{toolbox:E(()=>[N("div",nN,[_(xw,{disabled:!l.value,onClick:a[0]||(a[0]=()=>t.value=!t.value)},{default:E(()=>[t.value?(S(),W(Le,{key:0},[_(v(fA),{class:"size-5"}),a[1]||(a[1]=Z(" Encrypt ",-1))],64)):(S(),W(Le,{key:1},[_(v(Jp),{class:"size-5"}),a[2]||(a[2]=Z(" Decrypt ",-1))],64))]),_:1},8,["disabled"]),N("div",rN,[_(Go,{disabled:!l.value,"on-click":o,copied:v(s)},null,8,["disabled","copied"])])])]),default:E(()=>[Z(" Cookies ("+de(r.value.length)+") ",1)]),_:1}),N("div",iN,[(S(),j(nD(kw),{items:r.value},{value:E(({item:c})=>[N("span",null,[c.isDecryptable?Ie("",!0):(S(),W("small",sN,[_(v(Jp),{size:10}),a[3]||(a[3]=Z(" Non-Encrypted Value ",-1))])),Z(" "+de(c.value),1)])]),_:1},8,["items"]))])],64))}}),lN={class:"px-panel flex-start flex w-10 translate-x-2 items-center"},uN={class:"min-h-0 flex-1 overflow-y-auto"},aN=V({__name:"ResponseHeaders",props:{headers:{}},setup(n){const e=n,{copy:t,copied:r}=fs(),i=X(()=>e.headers.map(o=>({key:o.key,value:o.value??""}))),s=()=>{const o=e.headers.reduce((l,u)=>`${l}${u.key}: ${u.value??""}
`,"");t(o)};return(o,l)=>(S(),W(Le,null,[_(ds,{class:"border-b"},{toolbox:E(()=>[N("div",lN,[_(Go,{"on-click":s,copied:v(r)},null,8,["copied"])])]),default:E(()=>[Z(" Headers ("+de(n.headers.length)+") ",1)]),_:1}),N("div",uN,[_(kw,{items:i.value},null,8,["items"])])],64))}}),cN={class:"relative min-h-0 flex-1"},fN={key:0,class:"bg-background absolute top-0 left-0 z-10 h-full w-full animate-pulse opacity-75"},hN={class:"bg-subtle-background border-b"},dN=V({__name:"ResponseViewerResponse",setup(n){const e=La(),t=ar(),r=X(()=>e.lastLog),i=X(()=>t.pendingRequestData);return(s,o)=>{var l;return S(),W("div",cN,[(l=i.value)!=null&&l.isProcessing?(S(),W("div",fN)):Ie("",!0),_(v(ub),{"default-value":"response",class:"mt-0 flex h-full flex-col overflow-auto"},{default:E(()=>[N("div",hN,[_(v(ab),{class:"h-toolbar px-panel rounded-none"},{default:E(()=>[_(v(Yr),{value:"response",label:"Response"}),_(v(Yr),{value:"response-headers",label:"Headers"}),_(v(Yr),{value:"response-cookies",label:"Cookies"})]),_:1})]),_(v(Jr),{value:"response",class:"mt-0 min-h-0 flex-1 overflow-hidden"},{default:E(()=>{var u,a;return[_(Y7,{class:"min-h-0 overflow-auto",content:((a=(u=r.value)==null?void 0:u.response)==null?void 0:a.body)??""},null,8,["content"])]}),_:1}),_(v(Jr),{value:"response-headers",class:"mt-0 flex min-h-0 flex-1 flex-col overflow-hidden"},{default:E(()=>{var u,a;return[_(aN,{headers:((a=(u=r.value)==null?void 0:u.response)==null?void 0:a.headers)??[]},null,8,["headers"])]}),_:1}),_(v(Jr),{value:"response-cookies",class:"mt-0 flex min-h-0 flex-1 flex-col overflow-hidden"},{default:E(()=>{var u,a;return[_(oN,{cookies:((a=(u=r.value)==null?void 0:u.response)==null?void 0:a.cookies)??[]},null,8,["cookies"])]}),_:1})]),_:1})])}}}),pN=V({__name:"ResponseViewer",props:{class:{},asChild:{type:Boolean},as:{}},setup(n){const e=n,t=La(),r=X(()=>t.lastLog);return(i,s)=>(S(),W("div",{class:Fe(v(De)("bg-background flex h-full flex-col",e.class))},[_(j7,{class:"border-b"}),r.value?r.value.error?(S(),j(J7,{key:1,"data-testid":"response-error",error:r.value.error},null,8,["error"])):(S(),j(dN,{key:2,"data-testid":"response-content"})):(S(),j(q7,{key:0,"data-testid":"response-empty"}))],2))}}),mN={class:"relative z-10 border-b bg-gradient-to-r from-red-50/10 to-transparent dark:from-red-950/30"},gN={class:"flex gap-3"},bN={class:"flex items-center bg-red-50 px-6 py-3 dark:bg-red-950"},yN={class:"p-3"},xN={class:"text-md leading-tight font-semibold"},vN=V({__name:"ErrorCardHeader",props:{message:{}},setup(n){const e=n;return(t,r)=>(S(),W("div",mN,[N("div",gN,[N("div",bN,[_(v(nb),{class:"size-6 text-red-600 dark:text-white"})]),N("div",yN,[N("h2",xN,de(e.message),1),r[0]||(r[0]=N("p",{class:"text-subtle-foreground text-sm"},"Route extraction failed",-1))])])]))}}),kN={class:"space-y-2 rounded-lg border p-4"},wN={key:0,class:"flex items-center gap-2"},DN={class:"bg-subtle-background rounded border px-2 py-1 text-sm"},AN={key:1,class:"flex items-center gap-2"},CN={class:"flex gap-1"},_N={key:2,class:"flex items-center gap-2"},SN={class:"bg-subtle-background rounded border px-2 py-1 text-sm"},EN={key:3,class:"flex items-center gap-2"},ON={class:"bg-subtle-background rounded border px-2 py-1 text-sm"},TN=V({__name:"RouteInformationSection",props:{routeContext:{}},setup(n){return(e,t)=>(S(),W("div",null,[t[4]||(t[4]=N("h3",{class:"mb-2 font-semibold"},"Route Information",-1)),N("div",kN,[n.routeContext.uri?(S(),W("div",wN,[t[0]||(t[0]=N("span",{class:"text-subtle-foreground w-20 text-sm font-medium"},"URI:",-1)),N("code",DN,de(n.routeContext.uri),1)])):Ie("",!0),n.routeContext.methods?(S(),W("div",AN,[t[1]||(t[1]=N("span",{class:"text-subtle-foreground w-20 text-sm font-medium"}," Methods: ",-1)),N("div",CN,[(S(!0),W(Le,null,sn(n.routeContext.methods,r=>(S(),j(B1,{key:r,method:r},null,8,["method"]))),128))])])):Ie("",!0),n.routeContext.controllerClass?(S(),W("div",_N,[t[2]||(t[2]=N("span",{class:"w-20 text-sm font-medium text-gray-600 dark:text-gray-400"}," Controller: ",-1)),N("code",SN,de(n.routeContext.controllerClass),1)])):Ie("",!0),n.routeContext.controllerMethod?(S(),W("div",EN,[t[3]||(t[3]=N("span",{class:"w-20 text-sm font-medium text-gray-600 dark:text-gray-400"}," Method: ",-1)),N("code",ON,de(n.routeContext.controllerMethod),1)])):Ie("",!0)])]))}}),FN={class:"bg-subtle-background rounded-lg border p-2"},PN={class:"flex items-start gap-3"},RN={class:"flex-1"},IN=["innerHTML"],MN=V({__name:"SuggestedSolutionCallout",props:{solution:{}},setup(n){return(e,t)=>(S(),W("div",FN,[N("div",PN,[_(v(uA),{class:"mt-1 size-5 flex-shrink-0"}),N("div",RN,[t[0]||(t[0]=N("h3",{class:"mb-1 font-semibold"},"Suggested Solution",-1)),N("p",{class:"text-sm",innerHTML:n.solution},null,8,IN)])])]))}}),BN={class:"mb-2 font-semibold text-gray-900 dark:text-gray-100"},$N={class:"rounded-lg bg-red-50 p-4 dark:bg-red-950/30"},NN={class:"font-mono text-sm text-red-800 dark:text-red-200"},LN={key:0,class:"mt-2 text-sm wrap-break-word text-red-600 dark:text-red-400"},jN={key:0,class:"mt-2"},qN=["innerHTML"],VN=V({__name:"TechnicalDetailsSection",props:{previousError:{}},setup(n){const e=n,{copy:t,copied:r}=fs(),i=()=>{let s=e.previousError.message;e.previousError.file&&(s+=`
${e.previousError.file}::${e.previousError.line}`),e.previousError.trace&&(s+=`
${e.previousError.trace}`),t(String(s))};return(s,o)=>(S(),W("div",null,[N("h3",BN,[o[0]||(o[0]=Z(" Technical Details ",-1)),_(Go,{"on-click":i,copied:v(r)},null,8,["copied"])]),N("div",$N,[N("p",NN,de(n.previousError.message),1),n.previousError.file?(S(),W("div",LN,[N("p",null,de(n.previousError.file)+":"+de(n.previousError.line),1),n.previousError.trace?(S(),W("div",jN,[o[1]||(o[1]=Z(" Trace: ",-1)),o[2]||(o[2]=N("br",null,null,-1)),N("span",{class:"text-subtle-foreground block",innerHTML:n.previousError.trace},null,8,qN)])):Ie("",!0)])):Ie("",!0)])]))}}),zN={class:"relative h-full max-h-full w-full bg-gradient-to-br from-red-50/30 to-transparent p-4 dark:from-red-950/10"},UN={class:"relative z-10 flex h-full w-full justify-center overflow-auto py-2"},HN={class:"flex h-full flex-col space-y-4"},WN={class:"space-y-2"},GN={class:"relative flex flex-1 flex-col overflow-hidden rounded-xl border-1 bg-white/10 break-words backdrop-blur-md dark:bg-gray-950/10"},KN={class:"relative z-10 flex flex-1 flex-col space-y-4 overflow-auto p-4"},JN={class:"flex gap-4 px-4 py-2"},YN=V({__name:"RouteExtractorExceptionRenderer",props:{error:{}},setup(n){const e=n,t=ce(!1),r=()=>{window.location.reload()},i=()=>{if(t.value||!e.error.ignoreData)return;t.value=!0;const s=new URL(window.location.href);s.searchParams.set("ignore",e.error.ignoreData),window.location.href=s.toString()};return(s,o)=>(S(),W("div",zN,[N("div",UN,[N("div",HN,[N("div",WN,[_(v(uo),{variant:"outline",class:"p-0 px-1 text-xs"},{default:E(()=>[...o[0]||(o[0]=[Z(" Internal Error ",-1)])]),_:1}),o[1]||(o[1]=N("h1",{class:"text-xl font-medium text-red-500 dark:text-rose-600"}," An error occurred while processing your application routes ",-1))]),n.error.suggestedSolution?(S(),j(MN,{key:0,solution:n.error.suggestedSolution},null,8,["solution"])):Ie("",!0),N("div",GN,[_(vN,{message:n.error.exception.message},null,8,["message"]),N("div",KN,[_(TN,{"route-context":n.error.routeContext},null,8,["route-context"]),n.error.exception.previous?(S(),j(VN,{key:0,class:"flex-1","previous-error":n.error.exception.previous},null,8,["previous-error"])):Ie("",!0)]),N("div",JN,[_(v(Gt),{variant:"outline",disabled:t.value,onClick:r},{default:E(()=>[_(v(dA)),o[2]||(o[2]=Z(" Retry ",-1))]),_:1},8,["disabled"]),_(v(Gt),{variant:"default",disabled:t.value,onClick:i},{default:E(()=>[t.value?(S(),j(v(aA),{key:0,class:"animate-spin"})):(S(),j(v(mA),{key:1})),Z(" "+de(t.value?"Ignoring...":"Ignore this Endpoint"),1)]),_:1},8,["disabled"])])])])]),_(M1)]))}}),QN={},XN={class:"text-foreground flex-1 text-xl font-medium"};function ZN(n,e){return S(),W("div",XN,"Nimbus")}const eL=I1(QN,[["render",ZN]]),tL={__name:"RouteExplorerHeader",setup(n){return(e,t)=>(S(),j(v(rD),{class:"h-toolbar flex flex-row items-center justify-between border-b"},{default:E(()=>[_(eL)]),_:1}))}},nL=V({__name:"RouteExplorerVersionSelector",props:Br({versions:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=Un(n,"modelValue");return(t,r)=>(S(),j(v(zo),{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value=i),class:"flex items-center text-sm"},{default:E(()=>[_(v(Uo),{class:"h-sub-toolbar w-full rounded-none border-0 border-b shadow-none focus:ring-0 focus-visible:outline-none"},{default:E(()=>[_(v(Ho),{placeholder:"Select API Version"})]),_:1}),_(v(Wo),null,{default:E(()=>[(S(!0),W(Le,null,sn(n.versions,i=>(S(),j(v(Sr),{key:i,value:i},{default:E(()=>[Z(de(i),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]))}}),rL={class:"whitespace-nowrap"},iL={key:0},sL={key:1},oL={class:"text-zinc-400"},lL=V({__name:"RoutesListItem",props:{route:{},resource:{},isActive:{type:Boolean,default:!1},onClick:{type:Function,default:()=>{}}},emits:["click"],setup(n,{emit:e}){const t=n,r=e,i=()=>{t.onClick&&t.onClick(),r("click")},s=X(()=>{const o=t.route.shortEndpoint.replace(`${t.resource}`,"").split("/");return o.length>1&&o[0]===""&&o.shift(),o.map(l=>l.startsWith("{")?{value:`/${l}`,isRouteVariable:!0}:{value:`/${l}`,isRouteVariable:!1})});return(o,l)=>(S(),j(v(G1),{"is-active":n.isActive,class:"text-sm data-[active=true]:rounded-l-none",onClick:i},{default:E(()=>[_(B1,{method:n.route.method},null,8,["method"]),N("span",rL,[(S(!0),W(Le,null,sn(s.value,(u,a)=>(S(),W(Le,{key:a},[u.isRouteVariable?(S(),W("span",sL,[N("span",oL,de(u.value),1)])):(S(),W("span",iL,de(u.value),1))],64))),128))])]),_:1},8,["is-active"]))}}),uL=V({__name:"AppCollapsible",props:{defaultOpen:{type:Boolean},open:{type:Boolean},disabled:{type:Boolean},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(n,{emit:e}){const i=md(n,e);return(s,o)=>(S(),j(v(yD),dd(pd(v(i))),{default:E(({open:l})=>[ie(s.$slots,"default",{open:l})]),_:3},16))}}),aL=V({__name:"AppCollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const e=n;return(t,r)=>(S(),j(v(vD),Lt(e,{class:"data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden transition-all"}),{default:E(()=>[ie(t.$slots,"default")]),_:3},16))}}),cL=V({__name:"AppCollapsibleTrigger",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n;return(t,r)=>(S(),j(v(wD),dd(pd(e)),{default:E(()=>[ie(t.$slots,"default")]),_:3},16))}}),fL={class:"max-w-[180px] truncate sm:max-w-[220px] md:max-w-[260px] lg:max-w-[300px]"},hL=V({__name:"RoutesResourceGroup",props:{resource:{type:String,required:!0}},setup(n){const e=n;return(t,r)=>(S(),j(v(iD),null,{default:E(()=>[_(v(uL),{class:"group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90"},{default:E(()=>[_(v(cL),{"as-child":""},{default:E(()=>[_(v(G1),null,{default:E(()=>[_(v(ZD),{class:"transition-transform"}),_(v(lA)),N("span",fL,de(e.resource),1)]),_:1})]),_:1}),_(v(aL),null,{default:E(()=>[_(v(zA),null,{default:E(()=>[ie(t.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3}))}}),dL={key:1,class:"px-2"},pL={key:2,class:"mb-2 px-2 text-xs"},mL=V({__name:"RoutesList",props:{routes:{},filteringEnabled:{type:Boolean}},setup(n){const e=ar(),t=(s,o)=>{if(!s||!o)return;const l=o.routes.filter(u=>u.endpoint===s.endpoint);e.initializeRequest(s,l)},r=X(()=>e.pendingRequestData),i=s=>!s||!r.value?!1:s.endpoint===r.value.endpoint&&s.method===r.value.method;return(s,o)=>n.routes&&n.routes.length?(S(!0),W(Le,{key:0},sn(n.routes,l=>(S(),j(hL,{key:l.resource,resource:l.resource},{default:E(()=>[(S(!0),W(Le,null,sn(l.routes,u=>(S(),j(lL,{key:u.endpoint+"-"+u.method,route:u,resource:l.resource,"on-click":()=>t(u,l),"is-active":i(u)},null,8,["route","resource","on-click","is-active"]))),128))]),_:2},1032,["resource"]))),128)):n.filteringEnabled?(S(),W("p",pL,"No routes matching your keywords.")):(S(),W("div",dL,[...o[0]||(o[0]=[N("p",{class:"mb-2 text-xs"}," No routes have been detected. Make sure to check the Wiki in case of doubts. ",-1)])]))}}),gL={key:1,class:"px-2"},bL=V({__name:"RouteExplorer",props:{routes:{}},setup(n){const e=n,t=ce(""),r=X(()=>Object.keys(e.routes||[])),i=X(()=>r.value[0]),s=X(()=>e.routes===null?[]:e.routes[i.value]??[]),o=X(()=>{if(e.routes===null)return[];if(!t.value.trim())return s.value;const u=t.value.toLowerCase();return s.value.map(a=>{const c=a.routes.filter(f=>f.endpoint.toLowerCase().includes(u));return c.length>0?{...a,routes:c}:null}).filter(a=>a!==null)||[]}),l=hs();return(u,a)=>(S(),j(v(aD),{collapsible:"none",class:"flex h-full max-h-screen w-full"},{default:E(()=>[_(tL),N("div",null,[_(v(qA),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=c=>t.value=c),placeholder:"Type to search...",disabled:s.value.length===0,class:"h-[calc(var(--toolbar-height)+1px)] w-full rounded-none border-0 border-b text-xs shadow-none focus:ring-0 focus-visible:ring-0"},null,8,["modelValue","disabled"]),v(l).isVersioned&&r.value.length?(S(),j(nL,{key:0,modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=c=>i.value=c),versions:r.value},null,8,["modelValue","versions"])):Ie("",!0)]),_(v(sD),null,{default:E(()=>[_(v(oD),{class:"p-0"},{default:E(()=>[_(v(XD),null,{default:E(()=>[...a[2]||(a[2]=[Z("Routes",-1)])]),_:1}),_(v(lD),null,{default:E(()=>[_(v(uD),null,{default:E(()=>[n.routes!==null?(S(),j(mL,{key:0,routes:o.value,"filtering-enabled":t.value.trim().length>0},null,8,["routes","filtering-enabled"])):(S(),W("div",gL,[...a[3]||(a[3]=[N("p",{class:"mb-2 text-xs"}," Routes extraction was Interrupted, check the error on the page. ",-1)])]))]),_:1})]),_:1})]),_:1})]),_:1}),_(v(UA))]),_:1}))}}),yL={class:"flex h-screen max-h-screen overflow-hidden"},IL=V({name:"MainPage",__name:"Main",setup(n){const e=Sw();gd(()=>{e.initializeRoutes()});const t=cD("panels-group"),{0:r,1:i}=Ew([600,960],t).thresholds;return(s,o)=>(S(),W("div",yL,[_(v(Gp),{ref:"panels-group","auto-save-id":"main-splitter-group",direction:v(r)},{default:E(()=>[_(v(Os),{"min-size":15,"default-size":20},{default:E(()=>[_(bL,{routes:v(e).routes},null,8,["routes"])]),_:1}),_(v(Wp)),v(e).hasExtractionError?(S(),j(v(Os),{key:1,"min-size":60,"default-size":85},{default:E(()=>[_(YN,{error:v(e).routeExtractorException},null,8,["error"])]),_:1})):(S(),j(v(Os),{key:0,"min-size":60,"default-size":80},{default:E(()=>[_(v(Gp),{"auto-save-id":"client-splitter-group",direction:v(i)},{default:E(()=>[_(v(Os),{"min-size":30,"default-size":50},{default:E(()=>[_(c7)]),_:1}),_(v(Wp)),_(v(Os),{"min-size":30,"default-size":50},{default:E(()=>[_(pN)]),_:1})]),_:1},8,["direction"])]),_:1}))]),_:1},8,["direction"])]))}});export{IL as default};
